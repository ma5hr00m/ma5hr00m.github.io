{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"themes\\cactus\\source\\images\\favicon-192x192.png","path":"images/favicon-192x192.png","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\images\\favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\images\\apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\images\\logo.png","path":"images/logo.png","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\images\\favicon.svg","path":"images/favicon.svg","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\js\\main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\js\\search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\css\\rtl.styl","path":"css/rtl.styl","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\css\\style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\clipboard\\clipboard.min.js","path":"lib/clipboard/clipboard.min.js","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\jquery\\jquery.min.js","path":"lib/jquery/jquery.min.js","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Bold.ttf","path":"lib/meslo-LG/MesloLGL-Bold.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGL-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Regular.ttf","path":"lib/meslo-LG/MesloLGL-Regular.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Bold.ttf","path":"lib/meslo-LG/MesloLGM-Bold.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Italic.ttf","path":"lib/meslo-LG/MesloLGL-Italic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGM-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Bold.ttf","path":"lib/meslo-LG/MesloLGS-Bold.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGS-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Regular.ttf","path":"lib/meslo-LG/MesloLGM-Regular.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Italic.ttf","path":"lib/meslo-LG/MesloLGS-Italic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Italic.ttf","path":"lib/meslo-LG/MesloLGM-Italic.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.eot","path":"lib/vazir-font/Vazir-Black.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Regular.ttf","path":"lib/meslo-LG/MesloLGS-Regular.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.woff","path":"lib/vazir-font/Vazir-Black.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.ttf","path":"lib/vazir-font/Vazir-Black.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.eot","path":"lib/vazir-font/Vazir-Bold.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.woff","path":"lib/vazir-font/Vazir-Bold.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.ttf","path":"lib/vazir-font/Vazir-Bold.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.woff2","path":"lib/vazir-font/Vazir-Bold.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.ttf","path":"lib/vazir-font/Vazir-Light.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.eot","path":"lib/vazir-font/Vazir-Light.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.woff","path":"lib/vazir-font/Vazir-Light.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.woff2","path":"lib/vazir-font/Vazir-Black.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.eot","path":"lib/vazir-font/Vazir-Medium.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.woff2","path":"lib/vazir-font/Vazir-Light.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.woff","path":"lib/vazir-font/Vazir-Medium.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.ttf","path":"lib/vazir-font/Vazir-Medium.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.eot","path":"lib/vazir-font/Vazir-Regular.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.woff2","path":"lib/vazir-font/Vazir-Medium.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.woff","path":"lib/vazir-font/Vazir-Regular.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.eot","path":"lib/vazir-font/Vazir-Thin.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.ttf","path":"lib/vazir-font/Vazir-Regular.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.woff2","path":"lib/vazir-font/Vazir-Regular.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.ttf","path":"lib/vazir-font/Vazir-Thin.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.eot","path":"lib/vazir-font/Vazir-Variable.eot","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.woff2","path":"lib/vazir-font/Vazir-Thin.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.woff","path":"lib/vazir-font/Vazir-Thin.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.ttf","path":"lib/vazir-font/Vazir-Variable.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\font-face.css","path":"lib/vazir-font/font-face.css","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.woff2","path":"lib/vazir-font/Vazir-Variable.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.woff","path":"lib/vazir-font/Vazir-Variable.woff","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\justified-gallery\\css\\justifiedGallery.min.css","path":"lib/justified-gallery/css/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\justified-gallery\\js\\jquery.justifiedGallery.min.js","path":"lib/justified-gallery/js/jquery.justifiedGallery.min.js","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-brands-400.ttf","path":"lib/font-awesome/webfonts/fa-brands-400.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\css\\all.min.css","path":"lib/font-awesome/css/all.min.css","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-regular-400.ttf","path":"lib/font-awesome/webfonts/fa-regular-400.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-v4compatibility.ttf","path":"lib/font-awesome/webfonts/fa-v4compatibility.ttf","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-v4compatibility.woff2","path":"lib/font-awesome/webfonts/fa-v4compatibility.woff2","modified":1,"renderable":1},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-solid-900.ttf","path":"lib/font-awesome/webfonts/fa-solid-900.ttf","modified":1,"renderable":1}],"Cache":[{"_id":"source\\_posts\\base_network.md","hash":"6e4f263d7747e64f3565a001b3038a0361f5f4fa","modified":1717937755188},{"_id":"source\\_posts\\browser_eventloop.md","hash":"6d4e6d75fabc992edd1df705a681368aa4c97f44","modified":1718089156497},{"_id":"source\\_posts\\async_await.md","hash":"c421220ff6a90a07de32f8e4939eab540997c176","modified":1718110909300},{"_id":"source\\_posts\\dnssec.md","hash":"9d8004f3c82ce57dca77350a94ee1cceabb80146","modified":1717937730968},{"_id":"source\\_posts\\frp_read.md","hash":"be34f399f42f7d48da73b567b6b5a2fd94e796ab","modified":1718475912754},{"_id":"source\\_posts\\docker-base.md","hash":"2336b42895594be7de6a69496e58ba7acc015a04","modified":1717937777808},{"_id":"source\\_posts\\hello_web.md","hash":"e83a3f89e4b83de2d5cea0f79a7843ac49016502","modified":1717937698204},{"_id":"source\\_posts\\glcm.md","hash":"84b3c4a59a7ead02813354e9084277398714d3fa","modified":1718555940281},{"_id":"source\\_posts\\how-js-run.md","hash":"2ec57c65aa78972110109f3db9fa7ccae621f79e","modified":1717937723359},{"_id":"source\\_posts\\how_does_clash_work.md","hash":"882422659577a5b5bb73cc6760b9fcc75b0474de","modified":1718386490868},{"_id":"source\\_posts\\html_relearn.md","hash":"325d832bb1e82798d61b9a77f7d5181a6fa0d23d","modified":1717937747483},{"_id":"source\\_posts\\how_java_run.md","hash":"09a7683a322c006f7e1bc334c7301663b37a00ee","modified":1717937765055},{"_id":"source\\_posts\\koa2-crud-example.md","hash":"aade51dc5a4c92c16b9fea9bfe7c53eeedf6c7c2","modified":1717937785626},{"_id":"source\\_posts\\js-prototype-chain.md","hash":"61d3dc3b0e8b58e24a4ecd92d2919eee5a547088","modified":1717937718848},{"_id":"source\\_posts\\js-obfuscation-deobfuscation.md","hash":"19d42f71d83323d8c38ee61fed0c632e1f086db8","modified":1717937721238},{"_id":"source\\_posts\\js-scope-and-hoisting.md","hash":"eea0f0fe27e84ce9b793832b7fc675ab46929c68","modified":1717937716794},{"_id":"source\\_posts\\nvm-node.md","hash":"40e6a2468fbc989a7a8cf10eabd5416274d540e9","modified":1717937771441},{"_id":"source\\_posts\\overview-of-nginx-process-model.md","hash":"14822baf2c86f546ddcd98e661121b4c3089e619","modified":1717937713557},{"_id":"source\\_posts\\promise.md","hash":"06b4a64e85b3510ddb6c8b7d9169ad7b8e1eadd4","modified":1718159838008},{"_id":"source\\_posts\\unocss-theme.md","hash":"6fbbeb44e70b69e4823ab65b1aaa7ad4d03035d1","modified":1717937800121},{"_id":"source\\_posts\\where_is_posts.md","hash":"34577754f0e88d5fa2a9d39b98cb09aa48f005f9","modified":1717941033990},{"_id":"source\\_posts\\web-usual-auth.md","hash":"cc5112778c0046d4ef69ab2225fc35b61c8d6657","modified":1717937760175},{"_id":"source\\_posts\\python_in_linux.md","hash":"d20271cba10fc6b70af2b13c8da38632ce0373fa","modified":1717937736568},{"_id":"source\\categories\\index.md","hash":"7824e279bbe3c3969e7a8a8bfde8972d320180db","modified":1717922330483},{"_id":"source\\about\\index.md","hash":"ff731b75aef5fb535f52febeb6abe630aef4ceda","modified":1717925022384},{"_id":"source\\friends\\index.md","hash":"b4da3f571a4f4c773e01fe8cec77b4d4fa803f3e","modified":1717935640278},{"_id":"source\\_posts\\linux_for_freshman.md","hash":"f9e6e637cc6f744b860c86b4aad388b991b3df1d","modified":1717937742717},{"_id":"themes\\cactus\\.gitignore","hash":"044711463cfff978c57dbe9612deeb221269890e","modified":1717915696938},{"_id":"themes\\cactus\\.jshintrc","hash":"d6ee46102ed2ff00acb555557f47241b701e99a4","modified":1717915696945},{"_id":"themes\\cactus\\_config.yml","hash":"bc7a429875f5855745de099d4d4853294707d9bc","modified":1717943422998},{"_id":"themes\\cactus\\.stylintrc","hash":"8bbbee5eae70fbe7dd53c9ce43d244b47d58385b","modified":1717915696947},{"_id":"themes\\cactus\\package.json","hash":"768e4f07b7bc6406d37b84878e1d34be668f5ea4","modified":1717915696994},{"_id":"themes\\cactus\\languages\\ar.yml","hash":"2f1258875dbffa89d192a1d6481c4bd3c337126b","modified":1717915696955},{"_id":"themes\\cactus\\languages\\ca.yml","hash":"6f9897fe8c7b7bf23be7fa58c530602217aea898","modified":1717915696955},{"_id":"themes\\cactus\\languages\\de.yml","hash":"0734bfc33861585a12327142bf52489c882ad34f","modified":1717915696955},{"_id":"themes\\cactus\\languages\\default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1717915696955},{"_id":"themes\\cactus\\languages\\en.yml","hash":"491c87ff300815df52220f6cead8e28edea129df","modified":1717915696955},{"_id":"themes\\cactus\\LICENSE","hash":"06806c75801c9ae870a1b47d588ef8e00d3c7c94","modified":1717915696947},{"_id":"themes\\cactus\\languages\\es.yml","hash":"56ddfd9081641c45272bdc2df750e41ab8b600bf","modified":1717915696955},{"_id":"themes\\cactus\\languages\\it.yml","hash":"501bfc9aed86964ee75354a805378740a02af799","modified":1717915696963},{"_id":"themes\\cactus\\languages\\fa.yml","hash":"05fb8dad765af2b9eec32582f5d277eb2735ffc3","modified":1717915696962},{"_id":"themes\\cactus\\languages\\kr.yml","hash":"ab5be04a1b4c4d87e164b1a045e220f855e85a38","modified":1717915696963},{"_id":"themes\\cactus\\languages\\fr.yml","hash":"4604fc8f94d98f6d53c80535fbae78814f88f32d","modified":1717915696963},{"_id":"themes\\cactus\\languages\\nl.yml","hash":"4c36921322e782775ccff9aec78d4261153cf5e5","modified":1717915696963},{"_id":"themes\\cactus\\languages\\ru.yml","hash":"47fb1672f36d5adadf2f6c3a5c4d1714f5bd563b","modified":1717915696963},{"_id":"themes\\cactus\\languages\\pl.yml","hash":"3677b782edd98986bb82568c6ff6c8b77140b75a","modified":1717915696963},{"_id":"themes\\cactus\\languages\\pt-br.yml","hash":"417d25e3dae260a2503ec6a8f1b590fa00534b14","modified":1717915696963},{"_id":"themes\\cactus\\languages\\vi.yml","hash":"1a1dfc60e952c3429c038f69a9e0ca2057784fca","modified":1717915696963},{"_id":"themes\\cactus\\languages\\ua.yml","hash":"983d0acd3ce19858ec14c641da135a562541c778","modified":1717915696963},{"_id":"themes\\cactus\\languages\\zh-TW.yml","hash":"fa5923f53f6174b044255e2d1655136168ff59c0","modified":1717915696963},{"_id":"themes\\cactus\\languages\\tr.yml","hash":"fcde93b8a92117706b019b51a95385c940e29190","modified":1717915696963},{"_id":"themes\\cactus\\layout\\index.ejs","hash":"6e3a63db6bc43f6e4091361c52df5bcfd5be3339","modified":1717915696994},{"_id":"themes\\cactus\\layout\\404.ejs","hash":"c04829c5ddc417d0b9a66cad55a838cc7eed997b","modified":1717915696963},{"_id":"themes\\cactus\\languages\\zh-CN.yml","hash":"4254824ede1d35398ffc1b0dfdb49bba557d7e4e","modified":1717920481449},{"_id":"themes\\cactus\\layout\\layout.ejs","hash":"c7b73f887d62fad9f14507504c4a2c036860e76c","modified":1717915696994},{"_id":"themes\\cactus\\layout\\archive.ejs","hash":"cda7b4d3f3615a9a591d7610f9e40b615ca68c73","modified":1717915696979},{"_id":"themes\\cactus\\layout\\post.ejs","hash":"9b8e937375f56053f497f437c06d527761b98d1c","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\meta.js","hash":"96b1a52af341adc741a5581ddc7335105abe780e","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\error_404.js","hash":"099d428e1b96b9c219a789da60b87703c509b2bb","modified":1717915696994},{"_id":"themes\\cactus\\layout\\page.ejs","hash":"1700d4f434170e1eeb0e2a9470fc3c0732b2ba7e","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\page_title.js","hash":"03b5c8b6215f0b305327e8d9b5d49add83b4b95f","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\thumbnail.js","hash":"3d841aa267026703a5cc29f4ffbb613f0a2bbd45","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\merge-configs.js","hash":"98b79403945fa7f8dc177e6da283681677d02567","modified":1717915696994},{"_id":"themes\\cactus\\scripts\\cdn.js","hash":"6037ad2ddbdc4d87195d91b3bd9f197c1b40467a","modified":1717915696994},{"_id":"themes\\cactus\\layout\\_partial\\header.ejs","hash":"3eae6c39852c3d7cba8978ad93a5570d20580924","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\footer.ejs","hash":"2336c1eb473fea860f4c3e309c50bc32544d0b4e","modified":1717915696963},{"_id":"themes\\cactus\\layout\\_partial\\search.ejs","hash":"12dba799ae5736dfbf1548e1923bbb7447de8a6d","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\google_analytics.ejs","hash":"82372a68455c05fa6a07c5ecb8defe11f769da7c","modified":1717915696963},{"_id":"themes\\cactus\\layout\\_partial\\scripts.ejs","hash":"46ad130a7a741ca44928116479c2004180979e40","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\head.ejs","hash":"cac3ef9de11b14825599efe69b0939f42d368e25","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\pagination.ejs","hash":"ea8692715a8ea49624638dbd7bfb911af58887ee","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\styles.ejs","hash":"42fd45758d8f8e814bfdd8b26eb676d87b8465b2","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\umami_analytics.ejs","hash":"5a39772aa121652f9d54619282fe880006b2a677","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\comments.ejs","hash":"162fb8592903605789f516be2cd9c678a1a2d207","modified":1717915696963},{"_id":"themes\\cactus\\source\\images\\favicon-192x192.png","hash":"96e6fcbbb13a5914a6131391e210eb7dfd13d692","modified":1717915697112},{"_id":"themes\\cactus\\source\\images\\apple-touch-icon.png","hash":"57e2def34682655f41a0be2d083f16765ba7858b","modified":1717915697106},{"_id":"themes\\cactus\\README.md","hash":"78c23f149de6869b91e4e1bb9067915f6520d6fc","modified":1717915696947},{"_id":"themes\\cactus\\source\\js\\main.js","hash":"adc9e8e86e82f6bce527d5674df0a9b298ac71a0","modified":1717915697112},{"_id":"themes\\cactus\\source\\css\\_extend.styl","hash":"1b9b2c69b894343068f3384000581a6092c4e868","modified":1717915697012},{"_id":"themes\\cactus\\source\\images\\favicon.svg","hash":"5270db43a400eebd286cbc8e72e7ec9b030c7f50","modified":1717935994550},{"_id":"themes\\cactus\\source\\css\\_mixins.styl","hash":"37093d2a554283ab652b59e5e0ff9b542edced0f","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_fonts.styl","hash":"5c1727836f5d6076a65cf91dbbeaba8d16b5132b","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_util.styl","hash":"1c7bed7376f04d7b77d817e132aee08cf65e6395","modified":1717915697106},{"_id":"themes\\cactus\\source\\css\\rtl.styl","hash":"105284f992de848968d818f6200d2ebbdd5342d0","modified":1717915697106},{"_id":"themes\\cactus\\source\\css\\_variables.styl","hash":"5dcbf89bd23d9dd3c45d07049a1448b0ae95426b","modified":1717915697106},{"_id":"themes\\cactus\\layout\\_partial\\post\\actions_desktop.ejs","hash":"53d0225501f4c33abda7059293f00aa22e3d4364","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\actions_mobile.ejs","hash":"2170a51e5b2637ef55651f29637cafcd111242b2","modified":1717915696979},{"_id":"themes\\cactus\\source\\css\\style.styl","hash":"210406274d091be115a6175929ba5671b8b8f946","modified":1717915697106},{"_id":"themes\\cactus\\layout\\_partial\\post\\date.ejs","hash":"b64d37f8a2cdb3990a5f4cd686b4fa3f2607b5bb","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\gallery.ejs","hash":"725ab823c2fb4a5e444eca3afa617d88f305ef71","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\category.ejs","hash":"62fd0bb73eef411ae0b2d6f529a273d54fd0d277","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\tag.ejs","hash":"424029d2d8e6c51c7370c5f8aabc21799418d3f1","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\share.ejs","hash":"6b037d536ef89c1e7b488f34c20fa977389ae744","modified":1717915696979},{"_id":"themes\\cactus\\layout\\_partial\\post\\title.ejs","hash":"524ad82e6d52b91d20cded8224efb76f2fdacf0b","modified":1717915696979},{"_id":"themes\\cactus\\gulpfile.js","hash":"23b5f0ea4c4d4319dfa8c3d3eaecb7bd70d90336","modified":1717915696953},{"_id":"themes\\cactus\\source\\js\\search.js","hash":"0d2933fa97c4036805011cc219fcc43ae578e230","modified":1717915697112},{"_id":"themes\\cactus\\source\\lib\\clipboard\\clipboard.min.js","hash":"d62dcb0905e038e69ff24ab9eef9e3306d45535e","modified":1717915697112},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.woff","hash":"f6fda2de0348b3e3b7de73267f9f8e97a62f8353","modified":1717915697358},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.woff","hash":"56e632c9196fac364c66f812a3b4635dd999ad1c","modified":1717915697371},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.woff2","hash":"6e40d0c7669c1adbcbf034bdc459f7bed4d6676d","modified":1717915697371},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.woff","hash":"1c3dbf17411b1f6a6b22c2b76e9d8511586643d0","modified":1717915697388},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.woff2","hash":"7ea4fd7dd4cd4f480af78a0e2c5849eb921b1aeb","modified":1717915697358},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.woff","hash":"43a8aaa3fca8721dd32a5d20f7a98dfbc87c97fd","modified":1717915697405},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.woff2","hash":"50b654d916204c30987d1987abd890ef92085ae3","modified":1717915697388},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.woff2","hash":"14b3e257c51a6a11d23b2a078017ff340c9777e4","modified":1717915697405},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.woff","hash":"235889d59ddad2b1f3243ccaab7733bd713a2a21","modified":1717915697413},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.woff2","hash":"a9714ffb842afc74836e64de04b52d8c37c87c8a","modified":1717915697418},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.woff","hash":"c0e784de2eb5261cca244928f8a81fd893c3fe16","modified":1717915697430},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\font-face.css","hash":"a3dca7ea2f1fedafc2dfb687884d8ac792d15947","modified":1717915697446},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.woff","hash":"2e8e6d38d361def5f48baac366f04e3db3ed4828","modified":1717915697438},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.woff2","hash":"9b03b1a9071709f5b7dbca13412ecef6cb7a2a67","modified":1717915697430},{"_id":"themes\\cactus\\source\\css\\_colors\\dark.styl","hash":"d2978cb0035ba1da0a58db2ed947a72b0bd41042","modified":1717915697010},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.woff2","hash":"e213bb26bc7f10e1df3fe2d03d3ecaecd6e6d371","modified":1717915697446},{"_id":"themes\\cactus\\source\\css\\_colors\\white.styl","hash":"a20de63c1cd7ccf25b8313e2d211866a20e86fbe","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_colors\\classic.styl","hash":"3d6c91b03ade77daf1ceb11c5dad48b0e35ac353","modified":1717915696994},{"_id":"themes\\cactus\\source\\css\\_highlight\\androidstudio.styl","hash":"4d67bdab6cc9c614486ca42f98199a04d053e7f0","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_colors\\light.styl","hash":"9b156c15c855677a50c4a27de17a8cb377b69802","modified":1717915697010},{"_id":"themes\\cactus\\source\\css\\_highlight\\arta.styl","hash":"262167aaebcf28de7f85af7ac77a76fa1fa284f7","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\agate.styl","hash":"fc289ba8f47ead6331ec3a51533cfa93251c5634","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\ascetic.styl","hash":"ca087a3c70998c7ac6b0b42d5cf7a653b8707591","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\arduino-light.styl","hash":"591962bfc758a521b4cb907750c19a1a2423b4d5","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-cave-dark.styl","hash":"7e83c7f2acaaaa98864660afe2794745c36c8e51","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-estuary-dark.styl","hash":"1cecd13e0d6b24042ff86372f0596c1441bb834a","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-cave-light.styl","hash":"f47de0b9d66617728f68096ed48371dd6bb9e67a","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-dune-light.styl","hash":"657fe215931fd06e21b56374df699a94890f7ab4","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-dune-dark.styl","hash":"68584ed0e99c7d0e49ef8a2e67cd4dcdad359de4","modified":1717915697012},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-forest-dark.styl","hash":"a741eba35cdfe2cfd67dfbf109655f253d6b4795","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-estuary-light.styl","hash":"2b416a0567a53aa0fa8898b196ddd44315c1a5f3","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-heath-dark.styl","hash":"f186b357dcebded89b7bcc77389b2cff76533d72","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-lakeside-dark.styl","hash":"802979cea895a0a384645cb30a43de9572cb0e3f","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-forest-light.styl","hash":"8d7c7242974aa2454fa792c5d7a47c5f9632355a","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-heath-light.styl","hash":"c1db353e8613607580d40b12ddc162d029560576","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-plateau-dark.styl","hash":"0d51ddc580ccb0a291271fa9632bc91dab632df6","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-lakeside-light.styl","hash":"8659eaae6a0c2e00b4b9199803e50adf4ff0128d","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-seaside-dark.styl","hash":"2f008271299042f2443bca98c9bcadbc8c45e837","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-plateau-light.styl","hash":"96181544eeadc5b0749229f11607e7c01f81e078","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-savanna-dark.styl","hash":"bbad7a9512b4873294e73ce806e36e43973e6ed8","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-savanna-light.styl","hash":"8a5207a0c30262a0bf5e1a41411a306f7a89a7e7","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-sulphurpool-dark.styl","hash":"18dcb00ab9c62eb810d492047214331c51bb654f","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\brown-paper.styl","hash":"d14846542a26b75fd26df5b5df6c5493733f73f6","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-seaside-light.styl","hash":"08e2df313c272d5c70c93e713639663c168180d0","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\codepen-embed.styl","hash":"1de45e603e2c71c7f6b0c1372a3ba00b1bc153a8","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\dark.styl","hash":"98d7884806838a0b46132d759d60ac27c0c4bd9c","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\atelier-sulphurpool-light.styl","hash":"add3d88c9d12567dcfae7a8e49984d119fc72227","modified":1717915697028},{"_id":"themes\\cactus\\source\\css\\_highlight\\color-brewer.styl","hash":"9c4905eab730d0b389e6972e907057577f7e25f1","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\darkula.styl","hash":"8965ad6920601c275ca97e617beff5536925a266","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\docco.styl","hash":"7bd3389ce16d20488ab336d557056cc703c921c7","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\far.styl","hash":"8da83d66724f2ce508a40f21b4f6dc0d704be562","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\foundation.styl","hash":"28c59a31467c33bd51cbf3b6085782c2a724ff6c","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\github.styl","hash":"a84eb710b302006120c3e7f8ca18f9e6fbc231c3","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\googlecode.styl","hash":"7f5082ae008925a23eb713f160773fe647eb3ff7","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\gruvbox-dark.styl","hash":"f66403ce77dcb16b1f98a5061b72f7581630d69f","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\hopscotch.styl","hash":"dd3c78c42d4a865f11623235e5e5f6829d789706","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\github-gist.styl","hash":"71f4b0fca91a587e6eba15a5306dca963bb8f441","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\highlightjs.styl","hash":"fd796a58c5d4590cda67c998187933788d45f30a","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\ir-black.styl","hash":"aa31b30069ebee39e2c3ebb75e2c96ba8678eb14","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\hybrid.styl","hash":"4906456025787de04b48a87c42bb704c5ff67065","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\idea.styl","hash":"e284c1760e8da0848f56cd5601d867ceeb0192d7","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\kimbie.dark.styl","hash":"3b998c640eeb2c6192fee24bc78b4137de475dd7","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\kimbie.light.styl","hash":"e901738455ec9a1bddde7b62bbd8595de6033e1e","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\index.styl","hash":"36c44375229613a5bb9ee84a8e90214978070439","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\magula.styl","hash":"ab179306c12a1cf2949482beaca328e379ef034a","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\monokai-sublime.styl","hash":"84a27bd29d939105d65f4164c219d6cc2e09ae60","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\mono-blue.styl","hash":"14fb8678739b77f35771b6d63101ddbf1e7a9fbc","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\kimbie.styl","hash":"13113af220dfed09cb49d85102babb352c3eff97","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\obsidian.styl","hash":"efba069860181d2b709e1548dd16cf102ca267fa","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\monokai.styl","hash":"c3a3bfae1eb864505fbc8748db734600057af1af","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\grayscale.styl","hash":"c83804abe39faebd80f8f4ff64fbd7137674cb1c","modified":1717915697043},{"_id":"themes\\cactus\\source\\css\\_highlight\\paraiso-dark.styl","hash":"50f1cee8a5b3b165b4184ead0a99dc564b62ef4f","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\paraiso.styl","hash":"846a06a57fa0b3db7f83ec7ac2bf34911f32cf66","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\rainbow.styl","hash":"95246afef181bd96f9adb1a2e84fb3ef302d4598","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\railscasts.styl","hash":"5dc9ce33cecee87fe9ca8f2ed9342602194484ec","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\paraiso-light.styl","hash":"e428e8202b01e83b0f018a96058d806e7f4c76bf","modified":1717915697059},{"_id":"themes\\cactus\\source\\css\\_highlight\\solarized-dark.styl","hash":"9fc9400d3a8cae97eb5761c284140acb0f847538","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\sunburst.styl","hash":"e6e4c009b10b9805f0c593446bf013edec47d146","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\pojoaque.styl","hash":"4d4a9360c35f3c5a0c5b9b49a1f2284e7e21317b","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\school-book.styl","hash":"186c37e9c39e65aa291cce3317e35904693598d1","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\tomorrow-night-bright.styl","hash":"e6b025b247e4027fb3c1b7833588f5a5b04a549c","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\solarized-light.styl","hash":"bb04944fc06c12ecd7b56ad933dbedde60c2259a","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\tomorrow-night.styl","hash":"eb8441364bb1664ecebde77b965dc36c91133aa0","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\tomorrow-night-eighties.styl","hash":"8b16876cf205111d5d5454100de712bc3ea8f477","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\vs.styl","hash":"14fbb0c43af440a290280b26968c8a5c0786b27f","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\tomorrow-night-blue.styl","hash":"92f4423d4964fcfe34ff7ca6cb21012b5738c697","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_partial\\categories.styl","hash":"92fffe2baacb9d19021b3d120d2038417ca466df","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\footer.styl","hash":"5bc59fd8cadd7cff06d989c9c7e8e4eb0d0872d8","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\comments.styl","hash":"6e839bae0ddc11447579c34541e79b50d3670bbd","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\archive.styl","hash":"301bf71b6878c965b3ea49dc19aba3f1c111cd3a","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\article.styl","hash":"abdbf82d71c7ec89c2f3ebaf8cc0606ab4ec1e03","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\index.styl","hash":"4a0da5d7052204b23d390a7f76cdc903b9eef52b","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\header.styl","hash":"f08c8bd685ddced854cdf2183684013c0644527c","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\pagination.styl","hash":"4ff9755163aae6039bb72eac8360bc1c50fa26b6","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\tags.styl","hash":"7a2f9051b21bce525ecb71799d37c4b65a4f9171","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\search.styl","hash":"680ea535e5a20c01a31bee4d3eb680b86267a281","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\tooltip.styl","hash":"6cb13a9f4a7c01aa7ab8f73739a7d385377c5465","modified":1717915697090},{"_id":"themes\\cactus\\source\\lib\\justified-gallery\\css\\justifiedGallery.min.css","hash":"4a8d364c99df8471c6a0c7192710631e605af635","modified":1717915697196},{"_id":"themes\\cactus\\source\\css\\_highlight\\zenburn.styl","hash":"f63534764dd6598e81177d64714a184f98153b11","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_highlight\\tomorrow.styl","hash":"502335f0fac07ed74ca78207bcf3ef8dd2252cf6","modified":1717915697075},{"_id":"themes\\cactus\\source\\css\\_highlight\\xcode.styl","hash":"5fa8999c7f807c1aae29c7a1cdf681678576fb69","modified":1717915697075},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-v4compatibility.ttf","hash":"a9d072aca9e0fadc2a7167671ce3d6b18d9cd2cc","modified":1717915697178},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-regular-400.woff2","hash":"fb363d27cfdfe71a243fa2ac3dab2815232b9b7e","modified":1717915697154},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-regular-400.ttf","hash":"67afa6237670ab99125056f2899129f22912dcf3","modified":1717915697150},{"_id":"themes\\cactus\\source\\lib\\justified-gallery\\js\\jquery.justifiedGallery.min.js","hash":"8d7e041394387fd523991bf827d417ade2747e35","modified":1717915697196},{"_id":"themes\\cactus\\source\\css\\_partial\\post\\actions_desktop.styl","hash":"c25ccdd505ca1b7c74a7fb2365ad2c262f8025ba","modified":1717915697090},{"_id":"themes\\cactus\\source\\css\\_partial\\post\\actions_mobile.styl","hash":"b06410ed34b5ecbcac11357aa359149e1f827aa6","modified":1717915697090},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-v4compatibility.woff2","hash":"8f80d0bbe995f7fe92320fdaec10cd5ccd710a51","modified":1717915697180},{"_id":"themes\\cactus\\source\\lib\\jquery\\jquery.min.js","hash":"edf8a6a066f201b1ffad32c585bd79c9982d4433","modified":1717915697188},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.eot","hash":"91152bd73e7ff8d943e3bde3ddb0fa0a018e1c21","modified":1717915697346},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.eot","hash":"5c1c680fade45393e4a5bb4548a092cd5ea6811e","modified":1717915697363},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Black.ttf","hash":"b65915e3fa57b5c19995d15dc2341d115c1971b9","modified":1717915697355},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Bold.ttf","hash":"122bb778b17a152c426a825ee981610a4bd59bf3","modified":1717915697371},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.ttf","hash":"df82b80c4d3b11e70dcd269fc62ac97cbfa0414d","modified":1717915697386},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.eot","hash":"d9ec1f9f3fefd57e446cbe86dc297f1ff269b6de","modified":1717915697396},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Medium.ttf","hash":"948a091f0fdb8c7ae17d5ef8e51bd8830d65dd9a","modified":1717915697396},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.eot","hash":"521c01f0eb79a48025e972ecbe21b0d7fb15437b","modified":1717915697405},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.eot","hash":"a0ea0bdaef00b35544f9a21d25d35db9a79f7189","modified":1717915697422},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.eot","hash":"af46f7f4e10a1440a4c97b350622d279143e6798","modified":1717915697436},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Regular.ttf","hash":"643c28c8f8a2bce1a0d62525aa045cd9883773cd","modified":1717915697413},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Light.eot","hash":"a059359e9bea17dc2ff2ede955a05bf0dc4d00d0","modified":1717915697380},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Thin.ttf","hash":"6aacb0eecb03c660570b6e159ba5ca97ca7461cf","modified":1717915697422},{"_id":"themes\\cactus\\source\\lib\\vazir-font\\Vazir-Variable.ttf","hash":"1e08b6373c2e086f24776df9b11e4be6bbcc8a4a","modified":1717915697438},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\css\\all.min.css","hash":"2bf056f1697bf3afdf49e56573d63b114374661e","modified":1717915697128},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-brands-400.woff2","hash":"4350f9ba93384634faf35f41c503c99c767f1069","modified":1717915697142},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-brands-400.ttf","hash":"f0982a77285d53653845b0a78170b4688db972f1","modified":1717915697137},{"_id":"themes\\cactus\\source\\images\\logo.png","hash":"0e3029251dfda26adee2761f71377297e8c26871","modified":1717915697112},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-solid-900.woff2","hash":"6b99aa650bd12a36caa14e0127435d8f4cd3ba73","modified":1717915697172},{"_id":"themes\\cactus\\source\\images\\favicon.ico","hash":"a4679b6756a93f156687d7ed20952021fb1c9824","modified":1717936166784},{"_id":"themes\\cactus\\source\\lib\\font-awesome\\webfonts\\fa-solid-900.ttf","hash":"20bd663830188cbadd2264e1daf9497c3ffc3621","modified":1717915697172},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1717915697246},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1717915697296},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1717915697330},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1717915697229},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1717915697263},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1717915697220},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1717915697271},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1717915697313},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1717915697286},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1717915697324},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1717915697338},{"_id":"themes\\cactus\\source\\lib\\meslo-LG\\MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1717915697305},{"_id":"public/about/index.html","hash":"cdb3ab1da5d6e292884629d222cf067d4345c302","modified":1718555950798},{"_id":"public/2024/06/15/frp_read/index.html","hash":"65970033a68fb447dec6f9b195ef60aa616d9fd2","modified":1718555950798},{"_id":"public/friends/index.html","hash":"0b1f281aac620f0484281a936b78a6ecce98591d","modified":1718555950798},{"_id":"public/categories/index.html","hash":"79b2b488011c9bb48a9df724c3709827700bd7b5","modified":1718555950798},{"_id":"public/2024/06/16/glcm/index.html","hash":"27cbe7904f9909da34a748f61cef5ac685968c65","modified":1718555950798},{"_id":"public/2024/06/12/how_does_clash_work/index.html","hash":"a36eff18d1fd5efc6824bb822391704dbdcbac7c","modified":1718555950798},{"_id":"public/2024/06/11/async_await/index.html","hash":"dbf94a6e01eea1038573e8a263d88f2e3b7607f6","modified":1718555950798},{"_id":"public/2024/06/10/browser_eventloop/index.html","hash":"9404914a97ed1cd730cb5f6638b69b0b18b52e6b","modified":1718555950798},{"_id":"public/2024/05/20/hello_web/index.html","hash":"847d5c2efb1db1973bbba36a5aa78fb7fb50b5db","modified":1718555950798},{"_id":"public/2024/02/20/overview-of-nginx-process-model/index.html","hash":"971203ac2e196b90396ec27fd68b2a554db82095","modified":1718555950798},{"_id":"public/2024/06/09/promise/index.html","hash":"6e694f36dece12c055ba56b7606b44cc479e1868","modified":1718555950798},{"_id":"public/2024/02/14/js-prototype-chain/index.html","hash":"87245bbb75f2ca6e16d521b534fe4d5be2bde859","modified":1718555950798},{"_id":"public/2024/02/16/js-scope-and-hoisting/index.html","hash":"78689ab9cc57e54998ae60dd78105e532b43dfe1","modified":1718555950798},{"_id":"public/2024/02/10/how-js-run/index.html","hash":"33617b884e4f89d789a8d9b6dba90e7a2a72f558","modified":1718555950798},{"_id":"public/2024/02/12/js-obfuscation-deobfuscation/index.html","hash":"83a6584743d3f5ace762d3863e8f29e9c8bf3509","modified":1718555950798},{"_id":"public/2023/11/23/python_in_linux/index.html","hash":"7d9aa3bd8b85be091d7fe0458dbb26127f6110f3","modified":1718555950798},{"_id":"public/2023/12/11/dnssec/index.html","hash":"a18dfb0e327b883a3e36c10f1b8c244ae017ddd1","modified":1718555950798},{"_id":"public/2023/10/22/html_relearn/index.html","hash":"06d48c1b1bb1624a30f2634623a8144df2556c16","modified":1718555950798},{"_id":"public/2023/10/14/linux_for_freshman/index.html","hash":"bd5ec959ec6e8d59bfe5dd85f9e1d37283ede8b0","modified":1718555950798},{"_id":"public/2023/10/02/base_network/index.html","hash":"23c2cfbe2a18093b0eddf1de3704b267239717b9","modified":1718555950798},{"_id":"public/2023/09/14/web-usual-auth/index.html","hash":"103213125ab0151cdac9bbf728e5f09b19daa2cd","modified":1718555950798},{"_id":"public/2023/09/01/how_java_run/index.html","hash":"14d17a813ada1bb920802e6c4e4618b6985bf253","modified":1718555950798},{"_id":"public/2023/06/12/nvm-node/index.html","hash":"74edef10c68925ffc151de00b5fa646b5d8535a2","modified":1718555950798},{"_id":"public/2023/05/02/docker-base/index.html","hash":"4198c7bb10cddf8088acba7f09d1d579cd332b92","modified":1718555950798},{"_id":"public/2023/04/28/koa2-crud-example/index.html","hash":"d5e821c0d3d8ec69e31730a4297a786f3fa7dad7","modified":1718555950798},{"_id":"public/categories/JavaScript/index.html","hash":"7b6b26ef2ea1f84d3d32b331b33e3df64b359e1f","modified":1718555950798},{"_id":"public/2023/01/26/unocss-theme/index.html","hash":"abc6a2032b46b7e96adafee9a01fefcd11ebeebf","modified":1718555950798},{"_id":"public/categories/Network/index.html","hash":"485071c5a166ee3decbbe42302e12bc77354c203","modified":1718555950798},{"_id":"public/2022/01/01/where_is_posts/index.html","hash":"782cddd94bdcbe095a4c19bc966101cd099073cc","modified":1718555950798},{"_id":"public/categories/Docker/index.html","hash":"4db341d886a080c3af4df2af782f1bfce70296c4","modified":1718555950798},{"_id":"public/categories/Source-Code-Read/index.html","hash":"0b0e39bd86ad05ccf5d1451bccb05ece83cf9f40","modified":1718555950798},{"_id":"public/categories/Web/index.html","hash":"2ad023ba1c4b7c083a1d7ea2a6e808fb756d9879","modified":1718555950798},{"_id":"public/categories/Java/index.html","hash":"dabe9539a296ee416d8f1061848ce8ff9f3ea5e6","modified":1718555950798},{"_id":"public/categories/Digital-Image-Processing/index.html","hash":"efd4533d0dfa68a915f3ca5b7b8b082470ed51b2","modified":1718555950798},{"_id":"public/categories/Linux/index.html","hash":"b451cf0856442a4f6b6cd3245da53c1d5d4c7ea7","modified":1718555950798},{"_id":"public/categories/HTML/index.html","hash":"01045988715c858e61eaf5953cc78c170a150b8a","modified":1718555950798},{"_id":"public/categories/Node-js/index.html","hash":"d20132f7fbca102a2358b4e1d502d319eac53480","modified":1718555950798},{"_id":"public/categories/CSS/index.html","hash":"b3e49c69cd5804a391cacd90e8620f5286f4b3b2","modified":1718555950798},{"_id":"public/categories/Life/index.html","hash":"5e6268297f1f680d0b9c01ed892f2424304d3ca4","modified":1718555950798},{"_id":"public/categories/Nginx/index.html","hash":"63a48552c3582fc96d148e2c44895cc4be2e8105","modified":1718555950798},{"_id":"public/archives/index.html","hash":"eac15b9783d12bf0574e57f28d16801623b3776e","modified":1718555950798},{"_id":"public/categories/Python/index.html","hash":"c8b9eb64618f04eaa024dee7ce6a72b709183d99","modified":1718555950798},{"_id":"public/archives/page/2/index.html","hash":"d5943898f9ee102246680f420187f7c352daa706","modified":1718555950798},{"_id":"public/archives/page/3/index.html","hash":"972281be15f6c91e27f7a11e6f521fa9196e5631","modified":1718555950798},{"_id":"public/archives/2022/index.html","hash":"554cd3173c0b275e1b3eb728da8874964ff70da4","modified":1718555950798},{"_id":"public/archives/2022/01/index.html","hash":"0f54e8b80459f2550e2d8978f8eb52a6eebefdd2","modified":1718555950798},{"_id":"public/archives/2023/index.html","hash":"3e38e45bca71edc0ca25191afa35e3896bf7b404","modified":1718555950798},{"_id":"public/archives/2023/page/2/index.html","hash":"55cf4bb51a7e7f5db75e9a8ad95abf3c87efcd95","modified":1718555950798},{"_id":"public/archives/2023/01/index.html","hash":"f940be981fe0a4280ba4c6641c84b11197a897b7","modified":1718555950798},{"_id":"public/archives/2023/04/index.html","hash":"b21b7c10afa2aac7dd9007e914c808618e64db07","modified":1718555950798},{"_id":"public/archives/2023/05/index.html","hash":"ed5640c23559483b264613998fc37c7d5bc2f11b","modified":1718555950798},{"_id":"public/archives/2023/09/index.html","hash":"0886147b6f0e6bc02b6bbfbeec816d17e542c42c","modified":1718555950798},{"_id":"public/archives/2023/06/index.html","hash":"d33f3c0658f6aa4b77c102a78f39767147253971","modified":1718555950798},{"_id":"public/archives/2023/11/index.html","hash":"229d5b343559c738a1f84f4c994e47a5cbd5a81c","modified":1718555950798},{"_id":"public/archives/2023/12/index.html","hash":"7d5c98a1199bb7bf6ae332a2ca8da1322a09bdc1","modified":1718555950798},{"_id":"public/archives/2023/10/index.html","hash":"179c1a6440dc26e32b8fea338f930ccc7a759cde","modified":1718555950798},{"_id":"public/archives/2024/page/2/index.html","hash":"791f562654e4b221936aa2e240d0d2d1bed069fc","modified":1718555950798},{"_id":"public/archives/2024/02/index.html","hash":"6476ee88943c4da34b8ee815aae5ae9d3dbd2587","modified":1718555950798},{"_id":"public/archives/2024/index.html","hash":"89a901997e1a2ee4010214ae2a18d4af37b53ab0","modified":1718555950798},{"_id":"public/index.html","hash":"4af2a667995d2848a460d496774873ccc6618087","modified":1718555950798},{"_id":"public/archives/2024/05/index.html","hash":"6ae4fe4b5a80d001e3cd908ddd3fa0f1a4be21f5","modified":1718555950798},{"_id":"public/archives/2024/06/index.html","hash":"d5d9733d108b6a80d270561156208fe5d3ca4fe7","modified":1718555950798},{"_id":"public/404.html","hash":"e74bdc83b944053601d05d88964ceee95ce546a2","modified":1718555950798},{"_id":"public/page/2/index.html","hash":"a3d193cdf8d5cf42e20445bb2cc860ba82d70841","modified":1718555950798},{"_id":"public/page/3/index.html","hash":"bc0f678a2407dbcce4ce617174b9ddd06bb85df8","modified":1718555950798},{"_id":"public/images/apple-touch-icon.png","hash":"57e2def34682655f41a0be2d083f16765ba7858b","modified":1718555950798},{"_id":"public/images/favicon-192x192.png","hash":"96e6fcbbb13a5914a6131391e210eb7dfd13d692","modified":1718555950798},{"_id":"public/images/favicon.svg","hash":"5270db43a400eebd286cbc8e72e7ec9b030c7f50","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Black.woff","hash":"f6fda2de0348b3e3b7de73267f9f8e97a62f8353","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Bold.woff2","hash":"6e40d0c7669c1adbcbf034bdc459f7bed4d6676d","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Black.woff2","hash":"7ea4fd7dd4cd4f480af78a0e2c5849eb921b1aeb","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Bold.woff","hash":"56e632c9196fac364c66f812a3b4635dd999ad1c","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Light.woff2","hash":"50b654d916204c30987d1987abd890ef92085ae3","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Medium.woff","hash":"43a8aaa3fca8721dd32a5d20f7a98dfbc87c97fd","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Light.woff","hash":"1c3dbf17411b1f6a6b22c2b76e9d8511586643d0","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Regular.woff2","hash":"a9714ffb842afc74836e64de04b52d8c37c87c8a","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Thin.woff2","hash":"9b03b1a9071709f5b7dbca13412ecef6cb7a2a67","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Regular.woff","hash":"235889d59ddad2b1f3243ccaab7733bd713a2a21","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Thin.woff","hash":"c0e784de2eb5261cca244928f8a81fd893c3fe16","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Variable.woff2","hash":"e213bb26bc7f10e1df3fe2d03d3ecaecd6e6d371","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Variable.woff","hash":"2e8e6d38d361def5f48baac366f04e3db3ed4828","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"fb363d27cfdfe71a243fa2ac3dab2815232b9b7e","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.ttf","hash":"67afa6237670ab99125056f2899129f22912dcf3","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-v4compatibility.ttf","hash":"a9d072aca9e0fadc2a7167671ce3d6b18d9cd2cc","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-v4compatibility.woff2","hash":"8f80d0bbe995f7fe92320fdaec10cd5ccd710a51","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Medium.woff2","hash":"14b3e257c51a6a11d23b2a078017ff340c9777e4","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Black.eot","hash":"91152bd73e7ff8d943e3bde3ddb0fa0a018e1c21","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Black.ttf","hash":"b65915e3fa57b5c19995d15dc2341d115c1971b9","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Bold.eot","hash":"5c1c680fade45393e4a5bb4548a092cd5ea6811e","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Bold.ttf","hash":"122bb778b17a152c426a825ee981610a4bd59bf3","modified":1718555950798},{"_id":"public/css/style.css","hash":"775c8fa6860f020f1bd5ebdc2d8346998602138a","modified":1718555950798},{"_id":"public/js/main.js","hash":"619ac6529d140711e3b14f739a192bb31c4824ff","modified":1718555950798},{"_id":"public/js/search.js","hash":"914a2ce72fb325106c61600200be823b72bfb39f","modified":1718555950798},{"_id":"public/css/rtl.css","hash":"9589fac02a34fd9084f805f801889028756bbb65","modified":1718555950798},{"_id":"public/lib/clipboard/clipboard.min.js","hash":"9a7cb405f9beed005891587d41f76a0720893ffc","modified":1718555950798},{"_id":"public/lib/jquery/jquery.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1718555950798},{"_id":"public/lib/vazir-font/font-face.css","hash":"ba0030e1cd28a8caa7a5bb74b98da7c7bb185c90","modified":1718555950798},{"_id":"public/lib/justified-gallery/js/jquery.justifiedGallery.min.js","hash":"ad8f48b4022498078b089fcdd1e8b47faf496931","modified":1718555950798},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"8c06d82739d14b094ff6d9036021a252bd1d985d","modified":1718555950798},{"_id":"public/lib/justified-gallery/css/justifiedGallery.min.css","hash":"dd3052149d3054f35efb823c68dd78e78aad5875","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Light.eot","hash":"a059359e9bea17dc2ff2ede955a05bf0dc4d00d0","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Light.ttf","hash":"df82b80c4d3b11e70dcd269fc62ac97cbfa0414d","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Medium.eot","hash":"d9ec1f9f3fefd57e446cbe86dc297f1ff269b6de","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Thin.eot","hash":"a0ea0bdaef00b35544f9a21d25d35db9a79f7189","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Regular.eot","hash":"521c01f0eb79a48025e972ecbe21b0d7fb15437b","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Variable.eot","hash":"af46f7f4e10a1440a4c97b350622d279143e6798","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Thin.ttf","hash":"6aacb0eecb03c660570b6e159ba5ca97ca7461cf","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Variable.ttf","hash":"1e08b6373c2e086f24776df9b11e4be6bbcc8a4a","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Regular.ttf","hash":"643c28c8f8a2bce1a0d62525aa045cd9883773cd","modified":1718555950798},{"_id":"public/lib/vazir-font/Vazir-Medium.ttf","hash":"948a091f0fdb8c7ae17d5ef8e51bd8830d65dd9a","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"4350f9ba93384634faf35f41c503c99c767f1069","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"6b99aa650bd12a36caa14e0127435d8f4cd3ba73","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.ttf","hash":"f0982a77285d53653845b0a78170b4688db972f1","modified":1718555950798},{"_id":"public/images/favicon.ico","hash":"a4679b6756a93f156687d7ed20952021fb1c9824","modified":1718555950798},{"_id":"public/images/logo.png","hash":"0e3029251dfda26adee2761f71377297e8c26871","modified":1718555950798},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.ttf","hash":"20bd663830188cbadd2264e1daf9497c3ffc3621","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1718555950798},{"_id":"public/lib/meslo-LG/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1718555950798}],"Category":[{"name":"JavaScript","_id":"clxhruaow0004f4lyg9d916ih"},{"name":"Network","_id":"clxhruap1000cf4ly95u6988i"},{"name":"Docker","_id":"clxhruap4000lf4ly26uo4b7o"},{"name":"Source Code Read","_id":"clxhruap7000rf4ly7fdm5j1s"},{"name":"Web","_id":"clxhruap8000vf4ly6lgd9gzo"},{"name":"Digital Image Processing","_id":"clxhruap90011f4lybxhfbb24"},{"name":"Java","_id":"clxhruapa0016f4ly8hiqgmrc"},{"name":"HTML","_id":"clxhruapb001bf4lyabed68vn"},{"name":"Linux","_id":"clxhruapc001ef4ly4cpc3bxd"},{"name":"Node.js","_id":"clxhruapc001if4ly93qg323r"},{"name":"Nginx","_id":"clxhruapc001lf4lybnfucwza"},{"name":"CSS","_id":"clxhruapd001of4ly97vldi1z"},{"name":"Life","_id":"clxhruapd001qf4lyer9k8056"},{"name":"Python","_id":"clxhruapg001uf4lyggmwgfyc"}],"Data":[],"Page":[{"title":"about","date":"2024-06-09T06:48:32.000Z","_content":"\n# Hello Ma5hr00m\n\nVidar-Team 22  Web HDUHelper \n\n\n\n\n\n## \n\n- Linux Majaro/Fedora | \n- JavaScript/TypeScript  | \n- Sass/SCSS/Less  | \n- Golang  | \n- Node.js  | \n- Python  | \n- PHP  | \n\n## \n\n- Dell g15 5520 \n- Xiaomi12 pro \n- OnePlus Ace 2V \n- NanoPi R2S \n- Tencent Linux 2C2G \n- ~~Huawei Wach 2 ~~ \n- Xiaomi Watch 8 \n- Gaomon 1060Pro \n\n## \n\n- Coding\n- Pixel Art [-> toPixiv](https://www.pixiv.net/users/86286425)\n- \n- /","source":"about/index.md","raw":"---\ntitle: about\ndate: 2024-06-09 14:48:32\n---\n\n# Hello Ma5hr00m\n\nVidar-Team 22  Web HDUHelper \n\n\n\n\n\n## \n\n- Linux Majaro/Fedora | \n- JavaScript/TypeScript  | \n- Sass/SCSS/Less  | \n- Golang  | \n- Node.js  | \n- Python  | \n- PHP  | \n\n## \n\n- Dell g15 5520 \n- Xiaomi12 pro \n- OnePlus Ace 2V \n- NanoPi R2S \n- Tencent Linux 2C2G \n- ~~Huawei Wach 2 ~~ \n- Xiaomi Watch 8 \n- Gaomon 1060Pro \n\n## \n\n- Coding\n- Pixel Art [-> toPixiv](https://www.pixiv.net/users/86286425)\n- \n- /","updated":"2024-06-09T09:23:42.384Z","path":"about/index.html","comments":1,"layout":"page","_id":"clxhruaoq0000f4ly9cub8fuy","content":"<h1 id=\"Hello-Ma5hr00m\"><a href=\"#Hello-Ma5hr00m\" class=\"headerlink\" title=\"Hello Ma5hr00m\"></a>Hello Ma5hr00m</h1><p>Vidar-Team 22  Web HDUHelper </p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Linux Majaro&#x2F;Fedora | </li>\n<li>JavaScript&#x2F;TypeScript  | </li>\n<li>Sass&#x2F;SCSS&#x2F;Less  | </li>\n<li>Golang  | </li>\n<li>Node.js  | </li>\n<li>Python  | </li>\n<li>PHP  | </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Dell g15 5520 </li>\n<li>Xiaomi12 pro </li>\n<li>OnePlus Ace 2V </li>\n<li>NanoPi R2S </li>\n<li>Tencent Linux 2C2G </li>\n<li><del>Huawei Wach 2 </del> </li>\n<li>Xiaomi Watch 8 </li>\n<li>Gaomon 1060Pro </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Coding</li>\n<li>Pixel Art <a href=\"https://www.pixiv.net/users/86286425\">-&gt; toPixiv</a></li>\n<li></li>\n<li>&#x2F;</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"Hello-Ma5hr00m\"><a href=\"#Hello-Ma5hr00m\" class=\"headerlink\" title=\"Hello Ma5hr00m\"></a>Hello Ma5hr00m</h1><p>Vidar-Team 22  Web HDUHelper </p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Linux Majaro&#x2F;Fedora | </li>\n<li>JavaScript&#x2F;TypeScript  | </li>\n<li>Sass&#x2F;SCSS&#x2F;Less  | </li>\n<li>Golang  | </li>\n<li>Node.js  | </li>\n<li>Python  | </li>\n<li>PHP  | </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Dell g15 5520 </li>\n<li>Xiaomi12 pro </li>\n<li>OnePlus Ace 2V </li>\n<li>NanoPi R2S </li>\n<li>Tencent Linux 2C2G </li>\n<li><del>Huawei Wach 2 </del> </li>\n<li>Xiaomi Watch 8 </li>\n<li>Gaomon 1060Pro </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Coding</li>\n<li>Pixel Art <a href=\"https://www.pixiv.net/users/86286425\">-&gt; toPixiv</a></li>\n<li></li>\n<li>&#x2F;</li>\n</ul>\n"},{"title":"categories","date":"2024-06-09T08:34:08.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2024-06-09 16:34:08\ntype: categories\n---\n","updated":"2024-06-09T08:38:50.483Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clxhruaou0002f4ly4yd31ktn","content":"","excerpt":"","more":""},{"title":"friends","date":"2024-06-08T16:00:00.000Z","_content":"\n## \n\n- [ek1ng](https://ek1ng.com/)\n- [ripple](https://rippleqaq.top/)\n- [ch405](https://ch405.live/)\n- [zbwer](https://blog.zbwer.work/)\n- [ec3o](https://ec3o.fun/)\n\n issue \n\n## \n\n| KEY   | VALUE |\n| ----- | ------------------------------------------------ |\n|    | Ma5hr00m                                         |\n|    | https://img.ma5hr00m.top/blog/20240216014457.png |\n|    |                                   |\n|    |                                             |\n|    | https://ma5hr00m.top/                            |\n","source":"friends/index.md","raw":"---\ntitle: friends\ndate: 2024-06-09\n---\n\n## \n\n- [ek1ng](https://ek1ng.com/)\n- [ripple](https://rippleqaq.top/)\n- [ch405](https://ch405.live/)\n- [zbwer](https://blog.zbwer.work/)\n- [ec3o](https://ec3o.fun/)\n\n issue \n\n## \n\n| KEY   | VALUE |\n| ----- | ------------------------------------------------ |\n|    | Ma5hr00m                                         |\n|    | https://img.ma5hr00m.top/blog/20240216014457.png |\n|    |                                   |\n|    |                                             |\n|    | https://ma5hr00m.top/                            |\n","updated":"2024-06-09T12:20:40.278Z","path":"friends/index.html","comments":1,"layout":"page","_id":"clxhruaox0005f4lyddvua9m6","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://ek1ng.com/\">ek1ng</a></li>\n<li><a href=\"https://rippleqaq.top/\">ripple</a></li>\n<li><a href=\"https://ch405.live/\">ch405</a></li>\n<li><a href=\"https://blog.zbwer.work/\">zbwer</a></li>\n<li><a href=\"https://ec3o.fun/\">ec3o</a></li>\n</ul>\n<p> issue </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>KEY</th>\n<th>VALUE</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Ma5hr00m</td>\n</tr>\n<tr>\n<td></td>\n<td><a href=\"https://img.ma5hr00m.top/blog/20240216014457.png\">https://img.ma5hr00m.top/blog/20240216014457.png</a></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><a href=\"https://ma5hr00m.top/\">https://ma5hr00m.top/</a></td>\n</tr>\n</tbody></table>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://ek1ng.com/\">ek1ng</a></li>\n<li><a href=\"https://rippleqaq.top/\">ripple</a></li>\n<li><a href=\"https://ch405.live/\">ch405</a></li>\n<li><a href=\"https://blog.zbwer.work/\">zbwer</a></li>\n<li><a href=\"https://ec3o.fun/\">ec3o</a></li>\n</ul>\n<p> issue </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th>KEY</th>\n<th>VALUE</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>Ma5hr00m</td>\n</tr>\n<tr>\n<td></td>\n<td><a href=\"https://img.ma5hr00m.top/blog/20240216014457.png\">https://img.ma5hr00m.top/blog/20240216014457.png</a></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><a href=\"https://ma5hr00m.top/\">https://ma5hr00m.top/</a></td>\n</tr>\n</tbody></table>\n"}],"Post":[{"title":" async/await","date":"2024-06-10T16:00:00.000Z","author":"ma5hr00m","_content":"\n`async/await`  JavaScript  Promise  JavaScript \n\n## Generator\n\n`async`  `generator` \n\nJavaScript Generator ES6  Promise  Python JavaScript \n\n### \n\n`generator`  `Iterator` `next()``next()``yield``value``done``value``done`\n\n`yield`****`yield``next()`\n\n\n\n```jsx\nfunction* numberGen3erator() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nconst gen = numberGenerator(); // \nconsole.log(gen.next().value); // 1\nconsole.log(gen.next().value); // 2\nconsole.log(gen.next().value); // 3\n```\n\n\n\n### co\n\n `generator`  `async`  `co`\n\n`co` Node.js  JavaScript  TJ Holowaychuk  `generator` `co``yield``Promise``Promise`\n\n- **`co`****`Promise`**\n- **`yield`****`Promise`**Thunk \n- **`co`****`yield`** Thunk **`Promise`**\n\n```jsx\nconst co = require('co');\n\nco(function* () {\n  var result = yield Promise.resolve(true);\n  return result;\n}).then(function (value) {\n  console.log(value); // true\n});\n```\n\n`co` `generator` `Promise``yield``Promise``co`\n\n### \n\n\n\n```jsx\n// async/await\nasync function fetchData() {\n  const data = await fetch('some-url');\n  console.log(data);\n}\n\n// generator + co\nfunction fetchData() {\n  return co(function* () {\n    const data = yield fetch('some-url');\n    console.log(data);\n  });\n}\n```\n\n `co` `*`  `async``yield`  `await`  `async`  `generator` \n\n1.  `co`  `.next()`\n2.  \n3. `await` Promise  `yield` \n4.  Promise `.then` \n\n> `async`  Promise  `await`  `then` \n> \n\n## \n\n### async \n\n`async`async function`Promise``Promise.resolve()``Promise.reject()`\n\n```jsx\nasync function f() {\n  return \"Hello, World!\";\n}\n\nf().then(alert); // \"Hello, World!\"\n```\n\n### await \n\n`await``Promise`fulfilledrejected`await``Promise`\n\n```jsx\nasync function f3() {\n  let promise = new Promise((resolve, reject) => {\n    setTimeout(() => resolve(\"!\"), 1000)\n  });\n\n  let result = await promise; //  promise  (*)\n\n  alert(result); // \"!\"\n}\n```\n\n### \n\n`async`  `try...catch...` `await` \n\n `await`  `catch()` \n\n Golang **`Promise`****`try...catch...`**\n\n\n\n```jsx\n// 'to'  Promise\nfunction to(promise) {\n  return promise\n    .then(data => [null, data])\n    .catch(err => [err]);\n}\n\n//  'to'  'await'  fetch \nasync function fetchUrl(url) {\n  const [err, response] = await to(fetch(url));\n  if (err) {\n    console.error('Fetch error:', err);\n    return;\n  }\n  const [parseErr, data] = await to(response.json());\n  if (parseErr) {\n    console.error('JSON parsing error:', parseErr);\n    return;\n  }\n  console.log('Fetched data:', data);\n}\n```\n\n### \n\n\n\n```jsx\n// \nfunction getUser(username) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (username === 'Alice') {\n        resolve({ id: 1, username: 'Alice', verified: true });\n      } else {\n        reject(new Error(''));\n      }\n    }, 1000);\n  });\n}\n\n// \nfunction verifyUser(user) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (user.verified) {\n        resolve('');\n      } else {\n        reject(new Error(''));\n      }\n    }, 1000);\n  });\n}\n\n//  async/await  .then().catch() \nasync function loginUser(username) {\n  try {\n    //  await  getUser \n    const user = await getUser(username);\n    //  await  verifyUser \n    const verificationStatus = await verifyUser(user);\n    console.log(verificationStatus);\n  } catch (error) {\n    //  getUser  verifyUser \n    console.error(error.message);\n  }\n}\n\n//  loginUser  .then().catch() \nloginUser('Alice')\n  .then(() => {\n    console.log('');\n  })\n  .catch((error) => {\n    console.error(':', error.message);\n  })\n```\n\n combo\n\n1.  `await`  `Promise.all()` \n2. `async` \n\n\n\n```jsx\n// b()  a()  b() or c()  a()\nconst a = () => {\n  b().then(() => c());\n};\n\n// b()  a() b() or c()  a()\nconst a = async () => {\n  await b();\n  c();\n};\n```\n\n### \n\n`async`  `await` \n\n> 1\n> \n\n```jsx\nasync function logInOrder(urls) {\n  // URL\n  const textPromises = urls.map(async url => {\n    const response = await fetch(url);\n    return response.text();\n  });\n\n  // \n  for (const textPromise of textPromises) {\n    console.log(await textPromise);\n  }\n}\n```\n\n##  await\n\n `async` **`await`**\n\n**`await`**\n\n```jsx\n// config.js\nexport async function loadConfig() {\n  const response = await fetch('/config.json');\n  if (!response.ok) {\n    throw new Error('');\n  }\n  return response.json();\n}\n```\n\n```jsx\n// main.js\nimport { loadConfig } from './config.js';\n\nlet config;\n\ntry {\n\t//  await \n  config = await loadConfig();\n} catch (error) {\n  console.error(':', error);\n}\n\napplyConfig(config);\n```\n\n `async`**`await`**\n\nusage.js  output  `undefined`\n\n> 1\n> \n\n```jsx\n// awaiting.js\nlet output;\nasync function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n}\nmain();\nexport { output };\n```\n\n```jsx\n// usage.js\nimport { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() => console.log(outputPlusValue(100)), 1000);\n```\n\n awaiting.js  Promise  Promise \n\n> 1\n> \n\n```jsx\n// awaiting.js\nlet output;\nexport default (async function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n})();\nexport { output };\n```\n\n```jsx\n// usage.js\nimport promise, { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\npromise.then(() => {\n  console.log(outputPlusValue(100));\n  setTimeout(() => console.log(outputPlusValue(100)), 1000);\n});\n```\n\n Promise  Promise  await \n\n## \n\n###  `await`  `.then()`\n\n\n\n**`async`****`await`****`await`****`.then()`**\n\n```jsx\nasync function fetchData() {\n  const data = await fetch('some-api-url')\n    .then(response => response.json())\n    .catch(error => console.error('Error:', error));\n  return data;\n}\n\n```\n\n\n\n## \n\n1. https://es6.ruanyifeng.com/#docs/async\n2. https://www.cnblogs.com/porter/p/13343524.html","source":"_posts/async_await.md","raw":"---\ntitle:  async/await\ndate: 2024/6/11\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n`async/await`  JavaScript  Promise  JavaScript \n\n## Generator\n\n`async`  `generator` \n\nJavaScript Generator ES6  Promise  Python JavaScript \n\n### \n\n`generator`  `Iterator` `next()``next()``yield``value``done``value``done`\n\n`yield`****`yield``next()`\n\n\n\n```jsx\nfunction* numberGen3erator() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nconst gen = numberGenerator(); // \nconsole.log(gen.next().value); // 1\nconsole.log(gen.next().value); // 2\nconsole.log(gen.next().value); // 3\n```\n\n\n\n### co\n\n `generator`  `async`  `co`\n\n`co` Node.js  JavaScript  TJ Holowaychuk  `generator` `co``yield``Promise``Promise`\n\n- **`co`****`Promise`**\n- **`yield`****`Promise`**Thunk \n- **`co`****`yield`** Thunk **`Promise`**\n\n```jsx\nconst co = require('co');\n\nco(function* () {\n  var result = yield Promise.resolve(true);\n  return result;\n}).then(function (value) {\n  console.log(value); // true\n});\n```\n\n`co` `generator` `Promise``yield``Promise``co`\n\n### \n\n\n\n```jsx\n// async/await\nasync function fetchData() {\n  const data = await fetch('some-url');\n  console.log(data);\n}\n\n// generator + co\nfunction fetchData() {\n  return co(function* () {\n    const data = yield fetch('some-url');\n    console.log(data);\n  });\n}\n```\n\n `co` `*`  `async``yield`  `await`  `async`  `generator` \n\n1.  `co`  `.next()`\n2.  \n3. `await` Promise  `yield` \n4.  Promise `.then` \n\n> `async`  Promise  `await`  `then` \n> \n\n## \n\n### async \n\n`async`async function`Promise``Promise.resolve()``Promise.reject()`\n\n```jsx\nasync function f() {\n  return \"Hello, World!\";\n}\n\nf().then(alert); // \"Hello, World!\"\n```\n\n### await \n\n`await``Promise`fulfilledrejected`await``Promise`\n\n```jsx\nasync function f3() {\n  let promise = new Promise((resolve, reject) => {\n    setTimeout(() => resolve(\"!\"), 1000)\n  });\n\n  let result = await promise; //  promise  (*)\n\n  alert(result); // \"!\"\n}\n```\n\n### \n\n`async`  `try...catch...` `await` \n\n `await`  `catch()` \n\n Golang **`Promise`****`try...catch...`**\n\n\n\n```jsx\n// 'to'  Promise\nfunction to(promise) {\n  return promise\n    .then(data => [null, data])\n    .catch(err => [err]);\n}\n\n//  'to'  'await'  fetch \nasync function fetchUrl(url) {\n  const [err, response] = await to(fetch(url));\n  if (err) {\n    console.error('Fetch error:', err);\n    return;\n  }\n  const [parseErr, data] = await to(response.json());\n  if (parseErr) {\n    console.error('JSON parsing error:', parseErr);\n    return;\n  }\n  console.log('Fetched data:', data);\n}\n```\n\n### \n\n\n\n```jsx\n// \nfunction getUser(username) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (username === 'Alice') {\n        resolve({ id: 1, username: 'Alice', verified: true });\n      } else {\n        reject(new Error(''));\n      }\n    }, 1000);\n  });\n}\n\n// \nfunction verifyUser(user) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (user.verified) {\n        resolve('');\n      } else {\n        reject(new Error(''));\n      }\n    }, 1000);\n  });\n}\n\n//  async/await  .then().catch() \nasync function loginUser(username) {\n  try {\n    //  await  getUser \n    const user = await getUser(username);\n    //  await  verifyUser \n    const verificationStatus = await verifyUser(user);\n    console.log(verificationStatus);\n  } catch (error) {\n    //  getUser  verifyUser \n    console.error(error.message);\n  }\n}\n\n//  loginUser  .then().catch() \nloginUser('Alice')\n  .then(() => {\n    console.log('');\n  })\n  .catch((error) => {\n    console.error(':', error.message);\n  })\n```\n\n combo\n\n1.  `await`  `Promise.all()` \n2. `async` \n\n\n\n```jsx\n// b()  a()  b() or c()  a()\nconst a = () => {\n  b().then(() => c());\n};\n\n// b()  a() b() or c()  a()\nconst a = async () => {\n  await b();\n  c();\n};\n```\n\n### \n\n`async`  `await` \n\n> 1\n> \n\n```jsx\nasync function logInOrder(urls) {\n  // URL\n  const textPromises = urls.map(async url => {\n    const response = await fetch(url);\n    return response.text();\n  });\n\n  // \n  for (const textPromise of textPromises) {\n    console.log(await textPromise);\n  }\n}\n```\n\n##  await\n\n `async` **`await`**\n\n**`await`**\n\n```jsx\n// config.js\nexport async function loadConfig() {\n  const response = await fetch('/config.json');\n  if (!response.ok) {\n    throw new Error('');\n  }\n  return response.json();\n}\n```\n\n```jsx\n// main.js\nimport { loadConfig } from './config.js';\n\nlet config;\n\ntry {\n\t//  await \n  config = await loadConfig();\n} catch (error) {\n  console.error(':', error);\n}\n\napplyConfig(config);\n```\n\n `async`**`await`**\n\nusage.js  output  `undefined`\n\n> 1\n> \n\n```jsx\n// awaiting.js\nlet output;\nasync function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n}\nmain();\nexport { output };\n```\n\n```jsx\n// usage.js\nimport { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() => console.log(outputPlusValue(100)), 1000);\n```\n\n awaiting.js  Promise  Promise \n\n> 1\n> \n\n```jsx\n// awaiting.js\nlet output;\nexport default (async function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n})();\nexport { output };\n```\n\n```jsx\n// usage.js\nimport promise, { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\npromise.then(() => {\n  console.log(outputPlusValue(100));\n  setTimeout(() => console.log(outputPlusValue(100)), 1000);\n});\n```\n\n Promise  Promise  await \n\n## \n\n###  `await`  `.then()`\n\n\n\n**`async`****`await`****`await`****`.then()`**\n\n```jsx\nasync function fetchData() {\n  const data = await fetch('some-api-url')\n    .then(response => response.json())\n    .catch(error => console.error('Error:', error));\n  return data;\n}\n\n```\n\n\n\n## \n\n1. https://es6.ruanyifeng.com/#docs/async\n2. https://www.cnblogs.com/porter/p/13343524.html","slug":"async_await","published":1,"updated":"2024-06-11T13:01:49.300Z","comments":1,"layout":"post","photos":[],"_id":"clxhruaot0001f4ly6lskhpxg","content":"<p><code>async/await</code>  JavaScript  Promise  JavaScript </p>\n<h2 id=\"Generator\"><a href=\"#Generator\" class=\"headerlink\" title=\"Generator\"></a>Generator</h2><p><code>async</code>  <code>generator</code> </p>\n<p>JavaScript Generator ES6  Promise  Python JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>generator</code>  <code>Iterator</code> <code>next()</code><code>next()</code><code>yield</code><code>value</code><code>done</code><code>value</code><code>done</code></p>\n<p><code>yield</code>****<code>yield</code><code>next()</code></p>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">numberGen3erator</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = <span class=\"title function_\">numberGenerator</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"co\"><a href=\"#co\" class=\"headerlink\" title=\"co\"></a>co</h3><p> <code>generator</code>  <code>async</code>  <code>co</code></p>\n<p><code>co</code> Node.js  JavaScript  TJ Holowaychuk  <code>generator</code> <code>co</code><code>yield</code><code>Promise</code><code>Promise</code></p>\n<ul>\n<li><strong><code>co</code></strong><strong><code>Promise</code></strong></li>\n<li><strong><code>yield</code></strong><strong><code>Promise</code></strong>Thunk </li>\n<li><strong><code>co</code></strong><strong><code>yield</code></strong> Thunk <strong><code>Promise</code></strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;co&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">co</span>(<span class=\"keyword\">function</span>* () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"keyword\">yield</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value); <span class=\"comment\">// true</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>co</code> <code>generator</code> <code>Promise</code><code>yield</code><code>Promise</code><code>co</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// async/await</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-url&#x27;</span>);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// generator + co</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">co</span>(<span class=\"keyword\">function</span>* () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-url&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>co</code> <code>*</code>  <code>async</code><code>yield</code>  <code>await</code>  <code>async</code>  <code>generator</code> </p>\n<ol>\n<li> <code>co</code>  <code>.next()</code></li>\n<li></li>\n<li><code>await</code> Promise  <code>yield</code> </li>\n<li> Promise <code>.then</code> </li>\n</ol>\n<blockquote>\n<p><code>async</code>  Promise  <code>await</code>  <code>then</code> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"async-\"><a href=\"#async-\" class=\"headerlink\" title=\"async \"></a>async </h3><p><code>async</code>async function<code>Promise</code><code>Promise.resolve()</code><code>Promise.reject()</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">f</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, World!&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">f</span>().<span class=\"title function_\">then</span>(alert); <span class=\"comment\">// &quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"await-\"><a href=\"#await-\" class=\"headerlink\" title=\"await \"></a>await </h3><p><code>await</code><code>Promise</code>fulfilledrejected<code>await</code><code>Promise</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">f3</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;!&quot;</span>), <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> promise; <span class=\"comment\">//  promise  (*)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">alert</span>(result); <span class=\"comment\">// &quot;!&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>async</code>  <code>try...catch...</code> <code>await</code> </p>\n<p> <code>await</code>  <code>catch()</code> </p>\n<p> Golang <strong><code>Promise</code></strong><strong><code>try...catch...</code></strong></p>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// &#x27;to&#x27;  Promise</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">to</span>(<span class=\"params\">promise</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise</span><br><span class=\"line\">    .<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> [<span class=\"literal\">null</span>, data])</span><br><span class=\"line\">    .<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> [err]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  &#x27;to&#x27;  &#x27;await&#x27;  fetch </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchUrl</span>(<span class=\"params\">url</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [err, response] = <span class=\"keyword\">await</span> <span class=\"title function_\">to</span>(<span class=\"title function_\">fetch</span>(url));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;Fetch error:&#x27;</span>, err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [parseErr, data] = <span class=\"keyword\">await</span> <span class=\"title function_\">to</span>(response.<span class=\"title function_\">json</span>());</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parseErr) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;JSON parsing error:&#x27;</span>, parseErr);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Fetched data:&#x27;</span>, data);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (username === <span class=\"string\">&#x27;Alice&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(&#123; <span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">username</span>: <span class=\"string\">&#x27;Alice&#x27;</span>, <span class=\"attr\">verified</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">reject</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">verifyUser</span>(<span class=\"params\">user</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (user.<span class=\"property\">verified</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">reject</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  async/await  .then().catch() </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">loginUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  await  getUser </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> <span class=\"title function_\">getUser</span>(username);</span><br><span class=\"line\">    <span class=\"comment\">//  await  verifyUser </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> verificationStatus = <span class=\"keyword\">await</span> <span class=\"title function_\">verifyUser</span>(user);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(verificationStatus);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  getUser  verifyUser </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(error.<span class=\"property\">message</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  loginUser  .then().catch() </span></span><br><span class=\"line\"><span class=\"title function_\">loginUser</span>(<span class=\"string\">&#x27;Alice&#x27;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;:&#x27;</span>, error.<span class=\"property\">message</span>);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<p> combo</p>\n<ol>\n<li> <code>await</code>  <code>Promise.all()</code> </li>\n<li><code>async</code> </li>\n</ol>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// b()  a()  b() or c()  a()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">a</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">b</span>().<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">c</span>());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// b()  a() b() or c()  a()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">a</span> = <span class=\"keyword\">async</span> (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"title function_\">b</span>();</span><br><span class=\"line\">  <span class=\"title function_\">c</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>async</code>  <code>await</code> </p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">logInOrder</span>(<span class=\"params\">urls</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// URL</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> textPromises = urls.<span class=\"title function_\">map</span>(<span class=\"keyword\">async</span> url =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.<span class=\"title function_\">text</span>();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> textPromise <span class=\"keyword\">of</span> textPromises) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">await</span> textPromise);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-await\"><a href=\"#-await\" class=\"headerlink\" title=\" await\"></a> await</h2><p> <code>async</code> <strong><code>await</code></strong></p>\n<p><strong><code>await</code></strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">loadConfig</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;/config.json&#x27;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!response.<span class=\"property\">ok</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> response.<span class=\"title function_\">json</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; loadConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./config.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> config;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//  await </span></span><br><span class=\"line\">  config = <span class=\"keyword\">await</span> <span class=\"title function_\">loadConfig</span>();</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;:&#x27;</span>, error);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">applyConfig</span>(config);</span><br></pre></td></tr></table></figure>\n\n<p> <code>async</code><strong><code>await</code></strong></p>\n<p>usage.js  output  <code>undefined</code></p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// awaiting.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> output;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">main</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dynamic = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>(someMission);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">  output = <span class=\"title function_\">someProcess</span>(dynamic.<span class=\"property\">default</span>, data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">main</span>();</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// usage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; output &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./awaiting.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">outputPlusValue</span>(<span class=\"params\">value</span>) &#123; <span class=\"keyword\">return</span> output + value &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>));</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>)), <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n\n<p> awaiting.js  Promise  Promise </p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// awaiting.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> output;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (<span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">main</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dynamic = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>(someMission);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">  output = <span class=\"title function_\">someProcess</span>(dynamic.<span class=\"property\">default</span>, data);</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// usage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> promise, &#123; output &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./awaiting.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">outputPlusValue</span>(<span class=\"params\">value</span>) &#123; <span class=\"keyword\">return</span> output + value &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">promise.<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>));</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>)), <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> Promise  Promise  await </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-await--then\"><a href=\"#-await--then\" class=\"headerlink\" title=\" await  .then()\"></a> <code>await</code>  <code>.then()</code></h3><p></p>\n<p><strong><code>async</code></strong>**<code>await</code>**<strong><code>await</code></strong>**<code>.then()</code>**</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-api-url&#x27;</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.<span class=\"title function_\">json</span>())</span><br><span class=\"line\">    .<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;Error:&#x27;</span>, error));</span><br><span class=\"line\">  <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"https://es6.ruanyifeng.com/#docs/async\">https://es6.ruanyifeng.com/#docs/async</a></li>\n<li><a href=\"https://www.cnblogs.com/porter/p/13343524.html\">https://www.cnblogs.com/porter/p/13343524.html</a></li>\n</ol>\n","excerpt":"","more":"<p><code>async/await</code>  JavaScript  Promise  JavaScript </p>\n<h2 id=\"Generator\"><a href=\"#Generator\" class=\"headerlink\" title=\"Generator\"></a>Generator</h2><p><code>async</code>  <code>generator</code> </p>\n<p>JavaScript Generator ES6  Promise  Python JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>generator</code>  <code>Iterator</code> <code>next()</code><code>next()</code><code>yield</code><code>value</code><code>done</code><code>value</code><code>done</code></p>\n<p><code>yield</code>****<code>yield</code><code>next()</code></p>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span>* <span class=\"title function_\">numberGen3erator</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = <span class=\"title function_\">numberGenerator</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(gen.<span class=\"title function_\">next</span>().<span class=\"property\">value</span>); <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"co\"><a href=\"#co\" class=\"headerlink\" title=\"co\"></a>co</h3><p> <code>generator</code>  <code>async</code>  <code>co</code></p>\n<p><code>co</code> Node.js  JavaScript  TJ Holowaychuk  <code>generator</code> <code>co</code><code>yield</code><code>Promise</code><code>Promise</code></p>\n<ul>\n<li><strong><code>co</code></strong><strong><code>Promise</code></strong></li>\n<li><strong><code>yield</code></strong><strong><code>Promise</code></strong>Thunk </li>\n<li><strong><code>co</code></strong><strong><code>yield</code></strong> Thunk <strong><code>Promise</code></strong></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;co&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">co</span>(<span class=\"keyword\">function</span>* () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"keyword\">yield</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span> (<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value); <span class=\"comment\">// true</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>co</code> <code>generator</code> <code>Promise</code><code>yield</code><code>Promise</code><code>co</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// async/await</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-url&#x27;</span>);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// generator + co</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">co</span>(<span class=\"keyword\">function</span>* () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-url&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>co</code> <code>*</code>  <code>async</code><code>yield</code>  <code>await</code>  <code>async</code>  <code>generator</code> </p>\n<ol>\n<li> <code>co</code>  <code>.next()</code></li>\n<li></li>\n<li><code>await</code> Promise  <code>yield</code> </li>\n<li> Promise <code>.then</code> </li>\n</ol>\n<blockquote>\n<p><code>async</code>  Promise  <code>await</code>  <code>then</code> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"async-\"><a href=\"#async-\" class=\"headerlink\" title=\"async \"></a>async </h3><p><code>async</code>async function<code>Promise</code><code>Promise.resolve()</code><code>Promise.reject()</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">f</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, World!&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">f</span>().<span class=\"title function_\">then</span>(alert); <span class=\"comment\">// &quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"await-\"><a href=\"#await-\" class=\"headerlink\" title=\"await \"></a>await </h3><p><code>await</code><code>Promise</code>fulfilledrejected<code>await</code><code>Promise</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">f3</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;!&quot;</span>), <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> promise; <span class=\"comment\">//  promise  (*)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">alert</span>(result); <span class=\"comment\">// &quot;!&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>async</code>  <code>try...catch...</code> <code>await</code> </p>\n<p> <code>await</code>  <code>catch()</code> </p>\n<p> Golang <strong><code>Promise</code></strong><strong><code>try...catch...</code></strong></p>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// &#x27;to&#x27;  Promise</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">to</span>(<span class=\"params\">promise</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise</span><br><span class=\"line\">    .<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> [<span class=\"literal\">null</span>, data])</span><br><span class=\"line\">    .<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> [err]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  &#x27;to&#x27;  &#x27;await&#x27;  fetch </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchUrl</span>(<span class=\"params\">url</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [err, response] = <span class=\"keyword\">await</span> <span class=\"title function_\">to</span>(<span class=\"title function_\">fetch</span>(url));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;Fetch error:&#x27;</span>, err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [parseErr, data] = <span class=\"keyword\">await</span> <span class=\"title function_\">to</span>(response.<span class=\"title function_\">json</span>());</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parseErr) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;JSON parsing error:&#x27;</span>, parseErr);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Fetched data:&#x27;</span>, data);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (username === <span class=\"string\">&#x27;Alice&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(&#123; <span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">username</span>: <span class=\"string\">&#x27;Alice&#x27;</span>, <span class=\"attr\">verified</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">reject</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">verifyUser</span>(<span class=\"params\">user</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (user.<span class=\"property\">verified</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">reject</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  async/await  .then().catch() </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">loginUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  await  getUser </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> <span class=\"title function_\">getUser</span>(username);</span><br><span class=\"line\">    <span class=\"comment\">//  await  verifyUser </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> verificationStatus = <span class=\"keyword\">await</span> <span class=\"title function_\">verifyUser</span>(user);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(verificationStatus);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  getUser  verifyUser </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(error.<span class=\"property\">message</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  loginUser  .then().catch() </span></span><br><span class=\"line\"><span class=\"title function_\">loginUser</span>(<span class=\"string\">&#x27;Alice&#x27;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;:&#x27;</span>, error.<span class=\"property\">message</span>);</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<p> combo</p>\n<ol>\n<li> <code>await</code>  <code>Promise.all()</code> </li>\n<li><code>async</code> </li>\n</ol>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// b()  a()  b() or c()  a()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">a</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">b</span>().<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">c</span>());</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// b()  a() b() or c()  a()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">a</span> = <span class=\"keyword\">async</span> (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"title function_\">b</span>();</span><br><span class=\"line\">  <span class=\"title function_\">c</span>();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>async</code>  <code>await</code> </p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">logInOrder</span>(<span class=\"params\">urls</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// URL</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> textPromises = urls.<span class=\"title function_\">map</span>(<span class=\"keyword\">async</span> url =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.<span class=\"title function_\">text</span>();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> textPromise <span class=\"keyword\">of</span> textPromises) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">await</span> textPromise);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-await\"><a href=\"#-await\" class=\"headerlink\" title=\" await\"></a> await</h2><p> <code>async</code> <strong><code>await</code></strong></p>\n<p><strong><code>await</code></strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">loadConfig</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;/config.json&#x27;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!response.<span class=\"property\">ok</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> response.<span class=\"title function_\">json</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; loadConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./config.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> config;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//  await </span></span><br><span class=\"line\">  config = <span class=\"keyword\">await</span> <span class=\"title function_\">loadConfig</span>();</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;:&#x27;</span>, error);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">applyConfig</span>(config);</span><br></pre></td></tr></table></figure>\n\n<p> <code>async</code><strong><code>await</code></strong></p>\n<p>usage.js  output  <code>undefined</code></p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// awaiting.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> output;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">main</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dynamic = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>(someMission);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">  output = <span class=\"title function_\">someProcess</span>(dynamic.<span class=\"property\">default</span>, data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">main</span>();</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// usage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; output &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./awaiting.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">outputPlusValue</span>(<span class=\"params\">value</span>) &#123; <span class=\"keyword\">return</span> output + value &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>));</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>)), <span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n\n<p> awaiting.js  Promise  Promise </p>\n<blockquote>\n<p>1</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// awaiting.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> output;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (<span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">main</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dynamic = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>(someMission);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(url);</span><br><span class=\"line\">  output = <span class=\"title function_\">someProcess</span>(dynamic.<span class=\"property\">default</span>, data);</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// usage.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> promise, &#123; output &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./awaiting.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">outputPlusValue</span>(<span class=\"params\">value</span>) &#123; <span class=\"keyword\">return</span> output + value &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">promise.<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>));</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">outputPlusValue</span>(<span class=\"number\">100</span>)), <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> Promise  Promise  await </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-await--then\"><a href=\"#-await--then\" class=\"headerlink\" title=\" await  .then()\"></a> <code>await</code>  <code>.then()</code></h3><p></p>\n<p><strong><code>async</code></strong>**<code>await</code>**<strong><code>await</code></strong>**<code>.then()</code>**</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">fetchData</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;some-api-url&#x27;</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.<span class=\"title function_\">json</span>())</span><br><span class=\"line\">    .<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;Error:&#x27;</span>, error));</span><br><span class=\"line\">  <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"https://es6.ruanyifeng.com/#docs/async\">https://es6.ruanyifeng.com/#docs/async</a></li>\n<li><a href=\"https://www.cnblogs.com/porter/p/13343524.html\">https://www.cnblogs.com/porter/p/13343524.html</a></li>\n</ol>\n"},{"title":" Event Loop","date":"2024-06-09T16:00:00.000Z","author":"ma5hr00m","_content":"\n JavaScript Node.js \n\n## \n\nSynchronous Web \n\nAsynchronousPromises  async/await  JavaScript \n\n## \n\n![20240610160305](https://img.ma5hr00m.top/blog/20240610160305.png)\n\nEvent Loop JavaScript JavaScript \n\n1. **Execution Stack**\n2. **Web API** `setTimeout`  Web API \n3. **Task Queue**\n4. **Event Loop**\n5. **Microtask Queue** `Promise`  `setTimeout` \n6. ** (Rendering)**: \n\n JavaScript  JavaScript \n\n## \n\nMacro TaskMicro Task\n\n### \n\n**** Node.js\n\n- **`setTimeout`**\n- **`setInterval`**\n- **`I/O`**\n- UI\n- **`postMessage`**\n- **`MessageChannel`**\n\n**** JavaScript \n\n- **`Promise.then`**\n- **`MutationObserver`**\n- **`process.nextTick`** Node.js\n\n\n\n JavaScript JavaScript JavaScript \n\n### \n\n JavaScript  ES6 `Promise``Promise` ES6  JavaScrip t\n\n JavaScript  JavaScript JavaScript \n\n### \n\n\n\n```jsx\nconsole.log('');  \n\nsetTimeout(function() {\n  console.log('');\n}, 0);\n\nPromise.resolve().then(function() {\n  console.log(' 1');\n}).then(function() {\n  console.log(' 2');\n});\n\nconsole.log('');\n```\n\n\n\n```bash\n\n\n 1\n 2\n\n```\n\n\n\n1. `console.log``''`\n2. `setTimeout``0`\n3. `Promise.resolve()`promise`.then`\n4. `''`\n5. JavaScriptpromise`.then``' 1'``' 2'`\n6. `setTimeout``''`\n\n## \n\n JavaScript `setTimeout`  `setInterval` ****\n\n `setTimeout(callback, 2000)` JavaScript  2  `callback`  `syncFunc` \n\n\n\n1. ****\n2. **** `setTimeout`\n3. ****\n4. ****\n5. ****\n\n Web Workers  `requestAnimationFrame`  `requestIdleCallback` \n\n```jsx\n// \nconst syncFunc = (startTime) => {\n  const time = new Date().getTime();\n  while (new Date().getTime() - time < 5000) { /*  */ }\n  const offset = new Date().getTime() - startTime;\n  console.log(`${offset}`);\n};\n\nconst asyncFunc = (startTime) => {\n  setTimeout(() => {\n    const offset = new Date().getTime() - startTime;\n    console.log(`${offset}`);\n  }, 2000);\n};\n\nconst startTime = new Date().getTime();\nasyncFunc(startTime);\nsyncFunc(startTime);\n\n```\n\n`syncFunc` 5 `asyncFunc` 2 `syncFunc` \n\n## requestAnimationFrame & requestIdleCallback\n\n`requestAnimationFrame()`  `requestIdleCallback()`  Web API`requestAnimationFrame()`  `requestIdleCallback()` \n\n### **requestAnimationFrame()**\n\n`requestAnimationFrame()`  60  `requestAnimationFrame()` \n\n```jsx\n//  requestAnimationFrame \nfunction updateAnimation() {\n  // \n  // ...\n  requestAnimationFrame(updateAnimation);\n}\n\n// \nrequestAnimationFrame(updateAnimation);\n```\n\n API\n\n### **requestIdleCallback()**\n\n`requestIdleCallback()`  `requestIdleCallback()`  API  `IdleDeadline`  `timeRemaining()` \n\n**`requestIdleCallback()`**\n\n```jsx\n// \nfunction lazyLoadImages(images) {\n  images.forEach(image => {\n    if (isInViewport(image)) {\n      loadImage(image);\n    }\n  });\n}\n\n//  requestIdleCallback \nfunction scheduleLazyLoad(images) {\n  //  requestIdleCallback\n  if ('requestIdleCallback' in window) {\n    requestIdleCallback(deadline => {\n      while (deadline.timeRemaining() > 0 && images.length > 0) {\n        lazyLoadImages(images.splice(0, 2)); // \n      }\n\n      // \n      if (images.length > 0) {\n        scheduleLazyLoad(images);\n      }\n    });\n  } else {\n    //  requestIdleCallback setTimeout\n    setTimeout(() => lazyLoadImages(images), 0);\n  }\n}\n\n// \nconst allImages = document.querySelectorAll('.lazy-load-image');\nscheduleLazyLoad(Array.from(allImages));\n```\n\n`scheduleLazyLoad``requestIdleCallback``requestIdleCallback`\n\n`requestIdleCallback``setTimeout`\n\n## Node.js \n\n V8 Node.js  JavaScript \n\n Node.js  FIFO Node.js  I/O  Node.js \n\n- **timers **: `setTimeout()``setInterval()`\n- **pending callbacks **:  I/O \n- **idle, prepare **: \n- **poll **:  I/O ;  I/O \n- **check **:`setImmediate()`\n- **close callbacks **: `socket.on('close', ...)`\n\n poll  poll `setImmediate` timers \n\n![20240610160523](https://img.ma5hr00m.top/blog/20240610160523.png)\n\n## \n\n- [ (Event Loop)ExplainThis](https://www.explainthis.io/zh-hant/swe/what-is-event-loop)\n- [EventLoop  ](https://dennisgo.cn/Articles/JavaScript/AsyncAndEventLoop.html)","source":"_posts/browser_eventloop.md","raw":"---\ntitle:  Event Loop\ndate: 2024/6/10\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n JavaScript Node.js \n\n## \n\nSynchronous Web \n\nAsynchronousPromises  async/await  JavaScript \n\n## \n\n![20240610160305](https://img.ma5hr00m.top/blog/20240610160305.png)\n\nEvent Loop JavaScript JavaScript \n\n1. **Execution Stack**\n2. **Web API** `setTimeout`  Web API \n3. **Task Queue**\n4. **Event Loop**\n5. **Microtask Queue** `Promise`  `setTimeout` \n6. ** (Rendering)**: \n\n JavaScript  JavaScript \n\n## \n\nMacro TaskMicro Task\n\n### \n\n**** Node.js\n\n- **`setTimeout`**\n- **`setInterval`**\n- **`I/O`**\n- UI\n- **`postMessage`**\n- **`MessageChannel`**\n\n**** JavaScript \n\n- **`Promise.then`**\n- **`MutationObserver`**\n- **`process.nextTick`** Node.js\n\n\n\n JavaScript JavaScript JavaScript \n\n### \n\n JavaScript  ES6 `Promise``Promise` ES6  JavaScrip t\n\n JavaScript  JavaScript JavaScript \n\n### \n\n\n\n```jsx\nconsole.log('');  \n\nsetTimeout(function() {\n  console.log('');\n}, 0);\n\nPromise.resolve().then(function() {\n  console.log(' 1');\n}).then(function() {\n  console.log(' 2');\n});\n\nconsole.log('');\n```\n\n\n\n```bash\n\n\n 1\n 2\n\n```\n\n\n\n1. `console.log``''`\n2. `setTimeout``0`\n3. `Promise.resolve()`promise`.then`\n4. `''`\n5. JavaScriptpromise`.then``' 1'``' 2'`\n6. `setTimeout``''`\n\n## \n\n JavaScript `setTimeout`  `setInterval` ****\n\n `setTimeout(callback, 2000)` JavaScript  2  `callback`  `syncFunc` \n\n\n\n1. ****\n2. **** `setTimeout`\n3. ****\n4. ****\n5. ****\n\n Web Workers  `requestAnimationFrame`  `requestIdleCallback` \n\n```jsx\n// \nconst syncFunc = (startTime) => {\n  const time = new Date().getTime();\n  while (new Date().getTime() - time < 5000) { /*  */ }\n  const offset = new Date().getTime() - startTime;\n  console.log(`${offset}`);\n};\n\nconst asyncFunc = (startTime) => {\n  setTimeout(() => {\n    const offset = new Date().getTime() - startTime;\n    console.log(`${offset}`);\n  }, 2000);\n};\n\nconst startTime = new Date().getTime();\nasyncFunc(startTime);\nsyncFunc(startTime);\n\n```\n\n`syncFunc` 5 `asyncFunc` 2 `syncFunc` \n\n## requestAnimationFrame & requestIdleCallback\n\n`requestAnimationFrame()`  `requestIdleCallback()`  Web API`requestAnimationFrame()`  `requestIdleCallback()` \n\n### **requestAnimationFrame()**\n\n`requestAnimationFrame()`  60  `requestAnimationFrame()` \n\n```jsx\n//  requestAnimationFrame \nfunction updateAnimation() {\n  // \n  // ...\n  requestAnimationFrame(updateAnimation);\n}\n\n// \nrequestAnimationFrame(updateAnimation);\n```\n\n API\n\n### **requestIdleCallback()**\n\n`requestIdleCallback()`  `requestIdleCallback()`  API  `IdleDeadline`  `timeRemaining()` \n\n**`requestIdleCallback()`**\n\n```jsx\n// \nfunction lazyLoadImages(images) {\n  images.forEach(image => {\n    if (isInViewport(image)) {\n      loadImage(image);\n    }\n  });\n}\n\n//  requestIdleCallback \nfunction scheduleLazyLoad(images) {\n  //  requestIdleCallback\n  if ('requestIdleCallback' in window) {\n    requestIdleCallback(deadline => {\n      while (deadline.timeRemaining() > 0 && images.length > 0) {\n        lazyLoadImages(images.splice(0, 2)); // \n      }\n\n      // \n      if (images.length > 0) {\n        scheduleLazyLoad(images);\n      }\n    });\n  } else {\n    //  requestIdleCallback setTimeout\n    setTimeout(() => lazyLoadImages(images), 0);\n  }\n}\n\n// \nconst allImages = document.querySelectorAll('.lazy-load-image');\nscheduleLazyLoad(Array.from(allImages));\n```\n\n`scheduleLazyLoad``requestIdleCallback``requestIdleCallback`\n\n`requestIdleCallback``setTimeout`\n\n## Node.js \n\n V8 Node.js  JavaScript \n\n Node.js  FIFO Node.js  I/O  Node.js \n\n- **timers **: `setTimeout()``setInterval()`\n- **pending callbacks **:  I/O \n- **idle, prepare **: \n- **poll **:  I/O ;  I/O \n- **check **:`setImmediate()`\n- **close callbacks **: `socket.on('close', ...)`\n\n poll  poll `setImmediate` timers \n\n![20240610160523](https://img.ma5hr00m.top/blog/20240610160523.png)\n\n## \n\n- [ (Event Loop)ExplainThis](https://www.explainthis.io/zh-hant/swe/what-is-event-loop)\n- [EventLoop  ](https://dennisgo.cn/Articles/JavaScript/AsyncAndEventLoop.html)","slug":"browser_eventloop","published":1,"updated":"2024-06-11T06:59:16.497Z","comments":1,"layout":"post","photos":[],"_id":"clxhruaov0003f4ly8zmgal7q","content":"<p> JavaScript Node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Synchronous Web </p>\n<p>AsynchronousPromises  async&#x2F;await  JavaScript </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"https://img.ma5hr00m.top/blog/20240610160305.png\" alt=\"20240610160305\"></p>\n<p>Event Loop JavaScript JavaScript </p>\n<ol>\n<li><strong>Execution Stack</strong></li>\n<li><strong>Web API</strong> <code>setTimeout</code>  Web API </li>\n<li><strong>Task Queue</strong></li>\n<li><strong>Event Loop</strong></li>\n<li><strong>Microtask Queue</strong> <code>Promise</code>  <code>setTimeout</code> </li>\n<li><strong> (Rendering)</strong>: </li>\n</ol>\n<p> JavaScript  JavaScript </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Macro TaskMicro Task</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong> Node.js</p>\n<ul>\n<li><strong><code>setTimeout</code></strong></li>\n<li><strong><code>setInterval</code></strong></li>\n<li><strong><code>I/O</code></strong></li>\n<li>UI</li>\n<li><strong><code>postMessage</code></strong></li>\n<li><strong><code>MessageChannel</code></strong></li>\n</ul>\n<p><strong></strong> JavaScript </p>\n<ul>\n<li><strong><code>Promise.then</code></strong></li>\n<li><strong><code>MutationObserver</code></strong></li>\n<li><strong><code>process.nextTick</code></strong> Node.js</li>\n</ul>\n<p></p>\n<p> JavaScript JavaScript JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JavaScript  ES6 <code>Promise</code><code>Promise</code> ES6  JavaScrip t</p>\n<p> JavaScript  JavaScript JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>().<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27; 1&#x27;</span>);</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27; 2&#x27;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> 1</span><br><span class=\"line\"> 2</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><code>console.log</code><code>&#39;&#39;</code></li>\n<li><code>setTimeout</code><code>0</code></li>\n<li><code>Promise.resolve()</code>promise<code>.then</code></li>\n<li><code>&#39;&#39;</code></li>\n<li>JavaScriptpromise<code>.then</code><code>&#39; 1&#39;</code><code>&#39; 2&#39;</code></li>\n<li><code>setTimeout</code><code>&#39;&#39;</code></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JavaScript <code>setTimeout</code>  <code>setInterval</code> <strong></strong></p>\n<p> <code>setTimeout(callback, 2000)</code> JavaScript  2  <code>callback</code>  <code>syncFunc</code> </p>\n<p></p>\n<ol>\n<li><strong></strong></li>\n<li><strong></strong> <code>setTimeout</code></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<p> Web Workers  <code>requestAnimationFrame</code>  <code>requestIdleCallback</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">syncFunc</span> = (<span class=\"params\">startTime</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> time = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - time &lt; <span class=\"number\">5000</span>) &#123; <span class=\"comment\">/*  */</span> &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> offset = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - startTime;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`<span class=\"subst\">$&#123;offset&#125;</span>`</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">asyncFunc</span> = (<span class=\"params\">startTime</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> offset = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - startTime;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`<span class=\"subst\">$&#123;offset&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> startTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"title function_\">asyncFunc</span>(startTime);</span><br><span class=\"line\"><span class=\"title function_\">syncFunc</span>(startTime);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>syncFunc</code> 5 <code>asyncFunc</code> 2 <code>syncFunc</code> </p>\n<h2 id=\"requestAnimationFrame-requestIdleCallback\"><a href=\"#requestAnimationFrame-requestIdleCallback\" class=\"headerlink\" title=\"requestAnimationFrame &amp; requestIdleCallback\"></a>requestAnimationFrame &amp; requestIdleCallback</h2><p><code>requestAnimationFrame()</code>  <code>requestIdleCallback()</code>  Web API<code>requestAnimationFrame()</code>  <code>requestIdleCallback()</code> </p>\n<h3 id=\"requestAnimationFrame\"><a href=\"#requestAnimationFrame\" class=\"headerlink\" title=\"requestAnimationFrame()\"></a><strong>requestAnimationFrame()</strong></h3><p><code>requestAnimationFrame()</code>  60  <code>requestAnimationFrame()</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  requestAnimationFrame </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">updateAnimation</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"title function_\">requestAnimationFrame</span>(updateAnimation);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"title function_\">requestAnimationFrame</span>(updateAnimation);</span><br></pre></td></tr></table></figure>\n\n<p> API</p>\n<h3 id=\"requestIdleCallback\"><a href=\"#requestIdleCallback\" class=\"headerlink\" title=\"requestIdleCallback()\"></a><strong>requestIdleCallback()</strong></h3><p><code>requestIdleCallback()</code>  <code>requestIdleCallback()</code>  API  <code>IdleDeadline</code>  <code>timeRemaining()</code> </p>\n<p><strong><code>requestIdleCallback()</code></strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">lazyLoadImages</span>(<span class=\"params\">images</span>) &#123;</span><br><span class=\"line\">  images.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">image</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isInViewport</span>(image)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">loadImage</span>(image);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  requestIdleCallback </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">scheduleLazyLoad</span>(<span class=\"params\">images</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  requestIdleCallback</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;requestIdleCallback&#x27;</span> <span class=\"keyword\">in</span> <span class=\"variable language_\">window</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">requestIdleCallback</span>(<span class=\"function\"><span class=\"params\">deadline</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (deadline.<span class=\"title function_\">timeRemaining</span>() &gt; <span class=\"number\">0</span> &amp;&amp; images.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">lazyLoadImages</span>(images.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>, <span class=\"number\">2</span>)); <span class=\"comment\">// </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (images.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">scheduleLazyLoad</span>(images);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  requestIdleCallback setTimeout</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">lazyLoadImages</span>(images), <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allImages = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">&#x27;.lazy-load-image&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_\">scheduleLazyLoad</span>(<span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(allImages));</span><br></pre></td></tr></table></figure>\n\n<p><code>scheduleLazyLoad</code><code>requestIdleCallback</code><code>requestIdleCallback</code></p>\n<p><code>requestIdleCallback</code><code>setTimeout</code></p>\n<h2 id=\"Node-js-\"><a href=\"#Node-js-\" class=\"headerlink\" title=\"Node.js \"></a>Node.js </h2><p> V8 Node.js  JavaScript </p>\n<p> Node.js  FIFO Node.js  I&#x2F;O  Node.js </p>\n<ul>\n<li><strong>timers </strong>: <code>setTimeout()</code><code>setInterval()</code></li>\n<li><strong>pending callbacks </strong>:  I&#x2F;O </li>\n<li><strong>idle, prepare </strong>: </li>\n<li><strong>poll </strong>:  I&#x2F;O ;  I&#x2F;O </li>\n<li><strong>check </strong>:<code>setImmediate()</code></li>\n<li><strong>close callbacks </strong>: <code>socket.on(&#39;close&#39;, ...)</code></li>\n</ul>\n<p> poll  poll <code>setImmediate</code> timers </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240610160523.png\" alt=\"20240610160523\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.explainthis.io/zh-hant/swe/what-is-event-loop\"> (Event Loop)ExplainThis</a></li>\n<li><a href=\"https://dennisgo.cn/Articles/JavaScript/AsyncAndEventLoop.html\">EventLoop  </a></li>\n</ul>\n","excerpt":"","more":"<p> JavaScript Node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Synchronous Web </p>\n<p>AsynchronousPromises  async&#x2F;await  JavaScript </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"https://img.ma5hr00m.top/blog/20240610160305.png\" alt=\"20240610160305\"></p>\n<p>Event Loop JavaScript JavaScript </p>\n<ol>\n<li><strong>Execution Stack</strong></li>\n<li><strong>Web API</strong> <code>setTimeout</code>  Web API </li>\n<li><strong>Task Queue</strong></li>\n<li><strong>Event Loop</strong></li>\n<li><strong>Microtask Queue</strong> <code>Promise</code>  <code>setTimeout</code> </li>\n<li><strong> (Rendering)</strong>: </li>\n</ol>\n<p> JavaScript  JavaScript </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Macro TaskMicro Task</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong> Node.js</p>\n<ul>\n<li><strong><code>setTimeout</code></strong></li>\n<li><strong><code>setInterval</code></strong></li>\n<li><strong><code>I/O</code></strong></li>\n<li>UI</li>\n<li><strong><code>postMessage</code></strong></li>\n<li><strong><code>MessageChannel</code></strong></li>\n</ul>\n<p><strong></strong> JavaScript </p>\n<ul>\n<li><strong><code>Promise.then</code></strong></li>\n<li><strong><code>MutationObserver</code></strong></li>\n<li><strong><code>process.nextTick</code></strong> Node.js</li>\n</ul>\n<p></p>\n<p> JavaScript JavaScript JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JavaScript  ES6 <code>Promise</code><code>Promise</code> ES6  JavaScrip t</p>\n<p> JavaScript  JavaScript JavaScript </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>().<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27; 1&#x27;</span>);</span><br><span class=\"line\">&#125;).<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27; 2&#x27;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> 1</span><br><span class=\"line\"> 2</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><code>console.log</code><code>&#39;&#39;</code></li>\n<li><code>setTimeout</code><code>0</code></li>\n<li><code>Promise.resolve()</code>promise<code>.then</code></li>\n<li><code>&#39;&#39;</code></li>\n<li>JavaScriptpromise<code>.then</code><code>&#39; 1&#39;</code><code>&#39; 2&#39;</code></li>\n<li><code>setTimeout</code><code>&#39;&#39;</code></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JavaScript <code>setTimeout</code>  <code>setInterval</code> <strong></strong></p>\n<p> <code>setTimeout(callback, 2000)</code> JavaScript  2  <code>callback</code>  <code>syncFunc</code> </p>\n<p></p>\n<ol>\n<li><strong></strong></li>\n<li><strong></strong> <code>setTimeout</code></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<p> Web Workers  <code>requestAnimationFrame</code>  <code>requestIdleCallback</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">syncFunc</span> = (<span class=\"params\">startTime</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> time = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - time &lt; <span class=\"number\">5000</span>) &#123; <span class=\"comment\">/*  */</span> &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> offset = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - startTime;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`<span class=\"subst\">$&#123;offset&#125;</span>`</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">asyncFunc</span> = (<span class=\"params\">startTime</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> offset = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>() - startTime;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`<span class=\"subst\">$&#123;offset&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> startTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>().<span class=\"title function_\">getTime</span>();</span><br><span class=\"line\"><span class=\"title function_\">asyncFunc</span>(startTime);</span><br><span class=\"line\"><span class=\"title function_\">syncFunc</span>(startTime);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>syncFunc</code> 5 <code>asyncFunc</code> 2 <code>syncFunc</code> </p>\n<h2 id=\"requestAnimationFrame-requestIdleCallback\"><a href=\"#requestAnimationFrame-requestIdleCallback\" class=\"headerlink\" title=\"requestAnimationFrame &amp; requestIdleCallback\"></a>requestAnimationFrame &amp; requestIdleCallback</h2><p><code>requestAnimationFrame()</code>  <code>requestIdleCallback()</code>  Web API<code>requestAnimationFrame()</code>  <code>requestIdleCallback()</code> </p>\n<h3 id=\"requestAnimationFrame\"><a href=\"#requestAnimationFrame\" class=\"headerlink\" title=\"requestAnimationFrame()\"></a><strong>requestAnimationFrame()</strong></h3><p><code>requestAnimationFrame()</code>  60  <code>requestAnimationFrame()</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  requestAnimationFrame </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">updateAnimation</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"title function_\">requestAnimationFrame</span>(updateAnimation);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"title function_\">requestAnimationFrame</span>(updateAnimation);</span><br></pre></td></tr></table></figure>\n\n<p> API</p>\n<h3 id=\"requestIdleCallback\"><a href=\"#requestIdleCallback\" class=\"headerlink\" title=\"requestIdleCallback()\"></a><strong>requestIdleCallback()</strong></h3><p><code>requestIdleCallback()</code>  <code>requestIdleCallback()</code>  API  <code>IdleDeadline</code>  <code>timeRemaining()</code> </p>\n<p><strong><code>requestIdleCallback()</code></strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">lazyLoadImages</span>(<span class=\"params\">images</span>) &#123;</span><br><span class=\"line\">  images.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">image</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isInViewport</span>(image)) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">loadImage</span>(image);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  requestIdleCallback </span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">scheduleLazyLoad</span>(<span class=\"params\">images</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  requestIdleCallback</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;requestIdleCallback&#x27;</span> <span class=\"keyword\">in</span> <span class=\"variable language_\">window</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">requestIdleCallback</span>(<span class=\"function\"><span class=\"params\">deadline</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">while</span> (deadline.<span class=\"title function_\">timeRemaining</span>() &gt; <span class=\"number\">0</span> &amp;&amp; images.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">lazyLoadImages</span>(images.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>, <span class=\"number\">2</span>)); <span class=\"comment\">// </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (images.<span class=\"property\">length</span> &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"title function_\">scheduleLazyLoad</span>(images);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  requestIdleCallback setTimeout</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> <span class=\"title function_\">lazyLoadImages</span>(images), <span class=\"number\">0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allImages = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">&#x27;.lazy-load-image&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_\">scheduleLazyLoad</span>(<span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(allImages));</span><br></pre></td></tr></table></figure>\n\n<p><code>scheduleLazyLoad</code><code>requestIdleCallback</code><code>requestIdleCallback</code></p>\n<p><code>requestIdleCallback</code><code>setTimeout</code></p>\n<h2 id=\"Node-js-\"><a href=\"#Node-js-\" class=\"headerlink\" title=\"Node.js \"></a>Node.js </h2><p> V8 Node.js  JavaScript </p>\n<p> Node.js  FIFO Node.js  I&#x2F;O  Node.js </p>\n<ul>\n<li><strong>timers </strong>: <code>setTimeout()</code><code>setInterval()</code></li>\n<li><strong>pending callbacks </strong>:  I&#x2F;O </li>\n<li><strong>idle, prepare </strong>: </li>\n<li><strong>poll </strong>:  I&#x2F;O ;  I&#x2F;O </li>\n<li><strong>check </strong>:<code>setImmediate()</code></li>\n<li><strong>close callbacks </strong>: <code>socket.on(&#39;close&#39;, ...)</code></li>\n</ul>\n<p> poll  poll <code>setImmediate</code> timers </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240610160523.png\" alt=\"20240610160523\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.explainthis.io/zh-hant/swe/what-is-event-loop\"> (Event Loop)ExplainThis</a></li>\n<li><a href=\"https://dennisgo.cn/Articles/JavaScript/AsyncAndEventLoop.html\">EventLoop  </a></li>\n</ul>\n"},{"title":"","date":"2023-10-01T16:00:00.000Z","author":"ma5hr00m","_content":"\n## \n ****  ** \n\n### * node*\n\n\n### * link*\n WiFiA-B(A-BA-C)\n\n### * protocol*\n\n\n   \n\n### * topology*\ntopology\n\n### * duplex*\n AB \n\n- \n- \n\n## \nISO1978\"\" *OSI/RM*Open System Interconnection/Reference Model\n\n\n\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005143909.png)\n\n## OSI\n `Opne System Interconnection`ISO\n\nOSI  TCP/IP \n\n\n\n1.  *Application*   \n      \n    *HTTPTFTPFTPNFSWAISSMTP*\n2.  *Presentation*   \n    \n    *TelentRloginSNMPGopher*\n3.  *Session*   \n    \n    *SMTPDNS*\n4.  *Transport*   \n    \n    *TCPUDP*\n5.  *Network*   \n    IP \n    *IPICMPARPRARPAKPUUCP*\n6.  *Data Link*   \n    \n    *FFDIPDNArpanet*\n7.  *Physical*   \n    \n    *IEEE 802.1AIEEE 802.2*\n\n\n\n## IP \n*IP*Internet Protocol Address IP \n\n IP \n- **  \n  \n- **  \n   IP  IP \n\n IP \n MAC  MAC  MAC \n\n### IP \nIP  **  5 A B C D  E ABC DE \n\n- *A *  \n   A  IP  1  3  `0` 1~127\n   A  16777214  126  A \n- *B *  \n   B  IP  2  2  `10` 128~191\n   B  65534 \n- *C *  \n   C  IP  3  1  `110` 192~223\n   C  254 \n- *D *  \n  D  IP  `1110` Multicast\n- *E *  \n   `11110` `240.0.0.0`  `255.255.255.254``255.255.255.255` \n\n### IPv4 & IPv6\n`IPv4`  `IPv6` \n\n`IPv4`Internet Protocol Version 4IPv4  32 44,294,967,2962^32\nIPv4 \n\n\n*IPv6*Internet Protocol Version 6 *IPng*IP Next Generation\nIPv6  IPv4 IP  32  128  IPv6  IPv4  2^128 3.410^38\n\nIPv6  IP  IPv6 \n\n### MAC\n`MAC`Media Access Control EPROM\n\n### \n``Broadcast Address IP \n\n\n TCP/IP  255  IP \n\n `10.1.1.0` 255.255.255.0 `10.1.1.255` `10.1.1.255` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005150331.png)\n\n\n- **  \n  IP  255  `255.255.255.255`\n- */*  \n  IP  `192.168.2.1`  `192.168.1.0` IP  255 `192.168.10.0/24` `192.168.10.255`\n\n### \nMulticast AddressIP\n\n### \n IP  IPv4  `127.0.0.1`  `127.255.255.254`\n\n\n1. **\n    ping  `127.0.0.1`\n2. **  \n   /IP `127.0.0.1`\n3. **  \n    telnet IP  IP \n\n Web 127.0.0.1 `http://127.0.0.1:port` `port` \n\n`localhost``127.0.0.1`\n- `127.0.0.1` `localhost`  IP \n- `localhost`  `127.0.0.1`\n\n### \nIPIP\n- A `10.0.0.0` ~ `10.255.255.255` 1.6 \n- B `172.16.0.0` ~ `172.31.255.255` 100 \n- C `192.168.0.0` ~ `192.168.255.255` 65000 \n\nNATIP\n\n## \n [](https://www.zhihu.com/question/21064101)\n\nSubnet Mask IP  32  4 8  `xxx.xxx.xxx.xxx` IP \n\n IP  IP  IP \n\n Web \n\n IP  `192.168.1.1` `255.255.255.0` IP  `192.168.1.0`  `192.168.1.255` \n\n## \n### * hub*\n\n\n\n\n\n\n\n\n### * switch*\n\n\n MAC  MAC NIC\n\n\n\n\n VLAN\n\n### * router*\n\n OSI  RIPOSPFBGP\n\n ** **\n\n IP \n IP \n\n\n-  LANWANMAN \n- \n- \n- VPNNAT \n\n\n\n### * bridge*\n/\n\n LAN \n\n### * gateway*\n\n\n TCP/IP \n\n\n\n\n\n\n## \n TCP/IP  HTTP Web \n\n### ARP/RARP\n`ARP `Address Resolution Protocol IP  MAC \n\n IP \n IP  ARP \n IP  ARP  ARP \n\nARP \n ARP  MAC  ARP MAC \n MAC  MAC ARP\n\n`RARP `Reverse Address Resolution Protocol MAC  IP \n\nRARP  ARP  IP \n IP  RARP  IP  RARP \n\nRARP  DHCP \n\n### DHCP\n`DHCP `Dynamic Host Configuration Protocol IP  IP  IP \n\nDHCP \n1. **  \n   DHCP  `DHCP Discover`  DHCP \n2. **  \n    Discover  DHCP  `DHCP Offer` IP\n3. **  \n   DHCP  Offer  `DHCP Request`  IP \n4. **  \n    DHCP  Request  `DHCP ACK`  IP \n\nDHCP  IP  DHCP  IP  IP \n\n\n RARP  DHCP  RARP  IP \nRARP  RARP \nDHCP  DHCP \n\n `dig`  Linux  DHCP  IP \n```bash\ndig +short ma5hr00m.top @resolver1.opendns.com\n#  +short \n```\n\n `OpenDNS`  DNS  `ma5hr00m.top` \nOpenDNS  IP \n\n### \n\n\n#### RIP\n`RIP`Routing Information Protocol\nRIP \nRIP  ** 15 \n\nRIP  OSPF \n\n#### OSPF\n`OSPF `Open Shortest Path First\nOSPF  SPF OSPF\n\n OSPF \n\n OSPF [Ubuntu20.04  FRR  OSPF ](https://blog.csdn.net/weixin_46505636/article/details/128629176)\n\n### DNS\n DNS  DNSSEC[DNSSEC](/posts/network/dnssec)\n\n\n## \n- [ - ](https://www.runoob.com/w3cnote/summary-of-network.html)\n- [](https://www.jc2182.com/cn/cn-jiaocheng.html)\n- [Hubs, Switches And Routers Explained](https://themillergroup.com/differences-hubs-switches-routers/)\n- [OSITCP/IP](https://www.jianshu.com/p/c793a279f698)\n- [ OSI ](https://www.freecodecamp.org/chinese/news/osi-model-networking-layers/)\n- [](https://zhuanlan.zhihu.com/p/165142303)\n- [TCP/IP Model](https://www.geeksforgeeks.org/tcp-ip-model/?ref=lbp)\n- [ - CSDN](https://blog.csdn.net/tennysonsky/article/details/45564479)\n- [IP - ](https://zhuanlan.zhihu.com/p/353821843)\n- [IP - ](https://zhuanlan.zhihu.com/p/498255136)\n- [127.0.0.1](https://cloud.tencent.com/developer/article/2149791)\n- [](https://zhuanlan.zhihu.com/p/371400090)\n- [ ARP - ](https://info.support.huawei.com/info-finder/encyclopedia/zh/ARP.html)\n- [DHCP  - ](https://zhuanlan.zhihu.com/p/265293856)\n- [RIP ](https://blog.csdn.net/TheCarol/article/details/112106308)\n- [OSPFOSPFOSPF](https://zhuanlan.zhihu.com/p/616791347)","source":"_posts/base_network.md","raw":"---\ntitle: \ndate: 2023/10/02\nauthor: ma5hr00m\ncategories:\n- Network\n---\n\n## \n ****  ** \n\n### * node*\n\n\n### * link*\n WiFiA-B(A-BA-C)\n\n### * protocol*\n\n\n   \n\n### * topology*\ntopology\n\n### * duplex*\n AB \n\n- \n- \n\n## \nISO1978\"\" *OSI/RM*Open System Interconnection/Reference Model\n\n\n\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005143909.png)\n\n## OSI\n `Opne System Interconnection`ISO\n\nOSI  TCP/IP \n\n\n\n1.  *Application*   \n      \n    *HTTPTFTPFTPNFSWAISSMTP*\n2.  *Presentation*   \n    \n    *TelentRloginSNMPGopher*\n3.  *Session*   \n    \n    *SMTPDNS*\n4.  *Transport*   \n    \n    *TCPUDP*\n5.  *Network*   \n    IP \n    *IPICMPARPRARPAKPUUCP*\n6.  *Data Link*   \n    \n    *FFDIPDNArpanet*\n7.  *Physical*   \n    \n    *IEEE 802.1AIEEE 802.2*\n\n\n\n## IP \n*IP*Internet Protocol Address IP \n\n IP \n- **  \n  \n- **  \n   IP  IP \n\n IP \n MAC  MAC  MAC \n\n### IP \nIP  **  5 A B C D  E ABC DE \n\n- *A *  \n   A  IP  1  3  `0` 1~127\n   A  16777214  126  A \n- *B *  \n   B  IP  2  2  `10` 128~191\n   B  65534 \n- *C *  \n   C  IP  3  1  `110` 192~223\n   C  254 \n- *D *  \n  D  IP  `1110` Multicast\n- *E *  \n   `11110` `240.0.0.0`  `255.255.255.254``255.255.255.255` \n\n### IPv4 & IPv6\n`IPv4`  `IPv6` \n\n`IPv4`Internet Protocol Version 4IPv4  32 44,294,967,2962^32\nIPv4 \n\n\n*IPv6*Internet Protocol Version 6 *IPng*IP Next Generation\nIPv6  IPv4 IP  32  128  IPv6  IPv4  2^128 3.410^38\n\nIPv6  IP  IPv6 \n\n### MAC\n`MAC`Media Access Control EPROM\n\n### \n``Broadcast Address IP \n\n\n TCP/IP  255  IP \n\n `10.1.1.0` 255.255.255.0 `10.1.1.255` `10.1.1.255` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005150331.png)\n\n\n- **  \n  IP  255  `255.255.255.255`\n- */*  \n  IP  `192.168.2.1`  `192.168.1.0` IP  255 `192.168.10.0/24` `192.168.10.255`\n\n### \nMulticast AddressIP\n\n### \n IP  IPv4  `127.0.0.1`  `127.255.255.254`\n\n\n1. **\n    ping  `127.0.0.1`\n2. **  \n   /IP `127.0.0.1`\n3. **  \n    telnet IP  IP \n\n Web 127.0.0.1 `http://127.0.0.1:port` `port` \n\n`localhost``127.0.0.1`\n- `127.0.0.1` `localhost`  IP \n- `localhost`  `127.0.0.1`\n\n### \nIPIP\n- A `10.0.0.0` ~ `10.255.255.255` 1.6 \n- B `172.16.0.0` ~ `172.31.255.255` 100 \n- C `192.168.0.0` ~ `192.168.255.255` 65000 \n\nNATIP\n\n## \n [](https://www.zhihu.com/question/21064101)\n\nSubnet Mask IP  32  4 8  `xxx.xxx.xxx.xxx` IP \n\n IP  IP  IP \n\n Web \n\n IP  `192.168.1.1` `255.255.255.0` IP  `192.168.1.0`  `192.168.1.255` \n\n## \n### * hub*\n\n\n\n\n\n\n\n\n### * switch*\n\n\n MAC  MAC NIC\n\n\n\n\n VLAN\n\n### * router*\n\n OSI  RIPOSPFBGP\n\n ** **\n\n IP \n IP \n\n\n-  LANWANMAN \n- \n- \n- VPNNAT \n\n\n\n### * bridge*\n/\n\n LAN \n\n### * gateway*\n\n\n TCP/IP \n\n\n\n\n\n\n## \n TCP/IP  HTTP Web \n\n### ARP/RARP\n`ARP `Address Resolution Protocol IP  MAC \n\n IP \n IP  ARP \n IP  ARP  ARP \n\nARP \n ARP  MAC  ARP MAC \n MAC  MAC ARP\n\n`RARP `Reverse Address Resolution Protocol MAC  IP \n\nRARP  ARP  IP \n IP  RARP  IP  RARP \n\nRARP  DHCP \n\n### DHCP\n`DHCP `Dynamic Host Configuration Protocol IP  IP  IP \n\nDHCP \n1. **  \n   DHCP  `DHCP Discover`  DHCP \n2. **  \n    Discover  DHCP  `DHCP Offer` IP\n3. **  \n   DHCP  Offer  `DHCP Request`  IP \n4. **  \n    DHCP  Request  `DHCP ACK`  IP \n\nDHCP  IP  DHCP  IP  IP \n\n\n RARP  DHCP  RARP  IP \nRARP  RARP \nDHCP  DHCP \n\n `dig`  Linux  DHCP  IP \n```bash\ndig +short ma5hr00m.top @resolver1.opendns.com\n#  +short \n```\n\n `OpenDNS`  DNS  `ma5hr00m.top` \nOpenDNS  IP \n\n### \n\n\n#### RIP\n`RIP`Routing Information Protocol\nRIP \nRIP  ** 15 \n\nRIP  OSPF \n\n#### OSPF\n`OSPF `Open Shortest Path First\nOSPF  SPF OSPF\n\n OSPF \n\n OSPF [Ubuntu20.04  FRR  OSPF ](https://blog.csdn.net/weixin_46505636/article/details/128629176)\n\n### DNS\n DNS  DNSSEC[DNSSEC](/posts/network/dnssec)\n\n\n## \n- [ - ](https://www.runoob.com/w3cnote/summary-of-network.html)\n- [](https://www.jc2182.com/cn/cn-jiaocheng.html)\n- [Hubs, Switches And Routers Explained](https://themillergroup.com/differences-hubs-switches-routers/)\n- [OSITCP/IP](https://www.jianshu.com/p/c793a279f698)\n- [ OSI ](https://www.freecodecamp.org/chinese/news/osi-model-networking-layers/)\n- [](https://zhuanlan.zhihu.com/p/165142303)\n- [TCP/IP Model](https://www.geeksforgeeks.org/tcp-ip-model/?ref=lbp)\n- [ - CSDN](https://blog.csdn.net/tennysonsky/article/details/45564479)\n- [IP - ](https://zhuanlan.zhihu.com/p/353821843)\n- [IP - ](https://zhuanlan.zhihu.com/p/498255136)\n- [127.0.0.1](https://cloud.tencent.com/developer/article/2149791)\n- [](https://zhuanlan.zhihu.com/p/371400090)\n- [ ARP - ](https://info.support.huawei.com/info-finder/encyclopedia/zh/ARP.html)\n- [DHCP  - ](https://zhuanlan.zhihu.com/p/265293856)\n- [RIP ](https://blog.csdn.net/TheCarol/article/details/112106308)\n- [OSPFOSPFOSPF](https://zhuanlan.zhihu.com/p/616791347)","slug":"base_network","published":1,"updated":"2024-06-09T12:55:55.188Z","comments":1,"layout":"post","photos":[],"_id":"clxhruaox0006f4ly9ea00fve","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <em></em><em></em>  <em></em> </p>\n<h3 id=\"-node\"><a href=\"#-node\" class=\"headerlink\" title=\" node\"></a><em> node</em></h3><p></p>\n<h3 id=\"-link\"><a href=\"#-link\" class=\"headerlink\" title=\" link\"></a><em> link</em></h3><p> WiFiA-B(A-BA-C)</p>\n<h3 id=\"-protocol\"><a href=\"#-protocol\" class=\"headerlink\" title=\" protocol\"></a><em> protocol</em></h3><p></p>\n<p>   </p>\n<h3 id=\"-topology\"><a href=\"#-topology\" class=\"headerlink\" title=\" topology\"></a><em> topology</em></h3><p>topology</p>\n<h3 id=\"-duplex\"><a href=\"#-duplex\" class=\"headerlink\" title=\" duplex\"></a><em> duplex</em></h3><p> AB <br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ISO1978 <em>OSI&#x2F;RM</em>Open System Interconnection&#x2F;Reference Model<br></p>\n<p></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005143909.png\" alt=\"\"></p>\n<h2 id=\"OSI\"><a href=\"#OSI\" class=\"headerlink\" title=\"OSI\"></a>OSI</h2><p> <code>Opne System Interconnection</code>ISO</p>\n<p>OSI  TCP&#x2F;IP </p>\n<p></p>\n<ol>\n<li> <em>Application</em> <br> <br> <em>HTTPTFTPFTPNFSWAISSMTP</em></li>\n<li> <em>Presentation</em> <br> <br> <em>TelentRloginSNMPGopher</em></li>\n<li> <em>Session</em> <br> <br> <em>SMTPDNS</em></li>\n<li> <em>Transport</em> <br> <br> <em>TCPUDP</em></li>\n<li> <em>Network</em> <br> IP <br> <em>IPICMPARPRARPAKPUUCP</em></li>\n<li> <em>Data Link</em> <br> <br> <em>FFDIPDNArpanet</em></li>\n<li> <em>Physical</em> <br> <br> <em>IEEE 802.1AIEEE 802.2</em></li>\n</ol>\n<p></p>\n<h2 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h2><p><em>IP</em>Internet Protocol Address IP </p>\n<p> IP </p>\n<ul>\n<li><em></em><br></li>\n<li><em></em><br> IP  IP </li>\n</ul>\n<p> IP <br> MAC  MAC  MAC </p>\n<h3 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h3><p>IP  <em></em>  5 A B C D  E ABC DE </p>\n<ul>\n<li><em>A </em><br> A  IP  1  3  <code>0</code> 1~127<br> A  16777214  126  A </li>\n<li><em>B </em><br> B  IP  2  2  <code>10</code> 128~191<br> B  65534 </li>\n<li><em>C </em><br> C  IP  3  1  <code>110</code> 192~223<br> C  254 </li>\n<li><em>D </em><br>D  IP  <code>1110</code> Multicast</li>\n<li><em>E </em><br> <code>11110</code> <code>240.0.0.0</code>  <code>255.255.255.254</code><code>255.255.255.255</code> </li>\n</ul>\n<h3 id=\"IPv4-IPv6\"><a href=\"#IPv4-IPv6\" class=\"headerlink\" title=\"IPv4 &amp; IPv6\"></a>IPv4 &amp; IPv6</h3><p><code>IPv4</code>  <code>IPv6</code> </p>\n<p><code>IPv4</code>Internet Protocol Version 4IPv4  32 44,294,967,2962^32<br>IPv4 <br></p>\n<p><em>IPv6</em>Internet Protocol Version 6 <em>IPng</em>IP Next Generation<br>IPv6  IPv4 IP  32  128  IPv6  IPv4  2^128 3.410^38</p>\n<p>IPv6  IP  IPv6 </p>\n<h3 id=\"MAC\"><a href=\"#MAC\" class=\"headerlink\" title=\"MAC\"></a>MAC</h3><p><code>MAC</code>Media Access Control EPROM</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code></code>Broadcast Address IP </p>\n<p><br> TCP&#x2F;IP  255  IP </p>\n<p> <code>10.1.1.0</code> 255.255.255.0 <code>10.1.1.255</code> <code>10.1.1.255</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005150331.png\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><em></em><br>IP  255  <code>255.255.255.255</code></li>\n<li><em>&#x2F;</em><br>IP  <code>192.168.2.1</code>  <code>192.168.1.0</code> IP  255 <code>192.168.10.0/24</code> <code>192.168.10.255</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Multicast AddressIP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> IP  IPv4  <code>127.0.0.1</code>  <code>127.255.255.254</code></p>\n<p></p>\n<ol>\n<li><em></em><br> ping  <code>127.0.0.1</code></li>\n<li><em></em><br>&#x2F;IP <code>127.0.0.1</code></li>\n<li><em></em><br> telnet IP  IP </li>\n</ol>\n<p> Web 127.0.0.1 <code>http://127.0.0.1:port</code> <code>port</code> </p>\n<p><code>localhost</code><code>127.0.0.1</code></p>\n<ul>\n<li><code>127.0.0.1</code> <code>localhost</code>  IP </li>\n<li><code>localhost</code>  <code>127.0.0.1</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IPIP</p>\n<ul>\n<li>A <code>10.0.0.0</code> ~ <code>10.255.255.255</code> 1.6 </li>\n<li>B <code>172.16.0.0</code> ~ <code>172.31.255.255</code> 100 </li>\n<li>C <code>192.168.0.0</code> ~ <code>192.168.255.255</code> 65000 </li>\n</ul>\n<p>NATIP</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"https://www.zhihu.com/question/21064101\"></a></p>\n<p>Subnet Mask IP  32  4 8  <code>xxx.xxx.xxx.xxx</code> IP </p>\n<p> IP  IP  IP </p>\n<p> Web </p>\n<p> IP  <code>192.168.1.1</code> <code>255.255.255.0</code> IP  <code>192.168.1.0</code>  <code>192.168.1.255</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-hub\"><a href=\"#-hub\" class=\"headerlink\" title=\" hub\"></a><em> hub</em></h3><p><br><br></p>\n<p></p>\n<p></p>\n<h3 id=\"-switch\"><a href=\"#-switch\" class=\"headerlink\" title=\" switch\"></a><em> switch</em></h3><p></p>\n<p> MAC  MAC NIC</p>\n<p><br><br><br> VLAN</p>\n<h3 id=\"-router\"><a href=\"#-router\" class=\"headerlink\" title=\" router\"></a><em> router</em></h3><p><br> OSI  RIPOSPFBGP</p>\n<p> <em></em> <em></em></p>\n<p> IP <br> IP </p>\n<p></p>\n<ul>\n<li> LANWANMAN </li>\n<li></li>\n<li></li>\n<li>VPNNAT </li>\n</ul>\n<p></p>\n<h3 id=\"-bridge\"><a href=\"#-bridge\" class=\"headerlink\" title=\" bridge\"></a><em> bridge</em></h3><p>&#x2F;</p>\n<p> LAN </p>\n<h3 id=\"-gateway\"><a href=\"#-gateway\" class=\"headerlink\" title=\" gateway\"></a><em> gateway</em></h3><p></p>\n<p> TCP&#x2F;IP </p>\n<p><br><br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> TCP&#x2F;IP  HTTP Web </p>\n<h3 id=\"ARP-RARP\"><a href=\"#ARP-RARP\" class=\"headerlink\" title=\"ARP&#x2F;RARP\"></a>ARP&#x2F;RARP</h3><p><code>ARP </code>Address Resolution Protocol IP  MAC </p>\n<p> IP <br> IP  ARP <br> IP  ARP  ARP </p>\n<p>ARP <br> ARP  MAC  ARP MAC <br> MAC  MAC ARP</p>\n<p><code>RARP </code>Reverse Address Resolution Protocol MAC  IP </p>\n<p>RARP  ARP  IP <br> IP  RARP  IP  RARP </p>\n<p>RARP  DHCP </p>\n<h3 id=\"DHCP\"><a href=\"#DHCP\" class=\"headerlink\" title=\"DHCP\"></a>DHCP</h3><p><code>DHCP </code>Dynamic Host Configuration Protocol IP  IP  IP </p>\n<p>DHCP </p>\n<ol>\n<li><em></em><br>DHCP  <code>DHCP Discover</code>  DHCP </li>\n<li><em></em><br> Discover  DHCP  <code>DHCP Offer</code> IP</li>\n<li><em></em><br>DHCP  Offer  <code>DHCP Request</code>  IP </li>\n<li><em></em><br> DHCP  Request  <code>DHCP ACK</code>  IP </li>\n</ol>\n<p>DHCP  IP  DHCP  IP  IP <br></p>\n<p> RARP  DHCP  RARP  IP <br>RARP  RARP <br>DHCP  DHCP </p>\n<p> <code>dig</code>  Linux  DHCP  IP </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dig +short ma5hr00m.top @resolver1.opendns.com</span><br><span class=\"line\"><span class=\"comment\">#  +short </span></span><br></pre></td></tr></table></figure>\n\n<p> <code>OpenDNS</code>  DNS  <code>ma5hr00m.top</code> <br>OpenDNS  IP </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"RIP\"><a href=\"#RIP\" class=\"headerlink\" title=\"RIP\"></a>RIP</h4><p><code>RIP</code>Routing Information Protocol<br>RIP <br>RIP  <em></em> 15 </p>\n<p>RIP  OSPF </p>\n<h4 id=\"OSPF\"><a href=\"#OSPF\" class=\"headerlink\" title=\"OSPF\"></a>OSPF</h4><p><code>OSPF </code>Open Shortest Path First<br>OSPF  SPF OSPF</p>\n<p> OSPF </p>\n<p> OSPF <a href=\"https://blog.csdn.net/weixin_46505636/article/details/128629176\">Ubuntu20.04  FRR  OSPF </a></p>\n<h3 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h3><p> DNS  DNSSEC<a href=\"/posts/network/dnssec\">DNSSEC</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.runoob.com/w3cnote/summary-of-network.html\"> - </a></li>\n<li><a href=\"https://www.jc2182.com/cn/cn-jiaocheng.html\"></a></li>\n<li><a href=\"https://themillergroup.com/differences-hubs-switches-routers/\">Hubs, Switches And Routers Explained</a></li>\n<li><a href=\"https://www.jianshu.com/p/c793a279f698\">OSITCP&#x2F;IP</a></li>\n<li><a href=\"https://www.freecodecamp.org/chinese/news/osi-model-networking-layers/\"> OSI </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/165142303\"></a></li>\n<li><a href=\"https://www.geeksforgeeks.org/tcp-ip-model/?ref=lbp\">TCP&#x2F;IP Model</a></li>\n<li><a href=\"https://blog.csdn.net/tennysonsky/article/details/45564479\"> - CSDN</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/353821843\">IP - </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/498255136\">IP - </a></li>\n<li><a href=\"https://cloud.tencent.com/developer/article/2149791\">127.0.0.1</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/371400090\"></a></li>\n<li><a href=\"https://info.support.huawei.com/info-finder/encyclopedia/zh/ARP.html\"> ARP - </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/265293856\">DHCP  - </a></li>\n<li><a href=\"https://blog.csdn.net/TheCarol/article/details/112106308\">RIP </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/616791347\">OSPFOSPFOSPF</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <em></em><em></em>  <em></em> </p>\n<h3 id=\"-node\"><a href=\"#-node\" class=\"headerlink\" title=\" node\"></a><em> node</em></h3><p></p>\n<h3 id=\"-link\"><a href=\"#-link\" class=\"headerlink\" title=\" link\"></a><em> link</em></h3><p> WiFiA-B(A-BA-C)</p>\n<h3 id=\"-protocol\"><a href=\"#-protocol\" class=\"headerlink\" title=\" protocol\"></a><em> protocol</em></h3><p></p>\n<p>   </p>\n<h3 id=\"-topology\"><a href=\"#-topology\" class=\"headerlink\" title=\" topology\"></a><em> topology</em></h3><p>topology</p>\n<h3 id=\"-duplex\"><a href=\"#-duplex\" class=\"headerlink\" title=\" duplex\"></a><em> duplex</em></h3><p> AB <br></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ISO1978 <em>OSI&#x2F;RM</em>Open System Interconnection&#x2F;Reference Model<br></p>\n<p></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005143909.png\" alt=\"\"></p>\n<h2 id=\"OSI\"><a href=\"#OSI\" class=\"headerlink\" title=\"OSI\"></a>OSI</h2><p> <code>Opne System Interconnection</code>ISO</p>\n<p>OSI  TCP&#x2F;IP </p>\n<p></p>\n<ol>\n<li> <em>Application</em> <br> <br> <em>HTTPTFTPFTPNFSWAISSMTP</em></li>\n<li> <em>Presentation</em> <br> <br> <em>TelentRloginSNMPGopher</em></li>\n<li> <em>Session</em> <br> <br> <em>SMTPDNS</em></li>\n<li> <em>Transport</em> <br> <br> <em>TCPUDP</em></li>\n<li> <em>Network</em> <br> IP <br> <em>IPICMPARPRARPAKPUUCP</em></li>\n<li> <em>Data Link</em> <br> <br> <em>FFDIPDNArpanet</em></li>\n<li> <em>Physical</em> <br> <br> <em>IEEE 802.1AIEEE 802.2</em></li>\n</ol>\n<p></p>\n<h2 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h2><p><em>IP</em>Internet Protocol Address IP </p>\n<p> IP </p>\n<ul>\n<li><em></em><br></li>\n<li><em></em><br> IP  IP </li>\n</ul>\n<p> IP <br> MAC  MAC  MAC </p>\n<h3 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h3><p>IP  <em></em>  5 A B C D  E ABC DE </p>\n<ul>\n<li><em>A </em><br> A  IP  1  3  <code>0</code> 1~127<br> A  16777214  126  A </li>\n<li><em>B </em><br> B  IP  2  2  <code>10</code> 128~191<br> B  65534 </li>\n<li><em>C </em><br> C  IP  3  1  <code>110</code> 192~223<br> C  254 </li>\n<li><em>D </em><br>D  IP  <code>1110</code> Multicast</li>\n<li><em>E </em><br> <code>11110</code> <code>240.0.0.0</code>  <code>255.255.255.254</code><code>255.255.255.255</code> </li>\n</ul>\n<h3 id=\"IPv4-IPv6\"><a href=\"#IPv4-IPv6\" class=\"headerlink\" title=\"IPv4 &amp; IPv6\"></a>IPv4 &amp; IPv6</h3><p><code>IPv4</code>  <code>IPv6</code> </p>\n<p><code>IPv4</code>Internet Protocol Version 4IPv4  32 44,294,967,2962^32<br>IPv4 <br></p>\n<p><em>IPv6</em>Internet Protocol Version 6 <em>IPng</em>IP Next Generation<br>IPv6  IPv4 IP  32  128  IPv6  IPv4  2^128 3.410^38</p>\n<p>IPv6  IP  IPv6 </p>\n<h3 id=\"MAC\"><a href=\"#MAC\" class=\"headerlink\" title=\"MAC\"></a>MAC</h3><p><code>MAC</code>Media Access Control EPROM</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code></code>Broadcast Address IP </p>\n<p><br> TCP&#x2F;IP  255  IP </p>\n<p> <code>10.1.1.0</code> 255.255.255.0 <code>10.1.1.255</code> <code>10.1.1.255</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231005150331.png\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><em></em><br>IP  255  <code>255.255.255.255</code></li>\n<li><em>&#x2F;</em><br>IP  <code>192.168.2.1</code>  <code>192.168.1.0</code> IP  255 <code>192.168.10.0/24</code> <code>192.168.10.255</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Multicast AddressIP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> IP  IPv4  <code>127.0.0.1</code>  <code>127.255.255.254</code></p>\n<p></p>\n<ol>\n<li><em></em><br> ping  <code>127.0.0.1</code></li>\n<li><em></em><br>&#x2F;IP <code>127.0.0.1</code></li>\n<li><em></em><br> telnet IP  IP </li>\n</ol>\n<p> Web 127.0.0.1 <code>http://127.0.0.1:port</code> <code>port</code> </p>\n<p><code>localhost</code><code>127.0.0.1</code></p>\n<ul>\n<li><code>127.0.0.1</code> <code>localhost</code>  IP </li>\n<li><code>localhost</code>  <code>127.0.0.1</code></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>IPIP</p>\n<ul>\n<li>A <code>10.0.0.0</code> ~ <code>10.255.255.255</code> 1.6 </li>\n<li>B <code>172.16.0.0</code> ~ <code>172.31.255.255</code> 100 </li>\n<li>C <code>192.168.0.0</code> ~ <code>192.168.255.255</code> 65000 </li>\n</ul>\n<p>NATIP</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"https://www.zhihu.com/question/21064101\"></a></p>\n<p>Subnet Mask IP  32  4 8  <code>xxx.xxx.xxx.xxx</code> IP </p>\n<p> IP  IP  IP </p>\n<p> Web </p>\n<p> IP  <code>192.168.1.1</code> <code>255.255.255.0</code> IP  <code>192.168.1.0</code>  <code>192.168.1.255</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-hub\"><a href=\"#-hub\" class=\"headerlink\" title=\" hub\"></a><em> hub</em></h3><p><br><br></p>\n<p></p>\n<p></p>\n<h3 id=\"-switch\"><a href=\"#-switch\" class=\"headerlink\" title=\" switch\"></a><em> switch</em></h3><p></p>\n<p> MAC  MAC NIC</p>\n<p><br><br><br> VLAN</p>\n<h3 id=\"-router\"><a href=\"#-router\" class=\"headerlink\" title=\" router\"></a><em> router</em></h3><p><br> OSI  RIPOSPFBGP</p>\n<p> <em></em> <em></em></p>\n<p> IP <br> IP </p>\n<p></p>\n<ul>\n<li> LANWANMAN </li>\n<li></li>\n<li></li>\n<li>VPNNAT </li>\n</ul>\n<p></p>\n<h3 id=\"-bridge\"><a href=\"#-bridge\" class=\"headerlink\" title=\" bridge\"></a><em> bridge</em></h3><p>&#x2F;</p>\n<p> LAN </p>\n<h3 id=\"-gateway\"><a href=\"#-gateway\" class=\"headerlink\" title=\" gateway\"></a><em> gateway</em></h3><p></p>\n<p> TCP&#x2F;IP </p>\n<p><br><br></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> TCP&#x2F;IP  HTTP Web </p>\n<h3 id=\"ARP-RARP\"><a href=\"#ARP-RARP\" class=\"headerlink\" title=\"ARP&#x2F;RARP\"></a>ARP&#x2F;RARP</h3><p><code>ARP </code>Address Resolution Protocol IP  MAC </p>\n<p> IP <br> IP  ARP <br> IP  ARP  ARP </p>\n<p>ARP <br> ARP  MAC  ARP MAC <br> MAC  MAC ARP</p>\n<p><code>RARP </code>Reverse Address Resolution Protocol MAC  IP </p>\n<p>RARP  ARP  IP <br> IP  RARP  IP  RARP </p>\n<p>RARP  DHCP </p>\n<h3 id=\"DHCP\"><a href=\"#DHCP\" class=\"headerlink\" title=\"DHCP\"></a>DHCP</h3><p><code>DHCP </code>Dynamic Host Configuration Protocol IP  IP  IP </p>\n<p>DHCP </p>\n<ol>\n<li><em></em><br>DHCP  <code>DHCP Discover</code>  DHCP </li>\n<li><em></em><br> Discover  DHCP  <code>DHCP Offer</code> IP</li>\n<li><em></em><br>DHCP  Offer  <code>DHCP Request</code>  IP </li>\n<li><em></em><br> DHCP  Request  <code>DHCP ACK</code>  IP </li>\n</ol>\n<p>DHCP  IP  DHCP  IP  IP <br></p>\n<p> RARP  DHCP  RARP  IP <br>RARP  RARP <br>DHCP  DHCP </p>\n<p> <code>dig</code>  Linux  DHCP  IP </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dig +short ma5hr00m.top @resolver1.opendns.com</span><br><span class=\"line\"><span class=\"comment\">#  +short </span></span><br></pre></td></tr></table></figure>\n\n<p> <code>OpenDNS</code>  DNS  <code>ma5hr00m.top</code> <br>OpenDNS  IP </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"RIP\"><a href=\"#RIP\" class=\"headerlink\" title=\"RIP\"></a>RIP</h4><p><code>RIP</code>Routing Information Protocol<br>RIP <br>RIP  <em></em> 15 </p>\n<p>RIP  OSPF </p>\n<h4 id=\"OSPF\"><a href=\"#OSPF\" class=\"headerlink\" title=\"OSPF\"></a>OSPF</h4><p><code>OSPF </code>Open Shortest Path First<br>OSPF  SPF OSPF</p>\n<p> OSPF </p>\n<p> OSPF <a href=\"https://blog.csdn.net/weixin_46505636/article/details/128629176\">Ubuntu20.04  FRR  OSPF </a></p>\n<h3 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h3><p> DNS  DNSSEC<a href=\"/posts/network/dnssec\">DNSSEC</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.runoob.com/w3cnote/summary-of-network.html\"> - </a></li>\n<li><a href=\"https://www.jc2182.com/cn/cn-jiaocheng.html\"></a></li>\n<li><a href=\"https://themillergroup.com/differences-hubs-switches-routers/\">Hubs, Switches And Routers Explained</a></li>\n<li><a href=\"https://www.jianshu.com/p/c793a279f698\">OSITCP&#x2F;IP</a></li>\n<li><a href=\"https://www.freecodecamp.org/chinese/news/osi-model-networking-layers/\"> OSI </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/165142303\"></a></li>\n<li><a href=\"https://www.geeksforgeeks.org/tcp-ip-model/?ref=lbp\">TCP&#x2F;IP Model</a></li>\n<li><a href=\"https://blog.csdn.net/tennysonsky/article/details/45564479\"> - CSDN</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/353821843\">IP - </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/498255136\">IP - </a></li>\n<li><a href=\"https://cloud.tencent.com/developer/article/2149791\">127.0.0.1</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/371400090\"></a></li>\n<li><a href=\"https://info.support.huawei.com/info-finder/encyclopedia/zh/ARP.html\"> ARP - </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/265293856\">DHCP  - </a></li>\n<li><a href=\"https://blog.csdn.net/TheCarol/article/details/112106308\">RIP </a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/616791347\">OSPFOSPFOSPF</a></li>\n</ul>\n"},{"title":"DNSSEC ","date":"2023-12-10T16:00:00.000Z","author":"ma5hr00m","_content":"\nTopic\n\n## DNS\nDNSDomain Name SystemIP\nIP\n\n`ma5hr00m.top`IPDNSIP`101.35.240.239`IP\n\nDNSIPDNSDNS*DNS*IP********IP\n\n\n\n![DNS](https://img.ma5hr00m.top/blog/20231208062310.png)\n\nDNSDNSIPIPV6`20.205.243.166``github.com`\n\n`nslookup xxx.xxx`IP`dnsutils`Debian/Arch`bind-utils`CentOS/RHEL\n\nDNS1983[RFC 882](https://datatracker.ietf.org/doc/html/rfc882)DNS\n\nDNSUDPDNS\n\nDNSDNS`DNS on TLS`DNSDNSSEC\n\n## DNSSEC\nDNSSECDomain Name System Security ExtensionsDNS IETF DNS[RFC 2535](https://tools.ietf.org/html/rfc2535)DNS\n\n## \n### DNS\nDNSSECDNS`AAAAAMXCNAME`DNSDNS\n\n- RRSIG\n- DNSKEY\n- DSDNSKEYHash\n- NSECNSEC3DNS\n- CDNSKEYCDSDS\n\n\n\n### Resource Record Set\nRRSets DNSSEC RRSets\n\nexample.comAAAA\n\n- `a.example.com 300 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7334`\n- `b.example.com 600 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7335`\n- `c.example.com 900 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7336`\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208073028.png\" alt=\"KSK&ZSK\">\n</div>\n\nRRset\n\n### Zone-Singing Key\nZSK\n\nDNSSECZSKZSKRSARRset\n\nDNSSECZSKRRset`RRSIG``DNSKEY`\n\nDNSSEC AAAA`RRSIG`ZSK`DNSKEY`RRsetRRSIGZSK\n\n### Key-Singing Key\nKSK\n\nKSK`DNSKEY`ZSKRRset\nKSKZSK DNSKEY `DNSKEY``RRSIG`KSKDNSKEY\n\nZSKKSK`DNSKEY``DNSKEY`RRset\nKSKZSKKSKKSKZSK\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208115854.png\" alt=\"KSK&ZSK\">\n</div>\n\nKSK\nZSKRRsetKSKZSK\nKSK\n\n### Delegation Signer\nDS\n\nDNSSECDS**KSKHashDSDSKSKDSKSK\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208123822.png\" alt=\"KSK&ZSK\">\n</div>\n\n### \nRRset+ZSK+KSKDSDS\n\n\n\nDSRRsetRRSIGZSK+KSKKSKKSK+ZSK**\n\n\n\n![DNSSECICANN](https://www.cloudflare.com/img/products/official-ceremony-photo.jpg)\n\n### \n*DNS*DNS`RRSIG`KSKZSKDS`RRSIG`\n\n\n\n\n*DNSKEY RRset*`RRSIG`KSKZSKKSKDS\n\n`RSSIG`\n\n[](https://www.youtube.com/watch?v=EOb0Zu3hy2U)4.5h[](https://www.cloudflare.com/zh-cn/dns/dnssec/root-signing-ceremony/)\n\n### KSK\nDNS\nDSDSKSKHash\nKSKDS\nDS\n\nKSKZSKKSKRRsetZSKDSZSKRRset\n\nKSKZSKd\n\n## \n`DNS with DNSSEC``ma5hr00m.top`\n\n1. (.)NS\n2. (.)NS\n3. (.)`.ma5hr00m.top`NS\n4. (.)`ma5hr00m.top`NS\n5. `ma5hr00m.top``ma5hr00m.top`A\n6. `ma5hr00m.top`A`101.35.240.239`\n7. `ma5hr00m.top`A`RRSet``RRSIG``ZSK`\n8. `ma5hr00m.top``ma5hr00m.top``DNSKEY`\n9. `ma5hr00m.top``ZSK``KSK``DNSKEY RRSet``RRSIG`\n10. `KSK``DNSKEY`\n11. `ZSK`A\n12. `DNSKEY RRSIG`KSK`.ma5hr00m.top``ma5hr00m.top`DSDS`RRSIG`\n13. `KSK`DS`RRSIG`\n14. 1213(.)`.ma5hr00m.top`DSDS`RRSIG`\n15. 1213`.ma5hr00m.top`DSDS`RRSIG`\n16. DS`RRSIG`\n17. `101.35.240.239`\n\n`ma5hr00m.top`IP`101.35.240.239`\n\n## DNSSEC\nDNSSEC\n\nDNSSECDNSDNSDNSDNSDNSDNS\n\nDNS*/*DANEDNS-based Authentication of Named EntitieDNSDNSSEC\n\nDNS \nDNSSEC\n\nDNSSEC2010DNSSEC`.org``.com``.net``.edu`2011DNSSEC\nDNSDNSSEC\n\n> DNSSEC[Notable public DNS servicde operators](https://en.wikipedia.org/wiki/Public_recursive_name_server#Notable_public_DNS_service_operators)\n\nDNSSEC 2010  DNSSEC 2011 .org  .com  .net  .edu DNSSEC\n\nDNSSECDNSSECChromeDNSSECFirefoxDNSSEC\n\nDNSSECDNS (DDoS) \n\n## \nDNSSECDNS198008-112013DNSSEC2021DNSSEC 17.4%14%DNSSEC6%\n\n##  \n- [ DNS | DNS ](https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/)by CloudFlare\n- [DNSSEC ](https://www.cloudflare.com/zh-cn/dns/dnssec/how-dnssec-works/)by CloudFlare\n- [4DNS](https://www.wosign.com/News/news_2019032201.htm)by WoTrust\n- [DNS](https://www.cernet.com/hlwjsyj/202009/4606.html)by \n- [DNSSECDNS](https://www.icann.org/zh/system/files/files/octo-006-24jul20-zh.pdf)by ICANN\n- [4](https://herbertgao.com/15/#DNSSEC)by HerbertGao0\n- [DNSSECYesNo](https://www.edu.cn/xxh/zt/tj/202305/t20230518_2408472.shtml)by  ","source":"_posts/dnssec.md","raw":"---\ntitle: DNSSEC \ndate: 2023/12/11\nauthor: ma5hr00m\ncategories:\n- Network\n---\n\nTopic\n\n## DNS\nDNSDomain Name SystemIP\nIP\n\n`ma5hr00m.top`IPDNSIP`101.35.240.239`IP\n\nDNSIPDNSDNS*DNS*IP********IP\n\n\n\n![DNS](https://img.ma5hr00m.top/blog/20231208062310.png)\n\nDNSDNSIPIPV6`20.205.243.166``github.com`\n\n`nslookup xxx.xxx`IP`dnsutils`Debian/Arch`bind-utils`CentOS/RHEL\n\nDNS1983[RFC 882](https://datatracker.ietf.org/doc/html/rfc882)DNS\n\nDNSUDPDNS\n\nDNSDNS`DNS on TLS`DNSDNSSEC\n\n## DNSSEC\nDNSSECDomain Name System Security ExtensionsDNS IETF DNS[RFC 2535](https://tools.ietf.org/html/rfc2535)DNS\n\n## \n### DNS\nDNSSECDNS`AAAAAMXCNAME`DNSDNS\n\n- RRSIG\n- DNSKEY\n- DSDNSKEYHash\n- NSECNSEC3DNS\n- CDNSKEYCDSDS\n\n\n\n### Resource Record Set\nRRSets DNSSEC RRSets\n\nexample.comAAAA\n\n- `a.example.com 300 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7334`\n- `b.example.com 600 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7335`\n- `c.example.com 900 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7336`\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208073028.png\" alt=\"KSK&ZSK\">\n</div>\n\nRRset\n\n### Zone-Singing Key\nZSK\n\nDNSSECZSKZSKRSARRset\n\nDNSSECZSKRRset`RRSIG``DNSKEY`\n\nDNSSEC AAAA`RRSIG`ZSK`DNSKEY`RRsetRRSIGZSK\n\n### Key-Singing Key\nKSK\n\nKSK`DNSKEY`ZSKRRset\nKSKZSK DNSKEY `DNSKEY``RRSIG`KSKDNSKEY\n\nZSKKSK`DNSKEY``DNSKEY`RRset\nKSKZSKKSKKSKZSK\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208115854.png\" alt=\"KSK&ZSK\">\n</div>\n\nKSK\nZSKRRsetKSKZSK\nKSK\n\n### Delegation Signer\nDS\n\nDNSSECDS**KSKHashDSDSKSKDSKSK\n\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208123822.png\" alt=\"KSK&ZSK\">\n</div>\n\n### \nRRset+ZSK+KSKDSDS\n\n\n\nDSRRsetRRSIGZSK+KSKKSKKSK+ZSK**\n\n\n\n![DNSSECICANN](https://www.cloudflare.com/img/products/official-ceremony-photo.jpg)\n\n### \n*DNS*DNS`RRSIG`KSKZSKDS`RRSIG`\n\n\n\n\n*DNSKEY RRset*`RRSIG`KSKZSKKSKDS\n\n`RSSIG`\n\n[](https://www.youtube.com/watch?v=EOb0Zu3hy2U)4.5h[](https://www.cloudflare.com/zh-cn/dns/dnssec/root-signing-ceremony/)\n\n### KSK\nDNS\nDSDSKSKHash\nKSKDS\nDS\n\nKSKZSKKSKRRsetZSKDSZSKRRset\n\nKSKZSKd\n\n## \n`DNS with DNSSEC``ma5hr00m.top`\n\n1. (.)NS\n2. (.)NS\n3. (.)`.ma5hr00m.top`NS\n4. (.)`ma5hr00m.top`NS\n5. `ma5hr00m.top``ma5hr00m.top`A\n6. `ma5hr00m.top`A`101.35.240.239`\n7. `ma5hr00m.top`A`RRSet``RRSIG``ZSK`\n8. `ma5hr00m.top``ma5hr00m.top``DNSKEY`\n9. `ma5hr00m.top``ZSK``KSK``DNSKEY RRSet``RRSIG`\n10. `KSK``DNSKEY`\n11. `ZSK`A\n12. `DNSKEY RRSIG`KSK`.ma5hr00m.top``ma5hr00m.top`DSDS`RRSIG`\n13. `KSK`DS`RRSIG`\n14. 1213(.)`.ma5hr00m.top`DSDS`RRSIG`\n15. 1213`.ma5hr00m.top`DSDS`RRSIG`\n16. DS`RRSIG`\n17. `101.35.240.239`\n\n`ma5hr00m.top`IP`101.35.240.239`\n\n## DNSSEC\nDNSSEC\n\nDNSSECDNSDNSDNSDNSDNSDNS\n\nDNS*/*DANEDNS-based Authentication of Named EntitieDNSDNSSEC\n\nDNS \nDNSSEC\n\nDNSSEC2010DNSSEC`.org``.com``.net``.edu`2011DNSSEC\nDNSDNSSEC\n\n> DNSSEC[Notable public DNS servicde operators](https://en.wikipedia.org/wiki/Public_recursive_name_server#Notable_public_DNS_service_operators)\n\nDNSSEC 2010  DNSSEC 2011 .org  .com  .net  .edu DNSSEC\n\nDNSSECDNSSECChromeDNSSECFirefoxDNSSEC\n\nDNSSECDNS (DDoS) \n\n## \nDNSSECDNS198008-112013DNSSEC2021DNSSEC 17.4%14%DNSSEC6%\n\n##  \n- [ DNS | DNS ](https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/)by CloudFlare\n- [DNSSEC ](https://www.cloudflare.com/zh-cn/dns/dnssec/how-dnssec-works/)by CloudFlare\n- [4DNS](https://www.wosign.com/News/news_2019032201.htm)by WoTrust\n- [DNS](https://www.cernet.com/hlwjsyj/202009/4606.html)by \n- [DNSSECDNS](https://www.icann.org/zh/system/files/files/octo-006-24jul20-zh.pdf)by ICANN\n- [4](https://herbertgao.com/15/#DNSSEC)by HerbertGao0\n- [DNSSECYesNo](https://www.edu.cn/xxh/zt/tj/202305/t20230518_2408472.shtml)by  ","slug":"dnssec","published":1,"updated":"2024-06-09T12:55:30.968Z","comments":1,"layout":"post","photos":[],"_id":"clxhruaoy0007f4ly3u18dhkk","content":"<p>Topic</p>\n<h2 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h2><p>DNSDomain Name SystemIP<br>IP</p>\n<p><code>ma5hr00m.top</code>IPDNSIP<code>101.35.240.239</code>IP</p>\n<p>DNSIPDNSDNS<em>DNS</em>IP<em></em><em></em><em></em><em></em>IP</p>\n<p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20231208062310.png\" alt=\"DNS\"></p>\n<p>DNSDNSIPIPV6<code>20.205.243.166</code><code>github.com</code></p>\n<p><code>nslookup xxx.xxx</code>IP<code>dnsutils</code>Debian&#x2F;Arch<code>bind-utils</code>CentOS&#x2F;RHEL</p>\n<p>DNS1983<a href=\"https://datatracker.ietf.org/doc/html/rfc882\">RFC 882</a>DNS</p>\n<p>DNSUDPDNS</p>\n<p>DNSDNS<code>DNS on TLS</code>DNSDNSSEC</p>\n<h2 id=\"DNSSEC\"><a href=\"#DNSSEC\" class=\"headerlink\" title=\"DNSSEC\"></a>DNSSEC</h2><p>DNSSECDomain Name System Security ExtensionsDNS IETF DNS<a href=\"https://tools.ietf.org/html/rfc2535\">RFC 2535</a>DNS</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h3><p>DNSSECDNS<code>AAAAAMXCNAME</code>DNSDNS</p>\n<ul>\n<li>RRSIG</li>\n<li>DNSKEY</li>\n<li>DSDNSKEYHash</li>\n<li>NSECNSEC3DNS</li>\n<li>CDNSKEYCDSDS</li>\n</ul>\n<p></p>\n<h3 id=\"Resource-Record-Set\"><a href=\"#Resource-Record-Set\" class=\"headerlink\" title=\"Resource Record Set\"></a>Resource Record Set</h3><p>RRSets DNSSEC RRSets</p>\n<p>example.comAAAA</p>\n<ul>\n<li><code>a.example.com 300 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7334</code></li>\n<li><code>b.example.com 600 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7335</code></li>\n<li><code>c.example.com 900 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7336</code></li>\n</ul>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208073028.png\" alt=\"KSK&ZSK\">\n</div>\n\n<p>RRset</p>\n<h3 id=\"Zone-Singing-Key\"><a href=\"#Zone-Singing-Key\" class=\"headerlink\" title=\"Zone-Singing Key\"></a>Zone-Singing Key</h3><p>ZSK</p>\n<p>DNSSECZSKZSKRSARRset</p>\n<p>DNSSECZSKRRset<code>RRSIG</code><code>DNSKEY</code></p>\n<p>DNSSEC AAAA<code>RRSIG</code>ZSK<code>DNSKEY</code>RRsetRRSIGZSK</p>\n<h3 id=\"Key-Singing-Key\"><a href=\"#Key-Singing-Key\" class=\"headerlink\" title=\"Key-Singing Key\"></a>Key-Singing Key</h3><p>KSK</p>\n<p>KSK<code>DNSKEY</code>ZSKRRset<br>KSKZSK DNSKEY <code>DNSKEY</code><code>RRSIG</code>KSKDNSKEY</p>\n<p>ZSKKSK<code>DNSKEY</code><code>DNSKEY</code>RRset<br>KSKZSKKSKKSKZSK</p>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208115854.png\" alt=\"KSK&ZSK\">\n</div>\n\n<p>KSK<br>ZSKRRsetKSKZSK<br>KSK</p>\n<h3 id=\"Delegation-Signer\"><a href=\"#Delegation-Signer\" class=\"headerlink\" title=\"Delegation Signer\"></a>Delegation Signer</h3><p>DS</p>\n<p>DNSSECDS<em></em>KSKHashDSDSKSKDSKSK</p>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208123822.png\" alt=\"KSK&ZSK\">\n</div>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>RRset+ZSK+KSKDSDS</p>\n<p></p>\n<p>DSRRsetRRSIGZSK+KSKKSKKSK+ZSK<em></em></p>\n<p></p>\n<p><img src=\"https://www.cloudflare.com/img/products/official-ceremony-photo.jpg\" alt=\"DNSSECICANN\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><em>DNS</em>DNS<code>RRSIG</code>KSKZSKDS<code>RRSIG</code></p>\n<p><br></p>\n<p><em>DNSKEY RRset</em><code>RRSIG</code>KSKZSKKSKDS</p>\n<p><code>RSSIG</code></p>\n<p><a href=\"https://www.youtube.com/watch?v=EOb0Zu3hy2U\"></a>4.5h<a href=\"https://www.cloudflare.com/zh-cn/dns/dnssec/root-signing-ceremony/\"></a></p>\n<h3 id=\"KSK\"><a href=\"#KSK\" class=\"headerlink\" title=\"KSK\"></a>KSK</h3><p>DNS<br>DSDSKSKHash<br>KSKDS<br>DS</p>\n<p>KSKZSKKSKRRsetZSKDSZSKRRset</p>\n<p>KSKZSKd</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>DNS with DNSSEC</code><code>ma5hr00m.top</code></p>\n<ol>\n<li>(.)NS</li>\n<li>(.)NS</li>\n<li>(.)<code>.ma5hr00m.top</code>NS</li>\n<li>(.)<code>ma5hr00m.top</code>NS</li>\n<li><code>ma5hr00m.top</code><code>ma5hr00m.top</code>A</li>\n<li><code>ma5hr00m.top</code>A<code>101.35.240.239</code></li>\n<li><code>ma5hr00m.top</code>A<code>RRSet</code><code>RRSIG</code><code>ZSK</code></li>\n<li><code>ma5hr00m.top</code><code>ma5hr00m.top</code><code>DNSKEY</code></li>\n<li><code>ma5hr00m.top</code><code>ZSK</code><code>KSK</code><code>DNSKEY RRSet</code><code>RRSIG</code></li>\n<li><code>KSK</code><code>DNSKEY</code></li>\n<li><code>ZSK</code>A</li>\n<li><code>DNSKEY RRSIG</code>KSK<code>.ma5hr00m.top</code><code>ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li><code>KSK</code>DS<code>RRSIG</code></li>\n<li>1213(.)<code>.ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li>1213<code>.ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li>DS<code>RRSIG</code></li>\n<li><code>101.35.240.239</code></li>\n</ol>\n<p><code>ma5hr00m.top</code>IP<code>101.35.240.239</code></p>\n<h2 id=\"DNSSEC\"><a href=\"#DNSSEC\" class=\"headerlink\" title=\"DNSSEC\"></a>DNSSEC</h2><p>DNSSEC</p>\n<p>DNSSECDNSDNSDNSDNSDNSDNS</p>\n<p>DNS<em>&#x2F;</em>DANEDNS-based Authentication of Named EntitieDNSDNSSEC</p>\n<p>DNS <br>DNSSEC</p>\n<p>DNSSEC2010DNSSEC<code>.org</code><code>.com</code><code>.net</code><code>.edu</code>2011DNSSEC<br>DNSDNSSEC</p>\n<blockquote>\n<p>DNSSEC<a href=\"https://en.wikipedia.org/wiki/Public_recursive_name_server#Notable_public_DNS_service_operators\">Notable public DNS servicde operators</a></p>\n</blockquote>\n<p>DNSSEC 2010  DNSSEC 2011 .org  .com  .net  .edu DNSSEC</p>\n<p>DNSSECDNSSECChromeDNSSECFirefoxDNSSEC</p>\n<p>DNSSECDNS (DDoS) </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DNSSECDNS198008-112013DNSSEC2021DNSSEC 17.4%14%DNSSEC6%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/\"> DNS | DNS </a>by CloudFlare</li>\n<li><a href=\"https://www.cloudflare.com/zh-cn/dns/dnssec/how-dnssec-works/\">DNSSEC </a>by CloudFlare</li>\n<li><a href=\"https://www.wosign.com/News/news_2019032201.htm\">4DNS</a>by WoTrust</li>\n<li><a href=\"https://www.cernet.com/hlwjsyj/202009/4606.html\">DNS</a>by </li>\n<li><a href=\"https://www.icann.org/zh/system/files/files/octo-006-24jul20-zh.pdf\">DNSSECDNS</a>by ICANN</li>\n<li><a href=\"https://herbertgao.com/15/#DNSSEC\">4</a>by HerbertGao0</li>\n<li><a href=\"https://www.edu.cn/xxh/zt/tj/202305/t20230518_2408472.shtml\">DNSSECYesNo</a>by </li>\n</ul>\n","excerpt":"","more":"<p>Topic</p>\n<h2 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h2><p>DNSDomain Name SystemIP<br>IP</p>\n<p><code>ma5hr00m.top</code>IPDNSIP<code>101.35.240.239</code>IP</p>\n<p>DNSIPDNSDNS<em>DNS</em>IP<em></em><em></em><em></em><em></em>IP</p>\n<p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20231208062310.png\" alt=\"DNS\"></p>\n<p>DNSDNSIPIPV6<code>20.205.243.166</code><code>github.com</code></p>\n<p><code>nslookup xxx.xxx</code>IP<code>dnsutils</code>Debian&#x2F;Arch<code>bind-utils</code>CentOS&#x2F;RHEL</p>\n<p>DNS1983<a href=\"https://datatracker.ietf.org/doc/html/rfc882\">RFC 882</a>DNS</p>\n<p>DNSUDPDNS</p>\n<p>DNSDNS<code>DNS on TLS</code>DNSDNSSEC</p>\n<h2 id=\"DNSSEC\"><a href=\"#DNSSEC\" class=\"headerlink\" title=\"DNSSEC\"></a>DNSSEC</h2><p>DNSSECDomain Name System Security ExtensionsDNS IETF DNS<a href=\"https://tools.ietf.org/html/rfc2535\">RFC 2535</a>DNS</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h3><p>DNSSECDNS<code>AAAAAMXCNAME</code>DNSDNS</p>\n<ul>\n<li>RRSIG</li>\n<li>DNSKEY</li>\n<li>DSDNSKEYHash</li>\n<li>NSECNSEC3DNS</li>\n<li>CDNSKEYCDSDS</li>\n</ul>\n<p></p>\n<h3 id=\"Resource-Record-Set\"><a href=\"#Resource-Record-Set\" class=\"headerlink\" title=\"Resource Record Set\"></a>Resource Record Set</h3><p>RRSets DNSSEC RRSets</p>\n<p>example.comAAAA</p>\n<ul>\n<li><code>a.example.com 300 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7334</code></li>\n<li><code>b.example.com 600 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7335</code></li>\n<li><code>c.example.com 900 IN AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7336</code></li>\n</ul>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208073028.png\" alt=\"KSK&ZSK\">\n</div>\n\n<p>RRset</p>\n<h3 id=\"Zone-Singing-Key\"><a href=\"#Zone-Singing-Key\" class=\"headerlink\" title=\"Zone-Singing Key\"></a>Zone-Singing Key</h3><p>ZSK</p>\n<p>DNSSECZSKZSKRSARRset</p>\n<p>DNSSECZSKRRset<code>RRSIG</code><code>DNSKEY</code></p>\n<p>DNSSEC AAAA<code>RRSIG</code>ZSK<code>DNSKEY</code>RRsetRRSIGZSK</p>\n<h3 id=\"Key-Singing-Key\"><a href=\"#Key-Singing-Key\" class=\"headerlink\" title=\"Key-Singing Key\"></a>Key-Singing Key</h3><p>KSK</p>\n<p>KSK<code>DNSKEY</code>ZSKRRset<br>KSKZSK DNSKEY <code>DNSKEY</code><code>RRSIG</code>KSKDNSKEY</p>\n<p>ZSKKSK<code>DNSKEY</code><code>DNSKEY</code>RRset<br>KSKZSKKSKKSKZSK</p>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208115854.png\" alt=\"KSK&ZSK\">\n</div>\n\n<p>KSK<br>ZSKRRsetKSKZSK<br>KSK</p>\n<h3 id=\"Delegation-Signer\"><a href=\"#Delegation-Signer\" class=\"headerlink\" title=\"Delegation Signer\"></a>Delegation Signer</h3><p>DS</p>\n<p>DNSSECDS<em></em>KSKHashDSDSKSKDSKSK</p>\n<div align=\"center\">\n  <img style=\"width:100%;\" src=\"https://img.ma5hr00m.top/blog/20231208123822.png\" alt=\"KSK&ZSK\">\n</div>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>RRset+ZSK+KSKDSDS</p>\n<p></p>\n<p>DSRRsetRRSIGZSK+KSKKSKKSK+ZSK<em></em></p>\n<p></p>\n<p><img src=\"https://www.cloudflare.com/img/products/official-ceremony-photo.jpg\" alt=\"DNSSECICANN\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><em>DNS</em>DNS<code>RRSIG</code>KSKZSKDS<code>RRSIG</code></p>\n<p><br></p>\n<p><em>DNSKEY RRset</em><code>RRSIG</code>KSKZSKKSKDS</p>\n<p><code>RSSIG</code></p>\n<p><a href=\"https://www.youtube.com/watch?v=EOb0Zu3hy2U\"></a>4.5h<a href=\"https://www.cloudflare.com/zh-cn/dns/dnssec/root-signing-ceremony/\"></a></p>\n<h3 id=\"KSK\"><a href=\"#KSK\" class=\"headerlink\" title=\"KSK\"></a>KSK</h3><p>DNS<br>DSDSKSKHash<br>KSKDS<br>DS</p>\n<p>KSKZSKKSKRRsetZSKDSZSKRRset</p>\n<p>KSKZSKd</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>DNS with DNSSEC</code><code>ma5hr00m.top</code></p>\n<ol>\n<li>(.)NS</li>\n<li>(.)NS</li>\n<li>(.)<code>.ma5hr00m.top</code>NS</li>\n<li>(.)<code>ma5hr00m.top</code>NS</li>\n<li><code>ma5hr00m.top</code><code>ma5hr00m.top</code>A</li>\n<li><code>ma5hr00m.top</code>A<code>101.35.240.239</code></li>\n<li><code>ma5hr00m.top</code>A<code>RRSet</code><code>RRSIG</code><code>ZSK</code></li>\n<li><code>ma5hr00m.top</code><code>ma5hr00m.top</code><code>DNSKEY</code></li>\n<li><code>ma5hr00m.top</code><code>ZSK</code><code>KSK</code><code>DNSKEY RRSet</code><code>RRSIG</code></li>\n<li><code>KSK</code><code>DNSKEY</code></li>\n<li><code>ZSK</code>A</li>\n<li><code>DNSKEY RRSIG</code>KSK<code>.ma5hr00m.top</code><code>ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li><code>KSK</code>DS<code>RRSIG</code></li>\n<li>1213(.)<code>.ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li>1213<code>.ma5hr00m.top</code>DSDS<code>RRSIG</code></li>\n<li>DS<code>RRSIG</code></li>\n<li><code>101.35.240.239</code></li>\n</ol>\n<p><code>ma5hr00m.top</code>IP<code>101.35.240.239</code></p>\n<h2 id=\"DNSSEC\"><a href=\"#DNSSEC\" class=\"headerlink\" title=\"DNSSEC\"></a>DNSSEC</h2><p>DNSSEC</p>\n<p>DNSSECDNSDNSDNSDNSDNSDNS</p>\n<p>DNS<em>&#x2F;</em>DANEDNS-based Authentication of Named EntitieDNSDNSSEC</p>\n<p>DNS <br>DNSSEC</p>\n<p>DNSSEC2010DNSSEC<code>.org</code><code>.com</code><code>.net</code><code>.edu</code>2011DNSSEC<br>DNSDNSSEC</p>\n<blockquote>\n<p>DNSSEC<a href=\"https://en.wikipedia.org/wiki/Public_recursive_name_server#Notable_public_DNS_service_operators\">Notable public DNS servicde operators</a></p>\n</blockquote>\n<p>DNSSEC 2010  DNSSEC 2011 .org  .com  .net  .edu DNSSEC</p>\n<p>DNSSECDNSSECChromeDNSSECFirefoxDNSSEC</p>\n<p>DNSSECDNS (DDoS) </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DNSSECDNS198008-112013DNSSEC2021DNSSEC 17.4%14%DNSSEC6%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.cloudflare.com/zh-cn/learning/dns/what-is-dns/\"> DNS | DNS </a>by CloudFlare</li>\n<li><a href=\"https://www.cloudflare.com/zh-cn/dns/dnssec/how-dnssec-works/\">DNSSEC </a>by CloudFlare</li>\n<li><a href=\"https://www.wosign.com/News/news_2019032201.htm\">4DNS</a>by WoTrust</li>\n<li><a href=\"https://www.cernet.com/hlwjsyj/202009/4606.html\">DNS</a>by </li>\n<li><a href=\"https://www.icann.org/zh/system/files/files/octo-006-24jul20-zh.pdf\">DNSSECDNS</a>by ICANN</li>\n<li><a href=\"https://herbertgao.com/15/#DNSSEC\">4</a>by HerbertGao0</li>\n<li><a href=\"https://www.edu.cn/xxh/zt/tj/202305/t20230518_2408472.shtml\">DNSSECYesNo</a>by </li>\n</ul>\n"},{"title":" Docker ","date":"2023-05-01T16:00:00.000Z","author":"ma5hr00m","_content":"\n## \n*Docker* *container*\n\ndocker  dotCloud  GitHub Go  Apache2.0  Docker dotCloud  2013  Docker\n\n## \n docker docker\n\n\n\n\n docker \n\ndocker \n-  docker \n-  docker \n-   *docker engine*\n\n##  Docker\n>  ubuntu22.04 \n\n HTTPS \n\n```bash\nsudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common\n```\n\n docker  apt \n```bash\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n docker  Ubuntu \n```bash\nsudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\n```\n\n docker  ubuntu Docker CEDocker CLI  containerd.io\n```bash\nsudo apt update && sudo apt install docker-ce docker-ce-cli containerd.io\n```\n\n docker \n```bash\nsudo systemctl status docker\n```\n\n docker \n```bash\nsudo systemctl enable docker\n```\n\n docker \n```bash\nsudo systemctl disable docker\n```\n\n docker \n```bash\nsudo systemctl restart docker\n```\n\n root  docker  docker  docker \n```bash\nsudo usermod -aG docker $USER\n```\n\n\n\n```bash\ndocker container run hello-world\n\n#  docker \n# Hello from Docker!\n# This message shows that your installation appears to be working correctly.\n```\n\n docker\n\n docker \n```bash\ndocker container stop $(docker container ls -aq)\ndocker system prune -a --volumes\n```\n\n apt  docker \n```bash\nsudo apt purge docker-ce && sudo apt autoremove\n```\n\n##  Docker Compose\n`docker compose`  Docker \n\n\n```bash\nsudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n docker-compose \n```bash\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n\n```bash\ndocker-compose --version\n```\n\n## docker \ndocker  `/etc/docker/daemon.json` \n```bash\nsudo vim /etc/docker/daemon.json\n```\n\n\n```json\n{\n  \"registry-mirrors\": [\"https://docker.m.daocloud.io/\"]\n}\n```\n\n docker \n\n> [Docker Hub ](https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6)\n\n##  Portainer\n docker \n\n\n`Portainer`  docker docker \n![Portainer](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230924232212.png)\n\n portainer  portainer \n\n```bash\nsudo docker pull portainer/portainer-ce\n```\n\n `portainer/portainer-ce`  9000 \n\n```bash\nsudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /dockerData/portainer:/data --restart=always --name portainer portainer/portainer\n```\n\n [localhost:9000](http://localhost:9000)  portainer \n\n## \n- [Docker - ](https://yeasy.gitbook.io/docker_practice/introduction/why)\n- [Docker ](https://www.runoob.com/docker/docker-command-manual.html)\n- [Portainer - github](https://github.com/portainer/portainer)","source":"_posts/docker-base.md","raw":"---\ntitle:  Docker \ndate: 2023/05/02\nauthor: ma5hr00m\ncategories:\n- Docker\n---\n\n## \n*Docker* *container*\n\ndocker  dotCloud  GitHub Go  Apache2.0  Docker dotCloud  2013  Docker\n\n## \n docker docker\n\n\n\n\n docker \n\ndocker \n-  docker \n-  docker \n-   *docker engine*\n\n##  Docker\n>  ubuntu22.04 \n\n HTTPS \n\n```bash\nsudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common\n```\n\n docker  apt \n```bash\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n docker  Ubuntu \n```bash\nsudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\n```\n\n docker  ubuntu Docker CEDocker CLI  containerd.io\n```bash\nsudo apt update && sudo apt install docker-ce docker-ce-cli containerd.io\n```\n\n docker \n```bash\nsudo systemctl status docker\n```\n\n docker \n```bash\nsudo systemctl enable docker\n```\n\n docker \n```bash\nsudo systemctl disable docker\n```\n\n docker \n```bash\nsudo systemctl restart docker\n```\n\n root  docker  docker  docker \n```bash\nsudo usermod -aG docker $USER\n```\n\n\n\n```bash\ndocker container run hello-world\n\n#  docker \n# Hello from Docker!\n# This message shows that your installation appears to be working correctly.\n```\n\n docker\n\n docker \n```bash\ndocker container stop $(docker container ls -aq)\ndocker system prune -a --volumes\n```\n\n apt  docker \n```bash\nsudo apt purge docker-ce && sudo apt autoremove\n```\n\n##  Docker Compose\n`docker compose`  Docker \n\n\n```bash\nsudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n docker-compose \n```bash\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n\n```bash\ndocker-compose --version\n```\n\n## docker \ndocker  `/etc/docker/daemon.json` \n```bash\nsudo vim /etc/docker/daemon.json\n```\n\n\n```json\n{\n  \"registry-mirrors\": [\"https://docker.m.daocloud.io/\"]\n}\n```\n\n docker \n\n> [Docker Hub ](https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6)\n\n##  Portainer\n docker \n\n\n`Portainer`  docker docker \n![Portainer](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230924232212.png)\n\n portainer  portainer \n\n```bash\nsudo docker pull portainer/portainer-ce\n```\n\n `portainer/portainer-ce`  9000 \n\n```bash\nsudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /dockerData/portainer:/data --restart=always --name portainer portainer/portainer\n```\n\n [localhost:9000](http://localhost:9000)  portainer \n\n## \n- [Docker - ](https://yeasy.gitbook.io/docker_practice/introduction/why)\n- [Docker ](https://www.runoob.com/docker/docker-command-manual.html)\n- [Portainer - github](https://github.com/portainer/portainer)","slug":"docker-base","published":1,"updated":"2024-06-09T12:56:17.808Z","comments":1,"layout":"post","photos":[],"_id":"clxhruaoy0008f4ly09zx4dr8","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Docker</em> <em>container</em></p>\n<p>docker  dotCloud  GitHub Go  Apache2.0  Docker dotCloud  2013  Docker</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> docker docker</p>\n<p></p>\n<p><br> docker </p>\n<p>docker </p>\n<ul>\n<li> docker </li>\n<li> docker </li>\n<li>  <em>docker engine</em></li>\n</ul>\n<h2 id=\"-Docker\"><a href=\"#-Docker\" class=\"headerlink\" title=\" Docker\"></a> Docker</h2><blockquote>\n<p> ubuntu22.04 </p>\n</blockquote>\n<p> HTTPS </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</span><br></pre></td></tr></table></figure>\n\n<p> docker  apt </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>\n\n<p> docker  Ubuntu </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository <span class=\"string\">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> docker  ubuntu Docker CEDocker CLI  containerd.io</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt update &amp;&amp; sudo apt install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">disable</span> docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<p> root  docker  docker  docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG docker <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker container run hello-world</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  docker </span></span><br><span class=\"line\"><span class=\"comment\"># Hello from Docker!</span></span><br><span class=\"line\"><span class=\"comment\"># This message shows that your installation appears to be working correctly.</span></span><br></pre></td></tr></table></figure>\n\n<p> docker</p>\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker container stop $(docker container <span class=\"built_in\">ls</span> -aq)</span><br><span class=\"line\">docker system prune -a --volumes</span><br></pre></td></tr></table></figure>\n\n<p> apt  docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt purge docker-ce &amp;&amp; sudo apt autoremove</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-Docker-Compose\"><a href=\"#-Docker-Compose\" class=\"headerlink\" title=\" Docker Compose\"></a> Docker Compose</h2><p><code>docker compose</code>  Docker </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L <span class=\"string\">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-<span class=\"subst\">$(uname -s)</span>-<span class=\"subst\">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p> docker-compose </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"docker-\"><a href=\"#docker-\" class=\"headerlink\" title=\"docker \"></a>docker </h2><p>docker  <code>/etc/docker/daemon.json</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;https://docker.m.daocloud.io/&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<blockquote>\n<p><a href=\"https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6\">Docker Hub </a></p>\n</blockquote>\n<h2 id=\"-Portainer\"><a href=\"#-Portainer\" class=\"headerlink\" title=\" Portainer\"></a> Portainer</h2><p> docker <br></p>\n<p><code>Portainer</code>  docker docker <br><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230924232212.png\" alt=\"Portainer\"></p>\n<p> portainer  portainer </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker pull portainer/portainer-ce</span><br></pre></td></tr></table></figure>\n\n<p> <code>portainer/portainer-ce</code>  9000 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /dockerData/portainer:/data --restart=always --name portainer portainer/portainer</span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"http://localhost:9000/\">localhost:9000</a>  portainer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://yeasy.gitbook.io/docker_practice/introduction/why\">Docker - </a></li>\n<li><a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker </a></li>\n<li><a href=\"https://github.com/portainer/portainer\">Portainer - github</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Docker</em> <em>container</em></p>\n<p>docker  dotCloud  GitHub Go  Apache2.0  Docker dotCloud  2013  Docker</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> docker docker</p>\n<p></p>\n<p><br> docker </p>\n<p>docker </p>\n<ul>\n<li> docker </li>\n<li> docker </li>\n<li>  <em>docker engine</em></li>\n</ul>\n<h2 id=\"-Docker\"><a href=\"#-Docker\" class=\"headerlink\" title=\" Docker\"></a> Docker</h2><blockquote>\n<p> ubuntu22.04 </p>\n</blockquote>\n<p> HTTPS </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</span><br></pre></td></tr></table></figure>\n\n<p> docker  apt </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>\n\n<p> docker  Ubuntu </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository <span class=\"string\">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> docker  ubuntu Docker CEDocker CLI  containerd.io</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt update &amp;&amp; sudo apt install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">disable</span> docker</span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<p> root  docker  docker  docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG docker <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker container run hello-world</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  docker </span></span><br><span class=\"line\"><span class=\"comment\"># Hello from Docker!</span></span><br><span class=\"line\"><span class=\"comment\"># This message shows that your installation appears to be working correctly.</span></span><br></pre></td></tr></table></figure>\n\n<p> docker</p>\n<p> docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker container stop $(docker container <span class=\"built_in\">ls</span> -aq)</span><br><span class=\"line\">docker system prune -a --volumes</span><br></pre></td></tr></table></figure>\n\n<p> apt  docker </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt purge docker-ce &amp;&amp; sudo apt autoremove</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"-Docker-Compose\"><a href=\"#-Docker-Compose\" class=\"headerlink\" title=\" Docker Compose\"></a> Docker Compose</h2><p><code>docker compose</code>  Docker </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L <span class=\"string\">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-<span class=\"subst\">$(uname -s)</span>-<span class=\"subst\">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p> docker-compose </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"docker-\"><a href=\"#docker-\" class=\"headerlink\" title=\"docker \"></a>docker </h2><p>docker  <code>/etc/docker/daemon.json</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;https://docker.m.daocloud.io/&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p> docker </p>\n<blockquote>\n<p><a href=\"https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6\">Docker Hub </a></p>\n</blockquote>\n<h2 id=\"-Portainer\"><a href=\"#-Portainer\" class=\"headerlink\" title=\" Portainer\"></a> Portainer</h2><p> docker <br></p>\n<p><code>Portainer</code>  docker docker <br><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230924232212.png\" alt=\"Portainer\"></p>\n<p> portainer  portainer </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker pull portainer/portainer-ce</span><br></pre></td></tr></table></figure>\n\n<p> <code>portainer/portainer-ce</code>  9000 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /dockerData/portainer:/data --restart=always --name portainer portainer/portainer</span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"http://localhost:9000/\">localhost:9000</a>  portainer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://yeasy.gitbook.io/docker_practice/introduction/why\">Docker - </a></li>\n<li><a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker </a></li>\n<li><a href=\"https://github.com/portainer/portainer\">Portainer - github</a></li>\n</ul>\n"},{"title":"FRP v0.1.0 ","date":"2024-06-14T16:00:00.000Z","author":"ma5hr00m","_content":"\n\nfrp  Web  [Sakura FRP](https://www.natfrp.com/) \n\n## v0.1.0 \n\nv0.1.0  1079 \n\n```bash\nPROJECT:\nfrp\n    conf\n    Godeps       \n    src\n        frp\n            cmd\n              frpc\n              frps\n            models\n              client |  & \n              consts\n              msg | /\n              server |  & \n            utils\n                broadcast | \n                conn |  & /\n                log | \n                pcrypto\n```\n\n Godeps go  `go mod`  GitHub  archive \n\n Go  `/Godeps/Godeps.json` \n\n```bash\n{\n\t\"ImportPath\": \"frp\",\n\t\"GoVersion\": \"go1.4\",\n\t\"Packages\": [\n\t\t\"./...\"\n\t],\n\t\"Deps\": [\n\t\t{\n\t\t\t\"ImportPath\": \"github.com/astaxie/beego/logs\",\n\t\t\t\"Comment\": \"v1.5.0-9-gfb7314f\",\n\t\t\t\"Rev\": \"fb7314f8ac86b83ccd34386518d97cf2363e2ae5\"\n\t\t},\n\t\t{\n\t\t\t\"ImportPath\": \"github.com/vaughan0/go-ini\",\n\t\t\t\"Rev\": \"a98ad7ee00ec53921f08832bc06ecf7fd600e6a1\"\n\t\t}\n\t]\n}\n```\n\nfrp frpcfrps\n\n### frps\n\n\n\n```ini\n[common]\nbind_addr = 0.0.0.0\nbind_port = 7000\nlog_file = ./frps.log\n# debug, info, warn, error\nlog_level = debug\n# file, console\nlog_way = console \n\n[test1]\npasswd = 123\nbind_addr = 0.0.0.0\nlisten_port = 6000\n```\n\n `src/frp/cmd/frps/main.go`\n\n```go\nfunc main() {\n\terr := server.LoadConf(\"./frps.ini\")\n\t// ... ...\n\t\n\tlog.InitLog(server.LogWay, server.LogFile, server.LogLevel)\n\t\n\tl, err := conn.Listen(server.BindAddr, server.BindPort)\n\t// ... ...\n\t\n\tlog.Info(\"Start frps success\")\n\tProcessControlConn(l)\n}\n```\n\n `src/frp/models/server/config.go`  `LoadConf`  server  success  `ProcessControlConn` \n\n `src/frp/models/server/config.go`\n\n `github.com/vaughan0/go-ini` `[common]`  `[common]`  `ProxyServers`  \n\n```go\nvar ProxyServers map[string]*ProxyServer = make(map[string]*ProxyServer)\n\nfunc LoadConf(confFile string) (err error) {\n\t// ... ...\n\tfor name, section := range conf {\n\t\tif name != \"common\" {\n\t\t\tproxyServer := &ProxyServer{}\n\t\t\tproxyServer.Name = name\n\n\t\t\tproxyServer.Passwd, ok = section[\"passwd\"]\n\t\t\tif !ok {\n\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] no passwd found\", proxyServer.Name)\n\t\t\t}\n\n\t\t\tproxyServer.BindAddr, ok = section[\"bind_addr\"]\n\t\t\tif !ok {\n\t\t\t\tproxyServer.BindAddr = \"0.0.0.0\"\n\t\t\t}\n\n\t\t\tportStr, ok := section[\"listen_port\"]\n\t\t\tif ok {\n\t\t\t\tproxyServer.ListenPort, err = strconv.ParseInt(portStr, 10, 64)\n\t\t\t\tif err != nil {\n\t\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] listen_port error\", proxyServer.Name)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] listen_port not found\", proxyServer.Name)\n\t\t\t}\n\n\t\t\tproxyServer.Init()\n\t\t\tProxyServers[proxyServer.Name] = proxyServer\n\t\t}\n\t}\n\t// \n\tif len(ProxyServers) == 0 {\n\t\treturn fmt.Errorf(\"Parse ini file error: no proxy config found\")\n\t}\n\t// ... ...\n}\n```\n\n `github.com/astaxie/beego/logs` \n\n `src/frp/utils/conn/conn.go`\n\n `Listener`  TCP \n\n```go\ntype Listener struct {\n\taddr      net.Addr\n\tl         *net.TCPListener\n\tconns     chan *Conn\n\tcloseFlag bool\n}\n```\n\n`Listen`  TCP  `Listener` \n\n```go\nfunc Listen(bindAddr string, bindPort int64) (l *Listener, err error) {\n\t// TCP tcp4\n\ttcpAddr, err := net.ResolveTCPAddr(\"tcp4\", fmt.Sprintf(\"%s:%d\", bindAddr, bindPort))\n\tif err != nil {\n\t\treturn l, err\n\t}\n\n\t// TCP\n\tlistener, err := net.ListenTCP(\"tcp\", tcpAddr)\n\tif err != nil {\n\t\treturn l, err\n\t}\n\n\t//  Listener \n\tl = &Listener{\n\t\taddr:      listener.Addr(),\n\t\tl:         listener,\n\t\tconns:     make(chan *Conn),\n\t\tcloseFlag: false,\n\t}\n\n\t// \n\tgo func() {\n\t\tfor {\n\t\t\t// TCP\n\t\t\tconn, err := l.l.AcceptTCP()\n\t\t\tif err != nil {\n\t\t\t\t// \n\t\t\t\tif l.closeFlag {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t// \n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t//  Conn  Listener \n\t\t\tc := &Conn{\n\t\t\t\tTcpConn:   conn,\n\t\t\t\tcloseFlag: false,\n\t\t\t}\n\t\t\tc.Reader = bufio.NewReader(c.TcpConn)\n\t\t\tl.conns <- c\n\t\t}\n\t}()\n\treturn l, err\n}\n```\n\n `Listener` `conns` `Listen` \n\n `l`  frp  `l`  `src/frp/cmd/frps/control.go` \n\n`ProcessControlConn`  `l.GetConn()`  `c`  `controlWorker(c)` `l.GetConn()` \n\n `c`  `utils/conn` \n\n```go\ntype Conn struct {\n\tTcpConn   *net.TCPConn\n\tReader    *bufio.Reader\n\tcloseFlag bool\n}\n```\n\n`Conn`  TCP \n\n- `TcpConn` `net.TCPConn`  TCP  TCP \n- `Reader` `bufio.Reader`  `TcpConn`\n- `closeFlag` `true`\n\n `controlWorker(c)` ``\n\n```go\nfunc controlWorker(c *conn.Conn) {\n\t// \n\tres, err := c.ReadLine()\n\tif err != nil {\n\t\tlog.Warn(\"Read error, %v\", err)\n\t\treturn\n\t}\n\n\t// \n\tlog.Debug(\"get: %s\", res)\n\n\t//  ClientCtlReq \n\tclientCtlReq := &msg.ClientCtlReq{}\n\tclientCtlRes := &msg.ClientCtlRes{}\n\tif err := json.Unmarshal([]byte(res), &clientCtlReq); err != nil {\n\t\tlog.Warn(\"Parse err: %v : %s\", err, res)\n\t\treturn\n\t}\n\t\n\t//  \n\tsucc, info, needRes := checkProxy(clientCtlReq, c)\n\tif !succ {\n\t\tclientCtlRes.Code = 1\n\t\tclientCtlRes.Msg = info\n\t}\n\n\tif needRes {\n\t\t// \n\t\tdefer c.Close()\n\t\t\n\t\t// \n\t\tbuf, _ := json.Marshal(clientCtlRes)\n\t\terr = c.Write(string(buf) + \"\\\\n\")\n\t\tif err != nil {\n\t\t\tlog.Warn(\"Write error, %v\", err)\n\t\t\ttime.Sleep(1 * time.Second)\n\t\t\treturn\n\t\t}\n\t} else {\n\t\treturn\n\t}\n\t\n\t// \n\ts, ok := server.ProxyServers[clientCtlReq.ProxyName]\n\tif !ok {\n\t\tlog.Warn(\"ProxyName [%s] is not exist\", clientCtlReq.ProxyName)\n\t\treturn\n\t}\n\t\n\t//  \n\tgo readControlMsgFromClient(s, c)\n\n\t//  ClientCtlReq \n\tserverCtlReq := &msg.ClientCtlReq{}\n\tserverCtlReq.Type = consts.WorkConn\n\t// \n\tfor {\n\t\tcloseFlag := s.WaitUserConn()\n\t\tif closeFlag {\n\t\t\tlog.Debug(\"ProxyName [%s], goroutine for dealing user conn is closed\", s.Name)\n\t\t\tbreak\n\t\t}\n\t\t// \n\t\tbuf, _ := json.Marshal(serverCtlReq)\n\t\terr = c.Write(string(buf) + \"\\\\n\")\n\t\tif err != nil {\n\t\t\tlog.Warn(\"ProxyName [%s], write to client error, proxy exit\", s.Name)\n\t\t\ts.Close()\n\t\t\treturn\n\t\t}\n\n\t\tlog.Debug(\"ProxyName [%s], write to client to add work conn success\", s.Name)\n\t}\n\n\tlog.Info(\"ProxyName [%s], I'm dead!\", s.Name)\n\treturn\n}\n```\n\n\n\n`checkProxy`  `req.Type` \n\n```Go\nfunc checkProxy(req *msg.ClientCtlReq, c *conn.Conn) (succ bool, info string, needRes bool) {\n\tsucc = false    //  false\n\tneedRes = true  // \n\n\t// \n\ts, ok := server.ProxyServers[req.ProxyName]\n\tif !ok {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s] is not exist\", req.ProxyName)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n\t// \n\tif req.Passwd != s.Passwd {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s], password is not correct\", req.ProxyName)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n\t// \n\tif req.Type == consts.CtlConn {\n\t\t// \n\t\tif s.Status != consts.Idle {\n            // \n\t\t\tinfo = fmt.Sprintf(\"ProxyName [%s], already in use\", req.ProxyName)\n\t\t\tlog.Warn(info)\n\t\t\treturn\n\t\t}\n\n\t\t// \n\t\terr := s.Start()\n\t\tif err != nil {\n\t\t\tinfo = fmt.Sprintf(\"ProxyName [%s], start proxy error: %v\", req.ProxyName, err.Error())\n\t\t\tlog.Warn(info)\n\t\t\treturn\n\t\t}\n\n\t\tlog.Info(\"ProxyName [%s], start proxy success\", req.ProxyName)\n\t} else if req.Type == consts.WorkConn {\n\t\t// \n\t\tneedRes = false\n\t\tif s.Status != consts.Working {\n\t\t\tlog.Warn(\"ProxyName [%s], is not working when it gets one new work conn\", req.ProxyName)\n\t\t\treturn\n\t\t}\n\n\t\ts.GetNewCliConn(c) // \n\t} else {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s], type [%d] unsupport\", req.ProxyName, req.Type)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n    //  true\n\tsucc = true\n\treturn\n}\n\n```\n\n\n\n\n\n\n\n`readControlMsgFromClient`  \n\n```go\nfunc readControlMsgFromClient(s *server.ProxyServer, c *conn.Conn) {\n\t// \n\tisContinueRead := true\n\t\n\t// \n\tf := func() {\n\t\tisContinueRead = false\n\t\ts.Close()\n\t\tlog.Error(\"ProxyName [%s], client heartbeat timeout\", s.Name)\n\t}\n\t\n\t//  timer HeartBeatTimeout  f\n\ttimer := time.AfterFunc(time.Duration(server.HeartBeatTimeout)*time.Second, f)\n\t// defer \n\tdefer timer.Stop()\n\n\t// \n\tfor isContinueRead {\n\t\t//  c  content \n\t\tcontent, err := c.ReadLine()\n\t\tif err != nil {\n\t\t\tif err == io.EOF {\n\t\t\t\tlog.Warn(\"ProxyName [%s], client is dead!\", s.Name)\n\t\t\t\ts.Close()\n\t\t\t\tbreak\n\t\t\t} else if nil == c || c.IsClosed() {\n\t\t\t\tlog.Warn(\"ProxyName [%s], client connection is closed\", s.Name)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tlog.Error(\"ProxyName [%s], read error: %v\", s.Name, err)\n\t\t\tcontinue\n\t\t}\n\n\t\t// \n\t\tclientCtlReq := &msg.ClientCtlReq{}\n\t\t//  content  msg.ClientCtlReq  clientCtlReq \n\t\tif err := json.Unmarshal([]byte(content), clientCtlReq); err != nil {\n\t\t\tlog.Warn(\"Parse err: %v : %s\", err, content)\n\t\t\tcontinue\n\t\t}\n\t\t// \n\t\tif consts.CSHeartBeatReq == clientCtlReq.Type {\n\t\t\tlog.Debug(\"ProxyName [%s], get heartbeat\", s.Name)\n\t\t\t// \n\t\t\ttimer.Reset(time.Duration(server.HeartBeatTimeout) * time.Second)\n\t\t\tclientCtlRes := &msg.ClientCtlRes{}\n\t\t\t//  consts.SCHeartBeatRes JSON \n\t\t\tclientCtlRes.GeneralRes.Code = consts.SCHeartBeatRes\n\t\t\tresponse, err := json.Marshal(clientCtlRes)\n\t\t\tif err != nil {\n\t\t\t\tlog.Warn(\"Serialize ClientCtlRes err! err: %v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\terr = c.Write(string(response) + \"\\\\n\")\n\t\t\tif err != nil {\n\t\t\t\tlog.Error(\"Send heartbeat response to client failed! Err:%v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n### frpc\n\n`ini` \n\n```ini\n[common]\nserver_addr = 127.0.0.1\nserver_port = 7000\nlog_file = ./frpc.log\n# debug, info, warn, error\nlog_level = debug\n# file, console\nlog_way = console\n\n[test1]\npasswd = 123\nlocal_port = 22\n```\n\n `src/frp/cmd/frpc/main.go`\n\n```go\nfunc main() {\n\terr := client.LoadConf(\"./frpc.ini\")\n\tif err != nil {\n\t\tos.Exit(-1)\n\t}\n\n\tlog.InitLog(client.LogWay, client.LogFile, client.LogLevel)\n\n\t//  len(client.ProxyClients) \n\tvar wait sync.WaitGroup\n\twait.Add(len(client.ProxyClients))\n\n    // \n\tfor _, client := range client.ProxyClients {\n\t\tgo ControlProcess(client, &wait)\n\t}\n\n\tlog.Info(\"Start frpc success\")\n\n    // \n\twait.Wait()\n\tlog.Warn(\"All proxy exit!\")\n}\n```\n\n `src/frp/cmd/frpc/control.go` `ControlProcess()` `loginToServer` \n\n```go\nfunc ControlProcess(cli *client.ProxyClient, wait *sync.WaitGroup) {\n    //  wait.Done()  ControlProcess( )\n    //  sync.WaitGroup \n\tdefer wait.Done()\n\n    //  \n\tc, err := loginToServer(cli)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server failed!\", cli.Name)\n\t\treturn\n\t}\n\tconnection = c\n    // \n\tdefer connection.Close()\n\n    // \n\tfor {\n\t\tcontent, err := connection.ReadLine()\n        //  io.EOF \n\t\tif err == io.EOF || nil == connection || connection.IsClosed() {\n\t\t\tlog.Debug(\"ProxyName [%s], server close this control conn\", cli.Name)\n\t\t\t\n            //  60 \n            var sleepTime time.Duration = 1\n\t\t\tfor {\n\t\t\t\tlog.Debug(\"ProxyName [%s], try to reconnect to server[%s:%d]...\", cli.Name, client.ServerAddr, client.ServerPort)\n\t\t\t\ttmpConn, err := loginToServer(cli)\n\t\t\t\tif err == nil {\n\t\t\t\t\tconnection.Close()\n\t\t\t\t\tconnection = tmpConn\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif sleepTime < 60 {\n\t\t\t\t\tsleepTime = sleepTime * 2\n\t\t\t\t}\n\t\t\t\ttime.Sleep(sleepTime * time.Second)\n\t\t\t}\n\t\t\tcontinue\n\t\t} else if err != nil {\n\t\t\tlog.Warn(\"ProxyName [%s], read from server error, %v\", cli.Name, err)\n\t\t\tcontinue\n\t\t}\n\n        //  ClientCtlRes \n\t\tclientCtlRes := &msg.ClientCtlRes{}\n\t\tif err := json.Unmarshal([]byte(content), clientCtlRes); err != nil {\n\t\t\tlog.Warn(\"Parse err: %v : %s\", err, content)\n\t\t\tcontinue\n\t\t}\n        \n        // \n\t\tif consts.SCHeartBeatRes == clientCtlRes.GeneralRes.Code {\n\t\t\tif heartBeatTimer != nil {\n\t\t\t\tlog.Debug(\"Client rcv heartbeat response\")\n\t\t\t\theartBeatTimer.Reset(time.Duration(client.HeartBeatTimeout) * time.Second)\n\t\t\t} else {\n\t\t\t\tlog.Error(\"heartBeatTimer is nil\")\n\t\t\t}\n\t\t\tcontinue\n\t\t}\n\n        //  \n\t\tcli.StartTunnel(client.ServerAddr, client.ServerPort)\n\t}\n}\n```\n\n `loginToServer`  `ConnectServer`  `startHeartBeat` \n\n```go\nfunc loginToServer(cli *client.ProxyClient) (c *conn.Conn, err error) {\n\t//  \n    c, err = conn.ConnectServer(client.ServerAddr, client.ServerPort)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server [%s:%d] error, %v\", cli.Name, client.ServerAddr, client.ServerPort, err)\n\t\treturn\n\t}\n\t\n    //  ClientCtlReq  CtlConn\n\treq := &msg.ClientCtlReq{\n\t\tType:      consts.CtlConn,\n\t\tProxyName: cli.Name,\n\t\tPasswd:    cli.Passwd,\n\t}\n    //  JSON \n\tbuf, _ := json.Marshal(req)\n\terr = c.Write(string(buf) + \"\\n\")\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], write to server error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\n    // \n\tres, err := c.ReadLine()\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], read from server error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\tlog.Debug(\"ProxyName [%s], read [%s]\", cli.Name, res)\n\n    //  ClientCtlRes \n\tclientCtlRes := &msg.ClientCtlRes{}\n\tif err = json.Unmarshal([]byte(res), &clientCtlRes); err != nil {\n\t\tlog.Error(\"ProxyName [%s], format server response error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\n    // \n\tif clientCtlRes.Code != 0 {\n\t\tlog.Error(\"ProxyName [%s], start proxy error, %s\", cli.Name, clientCtlRes.Msg)\n\t\treturn c, fmt.Errorf(\"%s\", clientCtlRes.Msg)\n\t}\n\n    //  \n\tgo startHeartBeat(c)\n\tlog.Debug(\"ProxyName [%s], connect to server[%s:%d] success!\", cli.Name, client.ServerAddr, client.ServerPort)\n\n\treturn\n}\n```\n\n`ConnectServer`  `utils/conn` TCP \n\n```go\ntype Conn struct {\n\tTcpConn   *net.TCPConn\n\tReader    *bufio.Reader\n\tcloseFlag bool\n}\n\nfunc ConnectServer(host string, port int64) (c *Conn, err error) {\n\tc = &Conn{}\n    //  net.ResolveTCPAddr  TCP \n\tservertAddr, err := net.ResolveTCPAddr(\"tcp4\", fmt.Sprintf(\"%s:%d\", host, port))\n\tif err != nil {\n\t\treturn\n\t}\n    //  TCP \n\tconn, err := net.DialTCP(\"tcp\", nil, servertAddr)\n\tif err != nil {\n\t\treturn\n\t}\n    //  TCP  Conn  TcpConn \n\tc.TcpConn = conn\n    //  Conn  Reader \n\tc.Reader = bufio.NewReader(c.TcpConn)\n    // \n\tc.closeFlag = false\n\treturn c, nil\n}\n\n//  Conn \n//  Join \n```\n\n `startHeartBeat` \n\n```go\nfunc startHeartBeat(c *conn.Conn) {\n    // \n\tf := func() {\n\t\tlog.Error(\"HeartBeat timeout!\")\n\t\tif c != nil {\n\t\t\tc.Close()\n\t\t}\n\t}\n    \n   \t// f\n\theartBeatTimer = time.AfterFunc(time.Duration(client.HeartBeatTimeout)*time.Second, f)\n\t// \n    defer heartBeatTimer.Stop()\n\n\tclientCtlReq := &msg.ClientCtlReq{\n\t\tType:      consts.CSHeartBeatReq,\n\t\tProxyName: \"\",\n\t\tPasswd:    \"\",\n\t}\n    \n    // JSON\n\trequest, err := json.Marshal(clientCtlReq)\n\tif err != nil {\n\t\tlog.Warn(\"Serialize clientCtlReq err! Err: %v\", err)\n\t}\n\n    // \n\tlog.Debug(\"Start to send heartbeat\")\n\tfor {\n\t\ttime.Sleep(time.Duration(client.HeartBeatInterval) * time.Second)\n\t\tif c != nil && !c.IsClosed() {\n\t\t\terr = c.Write(string(request) + \"\\n\")\n\t\t\tif err != nil {\n\t\t\t\tlog.Error(\"Send hearbeat to server failed! Err:%v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t} else {\n\t\t\tbreak\n\t\t}\n\t}\n\tlog.Debug(\"Heartbeat exit\")\n}\n```\n\n `utils/conn`  `StartTunnel` \n\n```go\nfunc (p *ProxyClient) StartTunnel(serverAddr string, serverPort int64) (err error) {\n\t// \n    localConn, err := p.GetLocalConn()\n\tif err != nil {\n\t\treturn\n\t}\n\t//  \n    remoteConn, err := p.GetRemoteConn(serverAddr, serverPort)\n\tif err != nil {\n\t\treturn\n\t}\n\n\t// l means local, r means remote\n\tlog.Debug(\"Join two conns, (l[%s] r[%s]) (l[%s] r[%s])\", localConn.GetLocalAddr(), localConn.GetRemoteAddr(),\n\t\tremoteConn.GetLocalAddr(), remoteConn.GetRemoteAddr())\n    //  \n\tgo conn.Join(localConn, remoteConn)\n\treturn nil\n}\n```\n\n `GetRemoteConn` \n\n```go\nfunc (p *ProxyClient) GetRemoteConn(addr string, port int64) (c *conn.Conn, err error) {\n    //  defer \n\tdefer func() {\n\t\tif err != nil {\n\t\t\tc.Close()\n\t\t}\n\t}()\n\n\tc, err = conn.ConnectServer(addr, port)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server [%s:%d] error, %v\", p.Name, addr, port, err)\n\t\treturn\n\t}\n\n    // \n\treq := &msg.ClientCtlReq{\n\t\tType:      consts.WorkConn,\n\t\tProxyName: p.Name,\n\t\tPasswd:    p.Passwd,\n\t}\n\n    //  JSON \n\tbuf, _ := json.Marshal(req)\n\terr = c.Write(string(buf) + \"\\n\")\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], write to server error, %v\", p.Name, err)\n\t\treturn\n\t}\n\n\terr = nil\n\treturn\n}\n```\n\n `Join` \n\n```go\nfunc Join(c1 *Conn, c2 *Conn) {\n    // \n\tvar wait sync.WaitGroup\n    // \n    // defer  WaitGroup \n\tpipe := func(to *Conn, from *Conn) {\n\t\tdefer to.Close()\n\t\tdefer from.Close()\n\t\tdefer wait.Done()\n\n\t\tvar err error\n        //  io.Copy \n        // EOF\n\t\t_, err = io.Copy(to.TcpConn, from.TcpConn)\n\t\tif err != nil {\n\t\t\tlog.Warn(\"join conns error, %v\", err)\n\t\t}\n\t}\n\n\twait.Add(2)\n    //  c1  c2  c2  c1 \n\tgo pipe(c1, c2)\n\tgo pipe(c2, c1)\n\twait.Wait()\n\treturn\n}\n```\n\n## \n\nOkfrp v0.1.0  10 \n\n frpc  `controlWorker` \n\n Golang  Golang  `// ... ...` \n\n\n\n FRP v0.5.0 \n\nhttps://www.joxrays.com/frp-source-code/","source":"_posts/frp_read.md","raw":"---\ntitle: FRP v0.1.0 \ndate: 2024/6/15\nauthor: ma5hr00m\ncategories:\n- Source Code Read\n---\n\n\nfrp  Web  [Sakura FRP](https://www.natfrp.com/) \n\n## v0.1.0 \n\nv0.1.0  1079 \n\n```bash\nPROJECT:\nfrp\n    conf\n    Godeps       \n    src\n        frp\n            cmd\n              frpc\n              frps\n            models\n              client |  & \n              consts\n              msg | /\n              server |  & \n            utils\n                broadcast | \n                conn |  & /\n                log | \n                pcrypto\n```\n\n Godeps go  `go mod`  GitHub  archive \n\n Go  `/Godeps/Godeps.json` \n\n```bash\n{\n\t\"ImportPath\": \"frp\",\n\t\"GoVersion\": \"go1.4\",\n\t\"Packages\": [\n\t\t\"./...\"\n\t],\n\t\"Deps\": [\n\t\t{\n\t\t\t\"ImportPath\": \"github.com/astaxie/beego/logs\",\n\t\t\t\"Comment\": \"v1.5.0-9-gfb7314f\",\n\t\t\t\"Rev\": \"fb7314f8ac86b83ccd34386518d97cf2363e2ae5\"\n\t\t},\n\t\t{\n\t\t\t\"ImportPath\": \"github.com/vaughan0/go-ini\",\n\t\t\t\"Rev\": \"a98ad7ee00ec53921f08832bc06ecf7fd600e6a1\"\n\t\t}\n\t]\n}\n```\n\nfrp frpcfrps\n\n### frps\n\n\n\n```ini\n[common]\nbind_addr = 0.0.0.0\nbind_port = 7000\nlog_file = ./frps.log\n# debug, info, warn, error\nlog_level = debug\n# file, console\nlog_way = console \n\n[test1]\npasswd = 123\nbind_addr = 0.0.0.0\nlisten_port = 6000\n```\n\n `src/frp/cmd/frps/main.go`\n\n```go\nfunc main() {\n\terr := server.LoadConf(\"./frps.ini\")\n\t// ... ...\n\t\n\tlog.InitLog(server.LogWay, server.LogFile, server.LogLevel)\n\t\n\tl, err := conn.Listen(server.BindAddr, server.BindPort)\n\t// ... ...\n\t\n\tlog.Info(\"Start frps success\")\n\tProcessControlConn(l)\n}\n```\n\n `src/frp/models/server/config.go`  `LoadConf`  server  success  `ProcessControlConn` \n\n `src/frp/models/server/config.go`\n\n `github.com/vaughan0/go-ini` `[common]`  `[common]`  `ProxyServers`  \n\n```go\nvar ProxyServers map[string]*ProxyServer = make(map[string]*ProxyServer)\n\nfunc LoadConf(confFile string) (err error) {\n\t// ... ...\n\tfor name, section := range conf {\n\t\tif name != \"common\" {\n\t\t\tproxyServer := &ProxyServer{}\n\t\t\tproxyServer.Name = name\n\n\t\t\tproxyServer.Passwd, ok = section[\"passwd\"]\n\t\t\tif !ok {\n\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] no passwd found\", proxyServer.Name)\n\t\t\t}\n\n\t\t\tproxyServer.BindAddr, ok = section[\"bind_addr\"]\n\t\t\tif !ok {\n\t\t\t\tproxyServer.BindAddr = \"0.0.0.0\"\n\t\t\t}\n\n\t\t\tportStr, ok := section[\"listen_port\"]\n\t\t\tif ok {\n\t\t\t\tproxyServer.ListenPort, err = strconv.ParseInt(portStr, 10, 64)\n\t\t\t\tif err != nil {\n\t\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] listen_port error\", proxyServer.Name)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn fmt.Errorf(\"Parse ini file error: proxy [%s] listen_port not found\", proxyServer.Name)\n\t\t\t}\n\n\t\t\tproxyServer.Init()\n\t\t\tProxyServers[proxyServer.Name] = proxyServer\n\t\t}\n\t}\n\t// \n\tif len(ProxyServers) == 0 {\n\t\treturn fmt.Errorf(\"Parse ini file error: no proxy config found\")\n\t}\n\t// ... ...\n}\n```\n\n `github.com/astaxie/beego/logs` \n\n `src/frp/utils/conn/conn.go`\n\n `Listener`  TCP \n\n```go\ntype Listener struct {\n\taddr      net.Addr\n\tl         *net.TCPListener\n\tconns     chan *Conn\n\tcloseFlag bool\n}\n```\n\n`Listen`  TCP  `Listener` \n\n```go\nfunc Listen(bindAddr string, bindPort int64) (l *Listener, err error) {\n\t// TCP tcp4\n\ttcpAddr, err := net.ResolveTCPAddr(\"tcp4\", fmt.Sprintf(\"%s:%d\", bindAddr, bindPort))\n\tif err != nil {\n\t\treturn l, err\n\t}\n\n\t// TCP\n\tlistener, err := net.ListenTCP(\"tcp\", tcpAddr)\n\tif err != nil {\n\t\treturn l, err\n\t}\n\n\t//  Listener \n\tl = &Listener{\n\t\taddr:      listener.Addr(),\n\t\tl:         listener,\n\t\tconns:     make(chan *Conn),\n\t\tcloseFlag: false,\n\t}\n\n\t// \n\tgo func() {\n\t\tfor {\n\t\t\t// TCP\n\t\t\tconn, err := l.l.AcceptTCP()\n\t\t\tif err != nil {\n\t\t\t\t// \n\t\t\t\tif l.closeFlag {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t// \n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t//  Conn  Listener \n\t\t\tc := &Conn{\n\t\t\t\tTcpConn:   conn,\n\t\t\t\tcloseFlag: false,\n\t\t\t}\n\t\t\tc.Reader = bufio.NewReader(c.TcpConn)\n\t\t\tl.conns <- c\n\t\t}\n\t}()\n\treturn l, err\n}\n```\n\n `Listener` `conns` `Listen` \n\n `l`  frp  `l`  `src/frp/cmd/frps/control.go` \n\n`ProcessControlConn`  `l.GetConn()`  `c`  `controlWorker(c)` `l.GetConn()` \n\n `c`  `utils/conn` \n\n```go\ntype Conn struct {\n\tTcpConn   *net.TCPConn\n\tReader    *bufio.Reader\n\tcloseFlag bool\n}\n```\n\n`Conn`  TCP \n\n- `TcpConn` `net.TCPConn`  TCP  TCP \n- `Reader` `bufio.Reader`  `TcpConn`\n- `closeFlag` `true`\n\n `controlWorker(c)` ``\n\n```go\nfunc controlWorker(c *conn.Conn) {\n\t// \n\tres, err := c.ReadLine()\n\tif err != nil {\n\t\tlog.Warn(\"Read error, %v\", err)\n\t\treturn\n\t}\n\n\t// \n\tlog.Debug(\"get: %s\", res)\n\n\t//  ClientCtlReq \n\tclientCtlReq := &msg.ClientCtlReq{}\n\tclientCtlRes := &msg.ClientCtlRes{}\n\tif err := json.Unmarshal([]byte(res), &clientCtlReq); err != nil {\n\t\tlog.Warn(\"Parse err: %v : %s\", err, res)\n\t\treturn\n\t}\n\t\n\t//  \n\tsucc, info, needRes := checkProxy(clientCtlReq, c)\n\tif !succ {\n\t\tclientCtlRes.Code = 1\n\t\tclientCtlRes.Msg = info\n\t}\n\n\tif needRes {\n\t\t// \n\t\tdefer c.Close()\n\t\t\n\t\t// \n\t\tbuf, _ := json.Marshal(clientCtlRes)\n\t\terr = c.Write(string(buf) + \"\\\\n\")\n\t\tif err != nil {\n\t\t\tlog.Warn(\"Write error, %v\", err)\n\t\t\ttime.Sleep(1 * time.Second)\n\t\t\treturn\n\t\t}\n\t} else {\n\t\treturn\n\t}\n\t\n\t// \n\ts, ok := server.ProxyServers[clientCtlReq.ProxyName]\n\tif !ok {\n\t\tlog.Warn(\"ProxyName [%s] is not exist\", clientCtlReq.ProxyName)\n\t\treturn\n\t}\n\t\n\t//  \n\tgo readControlMsgFromClient(s, c)\n\n\t//  ClientCtlReq \n\tserverCtlReq := &msg.ClientCtlReq{}\n\tserverCtlReq.Type = consts.WorkConn\n\t// \n\tfor {\n\t\tcloseFlag := s.WaitUserConn()\n\t\tif closeFlag {\n\t\t\tlog.Debug(\"ProxyName [%s], goroutine for dealing user conn is closed\", s.Name)\n\t\t\tbreak\n\t\t}\n\t\t// \n\t\tbuf, _ := json.Marshal(serverCtlReq)\n\t\terr = c.Write(string(buf) + \"\\\\n\")\n\t\tif err != nil {\n\t\t\tlog.Warn(\"ProxyName [%s], write to client error, proxy exit\", s.Name)\n\t\t\ts.Close()\n\t\t\treturn\n\t\t}\n\n\t\tlog.Debug(\"ProxyName [%s], write to client to add work conn success\", s.Name)\n\t}\n\n\tlog.Info(\"ProxyName [%s], I'm dead!\", s.Name)\n\treturn\n}\n```\n\n\n\n`checkProxy`  `req.Type` \n\n```Go\nfunc checkProxy(req *msg.ClientCtlReq, c *conn.Conn) (succ bool, info string, needRes bool) {\n\tsucc = false    //  false\n\tneedRes = true  // \n\n\t// \n\ts, ok := server.ProxyServers[req.ProxyName]\n\tif !ok {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s] is not exist\", req.ProxyName)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n\t// \n\tif req.Passwd != s.Passwd {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s], password is not correct\", req.ProxyName)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n\t// \n\tif req.Type == consts.CtlConn {\n\t\t// \n\t\tif s.Status != consts.Idle {\n            // \n\t\t\tinfo = fmt.Sprintf(\"ProxyName [%s], already in use\", req.ProxyName)\n\t\t\tlog.Warn(info)\n\t\t\treturn\n\t\t}\n\n\t\t// \n\t\terr := s.Start()\n\t\tif err != nil {\n\t\t\tinfo = fmt.Sprintf(\"ProxyName [%s], start proxy error: %v\", req.ProxyName, err.Error())\n\t\t\tlog.Warn(info)\n\t\t\treturn\n\t\t}\n\n\t\tlog.Info(\"ProxyName [%s], start proxy success\", req.ProxyName)\n\t} else if req.Type == consts.WorkConn {\n\t\t// \n\t\tneedRes = false\n\t\tif s.Status != consts.Working {\n\t\t\tlog.Warn(\"ProxyName [%s], is not working when it gets one new work conn\", req.ProxyName)\n\t\t\treturn\n\t\t}\n\n\t\ts.GetNewCliConn(c) // \n\t} else {\n\t\tinfo = fmt.Sprintf(\"ProxyName [%s], type [%d] unsupport\", req.ProxyName, req.Type)\n\t\tlog.Warn(info)\n\t\treturn\n\t}\n\n    //  true\n\tsucc = true\n\treturn\n}\n\n```\n\n\n\n\n\n\n\n`readControlMsgFromClient`  \n\n```go\nfunc readControlMsgFromClient(s *server.ProxyServer, c *conn.Conn) {\n\t// \n\tisContinueRead := true\n\t\n\t// \n\tf := func() {\n\t\tisContinueRead = false\n\t\ts.Close()\n\t\tlog.Error(\"ProxyName [%s], client heartbeat timeout\", s.Name)\n\t}\n\t\n\t//  timer HeartBeatTimeout  f\n\ttimer := time.AfterFunc(time.Duration(server.HeartBeatTimeout)*time.Second, f)\n\t// defer \n\tdefer timer.Stop()\n\n\t// \n\tfor isContinueRead {\n\t\t//  c  content \n\t\tcontent, err := c.ReadLine()\n\t\tif err != nil {\n\t\t\tif err == io.EOF {\n\t\t\t\tlog.Warn(\"ProxyName [%s], client is dead!\", s.Name)\n\t\t\t\ts.Close()\n\t\t\t\tbreak\n\t\t\t} else if nil == c || c.IsClosed() {\n\t\t\t\tlog.Warn(\"ProxyName [%s], client connection is closed\", s.Name)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tlog.Error(\"ProxyName [%s], read error: %v\", s.Name, err)\n\t\t\tcontinue\n\t\t}\n\n\t\t// \n\t\tclientCtlReq := &msg.ClientCtlReq{}\n\t\t//  content  msg.ClientCtlReq  clientCtlReq \n\t\tif err := json.Unmarshal([]byte(content), clientCtlReq); err != nil {\n\t\t\tlog.Warn(\"Parse err: %v : %s\", err, content)\n\t\t\tcontinue\n\t\t}\n\t\t// \n\t\tif consts.CSHeartBeatReq == clientCtlReq.Type {\n\t\t\tlog.Debug(\"ProxyName [%s], get heartbeat\", s.Name)\n\t\t\t// \n\t\t\ttimer.Reset(time.Duration(server.HeartBeatTimeout) * time.Second)\n\t\t\tclientCtlRes := &msg.ClientCtlRes{}\n\t\t\t//  consts.SCHeartBeatRes JSON \n\t\t\tclientCtlRes.GeneralRes.Code = consts.SCHeartBeatRes\n\t\t\tresponse, err := json.Marshal(clientCtlRes)\n\t\t\tif err != nil {\n\t\t\t\tlog.Warn(\"Serialize ClientCtlRes err! err: %v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\terr = c.Write(string(response) + \"\\\\n\")\n\t\t\tif err != nil {\n\t\t\t\tlog.Error(\"Send heartbeat response to client failed! Err:%v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n### frpc\n\n`ini` \n\n```ini\n[common]\nserver_addr = 127.0.0.1\nserver_port = 7000\nlog_file = ./frpc.log\n# debug, info, warn, error\nlog_level = debug\n# file, console\nlog_way = console\n\n[test1]\npasswd = 123\nlocal_port = 22\n```\n\n `src/frp/cmd/frpc/main.go`\n\n```go\nfunc main() {\n\terr := client.LoadConf(\"./frpc.ini\")\n\tif err != nil {\n\t\tos.Exit(-1)\n\t}\n\n\tlog.InitLog(client.LogWay, client.LogFile, client.LogLevel)\n\n\t//  len(client.ProxyClients) \n\tvar wait sync.WaitGroup\n\twait.Add(len(client.ProxyClients))\n\n    // \n\tfor _, client := range client.ProxyClients {\n\t\tgo ControlProcess(client, &wait)\n\t}\n\n\tlog.Info(\"Start frpc success\")\n\n    // \n\twait.Wait()\n\tlog.Warn(\"All proxy exit!\")\n}\n```\n\n `src/frp/cmd/frpc/control.go` `ControlProcess()` `loginToServer` \n\n```go\nfunc ControlProcess(cli *client.ProxyClient, wait *sync.WaitGroup) {\n    //  wait.Done()  ControlProcess( )\n    //  sync.WaitGroup \n\tdefer wait.Done()\n\n    //  \n\tc, err := loginToServer(cli)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server failed!\", cli.Name)\n\t\treturn\n\t}\n\tconnection = c\n    // \n\tdefer connection.Close()\n\n    // \n\tfor {\n\t\tcontent, err := connection.ReadLine()\n        //  io.EOF \n\t\tif err == io.EOF || nil == connection || connection.IsClosed() {\n\t\t\tlog.Debug(\"ProxyName [%s], server close this control conn\", cli.Name)\n\t\t\t\n            //  60 \n            var sleepTime time.Duration = 1\n\t\t\tfor {\n\t\t\t\tlog.Debug(\"ProxyName [%s], try to reconnect to server[%s:%d]...\", cli.Name, client.ServerAddr, client.ServerPort)\n\t\t\t\ttmpConn, err := loginToServer(cli)\n\t\t\t\tif err == nil {\n\t\t\t\t\tconnection.Close()\n\t\t\t\t\tconnection = tmpConn\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif sleepTime < 60 {\n\t\t\t\t\tsleepTime = sleepTime * 2\n\t\t\t\t}\n\t\t\t\ttime.Sleep(sleepTime * time.Second)\n\t\t\t}\n\t\t\tcontinue\n\t\t} else if err != nil {\n\t\t\tlog.Warn(\"ProxyName [%s], read from server error, %v\", cli.Name, err)\n\t\t\tcontinue\n\t\t}\n\n        //  ClientCtlRes \n\t\tclientCtlRes := &msg.ClientCtlRes{}\n\t\tif err := json.Unmarshal([]byte(content), clientCtlRes); err != nil {\n\t\t\tlog.Warn(\"Parse err: %v : %s\", err, content)\n\t\t\tcontinue\n\t\t}\n        \n        // \n\t\tif consts.SCHeartBeatRes == clientCtlRes.GeneralRes.Code {\n\t\t\tif heartBeatTimer != nil {\n\t\t\t\tlog.Debug(\"Client rcv heartbeat response\")\n\t\t\t\theartBeatTimer.Reset(time.Duration(client.HeartBeatTimeout) * time.Second)\n\t\t\t} else {\n\t\t\t\tlog.Error(\"heartBeatTimer is nil\")\n\t\t\t}\n\t\t\tcontinue\n\t\t}\n\n        //  \n\t\tcli.StartTunnel(client.ServerAddr, client.ServerPort)\n\t}\n}\n```\n\n `loginToServer`  `ConnectServer`  `startHeartBeat` \n\n```go\nfunc loginToServer(cli *client.ProxyClient) (c *conn.Conn, err error) {\n\t//  \n    c, err = conn.ConnectServer(client.ServerAddr, client.ServerPort)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server [%s:%d] error, %v\", cli.Name, client.ServerAddr, client.ServerPort, err)\n\t\treturn\n\t}\n\t\n    //  ClientCtlReq  CtlConn\n\treq := &msg.ClientCtlReq{\n\t\tType:      consts.CtlConn,\n\t\tProxyName: cli.Name,\n\t\tPasswd:    cli.Passwd,\n\t}\n    //  JSON \n\tbuf, _ := json.Marshal(req)\n\terr = c.Write(string(buf) + \"\\n\")\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], write to server error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\n    // \n\tres, err := c.ReadLine()\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], read from server error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\tlog.Debug(\"ProxyName [%s], read [%s]\", cli.Name, res)\n\n    //  ClientCtlRes \n\tclientCtlRes := &msg.ClientCtlRes{}\n\tif err = json.Unmarshal([]byte(res), &clientCtlRes); err != nil {\n\t\tlog.Error(\"ProxyName [%s], format server response error, %v\", cli.Name, err)\n\t\treturn\n\t}\n\n    // \n\tif clientCtlRes.Code != 0 {\n\t\tlog.Error(\"ProxyName [%s], start proxy error, %s\", cli.Name, clientCtlRes.Msg)\n\t\treturn c, fmt.Errorf(\"%s\", clientCtlRes.Msg)\n\t}\n\n    //  \n\tgo startHeartBeat(c)\n\tlog.Debug(\"ProxyName [%s], connect to server[%s:%d] success!\", cli.Name, client.ServerAddr, client.ServerPort)\n\n\treturn\n}\n```\n\n`ConnectServer`  `utils/conn` TCP \n\n```go\ntype Conn struct {\n\tTcpConn   *net.TCPConn\n\tReader    *bufio.Reader\n\tcloseFlag bool\n}\n\nfunc ConnectServer(host string, port int64) (c *Conn, err error) {\n\tc = &Conn{}\n    //  net.ResolveTCPAddr  TCP \n\tservertAddr, err := net.ResolveTCPAddr(\"tcp4\", fmt.Sprintf(\"%s:%d\", host, port))\n\tif err != nil {\n\t\treturn\n\t}\n    //  TCP \n\tconn, err := net.DialTCP(\"tcp\", nil, servertAddr)\n\tif err != nil {\n\t\treturn\n\t}\n    //  TCP  Conn  TcpConn \n\tc.TcpConn = conn\n    //  Conn  Reader \n\tc.Reader = bufio.NewReader(c.TcpConn)\n    // \n\tc.closeFlag = false\n\treturn c, nil\n}\n\n//  Conn \n//  Join \n```\n\n `startHeartBeat` \n\n```go\nfunc startHeartBeat(c *conn.Conn) {\n    // \n\tf := func() {\n\t\tlog.Error(\"HeartBeat timeout!\")\n\t\tif c != nil {\n\t\t\tc.Close()\n\t\t}\n\t}\n    \n   \t// f\n\theartBeatTimer = time.AfterFunc(time.Duration(client.HeartBeatTimeout)*time.Second, f)\n\t// \n    defer heartBeatTimer.Stop()\n\n\tclientCtlReq := &msg.ClientCtlReq{\n\t\tType:      consts.CSHeartBeatReq,\n\t\tProxyName: \"\",\n\t\tPasswd:    \"\",\n\t}\n    \n    // JSON\n\trequest, err := json.Marshal(clientCtlReq)\n\tif err != nil {\n\t\tlog.Warn(\"Serialize clientCtlReq err! Err: %v\", err)\n\t}\n\n    // \n\tlog.Debug(\"Start to send heartbeat\")\n\tfor {\n\t\ttime.Sleep(time.Duration(client.HeartBeatInterval) * time.Second)\n\t\tif c != nil && !c.IsClosed() {\n\t\t\terr = c.Write(string(request) + \"\\n\")\n\t\t\tif err != nil {\n\t\t\t\tlog.Error(\"Send hearbeat to server failed! Err:%v\", err)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t} else {\n\t\t\tbreak\n\t\t}\n\t}\n\tlog.Debug(\"Heartbeat exit\")\n}\n```\n\n `utils/conn`  `StartTunnel` \n\n```go\nfunc (p *ProxyClient) StartTunnel(serverAddr string, serverPort int64) (err error) {\n\t// \n    localConn, err := p.GetLocalConn()\n\tif err != nil {\n\t\treturn\n\t}\n\t//  \n    remoteConn, err := p.GetRemoteConn(serverAddr, serverPort)\n\tif err != nil {\n\t\treturn\n\t}\n\n\t// l means local, r means remote\n\tlog.Debug(\"Join two conns, (l[%s] r[%s]) (l[%s] r[%s])\", localConn.GetLocalAddr(), localConn.GetRemoteAddr(),\n\t\tremoteConn.GetLocalAddr(), remoteConn.GetRemoteAddr())\n    //  \n\tgo conn.Join(localConn, remoteConn)\n\treturn nil\n}\n```\n\n `GetRemoteConn` \n\n```go\nfunc (p *ProxyClient) GetRemoteConn(addr string, port int64) (c *conn.Conn, err error) {\n    //  defer \n\tdefer func() {\n\t\tif err != nil {\n\t\t\tc.Close()\n\t\t}\n\t}()\n\n\tc, err = conn.ConnectServer(addr, port)\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], connect to server [%s:%d] error, %v\", p.Name, addr, port, err)\n\t\treturn\n\t}\n\n    // \n\treq := &msg.ClientCtlReq{\n\t\tType:      consts.WorkConn,\n\t\tProxyName: p.Name,\n\t\tPasswd:    p.Passwd,\n\t}\n\n    //  JSON \n\tbuf, _ := json.Marshal(req)\n\terr = c.Write(string(buf) + \"\\n\")\n\tif err != nil {\n\t\tlog.Error(\"ProxyName [%s], write to server error, %v\", p.Name, err)\n\t\treturn\n\t}\n\n\terr = nil\n\treturn\n}\n```\n\n `Join` \n\n```go\nfunc Join(c1 *Conn, c2 *Conn) {\n    // \n\tvar wait sync.WaitGroup\n    // \n    // defer  WaitGroup \n\tpipe := func(to *Conn, from *Conn) {\n\t\tdefer to.Close()\n\t\tdefer from.Close()\n\t\tdefer wait.Done()\n\n\t\tvar err error\n        //  io.Copy \n        // EOF\n\t\t_, err = io.Copy(to.TcpConn, from.TcpConn)\n\t\tif err != nil {\n\t\t\tlog.Warn(\"join conns error, %v\", err)\n\t\t}\n\t}\n\n\twait.Add(2)\n    //  c1  c2  c2  c1 \n\tgo pipe(c1, c2)\n\tgo pipe(c2, c1)\n\twait.Wait()\n\treturn\n}\n```\n\n## \n\nOkfrp v0.1.0  10 \n\n frpc  `controlWorker` \n\n Golang  Golang  `// ... ...` \n\n\n\n FRP v0.5.0 \n\nhttps://www.joxrays.com/frp-source-code/","slug":"frp_read","published":1,"updated":"2024-06-15T18:25:12.754Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap0000af4lyfob6hsb3","content":"<p>frp  Web  <a href=\"https://www.natfrp.com/\">Sakura FRP</a> </p>\n<h2 id=\"v0-1-0-\"><a href=\"#v0-1-0-\" class=\"headerlink\" title=\"v0.1.0 \"></a>v0.1.0 </h2><p>v0.1.0  1079 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PROJECT:</span><br><span class=\"line\">frp</span><br><span class=\"line\">    conf</span><br><span class=\"line\">    Godeps       </span><br><span class=\"line\">    src</span><br><span class=\"line\">        frp</span><br><span class=\"line\">            cmd</span><br><span class=\"line\">              frpc</span><br><span class=\"line\">              frps</span><br><span class=\"line\">            models</span><br><span class=\"line\">              client |  &amp; </span><br><span class=\"line\">              consts</span><br><span class=\"line\">              msg | /</span><br><span class=\"line\">              server |  &amp; </span><br><span class=\"line\">            utils</span><br><span class=\"line\">                broadcast | </span><br><span class=\"line\">                conn |  &amp; /</span><br><span class=\"line\">                <span class=\"built_in\">log</span> | </span><br><span class=\"line\">                pcrypto</span><br></pre></td></tr></table></figure>\n\n<p> Godeps go  <code>go mod</code>  GitHub  archive </p>\n<p> Go  <code>/Godeps/Godeps.json</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;frp&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;GoVersion&quot;</span>: <span class=\"string\">&quot;go1.4&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;Packages&quot;</span>: [</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;./...&quot;</span></span><br><span class=\"line\">\t],</span><br><span class=\"line\">\t<span class=\"string\">&quot;Deps&quot;</span>: [</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;github.com/astaxie/beego/logs&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Comment&quot;</span>: <span class=\"string\">&quot;v1.5.0-9-gfb7314f&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Rev&quot;</span>: <span class=\"string\">&quot;fb7314f8ac86b83ccd34386518d97cf2363e2ae5&quot;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;github.com/vaughan0/go-ini&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Rev&quot;</span>: <span class=\"string\">&quot;a98ad7ee00ec53921f08832bc06ecf7fd600e6a1&quot;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>frp frpcfrps</p>\n<h3 id=\"frps\"><a href=\"#frps\" class=\"headerlink\" title=\"frps\"></a>frps</h3><p></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frps.log</span><br><span class=\"line\"><span class=\"comment\"># debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = debug</span><br><span class=\"line\"><span class=\"comment\"># file, console</span></span><br><span class=\"line\"><span class=\"attr\">log_way</span> = console </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[test1]</span></span><br><span class=\"line\"><span class=\"attr\">passwd</span> = <span class=\"number\">123</span></span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"attr\">listen_port</span> = <span class=\"number\">6000</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frps/main.go</code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\terr := server.LoadConf(<span class=\"string\">&quot;./frps.ini&quot;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlog.InitLog(server.LogWay, server.LogFile, server.LogLevel)</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tl, err := conn.Listen(server.BindAddr, server.BindPort)</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;Start frps success&quot;</span>)</span><br><span class=\"line\">\tProcessControlConn(l)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/models/server/config.go</code>  <code>LoadConf</code>  server  success  <code>ProcessControlConn</code> </p>\n<p> <code>src/frp/models/server/config.go</code></p>\n<p> <code>github.com/vaughan0/go-ini</code> <code>[common]</code>  <code>[common]</code>  <code>ProxyServers</code>  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ProxyServers <span class=\"keyword\">map</span>[<span class=\"type\">string</span>]*ProxyServer = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"type\">string</span>]*ProxyServer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">LoadConf</span><span class=\"params\">(confFile <span class=\"type\">string</span>)</span></span> (err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> name, section := <span class=\"keyword\">range</span> conf &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> name != <span class=\"string\">&quot;common&quot;</span> &#123;</span><br><span class=\"line\">\t\t\tproxyServer := &amp;ProxyServer&#123;&#125;</span><br><span class=\"line\">\t\t\tproxyServer.Name = name</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.Passwd, ok = section[<span class=\"string\">&quot;passwd&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] no passwd found&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.BindAddr, ok = section[<span class=\"string\">&quot;bind_addr&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\t\t\tproxyServer.BindAddr = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tportStr, ok := section[<span class=\"string\">&quot;listen_port&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> ok &#123;</span><br><span class=\"line\">\t\t\t\tproxyServer.ListenPort, err = strconv.ParseInt(portStr, <span class=\"number\">10</span>, <span class=\"number\">64</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] listen_port error&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] listen_port not found&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.Init()</span><br><span class=\"line\">\t\t\tProxyServers[proxyServer.Name] = proxyServer</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(ProxyServers) == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: no proxy config found&quot;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>github.com/astaxie/beego/logs</code> </p>\n<p> <code>src/frp/utils/conn/conn.go</code></p>\n<p> <code>Listener</code>  TCP </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Listener <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\taddr      net.Addr</span><br><span class=\"line\">\tl         *net.TCPListener</span><br><span class=\"line\">\tconns     <span class=\"keyword\">chan</span> *Conn</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Listen</code>  TCP  <code>Listener</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Listen</span><span class=\"params\">(bindAddr <span class=\"type\">string</span>, bindPort <span class=\"type\">int64</span>)</span></span> (l *Listener, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// TCP tcp4</span></span><br><span class=\"line\">\ttcpAddr, err := net.ResolveTCPAddr(<span class=\"string\">&quot;tcp4&quot;</span>, fmt.Sprintf(<span class=\"string\">&quot;%s:%d&quot;</span>, bindAddr, bindPort))</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// TCP</span></span><br><span class=\"line\">\tlistener, err := net.ListenTCP(<span class=\"string\">&quot;tcp&quot;</span>, tcpAddr)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  Listener </span></span><br><span class=\"line\">\tl = &amp;Listener&#123;</span><br><span class=\"line\">\t\taddr:      listener.Addr(),</span><br><span class=\"line\">\t\tl:         listener,</span><br><span class=\"line\">\t\tconns:     <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> *Conn),</span><br><span class=\"line\">\t\tcloseFlag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TCP</span></span><br><span class=\"line\">\t\t\tconn, err := l.l.AcceptTCP()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> l.closeFlag &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//  Conn  Listener </span></span><br><span class=\"line\">\t\t\tc := &amp;Conn&#123;</span><br><span class=\"line\">\t\t\t\tTcpConn:   conn,</span><br><span class=\"line\">\t\t\t\tcloseFlag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tc.Reader = bufio.NewReader(c.TcpConn)</span><br><span class=\"line\">\t\t\tl.conns &lt;- c</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Listener</code> <code>conns</code> <code>Listen</code> </p>\n<p> <code>l</code>  frp  <code>l</code>  <code>src/frp/cmd/frps/control.go</code> </p>\n<p><code>ProcessControlConn</code>  <code>l.GetConn()</code>  <code>c</code>  <code>controlWorker(c)</code> <code>l.GetConn()</code> </p>\n<p> <code>c</code>  <code>utils/conn</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Conn <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tTcpConn   *net.TCPConn</span><br><span class=\"line\">\tReader    *bufio.Reader</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Conn</code>  TCP </p>\n<ul>\n<li><code>TcpConn</code> <code>net.TCPConn</code>  TCP  TCP </li>\n<li><code>Reader</code> <code>bufio.Reader</code>  <code>TcpConn</code></li>\n<li><code>closeFlag</code> <code>true</code></li>\n</ul>\n<p> <code>controlWorker(c)</code> <code></code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">controlWorker</span><span class=\"params\">(c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tres, err := c.ReadLine()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Read error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;get: %s&quot;</span>, res)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  ClientCtlReq </span></span><br><span class=\"line\">\tclientCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(res), &amp;clientCtlReq); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, res)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">\tsucc, info, needRes := checkProxy(clientCtlReq, c)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !succ &#123;</span><br><span class=\"line\">\t\tclientCtlRes.Code = <span class=\"number\">1</span></span><br><span class=\"line\">\t\tclientCtlRes.Msg = info</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> needRes &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> c.Close()</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tbuf, _ := json.Marshal(clientCtlRes)</span><br><span class=\"line\">\t\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Write error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t\ttime.Sleep(<span class=\"number\">1</span> * time.Second)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\ts, ok := server.ProxyServers[clientCtlReq.ProxyName]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s] is not exist&quot;</span>, clientCtlReq.ProxyName)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> readControlMsgFromClient(s, c)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  ClientCtlReq </span></span><br><span class=\"line\">\tserverCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\tserverCtlReq.Type = consts.WorkConn</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tcloseFlag := s.WaitUserConn()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> closeFlag &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], goroutine for dealing user conn is closed&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tbuf, _ := json.Marshal(serverCtlReq)</span><br><span class=\"line\">\t\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], write to client error, proxy exit&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\ts.Close()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], write to client to add work conn success&quot;</span>, s.Name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;ProxyName [%s], I&#x27;m dead!&quot;</span>, s.Name)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>checkProxy</code>  <code>req.Type</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">checkProxy</span><span class=\"params\">(req *msg.ClientCtlReq, c *conn.Conn)</span></span> (succ <span class=\"type\">bool</span>, info <span class=\"type\">string</span>, needRes <span class=\"type\">bool</span>) &#123;</span><br><span class=\"line\">\tsucc = <span class=\"literal\">false</span>    <span class=\"comment\">//  false</span></span><br><span class=\"line\">\tneedRes = <span class=\"literal\">true</span>  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\ts, ok := server.ProxyServers[req.ProxyName]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s] is not exist&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> req.Passwd != s.Passwd &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], password is not correct&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> req.Type == consts.CtlConn &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> s.Status != consts.Idle &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], already in use&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\terr := s.Start()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], start proxy error: %v&quot;</span>, req.ProxyName, err.Error())</span><br><span class=\"line\">\t\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlog.Info(<span class=\"string\">&quot;ProxyName [%s], start proxy success&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> req.Type == consts.WorkConn &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tneedRes = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> s.Status != consts.Working &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], is not working when it gets one new work conn&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\ts.GetNewCliConn(c) <span class=\"comment\">// </span></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], type [%d] unsupport&quot;</span>, req.ProxyName, req.Type)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  true</span></span><br><span class=\"line\">\tsucc = <span class=\"literal\">true</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p></p>\n<p></p>\n<p><code>readControlMsgFromClient</code>  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">readControlMsgFromClient</span><span class=\"params\">(s *server.ProxyServer, c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tisContinueRead := <span class=\"literal\">true</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tf := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\tisContinueRead = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\ts.Close()</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], client heartbeat timeout&quot;</span>, s.Name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  timer HeartBeatTimeout  f</span></span><br><span class=\"line\">\ttimer := time.AfterFunc(time.Duration(server.HeartBeatTimeout)*time.Second, f)</span><br><span class=\"line\">\t<span class=\"comment\">// defer </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> timer.Stop()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> isContinueRead &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//  c  content </span></span><br><span class=\"line\">\t\tcontent, err := c.ReadLine()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err == io.EOF &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], client is dead!&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t\ts.Close()</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> <span class=\"literal\">nil</span> == c || c.IsClosed() &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], client connection is closed&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], read error: %v&quot;</span>, s.Name, err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tclientCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//  content  msg.ClientCtlReq  clientCtlReq </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(content), clientCtlReq); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, content)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> consts.CSHeartBeatReq == clientCtlReq.Type &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], get heartbeat&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\ttimer.Reset(time.Duration(server.HeartBeatTimeout) * time.Second)</span><br><span class=\"line\">\t\t\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//  consts.SCHeartBeatRes JSON </span></span><br><span class=\"line\">\t\t\tclientCtlRes.GeneralRes.Code = consts.SCHeartBeatRes</span><br><span class=\"line\">\t\t\tresponse, err := json.Marshal(clientCtlRes)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;Serialize ClientCtlRes err! err: %v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\terr = c.Write(<span class=\"type\">string</span>(response) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;Send heartbeat response to client failed! Err:%v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"frpc\"><a href=\"#frpc\" class=\"headerlink\" title=\"frpc\"></a>frpc</h3><p><code>ini</code> </p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frpc.log</span><br><span class=\"line\"><span class=\"comment\"># debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = debug</span><br><span class=\"line\"><span class=\"comment\"># file, console</span></span><br><span class=\"line\"><span class=\"attr\">log_way</span> = console</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[test1]</span></span><br><span class=\"line\"><span class=\"attr\">passwd</span> = <span class=\"number\">123</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">22</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frpc/main.go</code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\terr := client.LoadConf(<span class=\"string\">&quot;./frpc.ini&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">-1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.InitLog(client.LogWay, client.LogFile, client.LogLevel)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  len(client.ProxyClients) </span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> wait sync.WaitGroup</span><br><span class=\"line\">\twait.Add(<span class=\"built_in\">len</span>(client.ProxyClients))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> _, client := <span class=\"keyword\">range</span> client.ProxyClients &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">go</span> ControlProcess(client, &amp;wait)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;Start frpc success&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\twait.Wait()</span><br><span class=\"line\">\tlog.Warn(<span class=\"string\">&quot;All proxy exit!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frpc/control.go</code> <code>ControlProcess()</code> <code>loginToServer</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ControlProcess</span><span class=\"params\">(cli *client.ProxyClient, wait *sync.WaitGroup)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  wait.Done()  ControlProcess( )</span></span><br><span class=\"line\">    <span class=\"comment\">//  sync.WaitGroup </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> wait.Done()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\tc, err := loginToServer(cli)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server failed!&quot;</span>, cli.Name)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tconnection = c</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> connection.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tcontent, err := connection.ReadLine()</span><br><span class=\"line\">        <span class=\"comment\">//  io.EOF </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err == io.EOF || <span class=\"literal\">nil</span> == connection || connection.IsClosed() &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], server close this control conn&quot;</span>, cli.Name)</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">            <span class=\"comment\">//  60 </span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> sleepTime time.Duration = <span class=\"number\">1</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], try to reconnect to server[%s:%d]...&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t\t\t\ttmpConn, err := loginToServer(cli)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> err == <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tconnection.Close()</span><br><span class=\"line\">\t\t\t\t\tconnection = tmpConn</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> sleepTime &lt; <span class=\"number\">60</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tsleepTime = sleepTime * <span class=\"number\">2</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\ttime.Sleep(sleepTime * time.Second)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], read from server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  ClientCtlRes </span></span><br><span class=\"line\">\t\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(content), clientCtlRes); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, content)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> consts.SCHeartBeatRes == clientCtlRes.GeneralRes.Code &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> heartBeatTimer != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Debug(<span class=\"string\">&quot;Client rcv heartbeat response&quot;</span>)</span><br><span class=\"line\">\t\t\t\theartBeatTimer.Reset(time.Duration(client.HeartBeatTimeout) * time.Second)</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;heartBeatTimer is nil&quot;</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">\t\tcli.StartTunnel(client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>loginToServer</code>  <code>ConnectServer</code>  <code>startHeartBeat</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">loginToServer</span><span class=\"params\">(cli *client.ProxyClient)</span></span> (c *conn.Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">    c, err = conn.ConnectServer(client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server [%s:%d] error, %v&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//  ClientCtlReq  CtlConn</span></span><br><span class=\"line\">\treq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.CtlConn,</span><br><span class=\"line\">\t\tProxyName: cli.Name,</span><br><span class=\"line\">\t\tPasswd:    cli.Passwd,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  JSON </span></span><br><span class=\"line\">\tbuf, _ := json.Marshal(req)</span><br><span class=\"line\">\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], write to server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tres, err := c.ReadLine()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], read from server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], read [%s]&quot;</span>, cli.Name, res)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  ClientCtlRes </span></span><br><span class=\"line\">\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err = json.Unmarshal([]<span class=\"type\">byte</span>(res), &amp;clientCtlRes); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], format server response error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> clientCtlRes.Code != <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], start proxy error, %s&quot;</span>, cli.Name, clientCtlRes.Msg)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> c, fmt.Errorf(<span class=\"string\">&quot;%s&quot;</span>, clientCtlRes.Msg)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> startHeartBeat(c)</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], connect to server[%s:%d] success!&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ConnectServer</code>  <code>utils/conn</code> TCP </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Conn <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tTcpConn   *net.TCPConn</span><br><span class=\"line\">\tReader    *bufio.Reader</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ConnectServer</span><span class=\"params\">(host <span class=\"type\">string</span>, port <span class=\"type\">int64</span>)</span></span> (c *Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\tc = &amp;Conn&#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  net.ResolveTCPAddr  TCP </span></span><br><span class=\"line\">\tservertAddr, err := net.ResolveTCPAddr(<span class=\"string\">&quot;tcp4&quot;</span>, fmt.Sprintf(<span class=\"string\">&quot;%s:%d&quot;</span>, host, port))</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  TCP </span></span><br><span class=\"line\">\tconn, err := net.DialTCP(<span class=\"string\">&quot;tcp&quot;</span>, <span class=\"literal\">nil</span>, servertAddr)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  TCP  Conn  TcpConn </span></span><br><span class=\"line\">\tc.TcpConn = conn</span><br><span class=\"line\">    <span class=\"comment\">//  Conn  Reader </span></span><br><span class=\"line\">\tc.Reader = bufio.NewReader(c.TcpConn)</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tc.closeFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> c, <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Conn </span></span><br><span class=\"line\"><span class=\"comment\">//  Join </span></span><br></pre></td></tr></table></figure>\n\n<p> <code>startHeartBeat</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">startHeartBeat</span><span class=\"params\">(c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tf := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;HeartBeat timeout!&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> c != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tc.Close()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">   \t<span class=\"comment\">// f</span></span><br><span class=\"line\">\theartBeatTimer = time.AfterFunc(time.Duration(client.HeartBeatTimeout)*time.Second, f)</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">defer</span> heartBeatTimer.Stop()</span><br><span class=\"line\"></span><br><span class=\"line\">\tclientCtlReq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.CSHeartBeatReq,</span><br><span class=\"line\">\t\tProxyName: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t\tPasswd:    <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// JSON</span></span><br><span class=\"line\">\trequest, err := json.Marshal(clientCtlReq)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Serialize clientCtlReq err! Err: %v&quot;</span>, err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Start to send heartbeat&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\ttime.Sleep(time.Duration(client.HeartBeatInterval) * time.Second)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> c != <span class=\"literal\">nil</span> &amp;&amp; !c.IsClosed() &#123;</span><br><span class=\"line\">\t\t\terr = c.Write(<span class=\"type\">string</span>(request) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;Send hearbeat to server failed! Err:%v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Heartbeat exit&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>utils/conn</code>  <code>StartTunnel</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(p *ProxyClient)</span></span> StartTunnel(serverAddr <span class=\"type\">string</span>, serverPort <span class=\"type\">int64</span>) (err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    localConn, err := p.GetLocalConn()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">    remoteConn, err := p.GetRemoteConn(serverAddr, serverPort)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// l means local, r means remote</span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Join two conns, (l[%s] r[%s]) (l[%s] r[%s])&quot;</span>, localConn.GetLocalAddr(), localConn.GetRemoteAddr(),</span><br><span class=\"line\">\t\tremoteConn.GetLocalAddr(), remoteConn.GetRemoteAddr())</span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> conn.Join(localConn, remoteConn)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>GetRemoteConn</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(p *ProxyClient)</span></span> GetRemoteConn(addr <span class=\"type\">string</span>, port <span class=\"type\">int64</span>) (c *conn.Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  defer </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tc.Close()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">\tc, err = conn.ConnectServer(addr, port)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server [%s:%d] error, %v&quot;</span>, p.Name, addr, port, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\treq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.WorkConn,</span><br><span class=\"line\">\t\tProxyName: p.Name,</span><br><span class=\"line\">\t\tPasswd:    p.Passwd,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  JSON </span></span><br><span class=\"line\">\tbuf, _ := json.Marshal(req)</span><br><span class=\"line\">\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], write to server error, %v&quot;</span>, p.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\terr = <span class=\"literal\">nil</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Join</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Join</span><span class=\"params\">(c1 *Conn, c2 *Conn)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> wait sync.WaitGroup</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// defer  WaitGroup </span></span><br><span class=\"line\">\tpipe := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(to *Conn, from *Conn)</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> to.Close()</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> from.Close()</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> wait.Done()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> err <span class=\"type\">error</span></span><br><span class=\"line\">        <span class=\"comment\">//  io.Copy </span></span><br><span class=\"line\">        <span class=\"comment\">// EOF</span></span><br><span class=\"line\">\t\t_, err = io.Copy(to.TcpConn, from.TcpConn)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;join conns error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\twait.Add(<span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"comment\">//  c1  c2  c2  c1 </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> pipe(c1, c2)</span><br><span class=\"line\">\t<span class=\"keyword\">go</span> pipe(c2, c1)</span><br><span class=\"line\">\twait.Wait()</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Okfrp v0.1.0  10 </p>\n<p> frpc  <code>controlWorker</code> </p>\n<p> Golang  Golang  <code>// ... ...</code> </p>\n<p></p>\n<p> FRP v0.5.0 </p>\n<p><a href=\"https://www.joxrays.com/frp-source-code/\">https://www.joxrays.com/frp-source-code/</a></p>\n","excerpt":"","more":"<p>frp  Web  <a href=\"https://www.natfrp.com/\">Sakura FRP</a> </p>\n<h2 id=\"v0-1-0-\"><a href=\"#v0-1-0-\" class=\"headerlink\" title=\"v0.1.0 \"></a>v0.1.0 </h2><p>v0.1.0  1079 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PROJECT:</span><br><span class=\"line\">frp</span><br><span class=\"line\">    conf</span><br><span class=\"line\">    Godeps       </span><br><span class=\"line\">    src</span><br><span class=\"line\">        frp</span><br><span class=\"line\">            cmd</span><br><span class=\"line\">              frpc</span><br><span class=\"line\">              frps</span><br><span class=\"line\">            models</span><br><span class=\"line\">              client |  &amp; </span><br><span class=\"line\">              consts</span><br><span class=\"line\">              msg | /</span><br><span class=\"line\">              server |  &amp; </span><br><span class=\"line\">            utils</span><br><span class=\"line\">                broadcast | </span><br><span class=\"line\">                conn |  &amp; /</span><br><span class=\"line\">                <span class=\"built_in\">log</span> | </span><br><span class=\"line\">                pcrypto</span><br></pre></td></tr></table></figure>\n\n<p> Godeps go  <code>go mod</code>  GitHub  archive </p>\n<p> Go  <code>/Godeps/Godeps.json</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;frp&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;GoVersion&quot;</span>: <span class=\"string\">&quot;go1.4&quot;</span>,</span><br><span class=\"line\">\t<span class=\"string\">&quot;Packages&quot;</span>: [</span><br><span class=\"line\">\t\t<span class=\"string\">&quot;./...&quot;</span></span><br><span class=\"line\">\t],</span><br><span class=\"line\">\t<span class=\"string\">&quot;Deps&quot;</span>: [</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;github.com/astaxie/beego/logs&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Comment&quot;</span>: <span class=\"string\">&quot;v1.5.0-9-gfb7314f&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Rev&quot;</span>: <span class=\"string\">&quot;fb7314f8ac86b83ccd34386518d97cf2363e2ae5&quot;</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;ImportPath&quot;</span>: <span class=\"string\">&quot;github.com/vaughan0/go-ini&quot;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">&quot;Rev&quot;</span>: <span class=\"string\">&quot;a98ad7ee00ec53921f08832bc06ecf7fd600e6a1&quot;</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>frp frpcfrps</p>\n<h3 id=\"frps\"><a href=\"#frps\" class=\"headerlink\" title=\"frps\"></a>frps</h3><p></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frps.log</span><br><span class=\"line\"><span class=\"comment\"># debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = debug</span><br><span class=\"line\"><span class=\"comment\"># file, console</span></span><br><span class=\"line\"><span class=\"attr\">log_way</span> = console </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[test1]</span></span><br><span class=\"line\"><span class=\"attr\">passwd</span> = <span class=\"number\">123</span></span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"attr\">listen_port</span> = <span class=\"number\">6000</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frps/main.go</code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\terr := server.LoadConf(<span class=\"string\">&quot;./frps.ini&quot;</span>)</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlog.InitLog(server.LogWay, server.LogFile, server.LogLevel)</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tl, err := conn.Listen(server.BindAddr, server.BindPort)</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;Start frps success&quot;</span>)</span><br><span class=\"line\">\tProcessControlConn(l)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/models/server/config.go</code>  <code>LoadConf</code>  server  success  <code>ProcessControlConn</code> </p>\n<p> <code>src/frp/models/server/config.go</code></p>\n<p> <code>github.com/vaughan0/go-ini</code> <code>[common]</code>  <code>[common]</code>  <code>ProxyServers</code>  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ProxyServers <span class=\"keyword\">map</span>[<span class=\"type\">string</span>]*ProxyServer = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"type\">string</span>]*ProxyServer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">LoadConf</span><span class=\"params\">(confFile <span class=\"type\">string</span>)</span></span> (err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> name, section := <span class=\"keyword\">range</span> conf &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> name != <span class=\"string\">&quot;common&quot;</span> &#123;</span><br><span class=\"line\">\t\t\tproxyServer := &amp;ProxyServer&#123;&#125;</span><br><span class=\"line\">\t\t\tproxyServer.Name = name</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.Passwd, ok = section[<span class=\"string\">&quot;passwd&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] no passwd found&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.BindAddr, ok = section[<span class=\"string\">&quot;bind_addr&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\t\t\tproxyServer.BindAddr = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tportStr, ok := section[<span class=\"string\">&quot;listen_port&quot;</span>]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> ok &#123;</span><br><span class=\"line\">\t\t\t\tproxyServer.ListenPort, err = strconv.ParseInt(portStr, <span class=\"number\">10</span>, <span class=\"number\">64</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] listen_port error&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: proxy [%s] listen_port not found&quot;</span>, proxyServer.Name)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tproxyServer.Init()</span><br><span class=\"line\">\t\t\tProxyServers[proxyServer.Name] = proxyServer</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(ProxyServers) == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">&quot;Parse ini file error: no proxy config found&quot;</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ... ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>github.com/astaxie/beego/logs</code> </p>\n<p> <code>src/frp/utils/conn/conn.go</code></p>\n<p> <code>Listener</code>  TCP </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Listener <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\taddr      net.Addr</span><br><span class=\"line\">\tl         *net.TCPListener</span><br><span class=\"line\">\tconns     <span class=\"keyword\">chan</span> *Conn</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Listen</code>  TCP  <code>Listener</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Listen</span><span class=\"params\">(bindAddr <span class=\"type\">string</span>, bindPort <span class=\"type\">int64</span>)</span></span> (l *Listener, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// TCP tcp4</span></span><br><span class=\"line\">\ttcpAddr, err := net.ResolveTCPAddr(<span class=\"string\">&quot;tcp4&quot;</span>, fmt.Sprintf(<span class=\"string\">&quot;%s:%d&quot;</span>, bindAddr, bindPort))</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// TCP</span></span><br><span class=\"line\">\tlistener, err := net.ListenTCP(<span class=\"string\">&quot;tcp&quot;</span>, tcpAddr)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  Listener </span></span><br><span class=\"line\">\tl = &amp;Listener&#123;</span><br><span class=\"line\">\t\taddr:      listener.Addr(),</span><br><span class=\"line\">\t\tl:         listener,</span><br><span class=\"line\">\t\tconns:     <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> *Conn),</span><br><span class=\"line\">\t\tcloseFlag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TCP</span></span><br><span class=\"line\">\t\t\tconn, err := l.l.AcceptTCP()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> l.closeFlag &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//  Conn  Listener </span></span><br><span class=\"line\">\t\t\tc := &amp;Conn&#123;</span><br><span class=\"line\">\t\t\t\tTcpConn:   conn,</span><br><span class=\"line\">\t\t\t\tcloseFlag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tc.Reader = bufio.NewReader(c.TcpConn)</span><br><span class=\"line\">\t\t\tl.conns &lt;- c</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> l, err</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Listener</code> <code>conns</code> <code>Listen</code> </p>\n<p> <code>l</code>  frp  <code>l</code>  <code>src/frp/cmd/frps/control.go</code> </p>\n<p><code>ProcessControlConn</code>  <code>l.GetConn()</code>  <code>c</code>  <code>controlWorker(c)</code> <code>l.GetConn()</code> </p>\n<p> <code>c</code>  <code>utils/conn</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Conn <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tTcpConn   *net.TCPConn</span><br><span class=\"line\">\tReader    *bufio.Reader</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Conn</code>  TCP </p>\n<ul>\n<li><code>TcpConn</code> <code>net.TCPConn</code>  TCP  TCP </li>\n<li><code>Reader</code> <code>bufio.Reader</code>  <code>TcpConn</code></li>\n<li><code>closeFlag</code> <code>true</code></li>\n</ul>\n<p> <code>controlWorker(c)</code> <code></code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">controlWorker</span><span class=\"params\">(c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tres, err := c.ReadLine()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Read error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;get: %s&quot;</span>, res)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  ClientCtlReq </span></span><br><span class=\"line\">\tclientCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(res), &amp;clientCtlReq); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, res)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">\tsucc, info, needRes := checkProxy(clientCtlReq, c)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !succ &#123;</span><br><span class=\"line\">\t\tclientCtlRes.Code = <span class=\"number\">1</span></span><br><span class=\"line\">\t\tclientCtlRes.Msg = info</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> needRes &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> c.Close()</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tbuf, _ := json.Marshal(clientCtlRes)</span><br><span class=\"line\">\t\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Write error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t\ttime.Sleep(<span class=\"number\">1</span> * time.Second)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\ts, ok := server.ProxyServers[clientCtlReq.ProxyName]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s] is not exist&quot;</span>, clientCtlReq.ProxyName)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> readControlMsgFromClient(s, c)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  ClientCtlReq </span></span><br><span class=\"line\">\tserverCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\tserverCtlReq.Type = consts.WorkConn</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tcloseFlag := s.WaitUserConn()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> closeFlag &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], goroutine for dealing user conn is closed&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tbuf, _ := json.Marshal(serverCtlReq)</span><br><span class=\"line\">\t\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], write to client error, proxy exit&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\ts.Close()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], write to client to add work conn success&quot;</span>, s.Name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;ProxyName [%s], I&#x27;m dead!&quot;</span>, s.Name)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>checkProxy</code>  <code>req.Type</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">checkProxy</span><span class=\"params\">(req *msg.ClientCtlReq, c *conn.Conn)</span></span> (succ <span class=\"type\">bool</span>, info <span class=\"type\">string</span>, needRes <span class=\"type\">bool</span>) &#123;</span><br><span class=\"line\">\tsucc = <span class=\"literal\">false</span>    <span class=\"comment\">//  false</span></span><br><span class=\"line\">\tneedRes = <span class=\"literal\">true</span>  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\ts, ok := server.ProxyServers[req.ProxyName]</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s] is not exist&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> req.Passwd != s.Passwd &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], password is not correct&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> req.Type == consts.CtlConn &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> s.Status != consts.Idle &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], already in use&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\terr := s.Start()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], start proxy error: %v&quot;</span>, req.ProxyName, err.Error())</span><br><span class=\"line\">\t\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlog.Info(<span class=\"string\">&quot;ProxyName [%s], start proxy success&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> req.Type == consts.WorkConn &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tneedRes = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> s.Status != consts.Working &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], is not working when it gets one new work conn&quot;</span>, req.ProxyName)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\ts.GetNewCliConn(c) <span class=\"comment\">// </span></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tinfo = fmt.Sprintf(<span class=\"string\">&quot;ProxyName [%s], type [%d] unsupport&quot;</span>, req.ProxyName, req.Type)</span><br><span class=\"line\">\t\tlog.Warn(info)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  true</span></span><br><span class=\"line\">\tsucc = <span class=\"literal\">true</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p></p>\n<p></p>\n<p><code>readControlMsgFromClient</code>  </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">readControlMsgFromClient</span><span class=\"params\">(s *server.ProxyServer, c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tisContinueRead := <span class=\"literal\">true</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\tf := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\tisContinueRead = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\ts.Close()</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], client heartbeat timeout&quot;</span>, s.Name)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//  timer HeartBeatTimeout  f</span></span><br><span class=\"line\">\ttimer := time.AfterFunc(time.Duration(server.HeartBeatTimeout)*time.Second, f)</span><br><span class=\"line\">\t<span class=\"comment\">// defer </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> timer.Stop()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> isContinueRead &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//  c  content </span></span><br><span class=\"line\">\t\tcontent, err := c.ReadLine()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err == io.EOF &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], client is dead!&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t\ts.Close()</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> <span class=\"literal\">nil</span> == c || c.IsClosed() &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], client connection is closed&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], read error: %v&quot;</span>, s.Name, err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\tclientCtlReq := &amp;msg.ClientCtlReq&#123;&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//  content  msg.ClientCtlReq  clientCtlReq </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(content), clientCtlReq); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, content)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> consts.CSHeartBeatReq == clientCtlReq.Type &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], get heartbeat&quot;</span>, s.Name)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// </span></span><br><span class=\"line\">\t\t\ttimer.Reset(time.Duration(server.HeartBeatTimeout) * time.Second)</span><br><span class=\"line\">\t\t\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//  consts.SCHeartBeatRes JSON </span></span><br><span class=\"line\">\t\t\tclientCtlRes.GeneralRes.Code = consts.SCHeartBeatRes</span><br><span class=\"line\">\t\t\tresponse, err := json.Marshal(clientCtlRes)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Warn(<span class=\"string\">&quot;Serialize ClientCtlRes err! err: %v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\terr = c.Write(<span class=\"type\">string</span>(response) + <span class=\"string\">&quot;\\\\n&quot;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;Send heartbeat response to client failed! Err:%v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"frpc\"><a href=\"#frpc\" class=\"headerlink\" title=\"frpc\"></a>frpc</h3><p><code>ini</code> </p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frpc.log</span><br><span class=\"line\"><span class=\"comment\"># debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = debug</span><br><span class=\"line\"><span class=\"comment\"># file, console</span></span><br><span class=\"line\"><span class=\"attr\">log_way</span> = console</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[test1]</span></span><br><span class=\"line\"><span class=\"attr\">passwd</span> = <span class=\"number\">123</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">22</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frpc/main.go</code></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\terr := client.LoadConf(<span class=\"string\">&quot;./frpc.ini&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tos.Exit(<span class=\"number\">-1</span>)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.InitLog(client.LogWay, client.LogFile, client.LogLevel)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//  len(client.ProxyClients) </span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> wait sync.WaitGroup</span><br><span class=\"line\">\twait.Add(<span class=\"built_in\">len</span>(client.ProxyClients))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> _, client := <span class=\"keyword\">range</span> client.ProxyClients &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">go</span> ControlProcess(client, &amp;wait)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlog.Info(<span class=\"string\">&quot;Start frpc success&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\twait.Wait()</span><br><span class=\"line\">\tlog.Warn(<span class=\"string\">&quot;All proxy exit!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src/frp/cmd/frpc/control.go</code> <code>ControlProcess()</code> <code>loginToServer</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ControlProcess</span><span class=\"params\">(cli *client.ProxyClient, wait *sync.WaitGroup)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  wait.Done()  ControlProcess( )</span></span><br><span class=\"line\">    <span class=\"comment\">//  sync.WaitGroup </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> wait.Done()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\tc, err := loginToServer(cli)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server failed!&quot;</span>, cli.Name)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tconnection = c</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> connection.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tcontent, err := connection.ReadLine()</span><br><span class=\"line\">        <span class=\"comment\">//  io.EOF </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err == io.EOF || <span class=\"literal\">nil</span> == connection || connection.IsClosed() &#123;</span><br><span class=\"line\">\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], server close this control conn&quot;</span>, cli.Name)</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">            <span class=\"comment\">//  60 </span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> sleepTime time.Duration = <span class=\"number\">1</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], try to reconnect to server[%s:%d]...&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t\t\t\ttmpConn, err := loginToServer(cli)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> err == <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tconnection.Close()</span><br><span class=\"line\">\t\t\t\t\tconnection = tmpConn</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> sleepTime &lt; <span class=\"number\">60</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tsleepTime = sleepTime * <span class=\"number\">2</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\ttime.Sleep(sleepTime * time.Second)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;ProxyName [%s], read from server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  ClientCtlRes </span></span><br><span class=\"line\">\t\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err := json.Unmarshal([]<span class=\"type\">byte</span>(content), clientCtlRes); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;Parse err: %v : %s&quot;</span>, err, content)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> consts.SCHeartBeatRes == clientCtlRes.GeneralRes.Code &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> heartBeatTimer != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Debug(<span class=\"string\">&quot;Client rcv heartbeat response&quot;</span>)</span><br><span class=\"line\">\t\t\t\theartBeatTimer.Reset(time.Duration(client.HeartBeatTimeout) * time.Second)</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;heartBeatTimer is nil&quot;</span>)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//  </span></span><br><span class=\"line\">\t\tcli.StartTunnel(client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>loginToServer</code>  <code>ConnectServer</code>  <code>startHeartBeat</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">loginToServer</span><span class=\"params\">(cli *client.ProxyClient)</span></span> (c *conn.Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">    c, err = conn.ConnectServer(client.ServerAddr, client.ServerPort)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server [%s:%d] error, %v&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//  ClientCtlReq  CtlConn</span></span><br><span class=\"line\">\treq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.CtlConn,</span><br><span class=\"line\">\t\tProxyName: cli.Name,</span><br><span class=\"line\">\t\tPasswd:    cli.Passwd,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  JSON </span></span><br><span class=\"line\">\tbuf, _ := json.Marshal(req)</span><br><span class=\"line\">\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], write to server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tres, err := c.ReadLine()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], read from server error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], read [%s]&quot;</span>, cli.Name, res)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  ClientCtlRes </span></span><br><span class=\"line\">\tclientCtlRes := &amp;msg.ClientCtlRes&#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err = json.Unmarshal([]<span class=\"type\">byte</span>(res), &amp;clientCtlRes); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], format server response error, %v&quot;</span>, cli.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> clientCtlRes.Code != <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], start proxy error, %s&quot;</span>, cli.Name, clientCtlRes.Msg)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> c, fmt.Errorf(<span class=\"string\">&quot;%s&quot;</span>, clientCtlRes.Msg)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> startHeartBeat(c)</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;ProxyName [%s], connect to server[%s:%d] success!&quot;</span>, cli.Name, client.ServerAddr, client.ServerPort)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ConnectServer</code>  <code>utils/conn</code> TCP </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Conn <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tTcpConn   *net.TCPConn</span><br><span class=\"line\">\tReader    *bufio.Reader</span><br><span class=\"line\">\tcloseFlag <span class=\"type\">bool</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ConnectServer</span><span class=\"params\">(host <span class=\"type\">string</span>, port <span class=\"type\">int64</span>)</span></span> (c *Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\tc = &amp;Conn&#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  net.ResolveTCPAddr  TCP </span></span><br><span class=\"line\">\tservertAddr, err := net.ResolveTCPAddr(<span class=\"string\">&quot;tcp4&quot;</span>, fmt.Sprintf(<span class=\"string\">&quot;%s:%d&quot;</span>, host, port))</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  TCP </span></span><br><span class=\"line\">\tconn, err := net.DialTCP(<span class=\"string\">&quot;tcp&quot;</span>, <span class=\"literal\">nil</span>, servertAddr)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//  TCP  Conn  TcpConn </span></span><br><span class=\"line\">\tc.TcpConn = conn</span><br><span class=\"line\">    <span class=\"comment\">//  Conn  Reader </span></span><br><span class=\"line\">\tc.Reader = bufio.NewReader(c.TcpConn)</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tc.closeFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> c, <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Conn </span></span><br><span class=\"line\"><span class=\"comment\">//  Join </span></span><br></pre></td></tr></table></figure>\n\n<p> <code>startHeartBeat</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">startHeartBeat</span><span class=\"params\">(c *conn.Conn)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tf := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;HeartBeat timeout!&quot;</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> c != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tc.Close()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">   \t<span class=\"comment\">// f</span></span><br><span class=\"line\">\theartBeatTimer = time.AfterFunc(time.Duration(client.HeartBeatTimeout)*time.Second, f)</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">defer</span> heartBeatTimer.Stop()</span><br><span class=\"line\"></span><br><span class=\"line\">\tclientCtlReq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.CSHeartBeatReq,</span><br><span class=\"line\">\t\tProxyName: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t\tPasswd:    <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// JSON</span></span><br><span class=\"line\">\trequest, err := json.Marshal(clientCtlReq)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Warn(<span class=\"string\">&quot;Serialize clientCtlReq err! Err: %v&quot;</span>, err)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Start to send heartbeat&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\ttime.Sleep(time.Duration(client.HeartBeatInterval) * time.Second)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> c != <span class=\"literal\">nil</span> &amp;&amp; !c.IsClosed() &#123;</span><br><span class=\"line\">\t\t\terr = c.Write(<span class=\"type\">string</span>(request) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\tlog.Error(<span class=\"string\">&quot;Send hearbeat to server failed! Err:%v&quot;</span>, err)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">continue</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Heartbeat exit&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>utils/conn</code>  <code>StartTunnel</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(p *ProxyClient)</span></span> StartTunnel(serverAddr <span class=\"type\">string</span>, serverPort <span class=\"type\">int64</span>) (err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// </span></span><br><span class=\"line\">    localConn, err := p.GetLocalConn()</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//  </span></span><br><span class=\"line\">    remoteConn, err := p.GetRemoteConn(serverAddr, serverPort)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// l means local, r means remote</span></span><br><span class=\"line\">\tlog.Debug(<span class=\"string\">&quot;Join two conns, (l[%s] r[%s]) (l[%s] r[%s])&quot;</span>, localConn.GetLocalAddr(), localConn.GetRemoteAddr(),</span><br><span class=\"line\">\t\tremoteConn.GetLocalAddr(), remoteConn.GetRemoteAddr())</span><br><span class=\"line\">    <span class=\"comment\">//  </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> conn.Join(localConn, remoteConn)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>GetRemoteConn</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(p *ProxyClient)</span></span> GetRemoteConn(addr <span class=\"type\">string</span>, port <span class=\"type\">int64</span>) (c *conn.Conn, err <span class=\"type\">error</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  defer </span></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tc.Close()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">\tc, err = conn.ConnectServer(addr, port)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], connect to server [%s:%d] error, %v&quot;</span>, p.Name, addr, port, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\treq := &amp;msg.ClientCtlReq&#123;</span><br><span class=\"line\">\t\tType:      consts.WorkConn,</span><br><span class=\"line\">\t\tProxyName: p.Name,</span><br><span class=\"line\">\t\tPasswd:    p.Passwd,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  JSON </span></span><br><span class=\"line\">\tbuf, _ := json.Marshal(req)</span><br><span class=\"line\">\terr = c.Write(<span class=\"type\">string</span>(buf) + <span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Error(<span class=\"string\">&quot;ProxyName [%s], write to server error, %v&quot;</span>, p.Name, err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\terr = <span class=\"literal\">nil</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Join</code> </p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Join</span><span class=\"params\">(c1 *Conn, c2 *Conn)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> wait sync.WaitGroup</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// defer  WaitGroup </span></span><br><span class=\"line\">\tpipe := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(to *Conn, from *Conn)</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> to.Close()</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> from.Close()</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> wait.Done()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> err <span class=\"type\">error</span></span><br><span class=\"line\">        <span class=\"comment\">//  io.Copy </span></span><br><span class=\"line\">        <span class=\"comment\">// EOF</span></span><br><span class=\"line\">\t\t_, err = io.Copy(to.TcpConn, from.TcpConn)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Warn(<span class=\"string\">&quot;join conns error, %v&quot;</span>, err)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\twait.Add(<span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"comment\">//  c1  c2  c2  c1 </span></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> pipe(c1, c2)</span><br><span class=\"line\">\t<span class=\"keyword\">go</span> pipe(c2, c1)</span><br><span class=\"line\">\twait.Wait()</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Okfrp v0.1.0  10 </p>\n<p> frpc  <code>controlWorker</code> </p>\n<p> Golang  Golang  <code>// ... ...</code> </p>\n<p></p>\n<p> FRP v0.5.0 </p>\n<p><a href=\"https://www.joxrays.com/frp-source-code/\">https://www.joxrays.com/frp-source-code/</a></p>\n"},{"title":"JavaScript ","date":"2024-02-09T16:00:00.000Z","author":"ma5hr00m","_content":"\n JavaScript \n\n [JavaScript](#)  [JavaScript/](#)\n\n:::tip\n\n [JavaScript/](https://ma5hr00m.top/archives/2024/02/js-obfuscation-deobfuscation.html)\n\n:::\n\n## JavaScript\n\nJavaScript  C/Golang JS  Java&JVM \n\n## \n\n### JS Engine \n\n [JS Engine](https://en.wikipedia.org/wiki/JavaScript_engine)\n\nJS Engine  CPU JS Engine  JS \n\nJS Engine \n\n JS Engine  **Google V8**Google V8  C++  JS Engine WebAssembly Engine Chrome Node.jsMongoDB Chrome  60%  Node.js  JS  V8 \n\n JS Engine\n\n-  Mozilla  Firefox  SpiderMonkey\n-  Safari  JavaScriptCore\n-  IE  Chakra\n\n JS Engine  Google V8\n\n### JS Runtime \n\n JS Runtime JS  JS Engine API callback queue JS  core lib  Runtime \n\n![20240221083858](https://img.ma5hr00m.top/blog/20240221083858.png)\n\n Chrome  JS Runtime  Runtime  JS EngineWeb API JS Engine Web API  Engine  JS  Web API  DOMWeb Worker FIFO\n\n Runtime Node.js  Web API C++ \n\nChrome  Node.js  JS  V8  Runtime \n\nV8  100w  V8 Engine \n\n- [Parser](https://v8.dev/blog/scanner) JS AST\n- [Ignition](https://v8.dev/docs/ignition) AST Bytecode Bytecode TurboFan \n- [TurboFan](https://v8.dev/docs/turbofan) Ignitio  Bytecode \n- [Orinoco](https://v8.dev/blog/trash-talk)\n\n JS  V8 Engine  JS \n\n## Parser \n\nParser  JS  AST Token Toekn  AST\n\n### Lexing \n\n**** Tokenchar streamtoken stream\n\n`main.js`\n\n```JavaScript\nconst a = 3;\n```\n\n`const``a``=``3``;``space`JS \n\n JSON  Tokens\n\n```JSON\n[\n    {\n        \"type\": \"Keyword\",\n        \"value\": \"const\"\n    },\n    {\n        \"type\": \"Identifier\",\n        \"value\": \"a\"\n    },\n    {\n        \"type\": \"Punctuator\",\n        \"value\": \"=\"\n    },\n    {\n        \"type\": \"Numeric\",\n        \"value\": \"3\"\n    },\n    {\n        \"type\": \"Punctuator\",\n        \"value\": \";\"\n    }\n]\n```\n\nTokenizingLexing\n\n JS JS  token  Lexing  Tokenizing\n\n### Parsing \n\n**** AST\n\n Tokens  JSON  AST \n\n```JSON\n{\n  \"type\": \"Program\",\n  \"body\": [\n    {\n      \"type\": \"VariableDeclaration\",\n      \"declarations\": [\n        {\n          \"type\": \"VariableDeclarator\",\n          \"id\": {\n            \"type\": \"Identifier\",\n            \"name\": \"a\"\n          },\n          \"init\": {\n            \"type\": \"Literal\",\n            \"value\": 3,\n            \"raw\": \"3\"\n          }\n        }\n      ],\n      \"kind\": \"const\"\n    }\n  ],\n  \"sourceType\": \"script\"\n}\n```\n\nAST\n\n[Esprima](https://esprima.org/demo/parse.html#)  JS  JS  Lexing  Tokens   Parsing  AST\n\n [AST explorer](https://astexplorer.net/)  JS  AST acorn.js [acorn.js](https://www.npmjs.com/package/acorn)   JavaScript Parser`npm` acorn.js  AST `console.log(1);`JSON\n\n```JavaScript\nconst { Parser } = require('acorn')\n\nconst javascriptCode = `\n  console.log(1);\n`;\n\nconst ast = Parser.parse(javascriptCode, { ecmaVersion: 2024 });\nconsole.log(JSON.stringify(ast));\n```\n\n## Ignition \n\nIgnition  AST Bytecode\n\nBytecode  op /IR V8 \n\n>  Java  Python/JavaScript/Ruby\n\n V8  AST Bytecode Google  AST->Bytecode->\n\n![20240221083929](https://img.ma5hr00m.top/blog/20240221083929.png)\n\nNode.js  V8 `--print-bytecode`\n\n JS  main.js \n\n```JavaScript\nfunction ma5hr00m() {\n  console.log(1);\n}\n\nma5hr00m();\n```\n\n`node --print-bytecode main.js` Bytecode`ma5hr00m()` Bytecode\n\n```JavaScript\n[generated bytecode for function: ma5hr00m (0x3ae97a693191 )]                                                                     \nBytecode length: 19                                                                                                                                            \nParameter count 1                                                                                                                                              \nRegister count 3                                                                                                                                               \nFrame size 24                                                                                                                                                  \nBytecode age: 0                                                                                                                                                \n   24 S> 0x3ae97a6940ee @    0 : 21 00 00          LdaGlobal [0], [0]                                                                                          \n         0x3ae97a6940f1 @    3 : c3                Star1                                                                                                       \n   32 E> 0x3ae97a6940f2 @    4 : 2d f9 01 02       GetNamedProperty r1, [1], [2]                                                                               \n         0x3ae97a6940f6 @    8 : c4                Star0                                                                                                       \n         0x3ae97a6940f7 @    9 : 0d 01             LdaSmi [1]                                                                                                  \n         0x3ae97a6940f9 @   11 : c2                Star2                                                                                                       \n   32 E> 0x3ae97a6940fa @   12 : 5e fa f9 f8 04    CallProperty1 r0, r1, r2, [4]                                                                               \n         0x3ae97a6940ff @   17 : 0e                LdaUndefined                                                                                                \n   40 S> 0x3ae97a694100 @   18 : a9                Return                                                                                                      \nConstant pool (size = 2)                                                                                                                                       \n0x3ae97a694099: [FixedArray] in OldSpace                                                                                                                       \n - map: 0x2a087bbc0211                                                                                                                  \n - length: 2                                                                                                                                                   \n           0: 0x2a087bbc5ce9                                                                                                              \n           1: 0x398ad9accb91                                                                                                                  \nHandler Table (size = 0)                                                                                                                                       \nSource Position Table (size = 10)                                                                                                                              \n0x3ae97a694109 \n```\n\n Bytecode \n\n- \n-  1 \n-  0\n- \n\n Bytecode  CPU  CPU V8  CPU  Bytecode V8 \n\n## TurboFan \n\nTurboFan  Bytecode \n\nIgnition  AST->Bytecode  V8  TurboFan  Bytecode \n\nJavaScript \n\n- \n- \n\n Web Web  V8  JS Engine \n\n V8 JIT JS  JS Engine \n\n### JIT \n\nJust-in-Time V8 V8 \n\n Engine  JIT  Engine `warm``hot``very hot`\n\n\n\n```JavaScript\nfunction arraySum(arr) {\n    let sum = 0;\n    for (var i = 0; i < arr.length; i++) {\n        sum += arr[i];\n    }\n}\n```\n\n\n\n`warm`\n\n`warm` JIT  ** `warm``stub``stub` + \n\n`warm``hot` push \n\n`hot``very hot`\n\n`very hot` JIT  ** `sum``arr[i]`JS `+=` INT  INT \n\n INT / **\n\nJIT  JS JIT \n\n## \n\n- [JavaScript ASTV8JIT](https://cheogo.github.io/learn-javascript/201709/runtime.html)\n- [JavaScript4V8](https://kiwenlau.com/2019/07/16/how-does-v8-work/)by Talk\n- [WebAssembly JavaScript Just-in-time (JIT) ](https://zhuanlan.zhihu.com/p/25669120)by \n- [JSJIT](https://juejin.cn/post/6863269040300032008)by ","source":"_posts/how-js-run.md","raw":"---\ntitle: JavaScript \ndate: 2024/2/10\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n JavaScript \n\n [JavaScript](#)  [JavaScript/](#)\n\n:::tip\n\n [JavaScript/](https://ma5hr00m.top/archives/2024/02/js-obfuscation-deobfuscation.html)\n\n:::\n\n## JavaScript\n\nJavaScript  C/Golang JS  Java&JVM \n\n## \n\n### JS Engine \n\n [JS Engine](https://en.wikipedia.org/wiki/JavaScript_engine)\n\nJS Engine  CPU JS Engine  JS \n\nJS Engine \n\n JS Engine  **Google V8**Google V8  C++  JS Engine WebAssembly Engine Chrome Node.jsMongoDB Chrome  60%  Node.js  JS  V8 \n\n JS Engine\n\n-  Mozilla  Firefox  SpiderMonkey\n-  Safari  JavaScriptCore\n-  IE  Chakra\n\n JS Engine  Google V8\n\n### JS Runtime \n\n JS Runtime JS  JS Engine API callback queue JS  core lib  Runtime \n\n![20240221083858](https://img.ma5hr00m.top/blog/20240221083858.png)\n\n Chrome  JS Runtime  Runtime  JS EngineWeb API JS Engine Web API  Engine  JS  Web API  DOMWeb Worker FIFO\n\n Runtime Node.js  Web API C++ \n\nChrome  Node.js  JS  V8  Runtime \n\nV8  100w  V8 Engine \n\n- [Parser](https://v8.dev/blog/scanner) JS AST\n- [Ignition](https://v8.dev/docs/ignition) AST Bytecode Bytecode TurboFan \n- [TurboFan](https://v8.dev/docs/turbofan) Ignitio  Bytecode \n- [Orinoco](https://v8.dev/blog/trash-talk)\n\n JS  V8 Engine  JS \n\n## Parser \n\nParser  JS  AST Token Toekn  AST\n\n### Lexing \n\n**** Tokenchar streamtoken stream\n\n`main.js`\n\n```JavaScript\nconst a = 3;\n```\n\n`const``a``=``3``;``space`JS \n\n JSON  Tokens\n\n```JSON\n[\n    {\n        \"type\": \"Keyword\",\n        \"value\": \"const\"\n    },\n    {\n        \"type\": \"Identifier\",\n        \"value\": \"a\"\n    },\n    {\n        \"type\": \"Punctuator\",\n        \"value\": \"=\"\n    },\n    {\n        \"type\": \"Numeric\",\n        \"value\": \"3\"\n    },\n    {\n        \"type\": \"Punctuator\",\n        \"value\": \";\"\n    }\n]\n```\n\nTokenizingLexing\n\n JS JS  token  Lexing  Tokenizing\n\n### Parsing \n\n**** AST\n\n Tokens  JSON  AST \n\n```JSON\n{\n  \"type\": \"Program\",\n  \"body\": [\n    {\n      \"type\": \"VariableDeclaration\",\n      \"declarations\": [\n        {\n          \"type\": \"VariableDeclarator\",\n          \"id\": {\n            \"type\": \"Identifier\",\n            \"name\": \"a\"\n          },\n          \"init\": {\n            \"type\": \"Literal\",\n            \"value\": 3,\n            \"raw\": \"3\"\n          }\n        }\n      ],\n      \"kind\": \"const\"\n    }\n  ],\n  \"sourceType\": \"script\"\n}\n```\n\nAST\n\n[Esprima](https://esprima.org/demo/parse.html#)  JS  JS  Lexing  Tokens   Parsing  AST\n\n [AST explorer](https://astexplorer.net/)  JS  AST acorn.js [acorn.js](https://www.npmjs.com/package/acorn)   JavaScript Parser`npm` acorn.js  AST `console.log(1);`JSON\n\n```JavaScript\nconst { Parser } = require('acorn')\n\nconst javascriptCode = `\n  console.log(1);\n`;\n\nconst ast = Parser.parse(javascriptCode, { ecmaVersion: 2024 });\nconsole.log(JSON.stringify(ast));\n```\n\n## Ignition \n\nIgnition  AST Bytecode\n\nBytecode  op /IR V8 \n\n>  Java  Python/JavaScript/Ruby\n\n V8  AST Bytecode Google  AST->Bytecode->\n\n![20240221083929](https://img.ma5hr00m.top/blog/20240221083929.png)\n\nNode.js  V8 `--print-bytecode`\n\n JS  main.js \n\n```JavaScript\nfunction ma5hr00m() {\n  console.log(1);\n}\n\nma5hr00m();\n```\n\n`node --print-bytecode main.js` Bytecode`ma5hr00m()` Bytecode\n\n```JavaScript\n[generated bytecode for function: ma5hr00m (0x3ae97a693191 )]                                                                     \nBytecode length: 19                                                                                                                                            \nParameter count 1                                                                                                                                              \nRegister count 3                                                                                                                                               \nFrame size 24                                                                                                                                                  \nBytecode age: 0                                                                                                                                                \n   24 S> 0x3ae97a6940ee @    0 : 21 00 00          LdaGlobal [0], [0]                                                                                          \n         0x3ae97a6940f1 @    3 : c3                Star1                                                                                                       \n   32 E> 0x3ae97a6940f2 @    4 : 2d f9 01 02       GetNamedProperty r1, [1], [2]                                                                               \n         0x3ae97a6940f6 @    8 : c4                Star0                                                                                                       \n         0x3ae97a6940f7 @    9 : 0d 01             LdaSmi [1]                                                                                                  \n         0x3ae97a6940f9 @   11 : c2                Star2                                                                                                       \n   32 E> 0x3ae97a6940fa @   12 : 5e fa f9 f8 04    CallProperty1 r0, r1, r2, [4]                                                                               \n         0x3ae97a6940ff @   17 : 0e                LdaUndefined                                                                                                \n   40 S> 0x3ae97a694100 @   18 : a9                Return                                                                                                      \nConstant pool (size = 2)                                                                                                                                       \n0x3ae97a694099: [FixedArray] in OldSpace                                                                                                                       \n - map: 0x2a087bbc0211                                                                                                                  \n - length: 2                                                                                                                                                   \n           0: 0x2a087bbc5ce9                                                                                                              \n           1: 0x398ad9accb91                                                                                                                  \nHandler Table (size = 0)                                                                                                                                       \nSource Position Table (size = 10)                                                                                                                              \n0x3ae97a694109 \n```\n\n Bytecode \n\n- \n-  1 \n-  0\n- \n\n Bytecode  CPU  CPU V8  CPU  Bytecode V8 \n\n## TurboFan \n\nTurboFan  Bytecode \n\nIgnition  AST->Bytecode  V8  TurboFan  Bytecode \n\nJavaScript \n\n- \n- \n\n Web Web  V8  JS Engine \n\n V8 JIT JS  JS Engine \n\n### JIT \n\nJust-in-Time V8 V8 \n\n Engine  JIT  Engine `warm``hot``very hot`\n\n\n\n```JavaScript\nfunction arraySum(arr) {\n    let sum = 0;\n    for (var i = 0; i < arr.length; i++) {\n        sum += arr[i];\n    }\n}\n```\n\n\n\n`warm`\n\n`warm` JIT  ** `warm``stub``stub` + \n\n`warm``hot` push \n\n`hot``very hot`\n\n`very hot` JIT  ** `sum``arr[i]`JS `+=` INT  INT \n\n INT / **\n\nJIT  JS JIT \n\n## \n\n- [JavaScript ASTV8JIT](https://cheogo.github.io/learn-javascript/201709/runtime.html)\n- [JavaScript4V8](https://kiwenlau.com/2019/07/16/how-does-v8-work/)by Talk\n- [WebAssembly JavaScript Just-in-time (JIT) ](https://zhuanlan.zhihu.com/p/25669120)by \n- [JSJIT](https://juejin.cn/post/6863269040300032008)by ","slug":"how-js-run","published":1,"updated":"2024-06-09T12:55:23.359Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap1000bf4ly6kdf3925","content":"<p> JavaScript </p>\n<p> <a href=\"#\">JavaScript</a>  <a href=\"#\">JavaScript&#x2F;</a></p>\n<p>:::tip</p>\n<p> <a href=\"https://ma5hr00m.top/archives/2024/02/js-obfuscation-deobfuscation.html\">JavaScript&#x2F;</a></p>\n<p>:::</p>\n<h2 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h2><p>JavaScript  C&#x2F;Golang JS  Java&amp;JVM </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"JS-Engine-\"><a href=\"#JS-Engine-\" class=\"headerlink\" title=\"JS Engine \"></a>JS Engine </h3><p> <a href=\"https://en.wikipedia.org/wiki/JavaScript_engine\">JS Engine</a></p>\n<p>JS Engine  CPU JS Engine  JS </p>\n<p>JS Engine </p>\n<p> JS Engine  <strong>Google V8</strong>Google V8  C++  JS Engine WebAssembly Engine Chrome Node.jsMongoDB Chrome  60%  Node.js  JS  V8 </p>\n<p> JS Engine</p>\n<ul>\n<li> Mozilla  Firefox  SpiderMonkey</li>\n<li> Safari  JavaScriptCore</li>\n<li> IE  Chakra</li>\n</ul>\n<p> JS Engine  Google V8</p>\n<h3 id=\"JS-Runtime-\"><a href=\"#JS-Runtime-\" class=\"headerlink\" title=\"JS Runtime \"></a>JS Runtime </h3><p> JS Runtime JS  JS Engine API callback queue JS  core lib  Runtime </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240221083858.png\" alt=\"20240221083858\"></p>\n<p> Chrome  JS Runtime  Runtime  JS EngineWeb API JS Engine Web API  Engine  JS  Web API  DOMWeb Worker FIFO</p>\n<p> Runtime Node.js  Web API C++ </p>\n<p>Chrome  Node.js  JS  V8  Runtime </p>\n<p>V8  100w  V8 Engine </p>\n<ul>\n<li><a href=\"https://v8.dev/blog/scanner\">Parser</a> JS AST</li>\n<li><a href=\"https://v8.dev/docs/ignition\">Ignition</a> AST Bytecode Bytecode TurboFan </li>\n<li><a href=\"https://v8.dev/docs/turbofan\">TurboFan</a> Ignitio  Bytecode </li>\n<li><a href=\"https://v8.dev/blog/trash-talk\">Orinoco</a></li>\n</ul>\n<p> JS  V8 Engine  JS </p>\n<h2 id=\"Parser-\"><a href=\"#Parser-\" class=\"headerlink\" title=\"Parser \"></a>Parser </h2><p>Parser  JS  AST Token Toekn  AST</p>\n<h3 id=\"Lexing-\"><a href=\"#Lexing-\" class=\"headerlink\" title=\"Lexing \"></a>Lexing </h3><p><strong></strong> Tokenchar streamtoken stream</p>\n<p><code>main.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>const</code><code>a</code><code>=</code><code>3</code><code>;</code><code>space</code>JS </p>\n<p> JSON  Tokens</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Keyword&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;const&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Identifier&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Punctuator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;=&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Numeric&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Punctuator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;;&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<p>TokenizingLexing</p>\n<p> JS JS  token  Lexing  Tokenizing</p>\n<h3 id=\"Parsing-\"><a href=\"#Parsing-\" class=\"headerlink\" title=\"Parsing \"></a>Parsing </h3><p><strong></strong> AST</p>\n<p> Tokens  JSON  AST </p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Program&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;body&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;VariableDeclaration&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;declarations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;VariableDeclarator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Identifier&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;init&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Literal&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;raw&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;kind&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;const&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;sourceType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;script&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>AST</p>\n<p><a href=\"https://esprima.org/demo/parse.html#\">Esprima</a>  JS  JS  Lexing  Tokens   Parsing  AST</p>\n<p> <a href=\"https://astexplorer.net/\">AST explorer</a>  JS  AST acorn.js <a href=\"https://www.npmjs.com/package/acorn\">acorn.js</a>   JavaScript Parser<code>npm</code> acorn.js  AST <code>console.log(1);</code>JSON</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">Parser</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;acorn&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> javascriptCode = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  console.log(1);</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ast = <span class=\"title class_\">Parser</span>.<span class=\"title function_\">parse</span>(javascriptCode, &#123; <span class=\"attr\">ecmaVersion</span>: <span class=\"number\">2024</span> &#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(ast));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ignition-\"><a href=\"#Ignition-\" class=\"headerlink\" title=\"Ignition \"></a>Ignition </h2><p>Ignition  AST Bytecode</p>\n<p>Bytecode  op &#x2F;IR V8 </p>\n<blockquote>\n<p> Java  Python&#x2F;JavaScript&#x2F;Ruby</p>\n</blockquote>\n<p> V8  AST Bytecode Google  AST-&gt;Bytecode-&gt;</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240221083929.png\" alt=\"20240221083929\"></p>\n<p>Node.js  V8 <code>--print-bytecode</code></p>\n<p> JS  main.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ma5hr00m</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">ma5hr00m</span>();</span><br></pre></td></tr></table></figure>\n\n<p><code>node --print-bytecode main.js</code> Bytecode<code>ma5hr00m()</code> Bytecode</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[generated bytecode <span class=\"keyword\">for</span> <span class=\"attr\">function</span>: ma5hr00m (<span class=\"number\">0x3ae97a693191</span> )]                                                                     </span><br><span class=\"line\"><span class=\"title class_\">Bytecode</span> <span class=\"attr\">length</span>: <span class=\"number\">19</span>                                                                                                                                            </span><br><span class=\"line\"><span class=\"title class_\">Parameter</span> count <span class=\"number\">1</span>                                                                                                                                              </span><br><span class=\"line\"><span class=\"title class_\">Register</span> count <span class=\"number\">3</span>                                                                                                                                               </span><br><span class=\"line\"><span class=\"title class_\">Frame</span> size <span class=\"number\">24</span>                                                                                                                                                  </span><br><span class=\"line\"><span class=\"title class_\">Bytecode</span> <span class=\"attr\">age</span>: <span class=\"number\">0</span>                                                                                                                                                </span><br><span class=\"line\">   <span class=\"number\">24</span> S&gt; <span class=\"number\">0x3ae97a6940ee</span> @    <span class=\"number\">0</span> : <span class=\"number\">21</span> <span class=\"number\">00</span> <span class=\"number\">00</span>          <span class=\"title class_\">LdaGlobal</span> [<span class=\"number\">0</span>], [<span class=\"number\">0</span>]                                                                                          </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f1</span> @    <span class=\"number\">3</span> : c3                <span class=\"title class_\">Star1</span>                                                                                                       </span><br><span class=\"line\">   <span class=\"number\">32</span> E&gt; <span class=\"number\">0x3ae97a6940f2</span> @    <span class=\"number\">4</span> : 2d f9 <span class=\"number\">01</span> <span class=\"number\">02</span>       <span class=\"title class_\">GetNamedProperty</span> r1, [<span class=\"number\">1</span>], [<span class=\"number\">2</span>]                                                                               </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f6</span> @    <span class=\"number\">8</span> : c4                <span class=\"title class_\">Star0</span>                                                                                                       </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f7</span> @    <span class=\"number\">9</span> : 0d <span class=\"number\">01</span>             <span class=\"title class_\">LdaSmi</span> [<span class=\"number\">1</span>]                                                                                                  </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f9</span> @   <span class=\"number\">11</span> : c2                <span class=\"title class_\">Star2</span>                                                                                                       </span><br><span class=\"line\">   <span class=\"number\">32</span> E&gt; <span class=\"number\">0x3ae97a6940fa</span> @   <span class=\"number\">12</span> : 5e fa f9 f8 <span class=\"number\">04</span>    <span class=\"title class_\">CallProperty1</span> r0, r1, r2, [<span class=\"number\">4</span>]                                                                               </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940ff</span> @   <span class=\"number\">17</span> : 0e                <span class=\"title class_\">LdaUndefined</span>                                                                                                </span><br><span class=\"line\">   <span class=\"number\">40</span> S&gt; <span class=\"number\">0x3ae97a694100</span> @   <span class=\"number\">18</span> : a9                <span class=\"title class_\">Return</span>                                                                                                      </span><br><span class=\"line\"><span class=\"title class_\">Constant</span> pool (size = <span class=\"number\">2</span>)                                                                                                                                       </span><br><span class=\"line\"><span class=\"number\">0x3ae97a694099</span>: [<span class=\"title class_\">FixedArray</span>] <span class=\"keyword\">in</span> <span class=\"title class_\">OldSpace</span>                                                                                                                       </span><br><span class=\"line\"> - <span class=\"attr\">map</span>: <span class=\"number\">0x2a087bbc0211</span>                                                                                                                  </span><br><span class=\"line\"> - <span class=\"attr\">length</span>: <span class=\"number\">2</span>                                                                                                                                                   </span><br><span class=\"line\">           <span class=\"number\">0</span>: <span class=\"number\">0x2a087bbc5ce9</span>                                                                                                              </span><br><span class=\"line\">           <span class=\"number\">1</span>: <span class=\"number\">0x398ad9accb91</span>                                                                                                                  </span><br><span class=\"line\"><span class=\"title class_\">Handler</span> <span class=\"title class_\">Table</span> (size = <span class=\"number\">0</span>)                                                                                                                                       </span><br><span class=\"line\"><span class=\"title class_\">Source</span> <span class=\"title class_\">Position</span> <span class=\"title class_\">Table</span> (size = <span class=\"number\">10</span>)                                                                                                                              </span><br><span class=\"line\"><span class=\"number\">0x3ae97a694109</span> </span><br></pre></td></tr></table></figure>\n\n<p> Bytecode </p>\n<ul>\n<li></li>\n<li> 1 </li>\n<li> 0</li>\n<li></li>\n</ul>\n<p> Bytecode  CPU  CPU V8  CPU  Bytecode V8 </p>\n<h2 id=\"TurboFan-\"><a href=\"#TurboFan-\" class=\"headerlink\" title=\"TurboFan \"></a>TurboFan </h2><p>TurboFan  Bytecode </p>\n<p>Ignition  AST-&gt;Bytecode  V8  TurboFan  Bytecode </p>\n<p>JavaScript </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p> Web Web  V8  JS Engine </p>\n<p> V8 JIT JS  JS Engine </p>\n<h3 id=\"JIT-\"><a href=\"#JIT-\" class=\"headerlink\" title=\"JIT \"></a>JIT </h3><p>Just-in-Time V8 V8 </p>\n<p> Engine  JIT  Engine <code>warm</code><code>hot</code><code>very hot</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">arraySum</span>(<span class=\"params\">arr</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        sum += arr[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><code>warm</code></p>\n<p><code>warm</code> JIT  <em></em> <code>warm</code><code>stub</code><code>stub</code> + </p>\n<p><code>warm</code><code>hot</code> push </p>\n<p><code>hot</code><code>very hot</code></p>\n<p><code>very hot</code> JIT  <em></em> <code>sum</code><code>arr[i]</code>JS <code>+=</code> INT  INT </p>\n<p> INT &#x2F; <em></em></p>\n<p>JIT  JS JIT </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://cheogo.github.io/learn-javascript/201709/runtime.html\">JavaScript ASTV8JIT</a></li>\n<li><a href=\"https://kiwenlau.com/2019/07/16/how-does-v8-work/\">JavaScript4V8</a>by Talk</li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25669120\">WebAssembly JavaScript Just-in-time (JIT) </a>by </li>\n<li><a href=\"https://juejin.cn/post/6863269040300032008\">JSJIT</a>by </li>\n</ul>\n","excerpt":"","more":"<p> JavaScript </p>\n<p> <a href=\"#\">JavaScript</a>  <a href=\"#\">JavaScript&#x2F;</a></p>\n<p>:::tip</p>\n<p> <a href=\"https://ma5hr00m.top/archives/2024/02/js-obfuscation-deobfuscation.html\">JavaScript&#x2F;</a></p>\n<p>:::</p>\n<h2 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h2><p>JavaScript  C&#x2F;Golang JS  Java&amp;JVM </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"JS-Engine-\"><a href=\"#JS-Engine-\" class=\"headerlink\" title=\"JS Engine \"></a>JS Engine </h3><p> <a href=\"https://en.wikipedia.org/wiki/JavaScript_engine\">JS Engine</a></p>\n<p>JS Engine  CPU JS Engine  JS </p>\n<p>JS Engine </p>\n<p> JS Engine  <strong>Google V8</strong>Google V8  C++  JS Engine WebAssembly Engine Chrome Node.jsMongoDB Chrome  60%  Node.js  JS  V8 </p>\n<p> JS Engine</p>\n<ul>\n<li> Mozilla  Firefox  SpiderMonkey</li>\n<li> Safari  JavaScriptCore</li>\n<li> IE  Chakra</li>\n</ul>\n<p> JS Engine  Google V8</p>\n<h3 id=\"JS-Runtime-\"><a href=\"#JS-Runtime-\" class=\"headerlink\" title=\"JS Runtime \"></a>JS Runtime </h3><p> JS Runtime JS  JS Engine API callback queue JS  core lib  Runtime </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240221083858.png\" alt=\"20240221083858\"></p>\n<p> Chrome  JS Runtime  Runtime  JS EngineWeb API JS Engine Web API  Engine  JS  Web API  DOMWeb Worker FIFO</p>\n<p> Runtime Node.js  Web API C++ </p>\n<p>Chrome  Node.js  JS  V8  Runtime </p>\n<p>V8  100w  V8 Engine </p>\n<ul>\n<li><a href=\"https://v8.dev/blog/scanner\">Parser</a> JS AST</li>\n<li><a href=\"https://v8.dev/docs/ignition\">Ignition</a> AST Bytecode Bytecode TurboFan </li>\n<li><a href=\"https://v8.dev/docs/turbofan\">TurboFan</a> Ignitio  Bytecode </li>\n<li><a href=\"https://v8.dev/blog/trash-talk\">Orinoco</a></li>\n</ul>\n<p> JS  V8 Engine  JS </p>\n<h2 id=\"Parser-\"><a href=\"#Parser-\" class=\"headerlink\" title=\"Parser \"></a>Parser </h2><p>Parser  JS  AST Token Toekn  AST</p>\n<h3 id=\"Lexing-\"><a href=\"#Lexing-\" class=\"headerlink\" title=\"Lexing \"></a>Lexing </h3><p><strong></strong> Tokenchar streamtoken stream</p>\n<p><code>main.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>const</code><code>a</code><code>=</code><code>3</code><code>;</code><code>space</code>JS </p>\n<p> JSON  Tokens</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Keyword&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;const&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Identifier&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Punctuator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;=&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Numeric&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Punctuator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;;&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<p>TokenizingLexing</p>\n<p> JS JS  token  Lexing  Tokenizing</p>\n<h3 id=\"Parsing-\"><a href=\"#Parsing-\" class=\"headerlink\" title=\"Parsing \"></a>Parsing </h3><p><strong></strong> AST</p>\n<p> Tokens  JSON  AST </p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Program&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;body&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;VariableDeclaration&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;declarations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;VariableDeclarator&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Identifier&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;init&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Literal&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;raw&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;3&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;kind&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;const&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;sourceType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;script&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>AST</p>\n<p><a href=\"https://esprima.org/demo/parse.html#\">Esprima</a>  JS  JS  Lexing  Tokens   Parsing  AST</p>\n<p> <a href=\"https://astexplorer.net/\">AST explorer</a>  JS  AST acorn.js <a href=\"https://www.npmjs.com/package/acorn\">acorn.js</a>   JavaScript Parser<code>npm</code> acorn.js  AST <code>console.log(1);</code>JSON</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">Parser</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;acorn&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> javascriptCode = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  console.log(1);</span></span><br><span class=\"line\"><span class=\"string\">`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ast = <span class=\"title class_\">Parser</span>.<span class=\"title function_\">parse</span>(javascriptCode, &#123; <span class=\"attr\">ecmaVersion</span>: <span class=\"number\">2024</span> &#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(ast));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ignition-\"><a href=\"#Ignition-\" class=\"headerlink\" title=\"Ignition \"></a>Ignition </h2><p>Ignition  AST Bytecode</p>\n<p>Bytecode  op &#x2F;IR V8 </p>\n<blockquote>\n<p> Java  Python&#x2F;JavaScript&#x2F;Ruby</p>\n</blockquote>\n<p> V8  AST Bytecode Google  AST-&gt;Bytecode-&gt;</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240221083929.png\" alt=\"20240221083929\"></p>\n<p>Node.js  V8 <code>--print-bytecode</code></p>\n<p> JS  main.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ma5hr00m</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">ma5hr00m</span>();</span><br></pre></td></tr></table></figure>\n\n<p><code>node --print-bytecode main.js</code> Bytecode<code>ma5hr00m()</code> Bytecode</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[generated bytecode <span class=\"keyword\">for</span> <span class=\"attr\">function</span>: ma5hr00m (<span class=\"number\">0x3ae97a693191</span> )]                                                                     </span><br><span class=\"line\"><span class=\"title class_\">Bytecode</span> <span class=\"attr\">length</span>: <span class=\"number\">19</span>                                                                                                                                            </span><br><span class=\"line\"><span class=\"title class_\">Parameter</span> count <span class=\"number\">1</span>                                                                                                                                              </span><br><span class=\"line\"><span class=\"title class_\">Register</span> count <span class=\"number\">3</span>                                                                                                                                               </span><br><span class=\"line\"><span class=\"title class_\">Frame</span> size <span class=\"number\">24</span>                                                                                                                                                  </span><br><span class=\"line\"><span class=\"title class_\">Bytecode</span> <span class=\"attr\">age</span>: <span class=\"number\">0</span>                                                                                                                                                </span><br><span class=\"line\">   <span class=\"number\">24</span> S&gt; <span class=\"number\">0x3ae97a6940ee</span> @    <span class=\"number\">0</span> : <span class=\"number\">21</span> <span class=\"number\">00</span> <span class=\"number\">00</span>          <span class=\"title class_\">LdaGlobal</span> [<span class=\"number\">0</span>], [<span class=\"number\">0</span>]                                                                                          </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f1</span> @    <span class=\"number\">3</span> : c3                <span class=\"title class_\">Star1</span>                                                                                                       </span><br><span class=\"line\">   <span class=\"number\">32</span> E&gt; <span class=\"number\">0x3ae97a6940f2</span> @    <span class=\"number\">4</span> : 2d f9 <span class=\"number\">01</span> <span class=\"number\">02</span>       <span class=\"title class_\">GetNamedProperty</span> r1, [<span class=\"number\">1</span>], [<span class=\"number\">2</span>]                                                                               </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f6</span> @    <span class=\"number\">8</span> : c4                <span class=\"title class_\">Star0</span>                                                                                                       </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f7</span> @    <span class=\"number\">9</span> : 0d <span class=\"number\">01</span>             <span class=\"title class_\">LdaSmi</span> [<span class=\"number\">1</span>]                                                                                                  </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940f9</span> @   <span class=\"number\">11</span> : c2                <span class=\"title class_\">Star2</span>                                                                                                       </span><br><span class=\"line\">   <span class=\"number\">32</span> E&gt; <span class=\"number\">0x3ae97a6940fa</span> @   <span class=\"number\">12</span> : 5e fa f9 f8 <span class=\"number\">04</span>    <span class=\"title class_\">CallProperty1</span> r0, r1, r2, [<span class=\"number\">4</span>]                                                                               </span><br><span class=\"line\">         <span class=\"number\">0x3ae97a6940ff</span> @   <span class=\"number\">17</span> : 0e                <span class=\"title class_\">LdaUndefined</span>                                                                                                </span><br><span class=\"line\">   <span class=\"number\">40</span> S&gt; <span class=\"number\">0x3ae97a694100</span> @   <span class=\"number\">18</span> : a9                <span class=\"title class_\">Return</span>                                                                                                      </span><br><span class=\"line\"><span class=\"title class_\">Constant</span> pool (size = <span class=\"number\">2</span>)                                                                                                                                       </span><br><span class=\"line\"><span class=\"number\">0x3ae97a694099</span>: [<span class=\"title class_\">FixedArray</span>] <span class=\"keyword\">in</span> <span class=\"title class_\">OldSpace</span>                                                                                                                       </span><br><span class=\"line\"> - <span class=\"attr\">map</span>: <span class=\"number\">0x2a087bbc0211</span>                                                                                                                  </span><br><span class=\"line\"> - <span class=\"attr\">length</span>: <span class=\"number\">2</span>                                                                                                                                                   </span><br><span class=\"line\">           <span class=\"number\">0</span>: <span class=\"number\">0x2a087bbc5ce9</span>                                                                                                              </span><br><span class=\"line\">           <span class=\"number\">1</span>: <span class=\"number\">0x398ad9accb91</span>                                                                                                                  </span><br><span class=\"line\"><span class=\"title class_\">Handler</span> <span class=\"title class_\">Table</span> (size = <span class=\"number\">0</span>)                                                                                                                                       </span><br><span class=\"line\"><span class=\"title class_\">Source</span> <span class=\"title class_\">Position</span> <span class=\"title class_\">Table</span> (size = <span class=\"number\">10</span>)                                                                                                                              </span><br><span class=\"line\"><span class=\"number\">0x3ae97a694109</span> </span><br></pre></td></tr></table></figure>\n\n<p> Bytecode </p>\n<ul>\n<li></li>\n<li> 1 </li>\n<li> 0</li>\n<li></li>\n</ul>\n<p> Bytecode  CPU  CPU V8  CPU  Bytecode V8 </p>\n<h2 id=\"TurboFan-\"><a href=\"#TurboFan-\" class=\"headerlink\" title=\"TurboFan \"></a>TurboFan </h2><p>TurboFan  Bytecode </p>\n<p>Ignition  AST-&gt;Bytecode  V8  TurboFan  Bytecode </p>\n<p>JavaScript </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p> Web Web  V8  JS Engine </p>\n<p> V8 JIT JS  JS Engine </p>\n<h3 id=\"JIT-\"><a href=\"#JIT-\" class=\"headerlink\" title=\"JIT \"></a>JIT </h3><p>Just-in-Time V8 V8 </p>\n<p> Engine  JIT  Engine <code>warm</code><code>hot</code><code>very hot</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">arraySum</span>(<span class=\"params\">arr</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">        sum += arr[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><code>warm</code></p>\n<p><code>warm</code> JIT  <em></em> <code>warm</code><code>stub</code><code>stub</code> + </p>\n<p><code>warm</code><code>hot</code> push </p>\n<p><code>hot</code><code>very hot</code></p>\n<p><code>very hot</code> JIT  <em></em> <code>sum</code><code>arr[i]</code>JS <code>+=</code> INT  INT </p>\n<p> INT &#x2F; <em></em></p>\n<p>JIT  JS JIT </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://cheogo.github.io/learn-javascript/201709/runtime.html\">JavaScript ASTV8JIT</a></li>\n<li><a href=\"https://kiwenlau.com/2019/07/16/how-does-v8-work/\">JavaScript4V8</a>by Talk</li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25669120\">WebAssembly JavaScript Just-in-time (JIT) </a>by </li>\n<li><a href=\"https://juejin.cn/post/6863269040300032008\">JSJIT</a>by </li>\n</ul>\n"},{"title":"HelloWeb ","date":"2024-05-19T16:00:00.000Z","author":"ma5hr00m","_content":"\n# HelloWeb\n\n>  The Web World \n\n>  [ma5hr00m/HelloWeb](https://github.com/ma5hr00m/HelloWeb) Vidar-Team2024 \n\n![helloweb-banner](https://img.ma5hr00m.top/blog/helloweb-banner.png)\n\n## 0x00 \n\nWeb  Web  **&**\n\n\n\n- ****\n- \n- \n- ****\n\n****20min  **** AI prompt \n\nVidar-Team2024  PDF \n\n- [](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md)\n\n> \" ***0x05 - *** \n\n> \n\n## 0x01 Web\n\n[Web](https://en.wikipedia.org/wiki/World_Wide_Web)  World Wide Web  Web **** \n\n Web Web  URL  Web  docx  Web  Web \n\n Web  Web \n\n### \n\n Web  ISPInternet Service Provider IP \n\n Web  Flash  JavaScript \n\nCGICommon GatewayInterfaceWeb  CGI  Web \n\n PHP/JSP MVC RESTRepresentation State TransformationWeb Web \n\n Web  Web \n\n **** [baidu.com](https://www.baidu.com) URL  Web  [Vidar-Team](https://www.baidu.com/s?wd=Vidar-Team) Web \n\n### Web \n\n>  0 \n\n [https://vidar.club](https://vidar.club)  Vidar-Team  Web \n\n URL  [DNS ](https://www.ruanyifeng.com/blog/2022/08/dns-query.html) URL  IP  \n\n![helloweb-dns](https://img.ma5hr00m.top/blog/helloweb-dns.png)\n\n IP  [xxx.xxx.xxx.xxx]() 12 domain[vidar.club](https://vidar.club)  [1.117.117.147](1.117.117.147)  IP  DNS  IP DNS  IP  IP  [1.117.117.147](1.117.117.147) \n\n IP  TCP  TLS  `https://` HTTPS  HTTPHTTPS  SSL/TLS  TLS \n\n>  `http://`  `https://`  [http://vidar.club](http://vidar.club)\n\n HTTP `GET`  HTML  HTML \n\n![helloweb-burpsuite](https://img.ma5hr00m.top/blog/helloweb-burpsuite.png)\n\n `200 OK`  HTTP  HTML  HTML  DOM  CSS  CSSOM DOM  CSSOM \n\nHTTP  ChromeFirefox  Edge F12  BurpSuite  Yakit \n\n![helloweb-edge](https://img.ma5hr00m.top/blog/helloweb-edge.png)\n\n Web \n\n- [10 ](https://www.bilibili.com/video/BV1Rz4y197Jd/?spm_id_from=333.788.recommend_more_video.-1&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n- [](https://www.bilibili.com/video/BV1x54y1B7RE/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\n## 0x02 Web\n\n### \n\n Web  `C/C++` `Java``PHP``Golang`  C  C  C \n\nC C Primer Plus C \n\n- [C Primer Plus 6 PDF ](https://github.com/erhuoyan/bookrack/blob/master/C%20Primer%20Plus%20%E7%AC%AC6%E7%89%88%20%E4%B8%AD%E6%96%87%E7%89%88.pdf)\n- [C++ Primer Plus 6 ](https://github.com/ShujiaHuang/Cpp-Primer-Plus-6th?tab=readme-ov-file)\n\n C \n\n### \n\n Web \n\n Web  Web  Web \n\n>  Web  ***0x03 Web*** \n\n Web  Web  Java/Golang/PHP/Node.js  Rust \n\n Web  PHP CTF Web  PHP  [phith0n](https://www.leavesongs.com/) Web  Java Web  Java  CTF Web  Java  Java \n\n Web  XSS \n\n- [Web ](https://websec.readthedocs.io/zh/latest/)\n\n### CTF\n\nWeb  CTF \n\nCTF  [Jeopardy ](https://ctf-wiki.org/introduction/mode/) Web/Re/Pwn/Crypto/Misc Web \n\nWeb  **** Reverse  C  Web  Java/PHP/Golang \n\nCTF  Writeup\n\nVidar-Team  HGAME-MINI  Web  AK All kill CTF \n\n- [buuoj](https://buuoj.cn/)\n- [](https://adworld.xctf.org.cn/)\n\n Web  BurpSuite  PortSwigger  Web  100+  BurpSuite \n\n![helloweb-portswigger](https://img.ma5hr00m.top/blog/helloweb-portswigger.png)\n\n CTF  Flag \n\n- [PortSwigger WebSecurity Academy](https://portswigger.net/web-security)\n\n### \n\n CTF \n\nCVECommon Vulnerabilities and Exposures MITRE DHSCISACVECVECVE IDCVE-2019-1234567CVECVECVE Numbering AuthorityCNACVEIT\n\n CVE \n\n phith0n  GitHub  Dockerfile  docker-compose.yml \n\n- [Vulhub ](https://vulhub.org/#/environments/) | [Vulhub ](https://github.com/vulhub/vulhub)\n\n### \n\n> ****\n\nWeb  Web  Web \n\n Red Team \n\n\n\n- [ - ](https://yunjing.ichunqiu.com/)\n- [Hack The Box](https://app.hackthebox.com/)\n\nHack The Box  Red/Blue Team \n\n### \n\nWeb CTF\n\n- [BurpSuite - ](https://portswigger.net/burp)\n- [Yakit - ](https://yaklang.io/products/intro/) \n\nBurpSuite  PortSwigger \n\n## 0x03 Web\n\n Web  Web \n\n Web \n\nWeb \n\n>  HDU  [HDUHelp ](https://www.hduhelp.cn/) ~\n\n>   GolangHDU  Java\n\n>  Vidar-Team  HDUHelp  Web  HDUHelp \n\n### \n\n\n\n Web \n\n#### \n\n `HTML` + `CSS` + `JavaScript`HTML CSS JavaScript  [MDN Web](https://developer.mozilla.org/zh-CN/) Web  Web  Wiki \n\nMDN  Web [](https://www.runoob.com/)\n\n HTML CSS \n\n`JavaScript`  `JavaScript` JS JS  JS  Node.js  JS \n\n JavaScript [JavaScript 30](https://javascript30.com/)\n\n#### JavaScript\n\n Vue  React\n\n\n\n- [React](https://react.dev/) - [React ](https://zh-hans.react.dev/)\n- [Vue.js -  JavaScript ](https://vuejs.org/)\n- [Angular](https://angular.cn/)\n\n JavaScript  TypeScript \n\nTypeScript TS JS  JS TypeScript  JS superset JavaScript  TypeScript \n\nTS  JS JS  JS JS TS  IDE \n\n TypeScript TS JS  JS  TS \n\n>  JS  Angular  React  Next.js \n\n###  - Golang\n\n\n\n Golang \n\n#### \n\nGolang Go  Google Go  C  Go  C Go \n\n\n\n-  Golang [Go ](https://tour.go-zh.org/welcome/1)\n- [Golang ](https://golang-china.github.io/gopl-zh/)\n\n SQLSQL ****Structured Query LanguageWeb  MySQL \n\n- [W3school SQL](https://www.w3school.com.cn/sql/index.asp)\n\n#### \n\n Golang  Web  Golang  `Gin` + `Gorm` + `MySQL`\n\nGin  Web  Golang  `net/http`  API \n\n Web  Web \n\n- [Gin](https://gin-gonic.com/)\n\nGorm  Golang  ORM  ORM  Golang  SQL  SQL \n\nORM ORM  ****Object-Relational Mapping ORM SQL  Web \n\n- [GORM ](https://gorm.io/zh_CN/docs/index.html)\n\n CRUD  Golang  Framewok\n\n- [7GoWebGee](https://geektutu.com/post/gee.html)\n\n###  - Java\n\n#### \n\nJava  Java  C++  C#  Java Java \n\n\n\n- [Java - ](https://www.liaoxuefeng.com/wiki/1252599548343744)\n- Java[](https://www.bilibili.com/video/BV17F411T7Ao/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180) & [](https://www.bilibili.com/video/BV1yW4y1Y7Ms/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\n#### \n\n Java  `Spring Boot` + `Hibernate` + `MySQL` \n\nSpring Boot  Spring  Java  Spring \n\n- [Spring Boot ](https://springdoc.cn/spring-boot/)\n- [ SpringBoot2](https://www.bilibili.com/video/BV15b4y1a7yG/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\nHibernate  JDBC  POJO  ORM  SQL \n\n- [Hibernate ](https://hibernate.github.net.cn/)\n\n#### \n\n Java phith0n \n\n- [Java Web-[Java Web]](https://javasec.org/)\n\n phith0n [](https://govuln.com/) Web  299 \n\n## 0x04 Network\n\n WebNetwork  Network  Web  Vidar-Team  Web  Network \n\n Network  [HDU-CS-WIKI ](https://hdu-cs.wiki/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C) \n\n Vidar-Team  Vidar \n\nHDU [DN11](https://dn11.top/)\n\n![helloweb-dn11](https://img.ma5hr00m.top/blog/helloweb-dn11.png)\n\n## 0x05 \n\n\n\n### \n\n\n\n#### \n\n [Google](https://www.google.com/) cv \n\n Microsoft Bing [Bing](https://www.bing.com/) \n\n[](https://www.baidu.com/) `SQLI -csdn` CSDN \n\n#### \n\n [GitHub](https://github.com/)GitHub  GitHub  Web \n\n [Stack Overflow](https://stackoverflow.com/)Stack Overflow  Stack Exchange  Jeff Atwood  Joel Spolsky  2008 Stack Overflow  AI \n\n#### AI\n\n AI  AI  [Chatgpt](https://chat.openai.com/)New Bing \n\n AI  [devv_](https://devv.ai/)\n\n>  AI  AI ****  AI  AI \n\n### Git\n\nGit ****\n\n\n\n GitHub Git  GitHub \n\n Git [Learn Git Branching](https://learngitbranching.js.org/)\n\n### Linux\n\nLinux  *Linus*  1991    Windows  Linux \n\n Windows Linux   Linux  Linux \n\nLinux   Linux  Linux \n\n Linux  [VMware](https://www.vmware.com/)  [VirtualBox](https://www.virtualbox.org/)  Linux  Linux  Web Linux \n\n## 0x06 \n\n### \n\n\n\n [Hexo](https://hexo.io/zh-tw/)[Vitepress](https://vitepress.dev/)[Hugo](https://gohugo.io/)[WordPress](https://wordpress.com/zh-tw/) \n\n\n\n| Name      | Blog Link              |\n| --------- | ---------------------- |\n| E99p1ant  | https://github.red/    |\n| LoRexxar  | https://lorexxar.cn/   |\n| lightness | https://lightless.me/  |\n| Cyris     | https://cyris.moe/     |\n| Chuj      | https://www.cjovi.icu/ |\n| daidr     | https://im.daidr.me/   |\n| Nick Xu   | https://nickxu.me/     |\n\n [Markdown](https://markdown.tw/)  Markdown  [Typora](https://typora.io/)[Obsidian](https://obsidian.md/) Visual Studio Code \n\n Markdown  OSS+PicGo  .md [OSS PicGo  ](https://zhuanlan.zhihu.com/p/104152479)\n\n>   CDN  OSS \n\n### \n\n Vidar-Team \n\n![helloweb-tutu](https://img.ma5hr00m.top/blog/helloweb-tutu.png)\n\n `%blog`  SQLI  Flag Flag  Web ~\n\n### \n\n GitHub Roadmap\n\n- [Frontend Developer Roadmap](https://roadmap.sh/frontend)\n- [Backend Developer Roadmap](https://roadmap.sh/backend)\n- [Roadmap do Desenvolvedor Web 2021](https://github.com/hideraldus13/roadmap-do-desenvolvedor-web)\n\n## 0x07 \n\n\n\nVidar CTF  Vidar  Web IOT\n\n\n\n Web  Web \n\n>  ","source":"_posts/hello_web.md","raw":"---\ntitle: HelloWeb \ndate: 2024/5/20\nauthor: ma5hr00m\ncategories:\n- Web\n---\n\n# HelloWeb\n\n>  The Web World \n\n>  [ma5hr00m/HelloWeb](https://github.com/ma5hr00m/HelloWeb) Vidar-Team2024 \n\n![helloweb-banner](https://img.ma5hr00m.top/blog/helloweb-banner.png)\n\n## 0x00 \n\nWeb  Web  **&**\n\n\n\n- ****\n- \n- \n- ****\n\n****20min  **** AI prompt \n\nVidar-Team2024  PDF \n\n- [](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md)\n\n> \" ***0x05 - *** \n\n> \n\n## 0x01 Web\n\n[Web](https://en.wikipedia.org/wiki/World_Wide_Web)  World Wide Web  Web **** \n\n Web Web  URL  Web  docx  Web  Web \n\n Web  Web \n\n### \n\n Web  ISPInternet Service Provider IP \n\n Web  Flash  JavaScript \n\nCGICommon GatewayInterfaceWeb  CGI  Web \n\n PHP/JSP MVC RESTRepresentation State TransformationWeb Web \n\n Web  Web \n\n **** [baidu.com](https://www.baidu.com) URL  Web  [Vidar-Team](https://www.baidu.com/s?wd=Vidar-Team) Web \n\n### Web \n\n>  0 \n\n [https://vidar.club](https://vidar.club)  Vidar-Team  Web \n\n URL  [DNS ](https://www.ruanyifeng.com/blog/2022/08/dns-query.html) URL  IP  \n\n![helloweb-dns](https://img.ma5hr00m.top/blog/helloweb-dns.png)\n\n IP  [xxx.xxx.xxx.xxx]() 12 domain[vidar.club](https://vidar.club)  [1.117.117.147](1.117.117.147)  IP  DNS  IP DNS  IP  IP  [1.117.117.147](1.117.117.147) \n\n IP  TCP  TLS  `https://` HTTPS  HTTPHTTPS  SSL/TLS  TLS \n\n>  `http://`  `https://`  [http://vidar.club](http://vidar.club)\n\n HTTP `GET`  HTML  HTML \n\n![helloweb-burpsuite](https://img.ma5hr00m.top/blog/helloweb-burpsuite.png)\n\n `200 OK`  HTTP  HTML  HTML  DOM  CSS  CSSOM DOM  CSSOM \n\nHTTP  ChromeFirefox  Edge F12  BurpSuite  Yakit \n\n![helloweb-edge](https://img.ma5hr00m.top/blog/helloweb-edge.png)\n\n Web \n\n- [10 ](https://www.bilibili.com/video/BV1Rz4y197Jd/?spm_id_from=333.788.recommend_more_video.-1&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n- [](https://www.bilibili.com/video/BV1x54y1B7RE/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\n## 0x02 Web\n\n### \n\n Web  `C/C++` `Java``PHP``Golang`  C  C  C \n\nC C Primer Plus C \n\n- [C Primer Plus 6 PDF ](https://github.com/erhuoyan/bookrack/blob/master/C%20Primer%20Plus%20%E7%AC%AC6%E7%89%88%20%E4%B8%AD%E6%96%87%E7%89%88.pdf)\n- [C++ Primer Plus 6 ](https://github.com/ShujiaHuang/Cpp-Primer-Plus-6th?tab=readme-ov-file)\n\n C \n\n### \n\n Web \n\n Web  Web  Web \n\n>  Web  ***0x03 Web*** \n\n Web  Web  Java/Golang/PHP/Node.js  Rust \n\n Web  PHP CTF Web  PHP  [phith0n](https://www.leavesongs.com/) Web  Java Web  Java  CTF Web  Java  Java \n\n Web  XSS \n\n- [Web ](https://websec.readthedocs.io/zh/latest/)\n\n### CTF\n\nWeb  CTF \n\nCTF  [Jeopardy ](https://ctf-wiki.org/introduction/mode/) Web/Re/Pwn/Crypto/Misc Web \n\nWeb  **** Reverse  C  Web  Java/PHP/Golang \n\nCTF  Writeup\n\nVidar-Team  HGAME-MINI  Web  AK All kill CTF \n\n- [buuoj](https://buuoj.cn/)\n- [](https://adworld.xctf.org.cn/)\n\n Web  BurpSuite  PortSwigger  Web  100+  BurpSuite \n\n![helloweb-portswigger](https://img.ma5hr00m.top/blog/helloweb-portswigger.png)\n\n CTF  Flag \n\n- [PortSwigger WebSecurity Academy](https://portswigger.net/web-security)\n\n### \n\n CTF \n\nCVECommon Vulnerabilities and Exposures MITRE DHSCISACVECVECVE IDCVE-2019-1234567CVECVECVE Numbering AuthorityCNACVEIT\n\n CVE \n\n phith0n  GitHub  Dockerfile  docker-compose.yml \n\n- [Vulhub ](https://vulhub.org/#/environments/) | [Vulhub ](https://github.com/vulhub/vulhub)\n\n### \n\n> ****\n\nWeb  Web  Web \n\n Red Team \n\n\n\n- [ - ](https://yunjing.ichunqiu.com/)\n- [Hack The Box](https://app.hackthebox.com/)\n\nHack The Box  Red/Blue Team \n\n### \n\nWeb CTF\n\n- [BurpSuite - ](https://portswigger.net/burp)\n- [Yakit - ](https://yaklang.io/products/intro/) \n\nBurpSuite  PortSwigger \n\n## 0x03 Web\n\n Web  Web \n\n Web \n\nWeb \n\n>  HDU  [HDUHelp ](https://www.hduhelp.cn/) ~\n\n>   GolangHDU  Java\n\n>  Vidar-Team  HDUHelp  Web  HDUHelp \n\n### \n\n\n\n Web \n\n#### \n\n `HTML` + `CSS` + `JavaScript`HTML CSS JavaScript  [MDN Web](https://developer.mozilla.org/zh-CN/) Web  Web  Wiki \n\nMDN  Web [](https://www.runoob.com/)\n\n HTML CSS \n\n`JavaScript`  `JavaScript` JS JS  JS  Node.js  JS \n\n JavaScript [JavaScript 30](https://javascript30.com/)\n\n#### JavaScript\n\n Vue  React\n\n\n\n- [React](https://react.dev/) - [React ](https://zh-hans.react.dev/)\n- [Vue.js -  JavaScript ](https://vuejs.org/)\n- [Angular](https://angular.cn/)\n\n JavaScript  TypeScript \n\nTypeScript TS JS  JS TypeScript  JS superset JavaScript  TypeScript \n\nTS  JS JS  JS JS TS  IDE \n\n TypeScript TS JS  JS  TS \n\n>  JS  Angular  React  Next.js \n\n###  - Golang\n\n\n\n Golang \n\n#### \n\nGolang Go  Google Go  C  Go  C Go \n\n\n\n-  Golang [Go ](https://tour.go-zh.org/welcome/1)\n- [Golang ](https://golang-china.github.io/gopl-zh/)\n\n SQLSQL ****Structured Query LanguageWeb  MySQL \n\n- [W3school SQL](https://www.w3school.com.cn/sql/index.asp)\n\n#### \n\n Golang  Web  Golang  `Gin` + `Gorm` + `MySQL`\n\nGin  Web  Golang  `net/http`  API \n\n Web  Web \n\n- [Gin](https://gin-gonic.com/)\n\nGorm  Golang  ORM  ORM  Golang  SQL  SQL \n\nORM ORM  ****Object-Relational Mapping ORM SQL  Web \n\n- [GORM ](https://gorm.io/zh_CN/docs/index.html)\n\n CRUD  Golang  Framewok\n\n- [7GoWebGee](https://geektutu.com/post/gee.html)\n\n###  - Java\n\n#### \n\nJava  Java  C++  C#  Java Java \n\n\n\n- [Java - ](https://www.liaoxuefeng.com/wiki/1252599548343744)\n- Java[](https://www.bilibili.com/video/BV17F411T7Ao/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180) & [](https://www.bilibili.com/video/BV1yW4y1Y7Ms/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\n#### \n\n Java  `Spring Boot` + `Hibernate` + `MySQL` \n\nSpring Boot  Spring  Java  Spring \n\n- [Spring Boot ](https://springdoc.cn/spring-boot/)\n- [ SpringBoot2](https://www.bilibili.com/video/BV15b4y1a7yG/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180)\n\nHibernate  JDBC  POJO  ORM  SQL \n\n- [Hibernate ](https://hibernate.github.net.cn/)\n\n#### \n\n Java phith0n \n\n- [Java Web-[Java Web]](https://javasec.org/)\n\n phith0n [](https://govuln.com/) Web  299 \n\n## 0x04 Network\n\n WebNetwork  Network  Web  Vidar-Team  Web  Network \n\n Network  [HDU-CS-WIKI ](https://hdu-cs.wiki/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C) \n\n Vidar-Team  Vidar \n\nHDU [DN11](https://dn11.top/)\n\n![helloweb-dn11](https://img.ma5hr00m.top/blog/helloweb-dn11.png)\n\n## 0x05 \n\n\n\n### \n\n\n\n#### \n\n [Google](https://www.google.com/) cv \n\n Microsoft Bing [Bing](https://www.bing.com/) \n\n[](https://www.baidu.com/) `SQLI -csdn` CSDN \n\n#### \n\n [GitHub](https://github.com/)GitHub  GitHub  Web \n\n [Stack Overflow](https://stackoverflow.com/)Stack Overflow  Stack Exchange  Jeff Atwood  Joel Spolsky  2008 Stack Overflow  AI \n\n#### AI\n\n AI  AI  [Chatgpt](https://chat.openai.com/)New Bing \n\n AI  [devv_](https://devv.ai/)\n\n>  AI  AI ****  AI  AI \n\n### Git\n\nGit ****\n\n\n\n GitHub Git  GitHub \n\n Git [Learn Git Branching](https://learngitbranching.js.org/)\n\n### Linux\n\nLinux  *Linus*  1991    Windows  Linux \n\n Windows Linux   Linux  Linux \n\nLinux   Linux  Linux \n\n Linux  [VMware](https://www.vmware.com/)  [VirtualBox](https://www.virtualbox.org/)  Linux  Linux  Web Linux \n\n## 0x06 \n\n### \n\n\n\n [Hexo](https://hexo.io/zh-tw/)[Vitepress](https://vitepress.dev/)[Hugo](https://gohugo.io/)[WordPress](https://wordpress.com/zh-tw/) \n\n\n\n| Name      | Blog Link              |\n| --------- | ---------------------- |\n| E99p1ant  | https://github.red/    |\n| LoRexxar  | https://lorexxar.cn/   |\n| lightness | https://lightless.me/  |\n| Cyris     | https://cyris.moe/     |\n| Chuj      | https://www.cjovi.icu/ |\n| daidr     | https://im.daidr.me/   |\n| Nick Xu   | https://nickxu.me/     |\n\n [Markdown](https://markdown.tw/)  Markdown  [Typora](https://typora.io/)[Obsidian](https://obsidian.md/) Visual Studio Code \n\n Markdown  OSS+PicGo  .md [OSS PicGo  ](https://zhuanlan.zhihu.com/p/104152479)\n\n>   CDN  OSS \n\n### \n\n Vidar-Team \n\n![helloweb-tutu](https://img.ma5hr00m.top/blog/helloweb-tutu.png)\n\n `%blog`  SQLI  Flag Flag  Web ~\n\n### \n\n GitHub Roadmap\n\n- [Frontend Developer Roadmap](https://roadmap.sh/frontend)\n- [Backend Developer Roadmap](https://roadmap.sh/backend)\n- [Roadmap do Desenvolvedor Web 2021](https://github.com/hideraldus13/roadmap-do-desenvolvedor-web)\n\n## 0x07 \n\n\n\nVidar CTF  Vidar  Web IOT\n\n\n\n Web  Web \n\n>  ","slug":"hello_web","published":1,"updated":"2024-06-09T12:54:58.204Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap1000ef4ly37wq4vdb","content":"<h1 id=\"HelloWeb\"><a href=\"#HelloWeb\" class=\"headerlink\" title=\"HelloWeb\"></a>HelloWeb</h1><blockquote>\n<p> The Web World </p>\n</blockquote>\n<blockquote>\n<p> <a href=\"https://github.com/ma5hr00m/HelloWeb\">ma5hr00m&#x2F;HelloWeb</a> Vidar-Team2024 </p>\n</blockquote>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-banner.png\" alt=\"helloweb-banner\"></p>\n<h2 id=\"0x00-\"><a href=\"#0x00-\" class=\"headerlink\" title=\"0x00 \"></a>0x00 </h2><p>Web  Web  <strong>&amp;</strong></p>\n<p></p>\n<ul>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li><strong></strong></li>\n</ul>\n<p><strong></strong>20min  <strong></strong> AI prompt </p>\n<p>Vidar-Team2024  PDF </p>\n<ul>\n<li><a href=\"https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md\"></a></li>\n</ul>\n<blockquote>\n<p> <em><strong>0x05 - </strong></em> </p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"0x01-Web\"><a href=\"#0x01-Web\" class=\"headerlink\" title=\"0x01 Web\"></a>0x01 Web</h2><p><a href=\"https://en.wikipedia.org/wiki/World_Wide_Web\">Web</a>  World Wide Web  Web <strong></strong> </p>\n<p> Web Web  URL  Web  docx  Web  Web </p>\n<p> Web  Web </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  ISPInternet Service Provider IP </p>\n<p> Web  Flash  JavaScript </p>\n<p>CGICommon GatewayInterfaceWeb  CGI  Web </p>\n<p> PHP&#x2F;JSP MVC RESTRepresentation State TransformationWeb Web </p>\n<p> Web  Web </p>\n<p> <strong></strong> <a href=\"https://www.baidu.com/\">baidu.com</a> URL  Web  <a href=\"https://www.baidu.com/s?wd=Vidar-Team\">Vidar-Team</a> Web </p>\n<h3 id=\"Web-\"><a href=\"#Web-\" class=\"headerlink\" title=\"Web \"></a>Web </h3><blockquote>\n<p> 0 </p>\n</blockquote>\n<p> <a href=\"https://vidar.club/\">https://vidar.club</a>  Vidar-Team  Web </p>\n<p> URL  <a href=\"https://www.ruanyifeng.com/blog/2022/08/dns-query.html\">DNS </a> URL  IP  </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-dns.png\" alt=\"helloweb-dns\"></p>\n<p> IP  <a href=\"\">xxx.xxx.xxx.xxx</a> 12 domain<a href=\"https://vidar.club/\">vidar.club</a>  <a href=\"1.117.117.147\">1.117.117.147</a>  IP  DNS  IP DNS  IP  IP  <a href=\"1.117.117.147\">1.117.117.147</a> </p>\n<p> IP  TCP  TLS  <code>https://</code> HTTPS  HTTPHTTPS  SSL&#x2F;TLS  TLS </p>\n<blockquote>\n<p> <code>http://</code>  <code>https://</code>  <a href=\"http://vidar.club/\">http://vidar.club</a></p>\n</blockquote>\n<p> HTTP <code>GET</code>  HTML  HTML </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-burpsuite.png\" alt=\"helloweb-burpsuite\"></p>\n<p> <code>200 OK</code>  HTTP  HTML  HTML  DOM  CSS  CSSOM DOM  CSSOM </p>\n<p>HTTP  ChromeFirefox  Edge F12  BurpSuite  Yakit </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-edge.png\" alt=\"helloweb-edge\"></p>\n<p> Web </p>\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1Rz4y197Jd/?spm_id_from=333.788.recommend_more_video.-1&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\">10 </a></li>\n<li><a href=\"https://www.bilibili.com/video/BV1x54y1B7RE/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a></li>\n</ul>\n<h2 id=\"0x02-Web\"><a href=\"#0x02-Web\" class=\"headerlink\" title=\"0x02 Web\"></a>0x02 Web</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  <code>C/C++</code> <code>Java</code><code>PHP</code><code>Golang</code>  C  C  C </p>\n<p>C C Primer Plus C </p>\n<ul>\n<li><a href=\"https://github.com/erhuoyan/bookrack/blob/master/C%20Primer%20Plus%20%E7%AC%AC6%E7%89%88%20%E4%B8%AD%E6%96%87%E7%89%88.pdf\">C Primer Plus 6 PDF </a></li>\n<li><a href=\"https://github.com/ShujiaHuang/Cpp-Primer-Plus-6th?tab=readme-ov-file\">C++ Primer Plus 6 </a></li>\n</ul>\n<p> C </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web </p>\n<p> Web  Web  Web </p>\n<blockquote>\n<p> Web  <em><strong>0x03 Web</strong></em> </p>\n</blockquote>\n<p> Web  Web  Java&#x2F;Golang&#x2F;PHP&#x2F;Node.js  Rust </p>\n<p> Web  PHP CTF Web  PHP  <a href=\"https://www.leavesongs.com/\">phith0n</a> Web  Java Web  Java  CTF Web  Java  Java </p>\n<p> Web  XSS </p>\n<ul>\n<li><a href=\"https://websec.readthedocs.io/zh/latest/\">Web </a></li>\n</ul>\n<h3 id=\"CTF\"><a href=\"#CTF\" class=\"headerlink\" title=\"CTF\"></a>CTF</h3><p>Web  CTF </p>\n<p>CTF  <a href=\"https://ctf-wiki.org/introduction/mode/\">Jeopardy </a> Web&#x2F;Re&#x2F;Pwn&#x2F;Crypto&#x2F;Misc Web </p>\n<p>Web  <strong></strong> Reverse  C  Web  Java&#x2F;PHP&#x2F;Golang </p>\n<p>CTF  Writeup</p>\n<p>Vidar-Team  HGAME-MINI  Web  AK All kill CTF </p>\n<ul>\n<li><a href=\"https://buuoj.cn/\">buuoj</a></li>\n<li><a href=\"https://adworld.xctf.org.cn/\"></a></li>\n</ul>\n<p> Web  BurpSuite  PortSwigger  Web  100+  BurpSuite </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-portswigger.png\" alt=\"helloweb-portswigger\"></p>\n<p> CTF  Flag </p>\n<ul>\n<li><a href=\"https://portswigger.net/web-security\">PortSwigger WebSecurity Academy</a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> CTF </p>\n<p>CVECommon Vulnerabilities and Exposures MITRE DHSCISACVECVECVE IDCVE-2019-1234567CVECVECVE Numbering AuthorityCNACVEIT</p>\n<p> CVE </p>\n<p> phith0n  GitHub  Dockerfile  docker-compose.yml </p>\n<ul>\n<li><a href=\"https://vulhub.org/#/environments/\">Vulhub </a> | <a href=\"https://github.com/vulhub/vulhub\">Vulhub </a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>Web  Web  Web </p>\n<p> Red Team </p>\n<p></p>\n<ul>\n<li><a href=\"https://yunjing.ichunqiu.com/\"> - </a></li>\n<li><a href=\"https://app.hackthebox.com/\">Hack The Box</a></li>\n</ul>\n<p>Hack The Box  Red&#x2F;Blue Team </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Web CTF</p>\n<ul>\n<li><a href=\"https://portswigger.net/burp\">BurpSuite - </a></li>\n<li><a href=\"https://yaklang.io/products/intro/\">Yakit - </a></li>\n</ul>\n<p>BurpSuite  PortSwigger </p>\n<h2 id=\"0x03-Web\"><a href=\"#0x03-Web\" class=\"headerlink\" title=\"0x03 Web\"></a>0x03 Web</h2><p> Web  Web </p>\n<p> Web </p>\n<p>Web </p>\n<blockquote>\n<p> HDU  <a href=\"https://www.hduhelp.cn/\">HDUHelp </a> ~</p>\n</blockquote>\n<blockquote>\n<p>  GolangHDU  Java</p>\n</blockquote>\n<blockquote>\n<p> Vidar-Team  HDUHelp  Web  HDUHelp </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> Web </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <code>HTML</code> + <code>CSS</code> + <code>JavaScript</code>HTML CSS JavaScript  <a href=\"https://developer.mozilla.org/zh-CN/\">MDN Web</a> Web  Web  Wiki </p>\n<p>MDN  Web <a href=\"https://www.runoob.com/\"></a></p>\n<p> HTML CSS </p>\n<p><code>JavaScript</code>  <code>JavaScript</code> JS JS  JS  Node.js  JS </p>\n<p> JavaScript <a href=\"https://javascript30.com/\">JavaScript 30</a></p>\n<h4 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h4><p> Vue  React</p>\n<p></p>\n<ul>\n<li><a href=\"https://react.dev/\">React</a> - <a href=\"https://zh-hans.react.dev/\">React </a></li>\n<li><a href=\"https://vuejs.org/\">Vue.js -  JavaScript </a></li>\n<li><a href=\"https://angular.cn/\">Angular</a></li>\n</ul>\n<p> JavaScript  TypeScript </p>\n<p>TypeScript TS JS  JS TypeScript  JS superset JavaScript  TypeScript </p>\n<p>TS  JS JS  JS JS TS  IDE </p>\n<p> TypeScript TS JS  JS  TS </p>\n<blockquote>\n<p> JS  Angular  React  Next.js </p>\n</blockquote>\n<h3 id=\"-Golang\"><a href=\"#-Golang\" class=\"headerlink\" title=\" - Golang\"></a> - Golang</h3><p></p>\n<p> Golang </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Golang Go  Google Go  C  Go  C Go </p>\n<p></p>\n<ul>\n<li> Golang <a href=\"https://tour.go-zh.org/welcome/1\">Go </a></li>\n<li><a href=\"https://golang-china.github.io/gopl-zh/\">Golang </a></li>\n</ul>\n<p> SQLSQL <strong></strong>Structured Query LanguageWeb  MySQL </p>\n<ul>\n<li><a href=\"https://www.w3school.com.cn/sql/index.asp\">W3school SQL</a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Golang  Web  Golang  <code>Gin</code> + <code>Gorm</code> + <code>MySQL</code></p>\n<p>Gin  Web  Golang  <code>net/http</code>  API </p>\n<p> Web  Web </p>\n<ul>\n<li><a href=\"https://gin-gonic.com/\">Gin</a></li>\n</ul>\n<p>Gorm  Golang  ORM  ORM  Golang  SQL  SQL </p>\n<p>ORM ORM  <strong></strong>Object-Relational Mapping ORM SQL  Web </p>\n<ul>\n<li><a href=\"https://gorm.io/zh_CN/docs/index.html\">GORM </a></li>\n</ul>\n<p> CRUD  Golang  Framewok</p>\n<ul>\n<li><a href=\"https://geektutu.com/post/gee.html\">7GoWebGee</a></li>\n</ul>\n<h3 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" - Java\"></a> - Java</h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>Java  Java  C++  C#  Java Java </p>\n<p></p>\n<ul>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1252599548343744\">Java - </a></li>\n<li>Java<a href=\"https://www.bilibili.com/video/BV17F411T7Ao/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a> &amp; <a href=\"https://www.bilibili.com/video/BV1yW4y1Y7Ms/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p> Java  <code>Spring Boot</code> + <code>Hibernate</code> + <code>MySQL</code> </p>\n<p>Spring Boot  Spring  Java  Spring </p>\n<ul>\n<li><a href=\"https://springdoc.cn/spring-boot/\">Spring Boot </a></li>\n<li><a href=\"https://www.bilibili.com/video/BV15b4y1a7yG/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"> SpringBoot2</a></li>\n</ul>\n<p>Hibernate  JDBC  POJO  ORM  SQL </p>\n<ul>\n<li><a href=\"https://hibernate.github.net.cn/\">Hibernate </a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Java phith0n </p>\n<ul>\n<li><a href=\"https://javasec.org/\">Java Web-[Java Web]</a></li>\n</ul>\n<p> phith0n <a href=\"https://govuln.com/\"></a> Web  299 </p>\n<h2 id=\"0x04-Network\"><a href=\"#0x04-Network\" class=\"headerlink\" title=\"0x04 Network\"></a>0x04 Network</h2><p> WebNetwork  Network  Web  Vidar-Team  Web  Network </p>\n<p> Network  <a href=\"https://hdu-cs.wiki/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\">HDU-CS-WIKI </a> </p>\n<p> Vidar-Team  Vidar </p>\n<p>HDU <a href=\"https://dn11.top/\">DN11</a></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-dn11.png\" alt=\"helloweb-dn11\"></p>\n<h2 id=\"0x05-\"><a href=\"#0x05-\" class=\"headerlink\" title=\"0x05 \"></a>0x05 </h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"https://www.google.com/\">Google</a> cv </p>\n<p> Microsoft Bing <a href=\"https://www.bing.com/\">Bing</a> </p>\n<p><a href=\"https://www.baidu.com/\"></a> <code>SQLI -csdn</code> CSDN </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"https://github.com/\">GitHub</a>GitHub  GitHub  Web </p>\n<p> <a href=\"https://stackoverflow.com/\">Stack Overflow</a>Stack Overflow  Stack Exchange  Jeff Atwood  Joel Spolsky  2008 Stack Overflow  AI </p>\n<h4 id=\"AI\"><a href=\"#AI\" class=\"headerlink\" title=\"AI\"></a>AI</h4><p> AI  AI  <a href=\"https://chat.openai.com/\">Chatgpt</a>New Bing </p>\n<p> AI  <a href=\"https://devv.ai/\">devv_</a></p>\n<blockquote>\n<p> AI  AI <strong></strong>  AI  AI </p>\n</blockquote>\n<h3 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h3><p>Git <strong></strong></p>\n<p></p>\n<p> GitHub Git  GitHub </p>\n<p> Git <a href=\"https://learngitbranching.js.org/\">Learn Git Branching</a></p>\n<h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><p>Linux  <em>Linus</em>  1991    Windows  Linux </p>\n<p> Windows Linux   Linux  Linux </p>\n<p>Linux   Linux  Linux </p>\n<p> Linux  <a href=\"https://www.vmware.com/\">VMware</a>  <a href=\"https://www.virtualbox.org/\">VirtualBox</a>  Linux  Linux  Web Linux </p>\n<h2 id=\"0x06-\"><a href=\"#0x06-\" class=\"headerlink\" title=\"0x06 \"></a>0x06 </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> <a href=\"https://hexo.io/zh-tw/\">Hexo</a><a href=\"https://vitepress.dev/\">Vitepress</a><a href=\"https://gohugo.io/\">Hugo</a><a href=\"https://wordpress.com/zh-tw/\">WordPress</a> </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Blog Link</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E99p1ant</td>\n<td><a href=\"https://github.red/\">https://github.red/</a></td>\n</tr>\n<tr>\n<td>LoRexxar</td>\n<td><a href=\"https://lorexxar.cn/\">https://lorexxar.cn/</a></td>\n</tr>\n<tr>\n<td>lightness</td>\n<td><a href=\"https://lightless.me/\">https://lightless.me/</a></td>\n</tr>\n<tr>\n<td>Cyris</td>\n<td><a href=\"https://cyris.moe/\">https://cyris.moe/</a></td>\n</tr>\n<tr>\n<td>Chuj</td>\n<td><a href=\"https://www.cjovi.icu/\">https://www.cjovi.icu/</a></td>\n</tr>\n<tr>\n<td>daidr</td>\n<td><a href=\"https://im.daidr.me/\">https://im.daidr.me/</a></td>\n</tr>\n<tr>\n<td>Nick Xu</td>\n<td><a href=\"https://nickxu.me/\">https://nickxu.me/</a></td>\n</tr>\n</tbody></table>\n<p> <a href=\"https://markdown.tw/\">Markdown</a>  Markdown  <a href=\"https://typora.io/\">Typora</a><a href=\"https://obsidian.md/\">Obsidian</a> Visual Studio Code </p>\n<p> Markdown  OSS+PicGo  .md <a href=\"https://zhuanlan.zhihu.com/p/104152479\">OSS PicGo  </a></p>\n<blockquote>\n<p>  CDN  OSS </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Vidar-Team </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-tutu.png\" alt=\"helloweb-tutu\"></p>\n<p> <code>%blog</code>  SQLI  Flag Flag  Web ~</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> GitHub Roadmap</p>\n<ul>\n<li><a href=\"https://roadmap.sh/frontend\">Frontend Developer Roadmap</a></li>\n<li><a href=\"https://roadmap.sh/backend\">Backend Developer Roadmap</a></li>\n<li><a href=\"https://github.com/hideraldus13/roadmap-do-desenvolvedor-web\">Roadmap do Desenvolvedor Web 2021</a></li>\n</ul>\n<h2 id=\"0x07-\"><a href=\"#0x07-\" class=\"headerlink\" title=\"0x07 \"></a>0x07 </h2><p></p>\n<p>Vidar CTF  Vidar  Web IOT</p>\n<p></p>\n<p> Web  Web </p>\n<blockquote>\n<p> </p>\n</blockquote>\n","excerpt":"","more":"<h1 id=\"HelloWeb\"><a href=\"#HelloWeb\" class=\"headerlink\" title=\"HelloWeb\"></a>HelloWeb</h1><blockquote>\n<p> The Web World </p>\n</blockquote>\n<blockquote>\n<p> <a href=\"https://github.com/ma5hr00m/HelloWeb\">ma5hr00m&#x2F;HelloWeb</a> Vidar-Team2024 </p>\n</blockquote>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-banner.png\" alt=\"helloweb-banner\"></p>\n<h2 id=\"0x00-\"><a href=\"#0x00-\" class=\"headerlink\" title=\"0x00 \"></a>0x00 </h2><p>Web  Web  <strong>&amp;</strong></p>\n<p></p>\n<ul>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li><strong></strong></li>\n</ul>\n<p><strong></strong>20min  <strong></strong> AI prompt </p>\n<p>Vidar-Team2024  PDF </p>\n<ul>\n<li><a href=\"https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md\"></a></li>\n</ul>\n<blockquote>\n<p> <em><strong>0x05 - </strong></em> </p>\n</blockquote>\n<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"0x01-Web\"><a href=\"#0x01-Web\" class=\"headerlink\" title=\"0x01 Web\"></a>0x01 Web</h2><p><a href=\"https://en.wikipedia.org/wiki/World_Wide_Web\">Web</a>  World Wide Web  Web <strong></strong> </p>\n<p> Web Web  URL  Web  docx  Web  Web </p>\n<p> Web  Web </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  ISPInternet Service Provider IP </p>\n<p> Web  Flash  JavaScript </p>\n<p>CGICommon GatewayInterfaceWeb  CGI  Web </p>\n<p> PHP&#x2F;JSP MVC RESTRepresentation State TransformationWeb Web </p>\n<p> Web  Web </p>\n<p> <strong></strong> <a href=\"https://www.baidu.com/\">baidu.com</a> URL  Web  <a href=\"https://www.baidu.com/s?wd=Vidar-Team\">Vidar-Team</a> Web </p>\n<h3 id=\"Web-\"><a href=\"#Web-\" class=\"headerlink\" title=\"Web \"></a>Web </h3><blockquote>\n<p> 0 </p>\n</blockquote>\n<p> <a href=\"https://vidar.club/\">https://vidar.club</a>  Vidar-Team  Web </p>\n<p> URL  <a href=\"https://www.ruanyifeng.com/blog/2022/08/dns-query.html\">DNS </a> URL  IP  </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-dns.png\" alt=\"helloweb-dns\"></p>\n<p> IP  <a href=\"\">xxx.xxx.xxx.xxx</a> 12 domain<a href=\"https://vidar.club/\">vidar.club</a>  <a href=\"1.117.117.147\">1.117.117.147</a>  IP  DNS  IP DNS  IP  IP  <a href=\"1.117.117.147\">1.117.117.147</a> </p>\n<p> IP  TCP  TLS  <code>https://</code> HTTPS  HTTPHTTPS  SSL&#x2F;TLS  TLS </p>\n<blockquote>\n<p> <code>http://</code>  <code>https://</code>  <a href=\"http://vidar.club/\">http://vidar.club</a></p>\n</blockquote>\n<p> HTTP <code>GET</code>  HTML  HTML </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-burpsuite.png\" alt=\"helloweb-burpsuite\"></p>\n<p> <code>200 OK</code>  HTTP  HTML  HTML  DOM  CSS  CSSOM DOM  CSSOM </p>\n<p>HTTP  ChromeFirefox  Edge F12  BurpSuite  Yakit </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-edge.png\" alt=\"helloweb-edge\"></p>\n<p> Web </p>\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1Rz4y197Jd/?spm_id_from=333.788.recommend_more_video.-1&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\">10 </a></li>\n<li><a href=\"https://www.bilibili.com/video/BV1x54y1B7RE/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a></li>\n</ul>\n<h2 id=\"0x02-Web\"><a href=\"#0x02-Web\" class=\"headerlink\" title=\"0x02 Web\"></a>0x02 Web</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  <code>C/C++</code> <code>Java</code><code>PHP</code><code>Golang</code>  C  C  C </p>\n<p>C C Primer Plus C </p>\n<ul>\n<li><a href=\"https://github.com/erhuoyan/bookrack/blob/master/C%20Primer%20Plus%20%E7%AC%AC6%E7%89%88%20%E4%B8%AD%E6%96%87%E7%89%88.pdf\">C Primer Plus 6 PDF </a></li>\n<li><a href=\"https://github.com/ShujiaHuang/Cpp-Primer-Plus-6th?tab=readme-ov-file\">C++ Primer Plus 6 </a></li>\n</ul>\n<p> C </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web </p>\n<p> Web  Web  Web </p>\n<blockquote>\n<p> Web  <em><strong>0x03 Web</strong></em> </p>\n</blockquote>\n<p> Web  Web  Java&#x2F;Golang&#x2F;PHP&#x2F;Node.js  Rust </p>\n<p> Web  PHP CTF Web  PHP  <a href=\"https://www.leavesongs.com/\">phith0n</a> Web  Java Web  Java  CTF Web  Java  Java </p>\n<p> Web  XSS </p>\n<ul>\n<li><a href=\"https://websec.readthedocs.io/zh/latest/\">Web </a></li>\n</ul>\n<h3 id=\"CTF\"><a href=\"#CTF\" class=\"headerlink\" title=\"CTF\"></a>CTF</h3><p>Web  CTF </p>\n<p>CTF  <a href=\"https://ctf-wiki.org/introduction/mode/\">Jeopardy </a> Web&#x2F;Re&#x2F;Pwn&#x2F;Crypto&#x2F;Misc Web </p>\n<p>Web  <strong></strong> Reverse  C  Web  Java&#x2F;PHP&#x2F;Golang </p>\n<p>CTF  Writeup</p>\n<p>Vidar-Team  HGAME-MINI  Web  AK All kill CTF </p>\n<ul>\n<li><a href=\"https://buuoj.cn/\">buuoj</a></li>\n<li><a href=\"https://adworld.xctf.org.cn/\"></a></li>\n</ul>\n<p> Web  BurpSuite  PortSwigger  Web  100+  BurpSuite </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-portswigger.png\" alt=\"helloweb-portswigger\"></p>\n<p> CTF  Flag </p>\n<ul>\n<li><a href=\"https://portswigger.net/web-security\">PortSwigger WebSecurity Academy</a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> CTF </p>\n<p>CVECommon Vulnerabilities and Exposures MITRE DHSCISACVECVECVE IDCVE-2019-1234567CVECVECVE Numbering AuthorityCNACVEIT</p>\n<p> CVE </p>\n<p> phith0n  GitHub  Dockerfile  docker-compose.yml </p>\n<ul>\n<li><a href=\"https://vulhub.org/#/environments/\">Vulhub </a> | <a href=\"https://github.com/vulhub/vulhub\">Vulhub </a></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>Web  Web  Web </p>\n<p> Red Team </p>\n<p></p>\n<ul>\n<li><a href=\"https://yunjing.ichunqiu.com/\"> - </a></li>\n<li><a href=\"https://app.hackthebox.com/\">Hack The Box</a></li>\n</ul>\n<p>Hack The Box  Red&#x2F;Blue Team </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Web CTF</p>\n<ul>\n<li><a href=\"https://portswigger.net/burp\">BurpSuite - </a></li>\n<li><a href=\"https://yaklang.io/products/intro/\">Yakit - </a></li>\n</ul>\n<p>BurpSuite  PortSwigger </p>\n<h2 id=\"0x03-Web\"><a href=\"#0x03-Web\" class=\"headerlink\" title=\"0x03 Web\"></a>0x03 Web</h2><p> Web  Web </p>\n<p> Web </p>\n<p>Web </p>\n<blockquote>\n<p> HDU  <a href=\"https://www.hduhelp.cn/\">HDUHelp </a> ~</p>\n</blockquote>\n<blockquote>\n<p>  GolangHDU  Java</p>\n</blockquote>\n<blockquote>\n<p> Vidar-Team  HDUHelp  Web  HDUHelp </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> Web </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <code>HTML</code> + <code>CSS</code> + <code>JavaScript</code>HTML CSS JavaScript  <a href=\"https://developer.mozilla.org/zh-CN/\">MDN Web</a> Web  Web  Wiki </p>\n<p>MDN  Web <a href=\"https://www.runoob.com/\"></a></p>\n<p> HTML CSS </p>\n<p><code>JavaScript</code>  <code>JavaScript</code> JS JS  JS  Node.js  JS </p>\n<p> JavaScript <a href=\"https://javascript30.com/\">JavaScript 30</a></p>\n<h4 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h4><p> Vue  React</p>\n<p></p>\n<ul>\n<li><a href=\"https://react.dev/\">React</a> - <a href=\"https://zh-hans.react.dev/\">React </a></li>\n<li><a href=\"https://vuejs.org/\">Vue.js -  JavaScript </a></li>\n<li><a href=\"https://angular.cn/\">Angular</a></li>\n</ul>\n<p> JavaScript  TypeScript </p>\n<p>TypeScript TS JS  JS TypeScript  JS superset JavaScript  TypeScript </p>\n<p>TS  JS JS  JS JS TS  IDE </p>\n<p> TypeScript TS JS  JS  TS </p>\n<blockquote>\n<p> JS  Angular  React  Next.js </p>\n</blockquote>\n<h3 id=\"-Golang\"><a href=\"#-Golang\" class=\"headerlink\" title=\" - Golang\"></a> - Golang</h3><p></p>\n<p> Golang </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Golang Go  Google Go  C  Go  C Go </p>\n<p></p>\n<ul>\n<li> Golang <a href=\"https://tour.go-zh.org/welcome/1\">Go </a></li>\n<li><a href=\"https://golang-china.github.io/gopl-zh/\">Golang </a></li>\n</ul>\n<p> SQLSQL <strong></strong>Structured Query LanguageWeb  MySQL </p>\n<ul>\n<li><a href=\"https://www.w3school.com.cn/sql/index.asp\">W3school SQL</a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Golang  Web  Golang  <code>Gin</code> + <code>Gorm</code> + <code>MySQL</code></p>\n<p>Gin  Web  Golang  <code>net/http</code>  API </p>\n<p> Web  Web </p>\n<ul>\n<li><a href=\"https://gin-gonic.com/\">Gin</a></li>\n</ul>\n<p>Gorm  Golang  ORM  ORM  Golang  SQL  SQL </p>\n<p>ORM ORM  <strong></strong>Object-Relational Mapping ORM SQL  Web </p>\n<ul>\n<li><a href=\"https://gorm.io/zh_CN/docs/index.html\">GORM </a></li>\n</ul>\n<p> CRUD  Golang  Framewok</p>\n<ul>\n<li><a href=\"https://geektutu.com/post/gee.html\">7GoWebGee</a></li>\n</ul>\n<h3 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" - Java\"></a> - Java</h3><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>Java  Java  C++  C#  Java Java </p>\n<p></p>\n<ul>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1252599548343744\">Java - </a></li>\n<li>Java<a href=\"https://www.bilibili.com/video/BV17F411T7Ao/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a> &amp; <a href=\"https://www.bilibili.com/video/BV1yW4y1Y7Ms/?spm_id_from=333.788.recommend_more_video.0&vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"></a></li>\n</ul>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p> Java  <code>Spring Boot</code> + <code>Hibernate</code> + <code>MySQL</code> </p>\n<p>Spring Boot  Spring  Java  Spring </p>\n<ul>\n<li><a href=\"https://springdoc.cn/spring-boot/\">Spring Boot </a></li>\n<li><a href=\"https://www.bilibili.com/video/BV15b4y1a7yG/?vd_source=d77df35177e7fa05ef5f9e0b6ddf2180\"> SpringBoot2</a></li>\n</ul>\n<p>Hibernate  JDBC  POJO  ORM  SQL </p>\n<ul>\n<li><a href=\"https://hibernate.github.net.cn/\">Hibernate </a></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Java phith0n </p>\n<ul>\n<li><a href=\"https://javasec.org/\">Java Web-[Java Web]</a></li>\n</ul>\n<p> phith0n <a href=\"https://govuln.com/\"></a> Web  299 </p>\n<h2 id=\"0x04-Network\"><a href=\"#0x04-Network\" class=\"headerlink\" title=\"0x04 Network\"></a>0x04 Network</h2><p> WebNetwork  Network  Web  Vidar-Team  Web  Network </p>\n<p> Network  <a href=\"https://hdu-cs.wiki/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\">HDU-CS-WIKI </a> </p>\n<p> Vidar-Team  Vidar </p>\n<p>HDU <a href=\"https://dn11.top/\">DN11</a></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-dn11.png\" alt=\"helloweb-dn11\"></p>\n<h2 id=\"0x05-\"><a href=\"#0x05-\" class=\"headerlink\" title=\"0x05 \"></a>0x05 </h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"https://www.google.com/\">Google</a> cv </p>\n<p> Microsoft Bing <a href=\"https://www.bing.com/\">Bing</a> </p>\n<p><a href=\"https://www.baidu.com/\"></a> <code>SQLI -csdn</code> CSDN </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"https://github.com/\">GitHub</a>GitHub  GitHub  Web </p>\n<p> <a href=\"https://stackoverflow.com/\">Stack Overflow</a>Stack Overflow  Stack Exchange  Jeff Atwood  Joel Spolsky  2008 Stack Overflow  AI </p>\n<h4 id=\"AI\"><a href=\"#AI\" class=\"headerlink\" title=\"AI\"></a>AI</h4><p> AI  AI  <a href=\"https://chat.openai.com/\">Chatgpt</a>New Bing </p>\n<p> AI  <a href=\"https://devv.ai/\">devv_</a></p>\n<blockquote>\n<p> AI  AI <strong></strong>  AI  AI </p>\n</blockquote>\n<h3 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h3><p>Git <strong></strong></p>\n<p></p>\n<p> GitHub Git  GitHub </p>\n<p> Git <a href=\"https://learngitbranching.js.org/\">Learn Git Branching</a></p>\n<h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><p>Linux  <em>Linus</em>  1991    Windows  Linux </p>\n<p> Windows Linux   Linux  Linux </p>\n<p>Linux   Linux  Linux </p>\n<p> Linux  <a href=\"https://www.vmware.com/\">VMware</a>  <a href=\"https://www.virtualbox.org/\">VirtualBox</a>  Linux  Linux  Web Linux </p>\n<h2 id=\"0x06-\"><a href=\"#0x06-\" class=\"headerlink\" title=\"0x06 \"></a>0x06 </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> <a href=\"https://hexo.io/zh-tw/\">Hexo</a><a href=\"https://vitepress.dev/\">Vitepress</a><a href=\"https://gohugo.io/\">Hugo</a><a href=\"https://wordpress.com/zh-tw/\">WordPress</a> </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Blog Link</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>E99p1ant</td>\n<td><a href=\"https://github.red/\">https://github.red/</a></td>\n</tr>\n<tr>\n<td>LoRexxar</td>\n<td><a href=\"https://lorexxar.cn/\">https://lorexxar.cn/</a></td>\n</tr>\n<tr>\n<td>lightness</td>\n<td><a href=\"https://lightless.me/\">https://lightless.me/</a></td>\n</tr>\n<tr>\n<td>Cyris</td>\n<td><a href=\"https://cyris.moe/\">https://cyris.moe/</a></td>\n</tr>\n<tr>\n<td>Chuj</td>\n<td><a href=\"https://www.cjovi.icu/\">https://www.cjovi.icu/</a></td>\n</tr>\n<tr>\n<td>daidr</td>\n<td><a href=\"https://im.daidr.me/\">https://im.daidr.me/</a></td>\n</tr>\n<tr>\n<td>Nick Xu</td>\n<td><a href=\"https://nickxu.me/\">https://nickxu.me/</a></td>\n</tr>\n</tbody></table>\n<p> <a href=\"https://markdown.tw/\">Markdown</a>  Markdown  <a href=\"https://typora.io/\">Typora</a><a href=\"https://obsidian.md/\">Obsidian</a> Visual Studio Code </p>\n<p> Markdown  OSS+PicGo  .md <a href=\"https://zhuanlan.zhihu.com/p/104152479\">OSS PicGo  </a></p>\n<blockquote>\n<p>  CDN  OSS </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Vidar-Team </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/helloweb-tutu.png\" alt=\"helloweb-tutu\"></p>\n<p> <code>%blog</code>  SQLI  Flag Flag  Web ~</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> GitHub Roadmap</p>\n<ul>\n<li><a href=\"https://roadmap.sh/frontend\">Frontend Developer Roadmap</a></li>\n<li><a href=\"https://roadmap.sh/backend\">Backend Developer Roadmap</a></li>\n<li><a href=\"https://github.com/hideraldus13/roadmap-do-desenvolvedor-web\">Roadmap do Desenvolvedor Web 2021</a></li>\n</ul>\n<h2 id=\"0x07-\"><a href=\"#0x07-\" class=\"headerlink\" title=\"0x07 \"></a>0x07 </h2><p></p>\n<p>Vidar CTF  Vidar  Web IOT</p>\n<p></p>\n<p> Web  Web </p>\n<blockquote>\n<p> </p>\n</blockquote>\n"},{"title":" Clash ","date":"2024-06-11T16:00:00.000Z","author":"ma5hr00m","_content":"\n[ Clash? | Clash ](https://clash.wiki/)\n\n Clash Clash \n\nClash Clash  Clash \n\n\n\n Clash  Clash \n\n## \n\n Clash \n\n1. **Inbound ** Clash \n2. ****Clash **`rules`**\n3. **Outbound **Clash \n\n![20240613024509](https://img.ma5hr00m.top/blog/20240613024509.png)\n\n## \n\n Clash \n\n1. **Rule** Clash IP\n2. **Direct**\n3. **Global**\n4. **Script** JavaScript \n\n## \n\n[https://clash.skk.moe/](https://clash.skk.moe/)\n\nClash `config.yaml``$HOME/.config/clash`Clash \n\n `-f` \n\n```bash\nclash -f /etc/clash/config.yaml\n```\n\n Clash \n\n### General \n\n Clash General  `port``socks-port`  `allow-lan`  Clash SOCKS5  `redir-port` \n\n `mixed`  HTTP(S)  SOCKS5 \n\n\n\n- `dns`DNS\n- `external-controller` RESTful API \n- `secret` RESTful API \n- `cfw-bypass`\n\n General \n\n```yaml\nport: 7890 # HTTP\nsocks-port: 7891 # SOCKS5\nredir-port: 7892 # LinuxmacOS\nmixed: 7893 # \nallow-lan: false\n\n# allow-lantrue\n# \"*\": IP\n# 192.168.122.11: IPv4\n# \"[aaaa::a8aa:ff:fe09:57d8]\": IPv6\nbind-address: \"*\"\n\n# Rule / Global/ DirectRule\nmode: Rule\n\n# stdoutinfo\n# info / warning / error / debug / silent\nlog-level: info\n\nexternal-controller: 127.0.0.1:9090 # ClashRESTful API\n\n# Webclash-dashboardClash`${API}/ui`\n# \nexternal-ui: \"path/to/local/clash-dashboard\"\n\nsecret: \"\" # RESTful API\n\nexperimental: # \n  ignore-resolve-fail: true # DNStrue\n\n# SOCKS5/HTTP(S)\nauthentication:\n  - \"user1:pass1\"\n  - \"user2:pass2\"\n\n# *.clash.dev *.foo.*.example.com\n# foo.example.com > *.example.com\nhosts:\n  '*.clash.dev': 127.0.0.1\n  'alpha.clash.dev': '::1'\n\ndns:\n  enable: true # trueDNSfalse\n  ipv6: false # false\n  listen: 0.0.0.0:53\n  enhanced-mode: fake-ip # redir-host\n  fake-ip-range: 198.18.0.1/16 # \n  nameserver:\n    - 114.114.114.114\n    - tcp://1.1.1.1\n  fallback: # nameserverGEOIPCNfallback\n    - tls://dns.rubyfish.cn:853 # DNS over TLS\n    - https://1.1.1.1/dns-query # DNS over HTTPS\n  fallback-filter:\n    geoip: true # \n    ipcidr: # IP\n      - 240.0.0.0/4\n```\n\n### Proxy \n\nProxy  Proxy Group  Clash \n\nProxy  Clash Clash **`ss`****`vmess`****`socks5`****`http`****`snell`**\n\n Proxy \n\n```yaml\nproxy:\n  # shadowsocks\n  - name: \"ss1\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    # udp: true\n\n  - name: \"ss2\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    plugin: v2ray-plugin\n    plugin-opts:\n      mode: websocket\n      # tls: true\n      # skip-cert-verify: true\n      # host: bing.com\n      # path: \"/\"\n      # mux: true\n      # headers:\n      #   custom: value\n\n  # vmess\n  - name: \"vmess\"\n    type: vmess\n    server: server\n    port: 443\n    uuid: uuid\n    alterid: 32\n    cipher: auto\n    # udp: true\n    # tls: true\n    # skip-cert-verify: true\n    # network: ws\n    # ws-path: /path\n    # ws-headers:\n    #   host: v2ray.com\n\n  # socks5\n  - name: \"socks\"\n    type: socks5\n    server: server\n    port: 443\n    # username: username\n    # password: password\n    # tls: true\n    # skip-cert-verify: true\n    # udp: true\n\n  # http\n  - name: \"http\"\n    type: http\n    server: server\n    port: 443\n    # username: username\n    # password: password\n    # tls: true\n    # skip-cert-verify: true\n\n  # snell\n  - name: \"snell\"\n    type: snell\n    server: server\n    port: 44046\n    psk: yourpsk\n    # obfs-opts:\n    #   mode: http\n    #   host: bing.com\n```\n\n### Proxy Group \n\nproxy group\n\n Proxy Group \n\n```yaml\nproxy-group:\n  # url-test  URL \n  - name: \"auto\"\n    type: url-test\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # fallback  URL  url-test \n  - name: \"fallback-auto\"\n    type: fallback\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # load-balance:  eTLD \n  - name: \"load-balance\"\n    type: load-balance\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # select \n  #  RESTful API  GUI \n  - name: Proxy\n    type: select\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n      - auto\n```\n\n### Rule \n\nRuleIP \n\n Rule \n\n```yaml\nrule:\n  - domain-suffix,google.com,[]\n  - domain-keyword,google,[]\n  - domain,google.com,[]\n  - domain-suffix,ad.com,REJECT\n  - ip-cidr,127.0.0.0/8,DIRECT\n  # rename source-ip-cidr and would remove after prerelease\n  - src-ip-cidr,192.168.1.201/32,DIRECT\n  - geoip,CN,DIRECT\n  - dst-port,80,DIRECT\n  - src-port,7777,DIRECT\n  # final would remove after prerelease\n  # you also can use `final,Proxy` or `final,,Proxy` now\n  - match,[]\n```\n\n\n\n## Inbound \n\n- SOCKS5\n- HTTP(S)\n- Redirect TCP\n- TProxy TCP\n- TProxy UDP\n- Linux TUN  Premium \n\n[ Socks 5  HTTP ](https://www.txthinking.com/talks/articles/socks5-and-http-proxy.article)\n\n SOCKS5  HTTP \n\nSOCKS5  UDP HTTP  HTTP  HTTPS \n\n HTTP  SOCKS5\n\n## Outbound  Proxy\n\nClash  Clash  Proxy  Proxy Group \n\n### Shadowsocks/ShadowsocksR\n\n[Shadowsocks/SS - tlanyan](https://itlanyan.com/on-fuck-gfw-again/)\n\n**Shadowsocks** SOCKS5 Clash  Shadowsocks \n\n|  |  |\n| --- | --- |\n| AEAD | aes-128-gcm, aes-192-gcm, aes-256-gcm, chacha20-ietf-poly1305, xchacha20-ietf-poly1305 |\n|  | aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20 |\n|  | aes-128-ctr, aes-192-ctr, aes-256-ctr |\n\nClash  Shadowsocks  obfs  v2ray-plugin\n\n**ShadowsocksR** Shadowsocks Clash  ShadowsocksR \n\n|  |  |\n| --- | --- |\n|  | aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20 |\n\n ss \n\nssr ssr  GPL ssr  ss  GPLApache MIT \n\n### Vmess\n\n**VMess** TCP \n\n VMess VMess \n\nClash  Vmess :\n\n- auto\n- aes-128-gcm PC \n- chacha20-poly1305AES \n- none\n\n### SOCKS5\n\n### HTTP\n\n### Snell\n\nClash  Snell \n\n**Snell**  Surge  UDP over TCPSnell glibc Snell \nSnell\n\nSnell@v4 \n\n gitbookhttps://manual.nssurge.com/others/snell.html\n\n### Trojan\n\nClash  Trojan \n\n**Trojan**  ss/ssr ss/ssr  Trojan  HTTPS \n\n[trojan - tlanyan](https://itlanyan.com/trojan-tutorial/)\n\n## Outbound  Proxy Groups\n\nProxy Groups \n\n### Relay \n\n```yaml\nRelay:\n  - name: \"US-JP Relay\"\n    type: relay\n    proxies:\n      - \"US-Proxy\"\n      - \"JP-Proxy\"\n```\n\n\n\n### URL-Test \n\n```yaml\nUrl-Test:\n  - name: \"Fastest-Proxy\"\n    type: url-test\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    url: \"http://www.gstatic.com/generate_204\"\n    interval: 600\n```\n\n\n\n### Fallback \n\n```yaml\nFallback:\n  - name: \"Available-Proxy\"\n    type: fallback\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    url: \"http://www.gstatic.com/generate_204\"\n    interval: 600\n```\n\n\n\n### Load-Balance \n\n```yaml\nLoad-Balance:\n  - name: \"Balance-Group\"\n    type: load-balance\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    sticky-session: true\n```\n\n\n\n### Select \n\n```yaml\nSelect:\n  - name: \"Manual-Select\"\n    type: select\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    interface-name: \"en0\"\n```\n\n Clash  Select \n\n\n\n### DIRECT \n\n```yaml\nDirect:\n  - name: \"Direct-Connection\"\n    type: direct\n    interface-name: \"en0\"\n```\n\n## Outbound  Proxy Providers\n\n Clash  Proxy  Proxy Groups Proxy Proxy Groups  Select  url-test \n\n cv Clash Premium Core  **Proxy Providers**\n\n\n\n```yaml\n# config.yaml\nproxy-providers:\n  test:\n    type: file\n    path: /test.yaml\n    health-check:\n      enable: true\n      interval: 36000\n      url: http://www.gstatic.com/generate_204\n```\n\n```yaml\n# test.yaml\nproxies:\n  - name: \"ss1\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n\n  - name: \"ss2\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    plugin: obfs\n    plugin-opts:\n      mode: tls\n```\n\n[Clash proxy-provider  subconverter  - ](https://www.10101.io/2020/02/12/use-clash-proxy-provider-with-subconverter)\n\n## Rules \n\n Clash  rules \n\n\n\n```yaml\n# ,,(,no-resolve)\nTYPE,ARGUMENT,POLICY(,no-resolve)\n```\n\n `no-resolve`,  DNS `GEOIP``IP-CIDR``IP-CIDR6``SCRIPT` IP \nClash  cv [](https://clash.wiki/configuration/rules.html#%E8%A7%84%E5%88%99%E7%B1%BB%E5%9E%8B)\n\n### DOMAIN \n\n```yaml\nDOMAIN,www.google.com,policy\n```\n\n`www.google.com``policy`\n\n### DOMAIN-SUFFIX \n\n```yaml\nDOMAIN-SUFFIX,youtube.com,policy\n```\n\n`youtube.com``policy``www.youtube.com``foo.bar.youtube.com``policy`\n\n### DOMAIN-KEYWORD \n\n```yaml\nDOMAIN-KEYWORD,google,policy\n```\n\n`google``policy``www.google.com``googleapis.com``policy`\n\n### GEOIP IP ()\n\nGEOIP  IP ****Clash [**MaxMind GeoLite2**](https://dev.maxmind.com/geoip/geoip2/geolite2/)Clash  IP  IP \n\n```yaml\nGEOIP,CN,policy\n```\n\n IP `policy`\n\n### IP-CIDR IPv4\n\nIP-CIDR ** IPv4 **, Clash  IPv4 \n\n```yaml\nIP-CIDR,127.0.0.0/8,DIRECT\n```\n\n IP `127.0.0.0/8``DIRECT`\n\n### IP-CIDR6 IPv6\n\nIP-CIDR6 ** IPv6 **, Clash  IPv6 \n\n```yaml\nIP-CIDR6,2620:0:2d0:200::7/32,policy\n```\n\n IP `2620:0:2d0:200::7/32``policy`\n\n### SRC-IP-CIDR IP\n\nSRC-IP-CIDR ** IPv4 **\n\n```yaml\nSRC-IP-CIDR,192.168.1.201/32,DIRECT\n```\n\n IP `192.168.1.201/32``DIRECT`\n\n### SRC-PORT \n\nSRC-PORT ****\n\n```yaml\nSRC-PORT,80,policy\n```\n\n`80``policy`\n\n### DST-PORT \n\nDST-PORT ****\n\n```yaml\nDST-PORT,80,policy\n```\n\n`80``policy`\n\n### PROCESS-NAME \n\nPROCESS-NAME  macOSLinuxFreeBSD  Windows\n\n```yaml\nPROCESS-NAME,nc,DIRECT\n```\n\n`nc``DIRECT`\n\n### PROCESS-PATH \n\nPROCESS-PATH  macOSLinuxFreeBSD  Windows\n\n```yaml\nPROCESS-PATH,/usr/local/bin/nc,DIRECT\n```\n\n`/usr/local/bin/nc``DIRECT`\n\n### IPSET IP\n\nIPSET  IP . [**IPSET **](https://ipset.netfilter.org/):\n\n> IP  Linux ,  ipset IP  IP  (TCP/UDP) MAC \n> \n\n,  Linux , `ipset`, Clash  IP ,  IP  IP .  DNS , **`no-resolve`**.\n\n```yaml\nIPSET,chnroute,policy\n```\n\n IP  IP `chnroute``policy`.\n\n### RULE-SET \n\n[**Premium **](https://clash.wiki/premium/introduction.html)\n\nRULE-SET [**Rule Providers **](https://clash.wiki/premium/rule-providers.html) Clash  Rule Providers  , \n\n RULE-SET  IPCIDR Clash  IP \n\n```yaml\nRULE-SET,my-rule-provider,DIRECT\n```\n\n`my-rule-provider`\n\n### SCRIPT \n\n[**Premium **](https://clash.wiki/premium/introduction.html)\n\nSCRIPT  Clash  SCRIPT Clash  IP \n\n```yaml\nSCRIPT,script-path,DIRECT\n```\n\n`script-path`.\n\n### MATCH \n\nMATCH ****\n\n```yaml\nMATCH,policy\n```\n\n`policy`\n\n## \n\n### tproxy\n\n[tproxy](https://www.zhaohuabing.com/learning-linux/docs/tproxy/)\n\ntproxy  transparent proxy transparent\n\n1.  client client  socks  http  client \n2.  server server  client  proxy \n\n client  IP  IP\n\n![20240613024955](https://img.ma5hr00m.top/blog/20240613024955.png)\n\n\n\n iptables Clash \n\n### redirect\n\nredirect redirect  TCP  tproxy \n\n Clash  redirect \n\n1.  TCP iptables \n2. iptables  Clash \n3. Clash \n\n redirect  tproxy  iptables  redirect ","source":"_posts/how_does_clash_work.md","raw":"---\ntitle:  Clash \ndate: 2024/6/12\nauthor: ma5hr00m\ncategories:\n- Network\n---\n\n[ Clash? | Clash ](https://clash.wiki/)\n\n Clash Clash \n\nClash Clash  Clash \n\n\n\n Clash  Clash \n\n## \n\n Clash \n\n1. **Inbound ** Clash \n2. ****Clash **`rules`**\n3. **Outbound **Clash \n\n![20240613024509](https://img.ma5hr00m.top/blog/20240613024509.png)\n\n## \n\n Clash \n\n1. **Rule** Clash IP\n2. **Direct**\n3. **Global**\n4. **Script** JavaScript \n\n## \n\n[https://clash.skk.moe/](https://clash.skk.moe/)\n\nClash `config.yaml``$HOME/.config/clash`Clash \n\n `-f` \n\n```bash\nclash -f /etc/clash/config.yaml\n```\n\n Clash \n\n### General \n\n Clash General  `port``socks-port`  `allow-lan`  Clash SOCKS5  `redir-port` \n\n `mixed`  HTTP(S)  SOCKS5 \n\n\n\n- `dns`DNS\n- `external-controller` RESTful API \n- `secret` RESTful API \n- `cfw-bypass`\n\n General \n\n```yaml\nport: 7890 # HTTP\nsocks-port: 7891 # SOCKS5\nredir-port: 7892 # LinuxmacOS\nmixed: 7893 # \nallow-lan: false\n\n# allow-lantrue\n# \"*\": IP\n# 192.168.122.11: IPv4\n# \"[aaaa::a8aa:ff:fe09:57d8]\": IPv6\nbind-address: \"*\"\n\n# Rule / Global/ DirectRule\nmode: Rule\n\n# stdoutinfo\n# info / warning / error / debug / silent\nlog-level: info\n\nexternal-controller: 127.0.0.1:9090 # ClashRESTful API\n\n# Webclash-dashboardClash`${API}/ui`\n# \nexternal-ui: \"path/to/local/clash-dashboard\"\n\nsecret: \"\" # RESTful API\n\nexperimental: # \n  ignore-resolve-fail: true # DNStrue\n\n# SOCKS5/HTTP(S)\nauthentication:\n  - \"user1:pass1\"\n  - \"user2:pass2\"\n\n# *.clash.dev *.foo.*.example.com\n# foo.example.com > *.example.com\nhosts:\n  '*.clash.dev': 127.0.0.1\n  'alpha.clash.dev': '::1'\n\ndns:\n  enable: true # trueDNSfalse\n  ipv6: false # false\n  listen: 0.0.0.0:53\n  enhanced-mode: fake-ip # redir-host\n  fake-ip-range: 198.18.0.1/16 # \n  nameserver:\n    - 114.114.114.114\n    - tcp://1.1.1.1\n  fallback: # nameserverGEOIPCNfallback\n    - tls://dns.rubyfish.cn:853 # DNS over TLS\n    - https://1.1.1.1/dns-query # DNS over HTTPS\n  fallback-filter:\n    geoip: true # \n    ipcidr: # IP\n      - 240.0.0.0/4\n```\n\n### Proxy \n\nProxy  Proxy Group  Clash \n\nProxy  Clash Clash **`ss`****`vmess`****`socks5`****`http`****`snell`**\n\n Proxy \n\n```yaml\nproxy:\n  # shadowsocks\n  - name: \"ss1\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    # udp: true\n\n  - name: \"ss2\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    plugin: v2ray-plugin\n    plugin-opts:\n      mode: websocket\n      # tls: true\n      # skip-cert-verify: true\n      # host: bing.com\n      # path: \"/\"\n      # mux: true\n      # headers:\n      #   custom: value\n\n  # vmess\n  - name: \"vmess\"\n    type: vmess\n    server: server\n    port: 443\n    uuid: uuid\n    alterid: 32\n    cipher: auto\n    # udp: true\n    # tls: true\n    # skip-cert-verify: true\n    # network: ws\n    # ws-path: /path\n    # ws-headers:\n    #   host: v2ray.com\n\n  # socks5\n  - name: \"socks\"\n    type: socks5\n    server: server\n    port: 443\n    # username: username\n    # password: password\n    # tls: true\n    # skip-cert-verify: true\n    # udp: true\n\n  # http\n  - name: \"http\"\n    type: http\n    server: server\n    port: 443\n    # username: username\n    # password: password\n    # tls: true\n    # skip-cert-verify: true\n\n  # snell\n  - name: \"snell\"\n    type: snell\n    server: server\n    port: 44046\n    psk: yourpsk\n    # obfs-opts:\n    #   mode: http\n    #   host: bing.com\n```\n\n### Proxy Group \n\nproxy group\n\n Proxy Group \n\n```yaml\nproxy-group:\n  # url-test  URL \n  - name: \"auto\"\n    type: url-test\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # fallback  URL  url-test \n  - name: \"fallback-auto\"\n    type: fallback\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # load-balance:  eTLD \n  - name: \"load-balance\"\n    type: load-balance\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n    url: 'http://www.gstatic.com/generate_204'\n    interval: 300\n\n  # select \n  #  RESTful API  GUI \n  - name: Proxy\n    type: select\n    proxies:\n      - ss1\n      - ss2\n      - vmess1\n      - auto\n```\n\n### Rule \n\nRuleIP \n\n Rule \n\n```yaml\nrule:\n  - domain-suffix,google.com,[]\n  - domain-keyword,google,[]\n  - domain,google.com,[]\n  - domain-suffix,ad.com,REJECT\n  - ip-cidr,127.0.0.0/8,DIRECT\n  # rename source-ip-cidr and would remove after prerelease\n  - src-ip-cidr,192.168.1.201/32,DIRECT\n  - geoip,CN,DIRECT\n  - dst-port,80,DIRECT\n  - src-port,7777,DIRECT\n  # final would remove after prerelease\n  # you also can use `final,Proxy` or `final,,Proxy` now\n  - match,[]\n```\n\n\n\n## Inbound \n\n- SOCKS5\n- HTTP(S)\n- Redirect TCP\n- TProxy TCP\n- TProxy UDP\n- Linux TUN  Premium \n\n[ Socks 5  HTTP ](https://www.txthinking.com/talks/articles/socks5-and-http-proxy.article)\n\n SOCKS5  HTTP \n\nSOCKS5  UDP HTTP  HTTP  HTTPS \n\n HTTP  SOCKS5\n\n## Outbound  Proxy\n\nClash  Clash  Proxy  Proxy Group \n\n### Shadowsocks/ShadowsocksR\n\n[Shadowsocks/SS - tlanyan](https://itlanyan.com/on-fuck-gfw-again/)\n\n**Shadowsocks** SOCKS5 Clash  Shadowsocks \n\n|  |  |\n| --- | --- |\n| AEAD | aes-128-gcm, aes-192-gcm, aes-256-gcm, chacha20-ietf-poly1305, xchacha20-ietf-poly1305 |\n|  | aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20 |\n|  | aes-128-ctr, aes-192-ctr, aes-256-ctr |\n\nClash  Shadowsocks  obfs  v2ray-plugin\n\n**ShadowsocksR** Shadowsocks Clash  ShadowsocksR \n\n|  |  |\n| --- | --- |\n|  | aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20 |\n\n ss \n\nssr ssr  GPL ssr  ss  GPLApache MIT \n\n### Vmess\n\n**VMess** TCP \n\n VMess VMess \n\nClash  Vmess :\n\n- auto\n- aes-128-gcm PC \n- chacha20-poly1305AES \n- none\n\n### SOCKS5\n\n### HTTP\n\n### Snell\n\nClash  Snell \n\n**Snell**  Surge  UDP over TCPSnell glibc Snell \nSnell\n\nSnell@v4 \n\n gitbookhttps://manual.nssurge.com/others/snell.html\n\n### Trojan\n\nClash  Trojan \n\n**Trojan**  ss/ssr ss/ssr  Trojan  HTTPS \n\n[trojan - tlanyan](https://itlanyan.com/trojan-tutorial/)\n\n## Outbound  Proxy Groups\n\nProxy Groups \n\n### Relay \n\n```yaml\nRelay:\n  - name: \"US-JP Relay\"\n    type: relay\n    proxies:\n      - \"US-Proxy\"\n      - \"JP-Proxy\"\n```\n\n\n\n### URL-Test \n\n```yaml\nUrl-Test:\n  - name: \"Fastest-Proxy\"\n    type: url-test\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    url: \"http://www.gstatic.com/generate_204\"\n    interval: 600\n```\n\n\n\n### Fallback \n\n```yaml\nFallback:\n  - name: \"Available-Proxy\"\n    type: fallback\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    url: \"http://www.gstatic.com/generate_204\"\n    interval: 600\n```\n\n\n\n### Load-Balance \n\n```yaml\nLoad-Balance:\n  - name: \"Balance-Group\"\n    type: load-balance\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    sticky-session: true\n```\n\n\n\n### Select \n\n```yaml\nSelect:\n  - name: \"Manual-Select\"\n    type: select\n    proxies:\n      - \"Proxy-A\"\n      - \"Proxy-B\"\n    interface-name: \"en0\"\n```\n\n Clash  Select \n\n\n\n### DIRECT \n\n```yaml\nDirect:\n  - name: \"Direct-Connection\"\n    type: direct\n    interface-name: \"en0\"\n```\n\n## Outbound  Proxy Providers\n\n Clash  Proxy  Proxy Groups Proxy Proxy Groups  Select  url-test \n\n cv Clash Premium Core  **Proxy Providers**\n\n\n\n```yaml\n# config.yaml\nproxy-providers:\n  test:\n    type: file\n    path: /test.yaml\n    health-check:\n      enable: true\n      interval: 36000\n      url: http://www.gstatic.com/generate_204\n```\n\n```yaml\n# test.yaml\nproxies:\n  - name: \"ss1\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n\n  - name: \"ss2\"\n    type: ss\n    server: server\n    port: 443\n    cipher: chacha20-ietf-poly1305\n    password: \"password\"\n    plugin: obfs\n    plugin-opts:\n      mode: tls\n```\n\n[Clash proxy-provider  subconverter  - ](https://www.10101.io/2020/02/12/use-clash-proxy-provider-with-subconverter)\n\n## Rules \n\n Clash  rules \n\n\n\n```yaml\n# ,,(,no-resolve)\nTYPE,ARGUMENT,POLICY(,no-resolve)\n```\n\n `no-resolve`,  DNS `GEOIP``IP-CIDR``IP-CIDR6``SCRIPT` IP \nClash  cv [](https://clash.wiki/configuration/rules.html#%E8%A7%84%E5%88%99%E7%B1%BB%E5%9E%8B)\n\n### DOMAIN \n\n```yaml\nDOMAIN,www.google.com,policy\n```\n\n`www.google.com``policy`\n\n### DOMAIN-SUFFIX \n\n```yaml\nDOMAIN-SUFFIX,youtube.com,policy\n```\n\n`youtube.com``policy``www.youtube.com``foo.bar.youtube.com``policy`\n\n### DOMAIN-KEYWORD \n\n```yaml\nDOMAIN-KEYWORD,google,policy\n```\n\n`google``policy``www.google.com``googleapis.com``policy`\n\n### GEOIP IP ()\n\nGEOIP  IP ****Clash [**MaxMind GeoLite2**](https://dev.maxmind.com/geoip/geoip2/geolite2/)Clash  IP  IP \n\n```yaml\nGEOIP,CN,policy\n```\n\n IP `policy`\n\n### IP-CIDR IPv4\n\nIP-CIDR ** IPv4 **, Clash  IPv4 \n\n```yaml\nIP-CIDR,127.0.0.0/8,DIRECT\n```\n\n IP `127.0.0.0/8``DIRECT`\n\n### IP-CIDR6 IPv6\n\nIP-CIDR6 ** IPv6 **, Clash  IPv6 \n\n```yaml\nIP-CIDR6,2620:0:2d0:200::7/32,policy\n```\n\n IP `2620:0:2d0:200::7/32``policy`\n\n### SRC-IP-CIDR IP\n\nSRC-IP-CIDR ** IPv4 **\n\n```yaml\nSRC-IP-CIDR,192.168.1.201/32,DIRECT\n```\n\n IP `192.168.1.201/32``DIRECT`\n\n### SRC-PORT \n\nSRC-PORT ****\n\n```yaml\nSRC-PORT,80,policy\n```\n\n`80``policy`\n\n### DST-PORT \n\nDST-PORT ****\n\n```yaml\nDST-PORT,80,policy\n```\n\n`80``policy`\n\n### PROCESS-NAME \n\nPROCESS-NAME  macOSLinuxFreeBSD  Windows\n\n```yaml\nPROCESS-NAME,nc,DIRECT\n```\n\n`nc``DIRECT`\n\n### PROCESS-PATH \n\nPROCESS-PATH  macOSLinuxFreeBSD  Windows\n\n```yaml\nPROCESS-PATH,/usr/local/bin/nc,DIRECT\n```\n\n`/usr/local/bin/nc``DIRECT`\n\n### IPSET IP\n\nIPSET  IP . [**IPSET **](https://ipset.netfilter.org/):\n\n> IP  Linux ,  ipset IP  IP  (TCP/UDP) MAC \n> \n\n,  Linux , `ipset`, Clash  IP ,  IP  IP .  DNS , **`no-resolve`**.\n\n```yaml\nIPSET,chnroute,policy\n```\n\n IP  IP `chnroute``policy`.\n\n### RULE-SET \n\n[**Premium **](https://clash.wiki/premium/introduction.html)\n\nRULE-SET [**Rule Providers **](https://clash.wiki/premium/rule-providers.html) Clash  Rule Providers  , \n\n RULE-SET  IPCIDR Clash  IP \n\n```yaml\nRULE-SET,my-rule-provider,DIRECT\n```\n\n`my-rule-provider`\n\n### SCRIPT \n\n[**Premium **](https://clash.wiki/premium/introduction.html)\n\nSCRIPT  Clash  SCRIPT Clash  IP \n\n```yaml\nSCRIPT,script-path,DIRECT\n```\n\n`script-path`.\n\n### MATCH \n\nMATCH ****\n\n```yaml\nMATCH,policy\n```\n\n`policy`\n\n## \n\n### tproxy\n\n[tproxy](https://www.zhaohuabing.com/learning-linux/docs/tproxy/)\n\ntproxy  transparent proxy transparent\n\n1.  client client  socks  http  client \n2.  server server  client  proxy \n\n client  IP  IP\n\n![20240613024955](https://img.ma5hr00m.top/blog/20240613024955.png)\n\n\n\n iptables Clash \n\n### redirect\n\nredirect redirect  TCP  tproxy \n\n Clash  redirect \n\n1.  TCP iptables \n2. iptables  Clash \n3. Clash \n\n redirect  tproxy  iptables  redirect ","slug":"how_does_clash_work","published":1,"updated":"2024-06-14T17:34:50.868Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap2000ff4ly2cg2e96d","content":"<p><a href=\"https://clash.wiki/\"> Clash? | Clash </a></p>\n<p> Clash Clash </p>\n<p>Clash Clash  Clash </p>\n<p></p>\n<p> Clash  Clash </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Clash </p>\n<ol>\n<li><strong>Inbound </strong> Clash </li>\n<li><strong></strong>Clash <strong><code>rules</code></strong></li>\n<li><strong>Outbound </strong>Clash </li>\n</ol>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240613024509.png\" alt=\"20240613024509\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Clash </p>\n<ol>\n<li><strong>Rule</strong> Clash IP</li>\n<li><strong>Direct</strong></li>\n<li><strong>Global</strong></li>\n<li><strong>Script</strong> JavaScript </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://clash.skk.moe/\">https://clash.skk.moe/</a></p>\n<p>Clash <code>config.yaml</code><code>$HOME/.config/clash</code>Clash </p>\n<p> <code>-f</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clash -f /etc/clash/config.yaml</span><br></pre></td></tr></table></figure>\n\n<p> Clash </p>\n<h3 id=\"General-\"><a href=\"#General-\" class=\"headerlink\" title=\"General \"></a>General </h3><p> Clash General  <code>port</code><code>socks-port</code>  <code>allow-lan</code>  Clash SOCKS5  <code>redir-port</code> </p>\n<p> <code>mixed</code>  HTTP(S)  SOCKS5 </p>\n<p></p>\n<ul>\n<li><code>dns</code>DNS</li>\n<li><code>external-controller</code> RESTful API </li>\n<li><code>secret</code> RESTful API </li>\n<li><code>cfw-bypass</code></li>\n</ul>\n<p> General </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">port:</span> <span class=\"number\">7890</span> <span class=\"comment\"># HTTP</span></span><br><span class=\"line\"><span class=\"attr\">socks-port:</span> <span class=\"number\">7891</span> <span class=\"comment\"># SOCKS5</span></span><br><span class=\"line\"><span class=\"attr\">redir-port:</span> <span class=\"number\">7892</span> <span class=\"comment\"># LinuxmacOS</span></span><br><span class=\"line\"><span class=\"attr\">mixed:</span> <span class=\"number\">7893</span> <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attr\">allow-lan:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># allow-lantrue</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;*&quot;: IP</span></span><br><span class=\"line\"><span class=\"comment\"># 192.168.122.11: IPv4</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;[aaaa::a8aa:ff:fe09:57d8]&quot;: IPv6</span></span><br><span class=\"line\"><span class=\"attr\">bind-address:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Rule / Global/ DirectRule</span></span><br><span class=\"line\"><span class=\"attr\">mode:</span> <span class=\"string\">Rule</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># stdoutinfo</span></span><br><span class=\"line\"><span class=\"comment\"># info / warning / error / debug / silent</span></span><br><span class=\"line\"><span class=\"attr\">log-level:</span> <span class=\"string\">info</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">external-controller:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">:9090</span> <span class=\"comment\"># ClashRESTful API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Webclash-dashboardClash`$&#123;API&#125;/ui`</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attr\">external-ui:</span> <span class=\"string\">&quot;path/to/local/clash-dashboard&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">secret:</span> <span class=\"string\">&quot;&quot;</span> <span class=\"comment\"># RESTful API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">experimental:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">  <span class=\"attr\">ignore-resolve-fail:</span> <span class=\"literal\">true</span> <span class=\"comment\"># DNStrue</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SOCKS5/HTTP(S)</span></span><br><span class=\"line\"><span class=\"attr\">authentication:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;user1:pass1&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;user2:pass2&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># *.clash.dev *.foo.*.example.com</span></span><br><span class=\"line\"><span class=\"comment\"># foo.example.com &gt; *.example.com</span></span><br><span class=\"line\"><span class=\"attr\">hosts:</span></span><br><span class=\"line\">  <span class=\"string\">&#x27;*.clash.dev&#x27;</span><span class=\"string\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></span><br><span class=\"line\">  <span class=\"attr\">&#x27;alpha.clash.dev&#x27;:</span> <span class=\"string\">&#x27;::1&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># trueDNSfalse</span></span><br><span class=\"line\">  <span class=\"attr\">ipv6:</span> <span class=\"literal\">false</span> <span class=\"comment\"># false</span></span><br><span class=\"line\">  <span class=\"attr\">listen:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:53</span></span><br><span class=\"line\">  <span class=\"attr\">enhanced-mode:</span> <span class=\"string\">fake-ip</span> <span class=\"comment\"># redir-host</span></span><br><span class=\"line\">  <span class=\"attr\">fake-ip-range:</span> <span class=\"number\">198.18</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">/16</span> <span class=\"comment\"># </span></span><br><span class=\"line\">  <span class=\"attr\">nameserver:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"number\">114.114</span><span class=\"number\">.114</span><span class=\"number\">.114</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">tcp://1.1.1.1</span></span><br><span class=\"line\">  <span class=\"attr\">fallback:</span> <span class=\"comment\"># nameserverGEOIPCNfallback</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">tls://dns.rubyfish.cn:853</span> <span class=\"comment\"># DNS over TLS</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">https://1.1.1.1/dns-query</span> <span class=\"comment\"># DNS over HTTPS</span></span><br><span class=\"line\">  <span class=\"attr\">fallback-filter:</span></span><br><span class=\"line\">    <span class=\"attr\">geoip:</span> <span class=\"literal\">true</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">ipcidr:</span> <span class=\"comment\"># IP</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">240.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/4</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Proxy-\"><a href=\"#Proxy-\" class=\"headerlink\" title=\"Proxy \"></a>Proxy </h3><p>Proxy  Proxy Group  Clash </p>\n<p>Proxy  Clash Clash <strong><code>ss</code><strong></strong><code>vmess</code><strong></strong><code>socks5</code><strong></strong><code>http</code></strong>**<code>snell</code>**</p>\n<p> Proxy </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">proxy:</span></span><br><span class=\"line\">  <span class=\"comment\"># shadowsocks</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss1&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss2&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">v2ray-plugin</span></span><br><span class=\"line\">    <span class=\"attr\">plugin-opts:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">websocket</span></span><br><span class=\"line\">      <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">      <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">      <span class=\"comment\"># host: bing.com</span></span><br><span class=\"line\">      <span class=\"comment\"># path: &quot;/&quot;</span></span><br><span class=\"line\">      <span class=\"comment\"># mux: true</span></span><br><span class=\"line\">      <span class=\"comment\"># headers:</span></span><br><span class=\"line\">      <span class=\"comment\">#   custom: value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># vmess</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;vmess&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">vmess</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">uuid:</span> <span class=\"string\">uuid</span></span><br><span class=\"line\">    <span class=\"attr\">alterid:</span> <span class=\"number\">32</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">    <span class=\"comment\"># network: ws</span></span><br><span class=\"line\">    <span class=\"comment\"># ws-path: /path</span></span><br><span class=\"line\">    <span class=\"comment\"># ws-headers:</span></span><br><span class=\"line\">    <span class=\"comment\">#   host: v2ray.com</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># socks5</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;socks&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">socks5</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"comment\"># username: username</span></span><br><span class=\"line\">    <span class=\"comment\"># password: password</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># http</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;http&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">http</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"comment\"># username: username</span></span><br><span class=\"line\">    <span class=\"comment\"># password: password</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># snell</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;snell&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">snell</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">44046</span></span><br><span class=\"line\">    <span class=\"attr\">psk:</span> <span class=\"string\">yourpsk</span></span><br><span class=\"line\">    <span class=\"comment\"># obfs-opts:</span></span><br><span class=\"line\">    <span class=\"comment\">#   mode: http</span></span><br><span class=\"line\">    <span class=\"comment\">#   host: bing.com</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Proxy-Group-\"><a href=\"#Proxy-Group-\" class=\"headerlink\" title=\"Proxy Group \"></a>Proxy Group </h3><p>proxy group</p>\n<p> Proxy Group </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">proxy-group:</span></span><br><span class=\"line\">  <span class=\"comment\"># url-test  URL </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;auto&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">url-test</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># fallback  URL  url-test </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;fallback-auto&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">fallback</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># load-balance:  eTLD </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;load-balance&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">load-balance</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># select </span></span><br><span class=\"line\">  <span class=\"comment\">#  RESTful API  GUI </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Proxy</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">select</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">auto</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Rule-\"><a href=\"#Rule-\" class=\"headerlink\" title=\"Rule \"></a>Rule </h3><p>RuleIP </p>\n<p> Rule </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rule:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-suffix,google.com,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-keyword,google,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain,google.com,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-suffix,ad.com,REJECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ip-cidr,127.0.0.0/8,DIRECT</span></span><br><span class=\"line\">  <span class=\"comment\"># rename source-ip-cidr and would remove after prerelease</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">src-ip-cidr,192.168.1.201/32,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geoip,CN,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dst-port,80,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">src-port,7777,DIRECT</span></span><br><span class=\"line\">  <span class=\"comment\"># final would remove after prerelease</span></span><br><span class=\"line\">  <span class=\"comment\"># you also can use `final,Proxy` or `final,,Proxy` now</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">match,[]</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"Inbound-\"><a href=\"#Inbound-\" class=\"headerlink\" title=\"Inbound \"></a>Inbound </h2><ul>\n<li>SOCKS5</li>\n<li>HTTP(S)</li>\n<li>Redirect TCP</li>\n<li>TProxy TCP</li>\n<li>TProxy UDP</li>\n<li>Linux TUN  Premium </li>\n</ul>\n<p><a href=\"https://www.txthinking.com/talks/articles/socks5-and-http-proxy.article\"> Socks 5  HTTP </a></p>\n<p> SOCKS5  HTTP </p>\n<p>SOCKS5  UDP HTTP  HTTP  HTTPS </p>\n<p> HTTP  SOCKS5</p>\n<h2 id=\"Outbound--Proxy\"><a href=\"#Outbound--Proxy\" class=\"headerlink\" title=\"Outbound  Proxy\"></a>Outbound  Proxy</h2><p>Clash  Clash  Proxy  Proxy Group </p>\n<h3 id=\"Shadowsocks-ShadowsocksR\"><a href=\"#Shadowsocks-ShadowsocksR\" class=\"headerlink\" title=\"Shadowsocks&#x2F;ShadowsocksR\"></a>Shadowsocks&#x2F;ShadowsocksR</h3><p><a href=\"https://itlanyan.com/on-fuck-gfw-again/\">Shadowsocks&#x2F;SS - tlanyan</a></p>\n<p><strong>Shadowsocks</strong> SOCKS5 Clash  Shadowsocks </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AEAD</td>\n<td>aes-128-gcm, aes-192-gcm, aes-256-gcm, chacha20-ietf-poly1305, xchacha20-ietf-poly1305</td>\n</tr>\n<tr>\n<td></td>\n<td>aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20</td>\n</tr>\n<tr>\n<td></td>\n<td>aes-128-ctr, aes-192-ctr, aes-256-ctr</td>\n</tr>\n</tbody></table>\n<p>Clash  Shadowsocks  obfs  v2ray-plugin</p>\n<p><strong>ShadowsocksR</strong> Shadowsocks Clash  ShadowsocksR </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20</td>\n</tr>\n</tbody></table>\n<p> ss </p>\n<p>ssr ssr  GPL ssr  ss  GPLApache MIT </p>\n<h3 id=\"Vmess\"><a href=\"#Vmess\" class=\"headerlink\" title=\"Vmess\"></a>Vmess</h3><p><strong>VMess</strong> TCP </p>\n<p> VMess VMess </p>\n<p>Clash  Vmess :</p>\n<ul>\n<li>auto</li>\n<li>aes-128-gcm PC </li>\n<li>chacha20-poly1305AES </li>\n<li>none</li>\n</ul>\n<h3 id=\"SOCKS5\"><a href=\"#SOCKS5\" class=\"headerlink\" title=\"SOCKS5\"></a>SOCKS5</h3><h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h3 id=\"Snell\"><a href=\"#Snell\" class=\"headerlink\" title=\"Snell\"></a>Snell</h3><p>Clash  Snell </p>\n<p><strong>Snell</strong>  Surge  UDP over TCPSnell glibc Snell <br>Snell</p>\n<p>Snell@v4 </p>\n<p> gitbook<a href=\"https://manual.nssurge.com/others/snell.html\">https://manual.nssurge.com/others/snell.html</a></p>\n<h3 id=\"Trojan\"><a href=\"#Trojan\" class=\"headerlink\" title=\"Trojan\"></a>Trojan</h3><p>Clash  Trojan </p>\n<p><strong>Trojan</strong>  ss&#x2F;ssr ss&#x2F;ssr  Trojan  HTTPS </p>\n<p><a href=\"https://itlanyan.com/trojan-tutorial/\">trojan - tlanyan</a></p>\n<h2 id=\"Outbound--Proxy-Groups\"><a href=\"#Outbound--Proxy-Groups\" class=\"headerlink\" title=\"Outbound  Proxy Groups\"></a>Outbound  Proxy Groups</h2><p>Proxy Groups </p>\n<h3 id=\"Relay-\"><a href=\"#Relay-\" class=\"headerlink\" title=\"Relay \"></a>Relay </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Relay:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;US-JP Relay&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">relay</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;US-Proxy&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;JP-Proxy&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"URL-Test-\"><a href=\"#URL-Test-\" class=\"headerlink\" title=\"URL-Test \"></a>URL-Test </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Url-Test:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Fastest-Proxy&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">url-test</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&quot;http://www.gstatic.com/generate_204&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">600</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Fallback-\"><a href=\"#Fallback-\" class=\"headerlink\" title=\"Fallback \"></a>Fallback </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Fallback:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Available-Proxy&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">fallback</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&quot;http://www.gstatic.com/generate_204&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">600</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Load-Balance-\"><a href=\"#Load-Balance-\" class=\"headerlink\" title=\"Load-Balance \"></a>Load-Balance </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Load-Balance:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Balance-Group&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">load-balance</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">sticky-session:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Select-\"><a href=\"#Select-\" class=\"headerlink\" title=\"Select \"></a>Select </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Select:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Manual-Select&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">select</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interface-name:</span> <span class=\"string\">&quot;en0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> Clash  Select </p>\n<p></p>\n<h3 id=\"DIRECT-\"><a href=\"#DIRECT-\" class=\"headerlink\" title=\"DIRECT \"></a>DIRECT </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Direct:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Direct-Connection&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">direct</span></span><br><span class=\"line\">    <span class=\"attr\">interface-name:</span> <span class=\"string\">&quot;en0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Outbound--Proxy-Providers\"><a href=\"#Outbound--Proxy-Providers\" class=\"headerlink\" title=\"Outbound  Proxy Providers\"></a>Outbound  Proxy Providers</h2><p> Clash  Proxy  Proxy Groups Proxy Proxy Groups  Select  url-test </p>\n<p> cv Clash Premium Core  <strong>Proxy Providers</strong></p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># config.yaml</span></span><br><span class=\"line\"><span class=\"attr\">proxy-providers:</span></span><br><span class=\"line\">  <span class=\"attr\">test:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">file</span></span><br><span class=\"line\">    <span class=\"attr\">path:</span> <span class=\"string\">/test.yaml</span></span><br><span class=\"line\">    <span class=\"attr\">health-check:</span></span><br><span class=\"line\">      <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"number\">36000</span></span><br><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">http://www.gstatic.com/generate_204</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># test.yaml</span></span><br><span class=\"line\"><span class=\"attr\">proxies:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss1&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss2&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">obfs</span></span><br><span class=\"line\">    <span class=\"attr\">plugin-opts:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">tls</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.10101.io/2020/02/12/use-clash-proxy-provider-with-subconverter\">Clash proxy-provider  subconverter  - </a></p>\n<h2 id=\"Rules-\"><a href=\"#Rules-\" class=\"headerlink\" title=\"Rules \"></a>Rules </h2><p> Clash  rules </p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ,,(,no-resolve)</span></span><br><span class=\"line\"><span class=\"string\">TYPE,ARGUMENT,POLICY(,no-resolve)</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>no-resolve</code>,  DNS <code>GEOIP</code><code>IP-CIDR</code><code>IP-CIDR6</code><code>SCRIPT</code> IP <br>Clash  cv <a href=\"https://clash.wiki/configuration/rules.html#%E8%A7%84%E5%88%99%E7%B1%BB%E5%9E%8B\"></a></p>\n<h3 id=\"DOMAIN-\"><a href=\"#DOMAIN-\" class=\"headerlink\" title=\"DOMAIN \"></a>DOMAIN </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN,www.google.com,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>www.google.com</code><code>policy</code></p>\n<h3 id=\"DOMAIN-SUFFIX-\"><a href=\"#DOMAIN-SUFFIX-\" class=\"headerlink\" title=\"DOMAIN-SUFFIX \"></a>DOMAIN-SUFFIX </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN-SUFFIX,youtube.com,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>youtube.com</code><code>policy</code><code>www.youtube.com</code><code>foo.bar.youtube.com</code><code>policy</code></p>\n<h3 id=\"DOMAIN-KEYWORD-\"><a href=\"#DOMAIN-KEYWORD-\" class=\"headerlink\" title=\"DOMAIN-KEYWORD \"></a>DOMAIN-KEYWORD </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN-KEYWORD,google,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>google</code><code>policy</code><code>www.google.com</code><code>googleapis.com</code><code>policy</code></p>\n<h3 id=\"GEOIP-IP-\"><a href=\"#GEOIP-IP-\" class=\"headerlink\" title=\"GEOIP IP ()\"></a>GEOIP IP ()</h3><p>GEOIP  IP <strong></strong>Clash <a href=\"https://dev.maxmind.com/geoip/geoip2/geolite2/\"><strong>MaxMind GeoLite2</strong></a>Clash  IP  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">GEOIP,CN,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>policy</code></p>\n<h3 id=\"IP-CIDR-IPv4\"><a href=\"#IP-CIDR-IPv4\" class=\"headerlink\" title=\"IP-CIDR IPv4\"></a>IP-CIDR IPv4</h3><p>IP-CIDR <strong> IPv4 </strong>, Clash  IPv4 </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IP-CIDR,127.0.0.0/8,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>127.0.0.0/8</code><code>DIRECT</code></p>\n<h3 id=\"IP-CIDR6-IPv6\"><a href=\"#IP-CIDR6-IPv6\" class=\"headerlink\" title=\"IP-CIDR6 IPv6\"></a>IP-CIDR6 IPv6</h3><p>IP-CIDR6 <strong> IPv6 </strong>, Clash  IPv6 </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IP-CIDR6,2620:0:2d0:200::7/32,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>2620:0:2d0:200::7/32</code><code>policy</code></p>\n<h3 id=\"SRC-IP-CIDR-IP\"><a href=\"#SRC-IP-CIDR-IP\" class=\"headerlink\" title=\"SRC-IP-CIDR IP\"></a>SRC-IP-CIDR IP</h3><p>SRC-IP-CIDR <strong> IPv4 </strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SRC-IP-CIDR,192.168.1.201/32,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>192.168.1.201/32</code><code>DIRECT</code></p>\n<h3 id=\"SRC-PORT-\"><a href=\"#SRC-PORT-\" class=\"headerlink\" title=\"SRC-PORT \"></a>SRC-PORT </h3><p>SRC-PORT <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SRC-PORT,80,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>80</code><code>policy</code></p>\n<h3 id=\"DST-PORT-\"><a href=\"#DST-PORT-\" class=\"headerlink\" title=\"DST-PORT \"></a>DST-PORT </h3><p>DST-PORT <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DST-PORT,80,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>80</code><code>policy</code></p>\n<h3 id=\"PROCESS-NAME-\"><a href=\"#PROCESS-NAME-\" class=\"headerlink\" title=\"PROCESS-NAME \"></a>PROCESS-NAME </h3><p>PROCESS-NAME  macOSLinuxFreeBSD  Windows</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">PROCESS-NAME,nc,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>nc</code><code>DIRECT</code></p>\n<h3 id=\"PROCESS-PATH-\"><a href=\"#PROCESS-PATH-\" class=\"headerlink\" title=\"PROCESS-PATH \"></a>PROCESS-PATH </h3><p>PROCESS-PATH  macOSLinuxFreeBSD  Windows</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">PROCESS-PATH,/usr/local/bin/nc,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>/usr/local/bin/nc</code><code>DIRECT</code></p>\n<h3 id=\"IPSET-IP\"><a href=\"#IPSET-IP\" class=\"headerlink\" title=\"IPSET IP\"></a>IPSET IP</h3><p>IPSET  IP . <a href=\"https://ipset.netfilter.org/\"><strong>IPSET </strong></a>:</p>\n<blockquote>\n<p>IP  Linux ,  ipset IP  IP  (TCP&#x2F;UDP) MAC </p>\n</blockquote>\n<p>,  Linux , <code>ipset</code>, Clash  IP ,  IP  IP .  DNS , <strong><code>no-resolve</code></strong>.</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IPSET,chnroute,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP  IP <code>chnroute</code><code>policy</code>.</p>\n<h3 id=\"RULE-SET-\"><a href=\"#RULE-SET-\" class=\"headerlink\" title=\"RULE-SET \"></a>RULE-SET </h3><p><a href=\"https://clash.wiki/premium/introduction.html\"><strong>Premium </strong></a></p>\n<p>RULE-SET <a href=\"https://clash.wiki/premium/rule-providers.html\"><strong>Rule Providers </strong></a> Clash  Rule Providers  , </p>\n<p> RULE-SET  IPCIDR Clash  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">RULE-SET,my-rule-provider,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>my-rule-provider</code></p>\n<h3 id=\"SCRIPT-\"><a href=\"#SCRIPT-\" class=\"headerlink\" title=\"SCRIPT \"></a>SCRIPT </h3><p><a href=\"https://clash.wiki/premium/introduction.html\"><strong>Premium </strong></a></p>\n<p>SCRIPT  Clash  SCRIPT Clash  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SCRIPT,script-path,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>script-path</code>.</p>\n<h3 id=\"MATCH-\"><a href=\"#MATCH-\" class=\"headerlink\" title=\"MATCH \"></a>MATCH </h3><p>MATCH <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">MATCH,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>policy</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"tproxy\"><a href=\"#tproxy\" class=\"headerlink\" title=\"tproxy\"></a>tproxy</h3><p><a href=\"https://www.zhaohuabing.com/learning-linux/docs/tproxy/\">tproxy</a></p>\n<p>tproxy  transparent proxy transparent</p>\n<ol>\n<li> client client  socks  http  client </li>\n<li> server server  client  proxy </li>\n</ol>\n<p> client  IP  IP</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240613024955.png\" alt=\"20240613024955\"></p>\n<p></p>\n<p> iptables Clash </p>\n<h3 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect\"></a>redirect</h3><p>redirect redirect  TCP  tproxy </p>\n<p> Clash  redirect </p>\n<ol>\n<li> TCP iptables </li>\n<li>iptables  Clash </li>\n<li>Clash </li>\n</ol>\n<p> redirect  tproxy  iptables  redirect </p>\n","excerpt":"","more":"<p><a href=\"https://clash.wiki/\"> Clash? | Clash </a></p>\n<p> Clash Clash </p>\n<p>Clash Clash  Clash </p>\n<p></p>\n<p> Clash  Clash </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Clash </p>\n<ol>\n<li><strong>Inbound </strong> Clash </li>\n<li><strong></strong>Clash <strong><code>rules</code></strong></li>\n<li><strong>Outbound </strong>Clash </li>\n</ol>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240613024509.png\" alt=\"20240613024509\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Clash </p>\n<ol>\n<li><strong>Rule</strong> Clash IP</li>\n<li><strong>Direct</strong></li>\n<li><strong>Global</strong></li>\n<li><strong>Script</strong> JavaScript </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://clash.skk.moe/\">https://clash.skk.moe/</a></p>\n<p>Clash <code>config.yaml</code><code>$HOME/.config/clash</code>Clash </p>\n<p> <code>-f</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clash -f /etc/clash/config.yaml</span><br></pre></td></tr></table></figure>\n\n<p> Clash </p>\n<h3 id=\"General-\"><a href=\"#General-\" class=\"headerlink\" title=\"General \"></a>General </h3><p> Clash General  <code>port</code><code>socks-port</code>  <code>allow-lan</code>  Clash SOCKS5  <code>redir-port</code> </p>\n<p> <code>mixed</code>  HTTP(S)  SOCKS5 </p>\n<p></p>\n<ul>\n<li><code>dns</code>DNS</li>\n<li><code>external-controller</code> RESTful API </li>\n<li><code>secret</code> RESTful API </li>\n<li><code>cfw-bypass</code></li>\n</ul>\n<p> General </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">port:</span> <span class=\"number\">7890</span> <span class=\"comment\"># HTTP</span></span><br><span class=\"line\"><span class=\"attr\">socks-port:</span> <span class=\"number\">7891</span> <span class=\"comment\"># SOCKS5</span></span><br><span class=\"line\"><span class=\"attr\">redir-port:</span> <span class=\"number\">7892</span> <span class=\"comment\"># LinuxmacOS</span></span><br><span class=\"line\"><span class=\"attr\">mixed:</span> <span class=\"number\">7893</span> <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attr\">allow-lan:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># allow-lantrue</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;*&quot;: IP</span></span><br><span class=\"line\"><span class=\"comment\"># 192.168.122.11: IPv4</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;[aaaa::a8aa:ff:fe09:57d8]&quot;: IPv6</span></span><br><span class=\"line\"><span class=\"attr\">bind-address:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Rule / Global/ DirectRule</span></span><br><span class=\"line\"><span class=\"attr\">mode:</span> <span class=\"string\">Rule</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># stdoutinfo</span></span><br><span class=\"line\"><span class=\"comment\"># info / warning / error / debug / silent</span></span><br><span class=\"line\"><span class=\"attr\">log-level:</span> <span class=\"string\">info</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">external-controller:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">:9090</span> <span class=\"comment\"># ClashRESTful API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Webclash-dashboardClash`$&#123;API&#125;/ui`</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attr\">external-ui:</span> <span class=\"string\">&quot;path/to/local/clash-dashboard&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">secret:</span> <span class=\"string\">&quot;&quot;</span> <span class=\"comment\"># RESTful API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">experimental:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">  <span class=\"attr\">ignore-resolve-fail:</span> <span class=\"literal\">true</span> <span class=\"comment\"># DNStrue</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># SOCKS5/HTTP(S)</span></span><br><span class=\"line\"><span class=\"attr\">authentication:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;user1:pass1&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;user2:pass2&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># *.clash.dev *.foo.*.example.com</span></span><br><span class=\"line\"><span class=\"comment\"># foo.example.com &gt; *.example.com</span></span><br><span class=\"line\"><span class=\"attr\">hosts:</span></span><br><span class=\"line\">  <span class=\"string\">&#x27;*.clash.dev&#x27;</span><span class=\"string\">:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></span><br><span class=\"line\">  <span class=\"attr\">&#x27;alpha.clash.dev&#x27;:</span> <span class=\"string\">&#x27;::1&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># trueDNSfalse</span></span><br><span class=\"line\">  <span class=\"attr\">ipv6:</span> <span class=\"literal\">false</span> <span class=\"comment\"># false</span></span><br><span class=\"line\">  <span class=\"attr\">listen:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">:53</span></span><br><span class=\"line\">  <span class=\"attr\">enhanced-mode:</span> <span class=\"string\">fake-ip</span> <span class=\"comment\"># redir-host</span></span><br><span class=\"line\">  <span class=\"attr\">fake-ip-range:</span> <span class=\"number\">198.18</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"string\">/16</span> <span class=\"comment\"># </span></span><br><span class=\"line\">  <span class=\"attr\">nameserver:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"number\">114.114</span><span class=\"number\">.114</span><span class=\"number\">.114</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">tcp://1.1.1.1</span></span><br><span class=\"line\">  <span class=\"attr\">fallback:</span> <span class=\"comment\"># nameserverGEOIPCNfallback</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">tls://dns.rubyfish.cn:853</span> <span class=\"comment\"># DNS over TLS</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">https://1.1.1.1/dns-query</span> <span class=\"comment\"># DNS over HTTPS</span></span><br><span class=\"line\">  <span class=\"attr\">fallback-filter:</span></span><br><span class=\"line\">    <span class=\"attr\">geoip:</span> <span class=\"literal\">true</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"attr\">ipcidr:</span> <span class=\"comment\"># IP</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">240.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/4</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Proxy-\"><a href=\"#Proxy-\" class=\"headerlink\" title=\"Proxy \"></a>Proxy </h3><p>Proxy  Proxy Group  Clash </p>\n<p>Proxy  Clash Clash <strong><code>ss</code><strong></strong><code>vmess</code><strong></strong><code>socks5</code><strong></strong><code>http</code></strong>**<code>snell</code>**</p>\n<p> Proxy </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">proxy:</span></span><br><span class=\"line\">  <span class=\"comment\"># shadowsocks</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss1&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss2&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">v2ray-plugin</span></span><br><span class=\"line\">    <span class=\"attr\">plugin-opts:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">websocket</span></span><br><span class=\"line\">      <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">      <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">      <span class=\"comment\"># host: bing.com</span></span><br><span class=\"line\">      <span class=\"comment\"># path: &quot;/&quot;</span></span><br><span class=\"line\">      <span class=\"comment\"># mux: true</span></span><br><span class=\"line\">      <span class=\"comment\"># headers:</span></span><br><span class=\"line\">      <span class=\"comment\">#   custom: value</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># vmess</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;vmess&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">vmess</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">uuid:</span> <span class=\"string\">uuid</span></span><br><span class=\"line\">    <span class=\"attr\">alterid:</span> <span class=\"number\">32</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">    <span class=\"comment\"># network: ws</span></span><br><span class=\"line\">    <span class=\"comment\"># ws-path: /path</span></span><br><span class=\"line\">    <span class=\"comment\"># ws-headers:</span></span><br><span class=\"line\">    <span class=\"comment\">#   host: v2ray.com</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># socks5</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;socks&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">socks5</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"comment\"># username: username</span></span><br><span class=\"line\">    <span class=\"comment\"># password: password</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\">    <span class=\"comment\"># udp: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># http</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;http&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">http</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"comment\"># username: username</span></span><br><span class=\"line\">    <span class=\"comment\"># password: password</span></span><br><span class=\"line\">    <span class=\"comment\"># tls: true</span></span><br><span class=\"line\">    <span class=\"comment\"># skip-cert-verify: true</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># snell</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;snell&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">snell</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">44046</span></span><br><span class=\"line\">    <span class=\"attr\">psk:</span> <span class=\"string\">yourpsk</span></span><br><span class=\"line\">    <span class=\"comment\"># obfs-opts:</span></span><br><span class=\"line\">    <span class=\"comment\">#   mode: http</span></span><br><span class=\"line\">    <span class=\"comment\">#   host: bing.com</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Proxy-Group-\"><a href=\"#Proxy-Group-\" class=\"headerlink\" title=\"Proxy Group \"></a>Proxy Group </h3><p>proxy group</p>\n<p> Proxy Group </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">proxy-group:</span></span><br><span class=\"line\">  <span class=\"comment\"># url-test  URL </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;auto&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">url-test</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># fallback  URL  url-test </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;fallback-auto&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">fallback</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># load-balance:  eTLD </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;load-balance&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">load-balance</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&#x27;http://www.gstatic.com/generate_204&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># select </span></span><br><span class=\"line\">  <span class=\"comment\">#  RESTful API  GUI </span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Proxy</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">select</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ss2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">vmess1</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">auto</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Rule-\"><a href=\"#Rule-\" class=\"headerlink\" title=\"Rule \"></a>Rule </h3><p>RuleIP </p>\n<p> Rule </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rule:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-suffix,google.com,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-keyword,google,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain,google.com,[]</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">domain-suffix,ad.com,REJECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ip-cidr,127.0.0.0/8,DIRECT</span></span><br><span class=\"line\">  <span class=\"comment\"># rename source-ip-cidr and would remove after prerelease</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">src-ip-cidr,192.168.1.201/32,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geoip,CN,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dst-port,80,DIRECT</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">src-port,7777,DIRECT</span></span><br><span class=\"line\">  <span class=\"comment\"># final would remove after prerelease</span></span><br><span class=\"line\">  <span class=\"comment\"># you also can use `final,Proxy` or `final,,Proxy` now</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">match,[]</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"Inbound-\"><a href=\"#Inbound-\" class=\"headerlink\" title=\"Inbound \"></a>Inbound </h2><ul>\n<li>SOCKS5</li>\n<li>HTTP(S)</li>\n<li>Redirect TCP</li>\n<li>TProxy TCP</li>\n<li>TProxy UDP</li>\n<li>Linux TUN  Premium </li>\n</ul>\n<p><a href=\"https://www.txthinking.com/talks/articles/socks5-and-http-proxy.article\"> Socks 5  HTTP </a></p>\n<p> SOCKS5  HTTP </p>\n<p>SOCKS5  UDP HTTP  HTTP  HTTPS </p>\n<p> HTTP  SOCKS5</p>\n<h2 id=\"Outbound--Proxy\"><a href=\"#Outbound--Proxy\" class=\"headerlink\" title=\"Outbound  Proxy\"></a>Outbound  Proxy</h2><p>Clash  Clash  Proxy  Proxy Group </p>\n<h3 id=\"Shadowsocks-ShadowsocksR\"><a href=\"#Shadowsocks-ShadowsocksR\" class=\"headerlink\" title=\"Shadowsocks&#x2F;ShadowsocksR\"></a>Shadowsocks&#x2F;ShadowsocksR</h3><p><a href=\"https://itlanyan.com/on-fuck-gfw-again/\">Shadowsocks&#x2F;SS - tlanyan</a></p>\n<p><strong>Shadowsocks</strong> SOCKS5 Clash  Shadowsocks </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AEAD</td>\n<td>aes-128-gcm, aes-192-gcm, aes-256-gcm, chacha20-ietf-poly1305, xchacha20-ietf-poly1305</td>\n</tr>\n<tr>\n<td></td>\n<td>aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20</td>\n</tr>\n<tr>\n<td></td>\n<td>aes-128-ctr, aes-192-ctr, aes-256-ctr</td>\n</tr>\n</tbody></table>\n<p>Clash  Shadowsocks  obfs  v2ray-plugin</p>\n<p><strong>ShadowsocksR</strong> Shadowsocks Clash  ShadowsocksR </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>aes-128-cfb, aes-192-cfb, aes-256-cfb, rc4-md5, chacha20-ietf, xchacha20</td>\n</tr>\n</tbody></table>\n<p> ss </p>\n<p>ssr ssr  GPL ssr  ss  GPLApache MIT </p>\n<h3 id=\"Vmess\"><a href=\"#Vmess\" class=\"headerlink\" title=\"Vmess\"></a>Vmess</h3><p><strong>VMess</strong> TCP </p>\n<p> VMess VMess </p>\n<p>Clash  Vmess :</p>\n<ul>\n<li>auto</li>\n<li>aes-128-gcm PC </li>\n<li>chacha20-poly1305AES </li>\n<li>none</li>\n</ul>\n<h3 id=\"SOCKS5\"><a href=\"#SOCKS5\" class=\"headerlink\" title=\"SOCKS5\"></a>SOCKS5</h3><h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h3 id=\"Snell\"><a href=\"#Snell\" class=\"headerlink\" title=\"Snell\"></a>Snell</h3><p>Clash  Snell </p>\n<p><strong>Snell</strong>  Surge  UDP over TCPSnell glibc Snell <br>Snell</p>\n<p>Snell@v4 </p>\n<p> gitbook<a href=\"https://manual.nssurge.com/others/snell.html\">https://manual.nssurge.com/others/snell.html</a></p>\n<h3 id=\"Trojan\"><a href=\"#Trojan\" class=\"headerlink\" title=\"Trojan\"></a>Trojan</h3><p>Clash  Trojan </p>\n<p><strong>Trojan</strong>  ss&#x2F;ssr ss&#x2F;ssr  Trojan  HTTPS </p>\n<p><a href=\"https://itlanyan.com/trojan-tutorial/\">trojan - tlanyan</a></p>\n<h2 id=\"Outbound--Proxy-Groups\"><a href=\"#Outbound--Proxy-Groups\" class=\"headerlink\" title=\"Outbound  Proxy Groups\"></a>Outbound  Proxy Groups</h2><p>Proxy Groups </p>\n<h3 id=\"Relay-\"><a href=\"#Relay-\" class=\"headerlink\" title=\"Relay \"></a>Relay </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Relay:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;US-JP Relay&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">relay</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;US-Proxy&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;JP-Proxy&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"URL-Test-\"><a href=\"#URL-Test-\" class=\"headerlink\" title=\"URL-Test \"></a>URL-Test </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Url-Test:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Fastest-Proxy&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">url-test</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&quot;http://www.gstatic.com/generate_204&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">600</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Fallback-\"><a href=\"#Fallback-\" class=\"headerlink\" title=\"Fallback \"></a>Fallback </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Fallback:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Available-Proxy&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">fallback</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">&quot;http://www.gstatic.com/generate_204&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interval:</span> <span class=\"number\">600</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Load-Balance-\"><a href=\"#Load-Balance-\" class=\"headerlink\" title=\"Load-Balance \"></a>Load-Balance </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Load-Balance:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Balance-Group&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">load-balance</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">sticky-session:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"Select-\"><a href=\"#Select-\" class=\"headerlink\" title=\"Select \"></a>Select </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Select:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Manual-Select&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">select</span></span><br><span class=\"line\">    <span class=\"attr\">proxies:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-A&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;Proxy-B&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">interface-name:</span> <span class=\"string\">&quot;en0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> Clash  Select </p>\n<p></p>\n<h3 id=\"DIRECT-\"><a href=\"#DIRECT-\" class=\"headerlink\" title=\"DIRECT \"></a>DIRECT </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">Direct:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;Direct-Connection&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">direct</span></span><br><span class=\"line\">    <span class=\"attr\">interface-name:</span> <span class=\"string\">&quot;en0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Outbound--Proxy-Providers\"><a href=\"#Outbound--Proxy-Providers\" class=\"headerlink\" title=\"Outbound  Proxy Providers\"></a>Outbound  Proxy Providers</h2><p> Clash  Proxy  Proxy Groups Proxy Proxy Groups  Select  url-test </p>\n<p> cv Clash Premium Core  <strong>Proxy Providers</strong></p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># config.yaml</span></span><br><span class=\"line\"><span class=\"attr\">proxy-providers:</span></span><br><span class=\"line\">  <span class=\"attr\">test:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">file</span></span><br><span class=\"line\">    <span class=\"attr\">path:</span> <span class=\"string\">/test.yaml</span></span><br><span class=\"line\">    <span class=\"attr\">health-check:</span></span><br><span class=\"line\">      <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"number\">36000</span></span><br><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">http://www.gstatic.com/generate_204</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># test.yaml</span></span><br><span class=\"line\"><span class=\"attr\">proxies:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss1&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">&quot;ss2&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">ss</span></span><br><span class=\"line\">    <span class=\"attr\">server:</span> <span class=\"string\">server</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">443</span></span><br><span class=\"line\">    <span class=\"attr\">cipher:</span> <span class=\"string\">chacha20-ietf-poly1305</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;password&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">obfs</span></span><br><span class=\"line\">    <span class=\"attr\">plugin-opts:</span></span><br><span class=\"line\">      <span class=\"attr\">mode:</span> <span class=\"string\">tls</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.10101.io/2020/02/12/use-clash-proxy-provider-with-subconverter\">Clash proxy-provider  subconverter  - </a></p>\n<h2 id=\"Rules-\"><a href=\"#Rules-\" class=\"headerlink\" title=\"Rules \"></a>Rules </h2><p> Clash  rules </p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ,,(,no-resolve)</span></span><br><span class=\"line\"><span class=\"string\">TYPE,ARGUMENT,POLICY(,no-resolve)</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>no-resolve</code>,  DNS <code>GEOIP</code><code>IP-CIDR</code><code>IP-CIDR6</code><code>SCRIPT</code> IP <br>Clash  cv <a href=\"https://clash.wiki/configuration/rules.html#%E8%A7%84%E5%88%99%E7%B1%BB%E5%9E%8B\"></a></p>\n<h3 id=\"DOMAIN-\"><a href=\"#DOMAIN-\" class=\"headerlink\" title=\"DOMAIN \"></a>DOMAIN </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN,www.google.com,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>www.google.com</code><code>policy</code></p>\n<h3 id=\"DOMAIN-SUFFIX-\"><a href=\"#DOMAIN-SUFFIX-\" class=\"headerlink\" title=\"DOMAIN-SUFFIX \"></a>DOMAIN-SUFFIX </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN-SUFFIX,youtube.com,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>youtube.com</code><code>policy</code><code>www.youtube.com</code><code>foo.bar.youtube.com</code><code>policy</code></p>\n<h3 id=\"DOMAIN-KEYWORD-\"><a href=\"#DOMAIN-KEYWORD-\" class=\"headerlink\" title=\"DOMAIN-KEYWORD \"></a>DOMAIN-KEYWORD </h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DOMAIN-KEYWORD,google,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>google</code><code>policy</code><code>www.google.com</code><code>googleapis.com</code><code>policy</code></p>\n<h3 id=\"GEOIP-IP-\"><a href=\"#GEOIP-IP-\" class=\"headerlink\" title=\"GEOIP IP ()\"></a>GEOIP IP ()</h3><p>GEOIP  IP <strong></strong>Clash <a href=\"https://dev.maxmind.com/geoip/geoip2/geolite2/\"><strong>MaxMind GeoLite2</strong></a>Clash  IP  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">GEOIP,CN,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>policy</code></p>\n<h3 id=\"IP-CIDR-IPv4\"><a href=\"#IP-CIDR-IPv4\" class=\"headerlink\" title=\"IP-CIDR IPv4\"></a>IP-CIDR IPv4</h3><p>IP-CIDR <strong> IPv4 </strong>, Clash  IPv4 </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IP-CIDR,127.0.0.0/8,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>127.0.0.0/8</code><code>DIRECT</code></p>\n<h3 id=\"IP-CIDR6-IPv6\"><a href=\"#IP-CIDR6-IPv6\" class=\"headerlink\" title=\"IP-CIDR6 IPv6\"></a>IP-CIDR6 IPv6</h3><p>IP-CIDR6 <strong> IPv6 </strong>, Clash  IPv6 </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IP-CIDR6,2620:0:2d0:200::7/32,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>2620:0:2d0:200::7/32</code><code>policy</code></p>\n<h3 id=\"SRC-IP-CIDR-IP\"><a href=\"#SRC-IP-CIDR-IP\" class=\"headerlink\" title=\"SRC-IP-CIDR IP\"></a>SRC-IP-CIDR IP</h3><p>SRC-IP-CIDR <strong> IPv4 </strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SRC-IP-CIDR,192.168.1.201/32,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p> IP <code>192.168.1.201/32</code><code>DIRECT</code></p>\n<h3 id=\"SRC-PORT-\"><a href=\"#SRC-PORT-\" class=\"headerlink\" title=\"SRC-PORT \"></a>SRC-PORT </h3><p>SRC-PORT <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SRC-PORT,80,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>80</code><code>policy</code></p>\n<h3 id=\"DST-PORT-\"><a href=\"#DST-PORT-\" class=\"headerlink\" title=\"DST-PORT \"></a>DST-PORT </h3><p>DST-PORT <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">DST-PORT,80,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>80</code><code>policy</code></p>\n<h3 id=\"PROCESS-NAME-\"><a href=\"#PROCESS-NAME-\" class=\"headerlink\" title=\"PROCESS-NAME \"></a>PROCESS-NAME </h3><p>PROCESS-NAME  macOSLinuxFreeBSD  Windows</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">PROCESS-NAME,nc,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>nc</code><code>DIRECT</code></p>\n<h3 id=\"PROCESS-PATH-\"><a href=\"#PROCESS-PATH-\" class=\"headerlink\" title=\"PROCESS-PATH \"></a>PROCESS-PATH </h3><p>PROCESS-PATH  macOSLinuxFreeBSD  Windows</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">PROCESS-PATH,/usr/local/bin/nc,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>/usr/local/bin/nc</code><code>DIRECT</code></p>\n<h3 id=\"IPSET-IP\"><a href=\"#IPSET-IP\" class=\"headerlink\" title=\"IPSET IP\"></a>IPSET IP</h3><p>IPSET  IP . <a href=\"https://ipset.netfilter.org/\"><strong>IPSET </strong></a>:</p>\n<blockquote>\n<p>IP  Linux ,  ipset IP  IP  (TCP&#x2F;UDP) MAC </p>\n</blockquote>\n<p>,  Linux , <code>ipset</code>, Clash  IP ,  IP  IP .  DNS , <strong><code>no-resolve</code></strong>.</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">IPSET,chnroute,policy</span></span><br></pre></td></tr></table></figure>\n\n<p> IP  IP <code>chnroute</code><code>policy</code>.</p>\n<h3 id=\"RULE-SET-\"><a href=\"#RULE-SET-\" class=\"headerlink\" title=\"RULE-SET \"></a>RULE-SET </h3><p><a href=\"https://clash.wiki/premium/introduction.html\"><strong>Premium </strong></a></p>\n<p>RULE-SET <a href=\"https://clash.wiki/premium/rule-providers.html\"><strong>Rule Providers </strong></a> Clash  Rule Providers  , </p>\n<p> RULE-SET  IPCIDR Clash  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">RULE-SET,my-rule-provider,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>my-rule-provider</code></p>\n<h3 id=\"SCRIPT-\"><a href=\"#SCRIPT-\" class=\"headerlink\" title=\"SCRIPT \"></a>SCRIPT </h3><p><a href=\"https://clash.wiki/premium/introduction.html\"><strong>Premium </strong></a></p>\n<p>SCRIPT  Clash  SCRIPT Clash  IP </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">SCRIPT,script-path,DIRECT</span></span><br></pre></td></tr></table></figure>\n\n<p><code>script-path</code>.</p>\n<h3 id=\"MATCH-\"><a href=\"#MATCH-\" class=\"headerlink\" title=\"MATCH \"></a>MATCH </h3><p>MATCH <strong></strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">MATCH,policy</span></span><br></pre></td></tr></table></figure>\n\n<p><code>policy</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"tproxy\"><a href=\"#tproxy\" class=\"headerlink\" title=\"tproxy\"></a>tproxy</h3><p><a href=\"https://www.zhaohuabing.com/learning-linux/docs/tproxy/\">tproxy</a></p>\n<p>tproxy  transparent proxy transparent</p>\n<ol>\n<li> client client  socks  http  client </li>\n<li> server server  client  proxy </li>\n</ol>\n<p> client  IP  IP</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240613024955.png\" alt=\"20240613024955\"></p>\n<p></p>\n<p> iptables Clash </p>\n<h3 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect\"></a>redirect</h3><p>redirect redirect  TCP  tproxy </p>\n<p> Clash  redirect </p>\n<ol>\n<li> TCP iptables </li>\n<li>iptables  Clash </li>\n<li>Clash </li>\n</ol>\n<p> redirect  tproxy  iptables  redirect </p>\n"},{"title":"","date":"2024-06-15T16:00:00.000Z","author":"ma5hr00m","_content":"\n AI  PPT \n\n## \n\n Web2.0  TwitterFaceBook  10 \n\n###  TBIR\n\nTBIR, Text Based Image RetrievalCBIR, Content Based Image Retrieval/ tag tag \n\n TBIR tag tag  TBIR  tag\n\nTBIR  tag \n\n![image-20240616145916690](https://img.ma5hr00m.top/blog/image-20240616145916690.png)\n\n Pinterest `LowPoly`  TBIR \n\n###  CBIR\n\n 1992 \n\n CBIR \n\n1. ****\n2. ****\n3. ****\n\n![image-20240616150943134](https://img.ma5hr00m.top/blog/image-20240616150943134.png)\n\nCBIR  TBIR \n\n****\n\n CBIR \n\nTBIR  CBIR  Pinterest   TBIR  CBIR \n\n AI  AI GAN\n\n## \n\n CBIR \n\n\n\n\n\n### \n\n \n\n### \n\n CBIR \n\n- \n- \n- \n- \n\n\n\n### \n\n   \n\n## \n\nGray-level Co-occurrence Matrix, GLCM\n\n> GLCM  GLCM \n\nGLCM  1973  Haralick GLCM  GLCM Grayscale Image HistogramGIH\n\n```matlab\nimg = imread('test.jpg');\n\ngrayImg = rgb2gray(img);\n\nglcm = graycomatrix(grayImg);\n\nfigure;\n\nsubplot(1,2,1), imshow(img), title('Original Image');\nsubplot(1,2,2), imshow(glcm,[]), title('GLCM');\n```\n\n MATLAB  jpg  GLCM \n\n![image-20240616231003383](https://img.ma5hr00m.top/blog/image-20240616231003383.png)\n\n### \n\n1.  256x256\n2. \n3. `(i,j)` GLCM `(i,j)`\n4. GLCM\n\nOk demo MatLab  python  `PIL`  `numpy`  `matplotlib` \n\n```python\nimport numpy as np\nfrom PIL import Image\nimport matplotlib.pyplot as plt\n\n# \ndef read_image(file_name):\n    return np.array(Image.open(file_name).convert('L'))\n\n# \ndef create_glcm(image, d=1, theta=0):\n    max_gray_level = 256\n    glcm = np.zeros((max_gray_level, max_gray_level))\n    rows, cols = image.shape\n\n    for i in range(rows):\n        for j in range(cols - d):\n            rows_value = image[i][j]\n            cols_value = image[i][j + d] if theta == 0 else image[i + d][j]\n            glcm[rows_value][cols_value] += 1\n\n    return glcm\n\ndef main():\n    image_a = read_image('a.jpg')\n    glcm_a = create_glcm(image_a)\n\n    plt.figure(figsize=(10, 5))\n\n    plt.subplot(1, 2, 1)\n    plt.imshow(image_a, cmap='gray')\n    plt.title('Original Image')\n    plt.axis('off')\n\n    plt.subplot(1, 2, 2)\n    plt.imshow(glcm_a, cmap='gray')\n    plt.title('GLCM of Image')\n    plt.axis('off')\n\n    plt.show()\n\nif __name__ == \"__main__\":\n    main()\n```\n\n### \n\nGLCM  256  `(1,3)`  `(3,1)` \n\n1.  `i``j` `P(i,j)` \n\n   \\[Con = \\sum_{i}^{} \\sum_{j}^{} (i-j)^{2}P(i,j)\\]\n\n2. Angular Second Moment, ASM\n\n   \\[Asm = \\sum_{i}^{} \\sum_{j}^{} P(i,j)^{2}\\]\n\n3. \n\n   \\[Ent = \\sum_{i}^{} \\sum_{j}^{} P(i,j)logP(i,j)\\]\n\n4. Inverse Different Moment\n\n   \\[IDM = \\sum_{i}^{} \\sum_{j}^{} \\frac{P(i,j)}{1+(i-j)^{2}}\\]\n\n GLCM \n\nGLCM \n\n-  GLCM  GLCM  GLCM 1\n-  GLCM  GLCM  GLCM 1\n\n ****\n\n### \n\n\n\n![image-20240617003235838](https://img.ma5hr00m.top/blog/image-20240617003235838.png)\n\n Python  GitHub \n\n\n\n```python\n# \ndef read_image(file_name):\n    return np.array(Image.open(file_name).convert('L'))\n\n# \ndef create_glcm(image, d=1, theta=0):\n    max_gray_level = 256\n    glcm = np.zeros((max_gray_level, max_gray_level))\n    rows, cols = image.shape\n\n    for i in range(rows):\n        for j in range(cols - d):\n            rows_value = image[i][j]\n            cols_value = image[i][j + d] if theta == 0 else image[i + d][j]\n            glcm[rows_value][cols_value] += 1\n\n    return glcm\n\n# \ndef calculate_features(glcm):\n    contrast = np.sum(np.square(np.arange(glcm.shape[0]) - np.arange(glcm.shape[1])) * glcm)\n    energy = np.sum(np.square(glcm))\n    entropy = -np.sum(glcm * np.ma.log(glcm).filled(0))\n    inverse_diff_moment = np.sum(glcm / (1 + np.square(np.arange(glcm.shape[0]) - np.arange(glcm.shape[1]))))\n\n    return contrast, energy, entropy, inverse_diff_moment\n\n# \ndef normalize_features(features):\n    normalized_features = (features - np.mean(features)) / np.std(features)\n    return normalized_features\n```\n\n a  b \n\n![image-20240617003516465](https://img.ma5hr00m.top/blog/image-20240617003516465.png)\n\n## \n\n- https://github.com/scikit-image/skimage-tutorials\n- https://leovan.me/cn/2022/01/content-based-image-retrieval/\n- https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf\n- [-- (tencent.com)](https://cloud.tencent.com/developer/article/1934204)\n\n- [GLCM  Haralick -- (tencent.com)](https://cloud.tencent.com/developer/article/2219407)\n- [LBP, -- (tencent.com)](https://cloud.tencent.com/developer/article/1010272)\n- http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html","source":"_posts/glcm.md","raw":"---\ntitle: \ndate: 2024/6/16\nauthor: ma5hr00m\ncategories:\n- Digital Image Processing\n---\n\n AI  PPT \n\n## \n\n Web2.0  TwitterFaceBook  10 \n\n###  TBIR\n\nTBIR, Text Based Image RetrievalCBIR, Content Based Image Retrieval/ tag tag \n\n TBIR tag tag  TBIR  tag\n\nTBIR  tag \n\n![image-20240616145916690](https://img.ma5hr00m.top/blog/image-20240616145916690.png)\n\n Pinterest `LowPoly`  TBIR \n\n###  CBIR\n\n 1992 \n\n CBIR \n\n1. ****\n2. ****\n3. ****\n\n![image-20240616150943134](https://img.ma5hr00m.top/blog/image-20240616150943134.png)\n\nCBIR  TBIR \n\n****\n\n CBIR \n\nTBIR  CBIR  Pinterest   TBIR  CBIR \n\n AI  AI GAN\n\n## \n\n CBIR \n\n\n\n\n\n### \n\n \n\n### \n\n CBIR \n\n- \n- \n- \n- \n\n\n\n### \n\n   \n\n## \n\nGray-level Co-occurrence Matrix, GLCM\n\n> GLCM  GLCM \n\nGLCM  1973  Haralick GLCM  GLCM Grayscale Image HistogramGIH\n\n```matlab\nimg = imread('test.jpg');\n\ngrayImg = rgb2gray(img);\n\nglcm = graycomatrix(grayImg);\n\nfigure;\n\nsubplot(1,2,1), imshow(img), title('Original Image');\nsubplot(1,2,2), imshow(glcm,[]), title('GLCM');\n```\n\n MATLAB  jpg  GLCM \n\n![image-20240616231003383](https://img.ma5hr00m.top/blog/image-20240616231003383.png)\n\n### \n\n1.  256x256\n2. \n3. `(i,j)` GLCM `(i,j)`\n4. GLCM\n\nOk demo MatLab  python  `PIL`  `numpy`  `matplotlib` \n\n```python\nimport numpy as np\nfrom PIL import Image\nimport matplotlib.pyplot as plt\n\n# \ndef read_image(file_name):\n    return np.array(Image.open(file_name).convert('L'))\n\n# \ndef create_glcm(image, d=1, theta=0):\n    max_gray_level = 256\n    glcm = np.zeros((max_gray_level, max_gray_level))\n    rows, cols = image.shape\n\n    for i in range(rows):\n        for j in range(cols - d):\n            rows_value = image[i][j]\n            cols_value = image[i][j + d] if theta == 0 else image[i + d][j]\n            glcm[rows_value][cols_value] += 1\n\n    return glcm\n\ndef main():\n    image_a = read_image('a.jpg')\n    glcm_a = create_glcm(image_a)\n\n    plt.figure(figsize=(10, 5))\n\n    plt.subplot(1, 2, 1)\n    plt.imshow(image_a, cmap='gray')\n    plt.title('Original Image')\n    plt.axis('off')\n\n    plt.subplot(1, 2, 2)\n    plt.imshow(glcm_a, cmap='gray')\n    plt.title('GLCM of Image')\n    plt.axis('off')\n\n    plt.show()\n\nif __name__ == \"__main__\":\n    main()\n```\n\n### \n\nGLCM  256  `(1,3)`  `(3,1)` \n\n1.  `i``j` `P(i,j)` \n\n   \\[Con = \\sum_{i}^{} \\sum_{j}^{} (i-j)^{2}P(i,j)\\]\n\n2. Angular Second Moment, ASM\n\n   \\[Asm = \\sum_{i}^{} \\sum_{j}^{} P(i,j)^{2}\\]\n\n3. \n\n   \\[Ent = \\sum_{i}^{} \\sum_{j}^{} P(i,j)logP(i,j)\\]\n\n4. Inverse Different Moment\n\n   \\[IDM = \\sum_{i}^{} \\sum_{j}^{} \\frac{P(i,j)}{1+(i-j)^{2}}\\]\n\n GLCM \n\nGLCM \n\n-  GLCM  GLCM  GLCM 1\n-  GLCM  GLCM  GLCM 1\n\n ****\n\n### \n\n\n\n![image-20240617003235838](https://img.ma5hr00m.top/blog/image-20240617003235838.png)\n\n Python  GitHub \n\n\n\n```python\n# \ndef read_image(file_name):\n    return np.array(Image.open(file_name).convert('L'))\n\n# \ndef create_glcm(image, d=1, theta=0):\n    max_gray_level = 256\n    glcm = np.zeros((max_gray_level, max_gray_level))\n    rows, cols = image.shape\n\n    for i in range(rows):\n        for j in range(cols - d):\n            rows_value = image[i][j]\n            cols_value = image[i][j + d] if theta == 0 else image[i + d][j]\n            glcm[rows_value][cols_value] += 1\n\n    return glcm\n\n# \ndef calculate_features(glcm):\n    contrast = np.sum(np.square(np.arange(glcm.shape[0]) - np.arange(glcm.shape[1])) * glcm)\n    energy = np.sum(np.square(glcm))\n    entropy = -np.sum(glcm * np.ma.log(glcm).filled(0))\n    inverse_diff_moment = np.sum(glcm / (1 + np.square(np.arange(glcm.shape[0]) - np.arange(glcm.shape[1]))))\n\n    return contrast, energy, entropy, inverse_diff_moment\n\n# \ndef normalize_features(features):\n    normalized_features = (features - np.mean(features)) / np.std(features)\n    return normalized_features\n```\n\n a  b \n\n![image-20240617003516465](https://img.ma5hr00m.top/blog/image-20240617003516465.png)\n\n## \n\n- https://github.com/scikit-image/skimage-tutorials\n- https://leovan.me/cn/2022/01/content-based-image-retrieval/\n- https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf\n- [-- (tencent.com)](https://cloud.tencent.com/developer/article/1934204)\n\n- [GLCM  Haralick -- (tencent.com)](https://cloud.tencent.com/developer/article/2219407)\n- [LBP, -- (tencent.com)](https://cloud.tencent.com/developer/article/1010272)\n- http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html","slug":"glcm","published":1,"updated":"2024-06-16T16:39:00.281Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap3000if4lybsx89lvc","content":"<p> AI  PPT </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Web2.0  TwitterFaceBook  10 </p>\n<h3 id=\"-TBIR\"><a href=\"#-TBIR\" class=\"headerlink\" title=\" TBIR\"></a> TBIR</h3><p>TBIR, Text Based Image RetrievalCBIR, Content Based Image Retrieval&#x2F; tag tag </p>\n<p> TBIR tag tag  TBIR  tag</p>\n<p>TBIR  tag </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616145916690.png\" alt=\"image-20240616145916690\"></p>\n<p> Pinterest <code>LowPoly</code>  TBIR </p>\n<h3 id=\"-CBIR\"><a href=\"#-CBIR\" class=\"headerlink\" title=\" CBIR\"></a> CBIR</h3><p> 1992 </p>\n<p> CBIR </p>\n<ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616150943134.png\" alt=\"image-20240616150943134\"></p>\n<p>CBIR  TBIR </p>\n<p><strong></strong></p>\n<p> CBIR </p>\n<p>TBIR  CBIR  Pinterest   TBIR  CBIR </p>\n<p> AI  AI GAN</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> CBIR </p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> CBIR </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Gray-level Co-occurrence Matrix, GLCM</p>\n<blockquote>\n<p>GLCM  GLCM </p>\n</blockquote>\n<p>GLCM  1973  Haralick GLCM  GLCM Grayscale Image HistogramGIH</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">img = imread(<span class=\"string\">&#x27;test.jpg&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">grayImg = rgb2gray(img);</span><br><span class=\"line\"></span><br><span class=\"line\">glcm = graycomatrix(grayImg);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">figure</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">subplot(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>), imshow(img), title(<span class=\"string\">&#x27;Original Image&#x27;</span>);</span><br><span class=\"line\">subplot(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">2</span>), imshow(glcm,[]), title(<span class=\"string\">&#x27;GLCM&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p> MATLAB  jpg  GLCM </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616231003383.png\" alt=\"image-20240616231003383\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> 256x256</li>\n<li></li>\n<li><code>(i,j)</code> GLCM <code>(i,j)</code></li>\n<li>GLCM</li>\n</ol>\n<p>Ok demo MatLab  python  <code>PIL</code>  <code>numpy</code>  <code>matplotlib</code> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_image</span>(<span class=\"params\">file_name</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.array(Image.<span class=\"built_in\">open</span>(file_name).convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">create_glcm</span>(<span class=\"params\">image, d=<span class=\"number\">1</span>, theta=<span class=\"number\">0</span></span>):</span><br><span class=\"line\">    max_gray_level = <span class=\"number\">256</span></span><br><span class=\"line\">    glcm = np.zeros((max_gray_level, max_gray_level))</span><br><span class=\"line\">    rows, cols = image.shape</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(rows):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(cols - d):</span><br><span class=\"line\">            rows_value = image[i][j]</span><br><span class=\"line\">            cols_value = image[i][j + d] <span class=\"keyword\">if</span> theta == <span class=\"number\">0</span> <span class=\"keyword\">else</span> image[i + d][j]</span><br><span class=\"line\">            glcm[rows_value][cols_value] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> glcm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>():</span><br><span class=\"line\">    image_a = read_image(<span class=\"string\">&#x27;a.jpg&#x27;</span>)</span><br><span class=\"line\">    glcm_a = create_glcm(image_a)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.figure(figsize=(<span class=\"number\">10</span>, <span class=\"number\">5</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">    plt.imshow(image_a, cmap=<span class=\"string\">&#x27;gray&#x27;</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Original Image&#x27;</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">&#x27;off&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">    plt.imshow(glcm_a, cmap=<span class=\"string\">&#x27;gray&#x27;</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;GLCM of Image&#x27;</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">&#x27;off&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>GLCM  256  <code>(1,3)</code>  <code>(3,1)</code> </p>\n<ol>\n<li><p> <code>i</code><code>j</code> <code>P(i,j)</code> </p>\n<p>[Con &#x3D; \\sum_{i}^{} \\sum_{j}^{} (i-j)^{2}P(i,j)]</p>\n</li>\n<li><p>Angular Second Moment, ASM</p>\n<p>[Asm &#x3D; \\sum_{i}^{} \\sum_{j}^{} P(i,j)^{2}]</p>\n</li>\n<li><p></p>\n<p>[Ent &#x3D; \\sum_{i}^{} \\sum_{j}^{} P(i,j)logP(i,j)]</p>\n</li>\n<li><p>Inverse Different Moment</p>\n<p>[IDM &#x3D; \\sum_{i}^{} \\sum_{j}^{} \\frac{P(i,j)}{1+(i-j)^{2}}]</p>\n</li>\n</ol>\n<p> GLCM </p>\n<p>GLCM </p>\n<ul>\n<li> GLCM  GLCM  GLCM 1</li>\n<li> GLCM  GLCM  GLCM 1</li>\n</ul>\n<p> <strong></strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240617003235838.png\" alt=\"image-20240617003235838\"></p>\n<p> Python  GitHub </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_image</span>(<span class=\"params\">file_name</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.array(Image.<span class=\"built_in\">open</span>(file_name).convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">create_glcm</span>(<span class=\"params\">image, d=<span class=\"number\">1</span>, theta=<span class=\"number\">0</span></span>):</span><br><span class=\"line\">    max_gray_level = <span class=\"number\">256</span></span><br><span class=\"line\">    glcm = np.zeros((max_gray_level, max_gray_level))</span><br><span class=\"line\">    rows, cols = image.shape</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(rows):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(cols - d):</span><br><span class=\"line\">            rows_value = image[i][j]</span><br><span class=\"line\">            cols_value = image[i][j + d] <span class=\"keyword\">if</span> theta == <span class=\"number\">0</span> <span class=\"keyword\">else</span> image[i + d][j]</span><br><span class=\"line\">            glcm[rows_value][cols_value] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> glcm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">calculate_features</span>(<span class=\"params\">glcm</span>):</span><br><span class=\"line\">    contrast = np.<span class=\"built_in\">sum</span>(np.square(np.arange(glcm.shape[<span class=\"number\">0</span>]) - np.arange(glcm.shape[<span class=\"number\">1</span>])) * glcm)</span><br><span class=\"line\">    energy = np.<span class=\"built_in\">sum</span>(np.square(glcm))</span><br><span class=\"line\">    entropy = -np.<span class=\"built_in\">sum</span>(glcm * np.ma.log(glcm).filled(<span class=\"number\">0</span>))</span><br><span class=\"line\">    inverse_diff_moment = np.<span class=\"built_in\">sum</span>(glcm / (<span class=\"number\">1</span> + np.square(np.arange(glcm.shape[<span class=\"number\">0</span>]) - np.arange(glcm.shape[<span class=\"number\">1</span>]))))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> contrast, energy, entropy, inverse_diff_moment</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">normalize_features</span>(<span class=\"params\">features</span>):</span><br><span class=\"line\">    normalized_features = (features - np.mean(features)) / np.std(features)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> normalized_features</span><br></pre></td></tr></table></figure>\n\n<p> a  b </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240617003516465.png\" alt=\"image-20240617003516465\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><a href=\"https://github.com/scikit-image/skimage-tutorials\">https://github.com/scikit-image/skimage-tutorials</a></p>\n</li>\n<li><p><a href=\"https://leovan.me/cn/2022/01/content-based-image-retrieval/\">https://leovan.me/cn/2022/01/content-based-image-retrieval/</a></p>\n</li>\n<li><p><a href=\"https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf\">https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/1934204\">-- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/2219407\">GLCM  Haralick -- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/1010272\">LBP, -- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html\">http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html</a></p>\n</li>\n</ul>\n","excerpt":"","more":"<p> AI  PPT </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Web2.0  TwitterFaceBook  10 </p>\n<h3 id=\"-TBIR\"><a href=\"#-TBIR\" class=\"headerlink\" title=\" TBIR\"></a> TBIR</h3><p>TBIR, Text Based Image RetrievalCBIR, Content Based Image Retrieval&#x2F; tag tag </p>\n<p> TBIR tag tag  TBIR  tag</p>\n<p>TBIR  tag </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616145916690.png\" alt=\"image-20240616145916690\"></p>\n<p> Pinterest <code>LowPoly</code>  TBIR </p>\n<h3 id=\"-CBIR\"><a href=\"#-CBIR\" class=\"headerlink\" title=\" CBIR\"></a> CBIR</h3><p> 1992 </p>\n<p> CBIR </p>\n<ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616150943134.png\" alt=\"image-20240616150943134\"></p>\n<p>CBIR  TBIR </p>\n<p><strong></strong></p>\n<p> CBIR </p>\n<p>TBIR  CBIR  Pinterest   TBIR  CBIR </p>\n<p> AI  AI GAN</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> CBIR </p>\n<p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> CBIR </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>   </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Gray-level Co-occurrence Matrix, GLCM</p>\n<blockquote>\n<p>GLCM  GLCM </p>\n</blockquote>\n<p>GLCM  1973  Haralick GLCM  GLCM Grayscale Image HistogramGIH</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">img = imread(<span class=\"string\">&#x27;test.jpg&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">grayImg = rgb2gray(img);</span><br><span class=\"line\"></span><br><span class=\"line\">glcm = graycomatrix(grayImg);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">figure</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">subplot(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>), imshow(img), title(<span class=\"string\">&#x27;Original Image&#x27;</span>);</span><br><span class=\"line\">subplot(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">2</span>), imshow(glcm,[]), title(<span class=\"string\">&#x27;GLCM&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p> MATLAB  jpg  GLCM </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240616231003383.png\" alt=\"image-20240616231003383\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> 256x256</li>\n<li></li>\n<li><code>(i,j)</code> GLCM <code>(i,j)</code></li>\n<li>GLCM</li>\n</ol>\n<p>Ok demo MatLab  python  <code>PIL</code>  <code>numpy</code>  <code>matplotlib</code> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_image</span>(<span class=\"params\">file_name</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.array(Image.<span class=\"built_in\">open</span>(file_name).convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">create_glcm</span>(<span class=\"params\">image, d=<span class=\"number\">1</span>, theta=<span class=\"number\">0</span></span>):</span><br><span class=\"line\">    max_gray_level = <span class=\"number\">256</span></span><br><span class=\"line\">    glcm = np.zeros((max_gray_level, max_gray_level))</span><br><span class=\"line\">    rows, cols = image.shape</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(rows):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(cols - d):</span><br><span class=\"line\">            rows_value = image[i][j]</span><br><span class=\"line\">            cols_value = image[i][j + d] <span class=\"keyword\">if</span> theta == <span class=\"number\">0</span> <span class=\"keyword\">else</span> image[i + d][j]</span><br><span class=\"line\">            glcm[rows_value][cols_value] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> glcm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>():</span><br><span class=\"line\">    image_a = read_image(<span class=\"string\">&#x27;a.jpg&#x27;</span>)</span><br><span class=\"line\">    glcm_a = create_glcm(image_a)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.figure(figsize=(<span class=\"number\">10</span>, <span class=\"number\">5</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">    plt.imshow(image_a, cmap=<span class=\"string\">&#x27;gray&#x27;</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;Original Image&#x27;</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">&#x27;off&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">    plt.imshow(glcm_a, cmap=<span class=\"string\">&#x27;gray&#x27;</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">&#x27;GLCM of Image&#x27;</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">&#x27;off&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>GLCM  256  <code>(1,3)</code>  <code>(3,1)</code> </p>\n<ol>\n<li><p> <code>i</code><code>j</code> <code>P(i,j)</code> </p>\n<p>[Con &#x3D; \\sum_{i}^{} \\sum_{j}^{} (i-j)^{2}P(i,j)]</p>\n</li>\n<li><p>Angular Second Moment, ASM</p>\n<p>[Asm &#x3D; \\sum_{i}^{} \\sum_{j}^{} P(i,j)^{2}]</p>\n</li>\n<li><p></p>\n<p>[Ent &#x3D; \\sum_{i}^{} \\sum_{j}^{} P(i,j)logP(i,j)]</p>\n</li>\n<li><p>Inverse Different Moment</p>\n<p>[IDM &#x3D; \\sum_{i}^{} \\sum_{j}^{} \\frac{P(i,j)}{1+(i-j)^{2}}]</p>\n</li>\n</ol>\n<p> GLCM </p>\n<p>GLCM </p>\n<ul>\n<li> GLCM  GLCM  GLCM 1</li>\n<li> GLCM  GLCM  GLCM 1</li>\n</ul>\n<p> <strong></strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240617003235838.png\" alt=\"image-20240617003235838\"></p>\n<p> Python  GitHub </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_image</span>(<span class=\"params\">file_name</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.array(Image.<span class=\"built_in\">open</span>(file_name).convert(<span class=\"string\">&#x27;L&#x27;</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">create_glcm</span>(<span class=\"params\">image, d=<span class=\"number\">1</span>, theta=<span class=\"number\">0</span></span>):</span><br><span class=\"line\">    max_gray_level = <span class=\"number\">256</span></span><br><span class=\"line\">    glcm = np.zeros((max_gray_level, max_gray_level))</span><br><span class=\"line\">    rows, cols = image.shape</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(rows):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(cols - d):</span><br><span class=\"line\">            rows_value = image[i][j]</span><br><span class=\"line\">            cols_value = image[i][j + d] <span class=\"keyword\">if</span> theta == <span class=\"number\">0</span> <span class=\"keyword\">else</span> image[i + d][j]</span><br><span class=\"line\">            glcm[rows_value][cols_value] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> glcm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">calculate_features</span>(<span class=\"params\">glcm</span>):</span><br><span class=\"line\">    contrast = np.<span class=\"built_in\">sum</span>(np.square(np.arange(glcm.shape[<span class=\"number\">0</span>]) - np.arange(glcm.shape[<span class=\"number\">1</span>])) * glcm)</span><br><span class=\"line\">    energy = np.<span class=\"built_in\">sum</span>(np.square(glcm))</span><br><span class=\"line\">    entropy = -np.<span class=\"built_in\">sum</span>(glcm * np.ma.log(glcm).filled(<span class=\"number\">0</span>))</span><br><span class=\"line\">    inverse_diff_moment = np.<span class=\"built_in\">sum</span>(glcm / (<span class=\"number\">1</span> + np.square(np.arange(glcm.shape[<span class=\"number\">0</span>]) - np.arange(glcm.shape[<span class=\"number\">1</span>]))))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> contrast, energy, entropy, inverse_diff_moment</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">normalize_features</span>(<span class=\"params\">features</span>):</span><br><span class=\"line\">    normalized_features = (features - np.mean(features)) / np.std(features)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> normalized_features</span><br></pre></td></tr></table></figure>\n\n<p> a  b </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/image-20240617003516465.png\" alt=\"image-20240617003516465\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><a href=\"https://github.com/scikit-image/skimage-tutorials\">https://github.com/scikit-image/skimage-tutorials</a></p>\n</li>\n<li><p><a href=\"https://leovan.me/cn/2022/01/content-based-image-retrieval/\">https://leovan.me/cn/2022/01/content-based-image-retrieval/</a></p>\n</li>\n<li><p><a href=\"https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf\">https://www.cs.cmu.edu/~juny/Prof/papers/Part2-CBIR.pdf</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/1934204\">-- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/2219407\">GLCM  Haralick -- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"https://cloud.tencent.com/developer/article/1010272\">LBP, -- (tencent.com)</a></p>\n</li>\n<li><p><a href=\"http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html\">http://zhaoxuhui.top/blog/2022/03/15/gray-level-co-occurence-matrix.html</a></p>\n</li>\n</ul>\n"},{"title":"Java ","date":"2023-08-31T16:00:00.000Z","author":"ma5hr00m","_content":"\n`Java` \n\n1. Java .java **  Java \n2. Java  *JVM* \n3. ** \n\n Java \n\n\n![20230927135500](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927135500.png)\n\n##  \n\n### JDK - Java\nJDK*Java Development Kit* Java  Java     \nJDK  JREjavac Java \n\n### JRE - Java\nJRE*Java Runtime Environment* Java  Java JVM Java   \nJRE  Java  Java \n\n### JVM - Java\nJVM*Java Virtual Machine*Java JVM  Java  OS  Java   \nJava  JVM  JVM  JVM  Java \n\n\n##  \n Java *source file* `.java` *source code*\n\n Java  HelloWorld \n\n```java\n// HelloWorld.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World!\");\n    }\n}\n```\n\n javac*java*JDK `.class`  Java \n\n```bash\njavac HelloWorld.java\n# output: HelloWorld.class\n```\n> \n\n### javac  Java \njavac  Java \n\n1. **  \n  javac *token*  \n   token \n\n2. **  \n  javac  token *Syntax Tree*  \n   Java \n\n3. **  \n  Symbol Table  \n  \n\n4. **  \n   JVM \n\n .class \n\n### \n\n\nJava*Java Decompilation* Java  Java JDK  javac  javap javap  .class \n javap  HelloWorld.class\n\n```bash\njavap -c HelloWorld\n```\n\n\n\n```java\nCompiled from \"HelloWorld.java\"\npublic class HelloWorld {\n  public HelloWorld();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;\n       3: ldc           #13                 // String Hello, World!\n       5: invokevirtual #15                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n       8: return\n}\n```\n\n### \nJava  .class \n\n## JVM \n .class  JVM \n\n### \nJVM **\n\n1. *** Loading***  \n  JVM *Fully Qualified Name*\n  \n   Java  *java.lang.Class* \n\n2. *** Linking***  \n  JVM \n    - \n    - \n    - \n\n3. *** Initialization***  \n  JVM   \n   java \n\n> [Java ](https://zhuanlan.zhihu.com/p/25228545)\n\n### \n\n\nJVM  JVM / **  Java \n\n![20230927180316](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927180316.png)\n\n\n\n1. * Bytecode Verification*  \n  JVM  JVM \n\n2. */*  \n  JVM \n     - **  \n      JVM *Interpreter*  \n     - **  \n      JVM *Just-In-Time Compiler*  \n     - **  \n      JVMMixed Mode\n\n3. * Execution*  \n  /JVM \n\n Java \n\n### JVM\nJVM  Java \n\n Java  JVM \n\nJVM \n- **  \n  JVM *GC*\n- **  \n   Java \n\n## \n- [Java JVM ](https://zhuanlan.zhihu.com/p/25713880)\n- [Java ](https://www.cnblogs.com/o-andy-o/archive/2012/04/11/2442109.html)\n- [javac ](https://rensifei.site/2017/03/javac/)","source":"_posts/how_java_run.md","raw":"---\ntitle: Java \ndate: 2023/09/01\nauthor: ma5hr00m\ncategories:\n- Java\n---\n\n`Java` \n\n1. Java .java **  Java \n2. Java  *JVM* \n3. ** \n\n Java \n\n\n![20230927135500](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927135500.png)\n\n##  \n\n### JDK - Java\nJDK*Java Development Kit* Java  Java     \nJDK  JREjavac Java \n\n### JRE - Java\nJRE*Java Runtime Environment* Java  Java JVM Java   \nJRE  Java  Java \n\n### JVM - Java\nJVM*Java Virtual Machine*Java JVM  Java  OS  Java   \nJava  JVM  JVM  JVM  Java \n\n\n##  \n Java *source file* `.java` *source code*\n\n Java  HelloWorld \n\n```java\n// HelloWorld.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World!\");\n    }\n}\n```\n\n javac*java*JDK `.class`  Java \n\n```bash\njavac HelloWorld.java\n# output: HelloWorld.class\n```\n> \n\n### javac  Java \njavac  Java \n\n1. **  \n  javac *token*  \n   token \n\n2. **  \n  javac  token *Syntax Tree*  \n   Java \n\n3. **  \n  Symbol Table  \n  \n\n4. **  \n   JVM \n\n .class \n\n### \n\n\nJava*Java Decompilation* Java  Java JDK  javac  javap javap  .class \n javap  HelloWorld.class\n\n```bash\njavap -c HelloWorld\n```\n\n\n\n```java\nCompiled from \"HelloWorld.java\"\npublic class HelloWorld {\n  public HelloWorld();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;\n       3: ldc           #13                 // String Hello, World!\n       5: invokevirtual #15                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n       8: return\n}\n```\n\n### \nJava  .class \n\n## JVM \n .class  JVM \n\n### \nJVM **\n\n1. *** Loading***  \n  JVM *Fully Qualified Name*\n  \n   Java  *java.lang.Class* \n\n2. *** Linking***  \n  JVM \n    - \n    - \n    - \n\n3. *** Initialization***  \n  JVM   \n   java \n\n> [Java ](https://zhuanlan.zhihu.com/p/25228545)\n\n### \n\n\nJVM  JVM / **  Java \n\n![20230927180316](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927180316.png)\n\n\n\n1. * Bytecode Verification*  \n  JVM  JVM \n\n2. */*  \n  JVM \n     - **  \n      JVM *Interpreter*  \n     - **  \n      JVM *Just-In-Time Compiler*  \n     - **  \n      JVMMixed Mode\n\n3. * Execution*  \n  /JVM \n\n Java \n\n### JVM\nJVM  Java \n\n Java  JVM \n\nJVM \n- **  \n  JVM *GC*\n- **  \n   Java \n\n## \n- [Java JVM ](https://zhuanlan.zhihu.com/p/25713880)\n- [Java ](https://www.cnblogs.com/o-andy-o/archive/2012/04/11/2442109.html)\n- [javac ](https://rensifei.site/2017/03/javac/)","slug":"how_java_run","published":1,"updated":"2024-06-09T12:56:05.055Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap3000kf4lyabvt4jyl","content":"<p><code>Java</code> </p>\n<ol>\n<li>Java .java <em></em>  Java </li>\n<li>Java  <em>JVM</em> </li>\n<li><em></em> </li>\n</ol>\n<p> Java <br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927135500.png\" alt=\"20230927135500\"></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"JDK-Java\"><a href=\"#JDK-Java\" class=\"headerlink\" title=\"JDK - Java\"></a>JDK - Java</h3><p>JDK<em>Java Development Kit</em> Java  Java <br>JDK  JREjavac Java </p>\n<h3 id=\"JRE-Java\"><a href=\"#JRE-Java\" class=\"headerlink\" title=\"JRE - Java\"></a>JRE - Java</h3><p>JRE<em>Java Runtime Environment</em> Java  Java JVM Java <br>JRE  Java  Java </p>\n<h3 id=\"JVM-Java\"><a href=\"#JVM-Java\" class=\"headerlink\" title=\"JVM - Java\"></a>JVM - Java</h3><p>JVM<em>Java Virtual Machine</em>Java JVM  Java  OS  Java <br>Java  JVM  JVM  JVM  Java </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> Java <em>source file</em> <code>.java</code> <em>source code</em></p>\n<p> Java  HelloWorld </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.java</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloWorld</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Hello, World!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> javac<em>java</em>JDK <code>.class</code>  Java </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javac HelloWorld.java</span><br><span class=\"line\"><span class=\"comment\"># output: HelloWorld.class</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<h3 id=\"javac--Java-\"><a href=\"#javac--Java-\" class=\"headerlink\" title=\"javac  Java \"></a>javac  Java </h3><p>javac  Java </p>\n<ol>\n<li><p><em></em><br>  javac <em>token</em><br>   token </p>\n</li>\n<li><p><em></em><br>  javac  token <em>Syntax Tree</em><br>   Java </p>\n</li>\n<li><p><em></em><br>  Symbol Table<br>  </p>\n</li>\n<li><p><em></em><br>   JVM </p>\n</li>\n</ol>\n<p> .class </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>Java<em>Java Decompilation</em> Java  Java JDK  javac  javap javap  .class <br> javap  HelloWorld.class</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javap -c HelloWorld</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Compiled from <span class=\"string\">&quot;HelloWorld.java&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloWorld</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">HelloWorld</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">       <span class=\"number\">0</span>: aload_0</span><br><span class=\"line\">       <span class=\"number\">1</span>: invokespecial #<span class=\"number\">1</span>                  <span class=\"comment\">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class=\"line\">       <span class=\"number\">4</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(java.lang.String[])</span>;</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">       <span class=\"number\">0</span>: getstatic     #<span class=\"number\">7</span>                  <span class=\"comment\">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class=\"line\">       <span class=\"number\">3</span>: ldc           #<span class=\"number\">13</span>                 <span class=\"comment\">// String Hello, World!</span></span><br><span class=\"line\">       <span class=\"number\">5</span>: invokevirtual #<span class=\"number\">15</span>                 <span class=\"comment\">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class=\"line\">       <span class=\"number\">8</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java  .class </p>\n<h2 id=\"JVM-\"><a href=\"#JVM-\" class=\"headerlink\" title=\"JVM \"></a>JVM </h2><p> .class  JVM </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JVM <em></em></p>\n<ol>\n<li><p><em><strong> Loading</strong></em><br>  JVM <em>Fully Qualified Name</em><br>  <br>   Java  <em>java.lang.Class</em> </p>\n</li>\n<li><p><em><strong> Linking</strong></em><br>  JVM </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><p><em><strong> Initialization</strong></em><br>  JVM <br>   java </p>\n</li>\n</ol>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/25228545\">Java </a></p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>JVM  JVM &#x2F; <em></em>  Java </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927180316.png\" alt=\"20230927180316\"></p>\n<p></p>\n<ol>\n<li><p><em> Bytecode Verification</em><br>  JVM  JVM </p>\n</li>\n<li><p><em>&#x2F;</em><br>  JVM </p>\n<ul>\n<li><em></em><br>   JVM <em>Interpreter</em>  </li>\n<li><em></em><br>   JVM <em>Just-In-Time Compiler</em>  </li>\n<li><em></em><br>   JVMMixed Mode</li>\n</ul>\n</li>\n<li><p><em> Execution</em><br>  &#x2F;JVM </p>\n</li>\n</ol>\n<p> Java </p>\n<h3 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h3><p>JVM  Java </p>\n<p> Java  JVM </p>\n<p>JVM </p>\n<ul>\n<li><em></em><br>JVM <em>GC</em></li>\n<li><em></em><br> Java </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25713880\">Java JVM </a></li>\n<li><a href=\"https://www.cnblogs.com/o-andy-o/archive/2012/04/11/2442109.html\">Java </a></li>\n<li><a href=\"https://rensifei.site/2017/03/javac/\">javac </a></li>\n</ul>\n","excerpt":"","more":"<p><code>Java</code> </p>\n<ol>\n<li>Java .java <em></em>  Java </li>\n<li>Java  <em>JVM</em> </li>\n<li><em></em> </li>\n</ol>\n<p> Java <br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927135500.png\" alt=\"20230927135500\"></p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"JDK-Java\"><a href=\"#JDK-Java\" class=\"headerlink\" title=\"JDK - Java\"></a>JDK - Java</h3><p>JDK<em>Java Development Kit</em> Java  Java <br>JDK  JREjavac Java </p>\n<h3 id=\"JRE-Java\"><a href=\"#JRE-Java\" class=\"headerlink\" title=\"JRE - Java\"></a>JRE - Java</h3><p>JRE<em>Java Runtime Environment</em> Java  Java JVM Java <br>JRE  Java  Java </p>\n<h3 id=\"JVM-Java\"><a href=\"#JVM-Java\" class=\"headerlink\" title=\"JVM - Java\"></a>JVM - Java</h3><p>JVM<em>Java Virtual Machine</em>Java JVM  Java  OS  Java <br>Java  JVM  JVM  JVM  Java </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p> Java <em>source file</em> <code>.java</code> <em>source code</em></p>\n<p> Java  HelloWorld </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.java</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloWorld</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Hello, World!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> javac<em>java</em>JDK <code>.class</code>  Java </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javac HelloWorld.java</span><br><span class=\"line\"><span class=\"comment\"># output: HelloWorld.class</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p></p>\n</blockquote>\n<h3 id=\"javac--Java-\"><a href=\"#javac--Java-\" class=\"headerlink\" title=\"javac  Java \"></a>javac  Java </h3><p>javac  Java </p>\n<ol>\n<li><p><em></em><br>  javac <em>token</em><br>   token </p>\n</li>\n<li><p><em></em><br>  javac  token <em>Syntax Tree</em><br>   Java </p>\n</li>\n<li><p><em></em><br>  Symbol Table<br>  </p>\n</li>\n<li><p><em></em><br>   JVM </p>\n</li>\n</ol>\n<p> .class </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>Java<em>Java Decompilation</em> Java  Java JDK  javac  javap javap  .class <br> javap  HelloWorld.class</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javap -c HelloWorld</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Compiled from <span class=\"string\">&quot;HelloWorld.java&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloWorld</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">HelloWorld</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">       <span class=\"number\">0</span>: aload_0</span><br><span class=\"line\">       <span class=\"number\">1</span>: invokespecial #<span class=\"number\">1</span>                  <span class=\"comment\">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class=\"line\">       <span class=\"number\">4</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(java.lang.String[])</span>;</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">       <span class=\"number\">0</span>: getstatic     #<span class=\"number\">7</span>                  <span class=\"comment\">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class=\"line\">       <span class=\"number\">3</span>: ldc           #<span class=\"number\">13</span>                 <span class=\"comment\">// String Hello, World!</span></span><br><span class=\"line\">       <span class=\"number\">5</span>: invokevirtual #<span class=\"number\">15</span>                 <span class=\"comment\">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class=\"line\">       <span class=\"number\">8</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java  .class </p>\n<h2 id=\"JVM-\"><a href=\"#JVM-\" class=\"headerlink\" title=\"JVM \"></a>JVM </h2><p> .class  JVM </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JVM <em></em></p>\n<ol>\n<li><p><em><strong> Loading</strong></em><br>  JVM <em>Fully Qualified Name</em><br>  <br>   Java  <em>java.lang.Class</em> </p>\n</li>\n<li><p><em><strong> Linking</strong></em><br>  JVM </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><p><em><strong> Initialization</strong></em><br>  JVM <br>   java </p>\n</li>\n</ol>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/25228545\">Java </a></p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>JVM  JVM &#x2F; <em></em>  Java </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230927180316.png\" alt=\"20230927180316\"></p>\n<p></p>\n<ol>\n<li><p><em> Bytecode Verification</em><br>  JVM  JVM </p>\n</li>\n<li><p><em>&#x2F;</em><br>  JVM </p>\n<ul>\n<li><em></em><br>   JVM <em>Interpreter</em>  </li>\n<li><em></em><br>   JVM <em>Just-In-Time Compiler</em>  </li>\n<li><em></em><br>   JVMMixed Mode</li>\n</ul>\n</li>\n<li><p><em> Execution</em><br>  &#x2F;JVM </p>\n</li>\n</ol>\n<p> Java </p>\n<h3 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h3><p>JVM  Java </p>\n<p> Java  JVM </p>\n<p>JVM </p>\n<ul>\n<li><em></em><br>JVM <em>GC</em></li>\n<li><em></em><br> Java </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25713880\">Java JVM </a></li>\n<li><a href=\"https://www.cnblogs.com/o-andy-o/archive/2012/04/11/2442109.html\">Java </a></li>\n<li><a href=\"https://rensifei.site/2017/03/javac/\">javac </a></li>\n</ul>\n"},{"title":"HTML  <head> ","date":"2023-10-21T16:00:00.000Z","author":"ma5hr00m","_content":"\n Web \n\n `node_modules`  `File Nesting Updater` \n\n Web \n\n copy \n[HTML/CSS/JS ](https://c.runoob.com/front-end/61/)\n\n## HTML \nWeb  HTML  CSS  SEO \n\n `<div>`  API  `POST` \n [](https://www.beian.gov.cn/) `<div>` \n\n `<header>``<main>` `<em>``<br>` \n\n\n### `<abbr>`\n `title`  hover \n```html\n<p>\n  <abbr title=\"HyperText Markup Language\">HTML</abbr> is fun!\n</p>\n```\n\n### `<address>`\n\n```html\n<address>\n  <a href=\"mailto:jim@rock.com\">jim@rock.com</a><br />\n  <a href=\"tel:+13115552368\">(311) 555-2368</a>\n</address>\n```\n\n### `<bdi>`\n`dir` \n```html\n<p dir=\"rtl\">\n  This arabic word <bdi>ARABIC_PLACEHOLDER</bdi> is automatically displayed\n  right-to-left.\n</p>\n```\n\n### `<bdo>`\n CSS \n\n `dir` \n- `ltr` - \n- `rtl` - \n```html\n<p>\n  <bdo dir=\"rtl\">This text will go right to left.</bdo>\n</p>\n```\n\n### `<caption>`\nHTML  `<table>` \n\n CSS  `caption-side`  `text-align`\n```html\n<table>\n  <caption>\n    \n  </caption>\n  <tbody>\n    <tr>\n      <th scope=\"col\"></th>\n      <th scope=\"col\">HEX</th>\n      <th scope=\"col\">HSLa</th>\n      <th scope=\"col\">RGBa</th>\n    </tr>\n    <tr>\n      <th scope=\"row\">Teal</th>\n      <td><code>#51F6F6</code></td>\n      <td><code>hsla(180, 90%, 64%, 1)</code></td>\n      <td><code>rgba(81, 246, 246, 1)</code></td>\n    </tr>\n    <tr>\n      <th scope=\"row\">Goldenrod</th>\n      <td><code>#F6BC57</code></td>\n      <td><code>hsla(38, 90%, 65%, 1)</code></td>\n      <td><code>rgba(246, 188, 87, 1)</code></td>\n    </tr>\n  </tbody>\n</table>\n```\n\n### `<cite>`\nHTML \n\n `<blackquote>`  `<q>`  `cite` \n```html\n<figure>\n  <blockquote>\n    <p>It was a bright cold day in April, and the clocks were striking thirteen.</p>\n  </blockquote>\n  <figcaption>\n    First sentence in <cite><a href=\"http://www.george-orwell.org/1984/0.html\">Nineteen Eighty-Four</a></cite> by George\n    Orwell (Part 1, Chapter 1).\n  </figcaption>\n</figure>\n```\n\n### `<data>`\n `<time>`\n\n`value` \n```html\n<ul>\n  <li><data value=\"398\"></data></li>\n  <li><data value=\"399\"></data></li>\n  <li><data value=\"400\"></data></li>\n</ul>\n```\n\n### `<datalist>`\n `<option>` \n```html\n<datalist id=\"ice-cream-flavors\">\n  <option value=\"Chocolate\"></option>\n  <option value=\"Coconut\"></option>\n  <option value=\"Mint\"></option>\n  <option value=\"Strawberry\"></option>\n  <option value=\"Vanilla\"></option>\n</datalist>\n```\n\n### `<dfn>`\nHTML  `<addr>` \n```html\n<dfn>\n  <abbr title=\"World-Wide Web\">WWW</abbr>\n</dfn>\n```\n\n### `<dialog>`\n\n```html\n<!-- Simple modal dialog containing a form -->\n<dialog id=\"favDialog\">\n  <form method=\"dialog\">\n    <p>\n      <label\n        >Favorite animal:\n        <select>\n          <option value=\"default\">Choose</option>\n          <option>Brine shrimp</option>\n          <option>Red panda</option>\n          <option>Spider monkey</option>\n        </select>\n      </label>\n    </p>\n    <div>\n      <button value=\"cancel\">Cancel</button>\n      <button id=\"confirmBtn\" value=\"default\">Confirm</button>\n    </div>\n  </form>\n</dialog>\n<p>\n  <button id=\"updateDetails\">Update details</button>\n</p>\n<output></output>\n```\n\n `JavaScript` \n```javascript\nconst updateButton = document.getElementById(\"updateDetails\");\nconst favDialog = document.getElementById(\"favDialog\");\nconst outputBox = document.querySelector(\"output\");\nconst selectEl = favDialog.querySelector(\"select\");\nconst confirmBtn = favDialog.querySelector(\"#confirmBtn\");\n\n// If a browser doesn't support the dialog, then hide the\n// dialog contents by default.\nif (typeof favDialog.showModal !== \"function\") {\n  favDialog.hidden = true;\n  /* a fallback script to allow this dialog/form to function\n     for legacy browsers that do not support <dialog>\n     could be provided here.\n  */\n}\n// \"Update details\" button opens the <dialog> modally\nupdateButton.addEventListener(\"click\", () => {\n  if (typeof favDialog.showModal === \"function\") {\n    favDialog.showModal();\n  } else {\n    outputBox.value =\n      \"Sorry, the <dialog> API is not supported by this browser.\";\n  }\n});\n// \"Favorite animal\" input sets the value of the submit button\nselectEl.addEventListener(\"change\", (e) => {\n  confirmBtn.value = selectEl.value;\n});\n// \"Confirm\" button of form triggers \"close\" on dialog because of [method=\"dialog\"]\nfavDialog.addEventListener(\"close\", () => {\n  outputBox.value = `${\n    favDialog.returnValue\n  } button clicked - ${new Date().toString()}`;\n});\n```\n\n `autofocus` \n```html\n<input name=\"q\" autofocus />\n```\n\n### `<details> and <summary>`\n\n```html\n<!--  <details open> -->\n<!-- <summary>  list-style: none;  -->\n<details>\n  <summary>Details</summary>\n  Something small enough to escape casual notice.\n</details>\n```\n\n\n\n### `<fieldset> and <legend>`\n label \n```html\n<form>\n  <fieldset>\n    <legend>Choose your favorite monster</legend>\n\n    <input type=\"radio\" id=\"kraken\" name=\"monster\" value=\"K\" />\n    <label for=\"kraken\">Kraken</label><br />\n\n    <input type=\"radio\" id=\"sasquatch\" name=\"monster\" value=\"S\" />\n    <label for=\"sasquatch\">Sasquatch</label><br />\n\n    <input type=\"radio\" id=\"mothman\" name=\"monster\" value=\"M\" />\n    <label for=\"mothman\">Mothman</label>\n  </fieldset>\n</form>\n```\n\n tkinter \n\n `disabled` \n\n### `<hgroup>`\n `<h1>``<h6>`  `<p>` \n```html\n<hgroup>\n  <h1>Frankenstein</h1>\n  <p>Or: The Modern Prometheus</p>\n</hgroup>\n```\n\n### `<kbd>`\nHTML  `monospace` \n```html\n<p>Save the document by pressing <kbd>Ctrl</kbd> + <kbd>S</kbd></p>\n```\n\n### `<meter>`\n\n```html\n<label for=\"fuel\">Fuel level:</label>\n<meter id=\"fuel\" min=\"0\" max=\"100\" low=\"33\" high=\"66\" optimum=\"80\" value=\"50\">at 50/100</meter>\n```\n\n[here](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meter#%E5%B1%9E%E6%80%A7)\n\n### `<noscript>`\n`XSS` \n```html\n<noscript>\n  <!-- anchor linking to external file -->\n  <a href=\"http://www.mozilla.com/\">External Link</a>\n</noscript>\n<p>Rocks!</p>\n```\n\n### `<picture> and <source>`\n `<source>`  `<img>` / `<source>`  `<img>`  `src`  URL `<img>` \n```html\n<!--Change the browser window width to see the image change.-->\n\n<picture>\n  <source srcset=\"/media/cc0-images/surfer-240-200.jpg\" media=\"(orientation: portrait)\" />\n  <img src=\"/media/cc0-images/painted-hand-298-332.jpg\" alt=\"\" />\n</picture>\n```\n\n[here](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture#%E5%B1%9E%E6%80%A7)\n\n### `<progress>`\n\n```html\n<label for=\"file\">File progress:</label>\n<progress id=\"file\" max=\"100\" value=\"70\">70%</progress>\n```\n\n## HTML\n### `accesskey`\n\n\n\n```html\n<p>\n  If you need to relax, press the <strong><u>S</u></strong>tress reliever!\n</p>\n<button accesskey=\"s\">Stress reliever</button>\n```\n\n### `autocomplete`\n web \n\n[autocomplete](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/autocomplete).\n `off`, \n```html\n<label for=\"firstName\">First Name:</label>\n<input name=\"firstName\" id=\"firstName\" type=\"text\" autocomplete=\"given-name\" />\n\n<label for=\"lastName\">Last Name:</label>\n<input name=\"lastName\" id=\"lastName\" type=\"text\" autocomplete=\"family-name\" />\n\n<label for=\"email\">Email:</label>\n<input name=\"email\" id=\"email\" type=\"email\" autocomplete=\"off\" />\n```\n\n### `autofocus`\n\n\n### `contenteditable`\n `true`  `false`\n```html\n<blockquote contenteditable=\"true\">\n  <p>Edit this content to add your own quote</p>\n</blockquote>\n```\n\n### `inert`\n\n```html\n<p inert>\n  <a href=\"https://example.com\">Click</a>\n</p>\n```\n\n### `spellcheck`\n `true`  `false`.\n\n### `translate`\n `yes`  `no`.\n```html\n<footer>\n  <small> 2020 <span translate=\"no\">BrandName</span></small>\n</footer>\n```\n\n## `<head>`\n HTML  `<head>` \n1. preconnect\n2. script-async\n3. css-contains-@ import\n4. sync-js\n5. sync-css\n6. preload\n7. script-defer\n8. prefetch / prerender\n9. seo-relative\n\n```html\n<!DOCTYPE html>\n<html lang=\"zh\">\n  <head>\n    <!-- preconnect -->\n    <link rel=\"preconnect\" href=\"https://cdn.example.com\">\n    <!-- script-async -->\n    <script async src=\"https://cdn.example.com/js/analytics.js\"></script>\n    <!-- css-contains-@ import -->\n    <style>\n      @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\n    </style>\n    <!-- sync-js -->\n    <script src=\"js/main.js\"></script>\n    <!-- sync-css -->\n    <link rel=\"stylesheet\" href=\"css/styles.css\">\n    <!-- preload -->\n    <link rel=\"preload\" href=\"img/background.jpg\" as=\"image\">\n    <!-- script-defer -->\n    <script defer src=\"js/interactive.js\"></script>\n    <!-- prefetch / prerender -->\n    <link rel=\"prefetch\" href=\"about.html\">\n    <link rel=\"prerender\" href=\"contact.html\">\n    <!-- seo-relative -->\n    <link rel=\"canonical\" href=\"/index.html\">\n    <!-- Other SEO related tags -->\n    <meta charset=\"UTF-8\">\n    <title></title>\n    <meta name=\"description\" content=\"\">\n  </head>\n  <body>\n      <!--  -->\n  </body>\n</html>\n```\n\n `capo.js`  `<head>` GitHub [capo.js](https://github.com/rviscomi/capo.js).\n\n[Capo: get your  in order](https://chrome.google.com/webstore/detail/capo-get-your-%EF%B9%A4%F0%9D%9A%91%F0%9D%9A%8E%F0%9D%9A%8A%F0%9D%9A%8D%EF%B9%A5/ohabpnaccigjhkkebjofhpmebofgpbeb?utm_source=ext_sidebar&hl=zh-CN),\n Web  `<head>` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231006101948.png)\n\n## \nHTML  ** Markdown  Golang  CSS  JavaScript HTML HTML \n\n## \n- [HTML - MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTML)\n- [ - Barret](https://weibo.com/1812166904/NbGRFCRtU)","source":"_posts/html_relearn.md","raw":"---\ntitle: HTML  <head> \ndate: 2023/10/22\nauthor: ma5hr00m\ncategories:\n- HTML\n---\n\n Web \n\n `node_modules`  `File Nesting Updater` \n\n Web \n\n copy \n[HTML/CSS/JS ](https://c.runoob.com/front-end/61/)\n\n## HTML \nWeb  HTML  CSS  SEO \n\n `<div>`  API  `POST` \n [](https://www.beian.gov.cn/) `<div>` \n\n `<header>``<main>` `<em>``<br>` \n\n\n### `<abbr>`\n `title`  hover \n```html\n<p>\n  <abbr title=\"HyperText Markup Language\">HTML</abbr> is fun!\n</p>\n```\n\n### `<address>`\n\n```html\n<address>\n  <a href=\"mailto:jim@rock.com\">jim@rock.com</a><br />\n  <a href=\"tel:+13115552368\">(311) 555-2368</a>\n</address>\n```\n\n### `<bdi>`\n`dir` \n```html\n<p dir=\"rtl\">\n  This arabic word <bdi>ARABIC_PLACEHOLDER</bdi> is automatically displayed\n  right-to-left.\n</p>\n```\n\n### `<bdo>`\n CSS \n\n `dir` \n- `ltr` - \n- `rtl` - \n```html\n<p>\n  <bdo dir=\"rtl\">This text will go right to left.</bdo>\n</p>\n```\n\n### `<caption>`\nHTML  `<table>` \n\n CSS  `caption-side`  `text-align`\n```html\n<table>\n  <caption>\n    \n  </caption>\n  <tbody>\n    <tr>\n      <th scope=\"col\"></th>\n      <th scope=\"col\">HEX</th>\n      <th scope=\"col\">HSLa</th>\n      <th scope=\"col\">RGBa</th>\n    </tr>\n    <tr>\n      <th scope=\"row\">Teal</th>\n      <td><code>#51F6F6</code></td>\n      <td><code>hsla(180, 90%, 64%, 1)</code></td>\n      <td><code>rgba(81, 246, 246, 1)</code></td>\n    </tr>\n    <tr>\n      <th scope=\"row\">Goldenrod</th>\n      <td><code>#F6BC57</code></td>\n      <td><code>hsla(38, 90%, 65%, 1)</code></td>\n      <td><code>rgba(246, 188, 87, 1)</code></td>\n    </tr>\n  </tbody>\n</table>\n```\n\n### `<cite>`\nHTML \n\n `<blackquote>`  `<q>`  `cite` \n```html\n<figure>\n  <blockquote>\n    <p>It was a bright cold day in April, and the clocks were striking thirteen.</p>\n  </blockquote>\n  <figcaption>\n    First sentence in <cite><a href=\"http://www.george-orwell.org/1984/0.html\">Nineteen Eighty-Four</a></cite> by George\n    Orwell (Part 1, Chapter 1).\n  </figcaption>\n</figure>\n```\n\n### `<data>`\n `<time>`\n\n`value` \n```html\n<ul>\n  <li><data value=\"398\"></data></li>\n  <li><data value=\"399\"></data></li>\n  <li><data value=\"400\"></data></li>\n</ul>\n```\n\n### `<datalist>`\n `<option>` \n```html\n<datalist id=\"ice-cream-flavors\">\n  <option value=\"Chocolate\"></option>\n  <option value=\"Coconut\"></option>\n  <option value=\"Mint\"></option>\n  <option value=\"Strawberry\"></option>\n  <option value=\"Vanilla\"></option>\n</datalist>\n```\n\n### `<dfn>`\nHTML  `<addr>` \n```html\n<dfn>\n  <abbr title=\"World-Wide Web\">WWW</abbr>\n</dfn>\n```\n\n### `<dialog>`\n\n```html\n<!-- Simple modal dialog containing a form -->\n<dialog id=\"favDialog\">\n  <form method=\"dialog\">\n    <p>\n      <label\n        >Favorite animal:\n        <select>\n          <option value=\"default\">Choose</option>\n          <option>Brine shrimp</option>\n          <option>Red panda</option>\n          <option>Spider monkey</option>\n        </select>\n      </label>\n    </p>\n    <div>\n      <button value=\"cancel\">Cancel</button>\n      <button id=\"confirmBtn\" value=\"default\">Confirm</button>\n    </div>\n  </form>\n</dialog>\n<p>\n  <button id=\"updateDetails\">Update details</button>\n</p>\n<output></output>\n```\n\n `JavaScript` \n```javascript\nconst updateButton = document.getElementById(\"updateDetails\");\nconst favDialog = document.getElementById(\"favDialog\");\nconst outputBox = document.querySelector(\"output\");\nconst selectEl = favDialog.querySelector(\"select\");\nconst confirmBtn = favDialog.querySelector(\"#confirmBtn\");\n\n// If a browser doesn't support the dialog, then hide the\n// dialog contents by default.\nif (typeof favDialog.showModal !== \"function\") {\n  favDialog.hidden = true;\n  /* a fallback script to allow this dialog/form to function\n     for legacy browsers that do not support <dialog>\n     could be provided here.\n  */\n}\n// \"Update details\" button opens the <dialog> modally\nupdateButton.addEventListener(\"click\", () => {\n  if (typeof favDialog.showModal === \"function\") {\n    favDialog.showModal();\n  } else {\n    outputBox.value =\n      \"Sorry, the <dialog> API is not supported by this browser.\";\n  }\n});\n// \"Favorite animal\" input sets the value of the submit button\nselectEl.addEventListener(\"change\", (e) => {\n  confirmBtn.value = selectEl.value;\n});\n// \"Confirm\" button of form triggers \"close\" on dialog because of [method=\"dialog\"]\nfavDialog.addEventListener(\"close\", () => {\n  outputBox.value = `${\n    favDialog.returnValue\n  } button clicked - ${new Date().toString()}`;\n});\n```\n\n `autofocus` \n```html\n<input name=\"q\" autofocus />\n```\n\n### `<details> and <summary>`\n\n```html\n<!--  <details open> -->\n<!-- <summary>  list-style: none;  -->\n<details>\n  <summary>Details</summary>\n  Something small enough to escape casual notice.\n</details>\n```\n\n\n\n### `<fieldset> and <legend>`\n label \n```html\n<form>\n  <fieldset>\n    <legend>Choose your favorite monster</legend>\n\n    <input type=\"radio\" id=\"kraken\" name=\"monster\" value=\"K\" />\n    <label for=\"kraken\">Kraken</label><br />\n\n    <input type=\"radio\" id=\"sasquatch\" name=\"monster\" value=\"S\" />\n    <label for=\"sasquatch\">Sasquatch</label><br />\n\n    <input type=\"radio\" id=\"mothman\" name=\"monster\" value=\"M\" />\n    <label for=\"mothman\">Mothman</label>\n  </fieldset>\n</form>\n```\n\n tkinter \n\n `disabled` \n\n### `<hgroup>`\n `<h1>``<h6>`  `<p>` \n```html\n<hgroup>\n  <h1>Frankenstein</h1>\n  <p>Or: The Modern Prometheus</p>\n</hgroup>\n```\n\n### `<kbd>`\nHTML  `monospace` \n```html\n<p>Save the document by pressing <kbd>Ctrl</kbd> + <kbd>S</kbd></p>\n```\n\n### `<meter>`\n\n```html\n<label for=\"fuel\">Fuel level:</label>\n<meter id=\"fuel\" min=\"0\" max=\"100\" low=\"33\" high=\"66\" optimum=\"80\" value=\"50\">at 50/100</meter>\n```\n\n[here](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meter#%E5%B1%9E%E6%80%A7)\n\n### `<noscript>`\n`XSS` \n```html\n<noscript>\n  <!-- anchor linking to external file -->\n  <a href=\"http://www.mozilla.com/\">External Link</a>\n</noscript>\n<p>Rocks!</p>\n```\n\n### `<picture> and <source>`\n `<source>`  `<img>` / `<source>`  `<img>`  `src`  URL `<img>` \n```html\n<!--Change the browser window width to see the image change.-->\n\n<picture>\n  <source srcset=\"/media/cc0-images/surfer-240-200.jpg\" media=\"(orientation: portrait)\" />\n  <img src=\"/media/cc0-images/painted-hand-298-332.jpg\" alt=\"\" />\n</picture>\n```\n\n[here](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture#%E5%B1%9E%E6%80%A7)\n\n### `<progress>`\n\n```html\n<label for=\"file\">File progress:</label>\n<progress id=\"file\" max=\"100\" value=\"70\">70%</progress>\n```\n\n## HTML\n### `accesskey`\n\n\n\n```html\n<p>\n  If you need to relax, press the <strong><u>S</u></strong>tress reliever!\n</p>\n<button accesskey=\"s\">Stress reliever</button>\n```\n\n### `autocomplete`\n web \n\n[autocomplete](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/autocomplete).\n `off`, \n```html\n<label for=\"firstName\">First Name:</label>\n<input name=\"firstName\" id=\"firstName\" type=\"text\" autocomplete=\"given-name\" />\n\n<label for=\"lastName\">Last Name:</label>\n<input name=\"lastName\" id=\"lastName\" type=\"text\" autocomplete=\"family-name\" />\n\n<label for=\"email\">Email:</label>\n<input name=\"email\" id=\"email\" type=\"email\" autocomplete=\"off\" />\n```\n\n### `autofocus`\n\n\n### `contenteditable`\n `true`  `false`\n```html\n<blockquote contenteditable=\"true\">\n  <p>Edit this content to add your own quote</p>\n</blockquote>\n```\n\n### `inert`\n\n```html\n<p inert>\n  <a href=\"https://example.com\">Click</a>\n</p>\n```\n\n### `spellcheck`\n `true`  `false`.\n\n### `translate`\n `yes`  `no`.\n```html\n<footer>\n  <small> 2020 <span translate=\"no\">BrandName</span></small>\n</footer>\n```\n\n## `<head>`\n HTML  `<head>` \n1. preconnect\n2. script-async\n3. css-contains-@ import\n4. sync-js\n5. sync-css\n6. preload\n7. script-defer\n8. prefetch / prerender\n9. seo-relative\n\n```html\n<!DOCTYPE html>\n<html lang=\"zh\">\n  <head>\n    <!-- preconnect -->\n    <link rel=\"preconnect\" href=\"https://cdn.example.com\">\n    <!-- script-async -->\n    <script async src=\"https://cdn.example.com/js/analytics.js\"></script>\n    <!-- css-contains-@ import -->\n    <style>\n      @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\n    </style>\n    <!-- sync-js -->\n    <script src=\"js/main.js\"></script>\n    <!-- sync-css -->\n    <link rel=\"stylesheet\" href=\"css/styles.css\">\n    <!-- preload -->\n    <link rel=\"preload\" href=\"img/background.jpg\" as=\"image\">\n    <!-- script-defer -->\n    <script defer src=\"js/interactive.js\"></script>\n    <!-- prefetch / prerender -->\n    <link rel=\"prefetch\" href=\"about.html\">\n    <link rel=\"prerender\" href=\"contact.html\">\n    <!-- seo-relative -->\n    <link rel=\"canonical\" href=\"/index.html\">\n    <!-- Other SEO related tags -->\n    <meta charset=\"UTF-8\">\n    <title></title>\n    <meta name=\"description\" content=\"\">\n  </head>\n  <body>\n      <!--  -->\n  </body>\n</html>\n```\n\n `capo.js`  `<head>` GitHub [capo.js](https://github.com/rviscomi/capo.js).\n\n[Capo: get your  in order](https://chrome.google.com/webstore/detail/capo-get-your-%EF%B9%A4%F0%9D%9A%91%F0%9D%9A%8E%F0%9D%9A%8A%F0%9D%9A%8D%EF%B9%A5/ohabpnaccigjhkkebjofhpmebofgpbeb?utm_source=ext_sidebar&hl=zh-CN),\n Web  `<head>` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231006101948.png)\n\n## \nHTML  ** Markdown  Golang  CSS  JavaScript HTML HTML \n\n## \n- [HTML - MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTML)\n- [ - Barret](https://weibo.com/1812166904/NbGRFCRtU)","slug":"html_relearn","published":1,"updated":"2024-06-09T12:55:47.483Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap4000nf4lyg0t08wxm","content":"<p> Web </p>\n<p> <code>node_modules</code>  <code>File Nesting Updater</code> </p>\n<p> Web </p>\n<p> copy <br><a href=\"https://c.runoob.com/front-end/61/\">HTML&#x2F;CSS&#x2F;JS </a></p>\n<h2 id=\"HTML-\"><a href=\"#HTML-\" class=\"headerlink\" title=\"HTML \"></a>HTML </h2><p>Web  HTML  CSS  SEO </p>\n<p> <code>&lt;div&gt;</code>  API  <code>POST</code> <br> <a href=\"https://www.beian.gov.cn/\"></a> <code>&lt;div&gt;</code> </p>\n<p> <code>&lt;header&gt;</code><code>&lt;main&gt;</code> <code>&lt;em&gt;</code><code>&lt;br&gt;</code> <br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"&lt;abbr&gt;\"></a><code>&lt;abbr&gt;</code></h3><p> <code>title</code>  hover </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;HyperText Markup Language&quot;</span>&gt;</span>HTML<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span> is fun!</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"&lt;address&gt;\"></a><code>&lt;address&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;mailto:jim@rock.com&quot;</span>&gt;</span>jim@rock.com<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;tel:+13115552368&quot;</span>&gt;</span>(311) 555-2368<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"&lt;bdi&gt;\"></a><code>&lt;bdi&gt;</code></h3><p><code>dir</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">dir</span>=<span class=\"string\">&quot;rtl&quot;</span>&gt;</span></span><br><span class=\"line\">  This arabic word <span class=\"tag\">&lt;<span class=\"name\">bdi</span>&gt;</span>ARABIC_PLACEHOLDER<span class=\"tag\">&lt;/<span class=\"name\">bdi</span>&gt;</span> is automatically displayed</span><br><span class=\"line\">  right-to-left.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"&lt;bdo&gt;\"></a><code>&lt;bdo&gt;</code></h3><p> CSS </p>\n<p> <code>dir</code> </p>\n<ul>\n<li><code>ltr</code> - </li>\n<li><code>rtl</code> - <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bdo</span> <span class=\"attr\">dir</span>=<span class=\"string\">&quot;rtl&quot;</span>&gt;</span>This text will go right to left.<span class=\"tag\">&lt;/<span class=\"name\">bdo</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"&lt;caption&gt;\"></a><code>&lt;caption&gt;</code></h3><p>HTML  <code>&lt;table&gt;</code> </p>\n<p> CSS  <code>caption-side</code>  <code>text-align</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>HEX<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>HSLa<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>RGBa<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span>Teal<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>#51F6F6<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>hsla(180, 90%, 64%, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>rgba(81, 246, 246, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span>Goldenrod<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>#F6BC57<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>hsla(38, 90%, 65%, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>rgba(246, 188, 87, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-5\"><a href=\"#-5\" class=\"headerlink\" title=\"&lt;cite&gt;\"></a><code>&lt;cite&gt;</code></h3><p>HTML </p>\n<p> <code>&lt;blackquote&gt;</code>  <code>&lt;q&gt;</code>  <code>cite</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">figure</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">blockquote</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>It was a bright cold day in April, and the clocks were striking thirteen.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">figcaption</span>&gt;</span></span><br><span class=\"line\">    First sentence in <span class=\"tag\">&lt;<span class=\"name\">cite</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.george-orwell.org/1984/0.html&quot;</span>&gt;</span>Nineteen Eighty-Four<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cite</span>&gt;</span> by George</span><br><span class=\"line\">    Orwell (Part 1, Chapter 1).</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">figcaption</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-6\"><a href=\"#-6\" class=\"headerlink\" title=\"&lt;data&gt;\"></a><code>&lt;data&gt;</code></h3><p> <code>&lt;time&gt;</code></p>\n<p><code>value</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;398&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;399&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;400&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-7\"><a href=\"#-7\" class=\"headerlink\" title=\"&lt;datalist&gt;\"></a><code>&lt;datalist&gt;</code></h3><p> <code>&lt;option&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">datalist</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;ice-cream-flavors&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Chocolate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Coconut&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Mint&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Strawberry&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Vanilla&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-8\"><a href=\"#-8\" class=\"headerlink\" title=\"&lt;dfn&gt;\"></a><code>&lt;dfn&gt;</code></h3><p>HTML  <code>&lt;addr&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dfn</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;World-Wide Web&quot;</span>&gt;</span>WWW<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dfn</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-9\"><a href=\"#-9\" class=\"headerlink\" title=\"&lt;dialog&gt;\"></a><code>&lt;dialog&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Simple modal dialog containing a form --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dialog</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;favDialog&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;dialog&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>Favorite animal:</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>Choose<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Brine shrimp<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Red panda<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Spider monkey<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;cancel&quot;</span>&gt;</span>Cancel<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;confirmBtn&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>Confirm<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dialog</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;updateDetails&quot;</span>&gt;</span>Update details<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">output</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">output</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>JavaScript</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> updateButton = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;updateDetails&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> favDialog = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;favDialog&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> outputBox = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;output&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> selectEl = favDialog.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;select&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> confirmBtn = favDialog.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;#confirmBtn&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If a browser doesn&#x27;t support the dialog, then hide the</span></span><br><span class=\"line\"><span class=\"comment\">// dialog contents by default.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> favDialog.<span class=\"property\">showModal</span> !== <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">  favDialog.<span class=\"property\">hidden</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"comment\">/* a fallback script to allow this dialog/form to function</span></span><br><span class=\"line\"><span class=\"comment\">     for legacy browsers that do not support &lt;dialog&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     could be provided here.</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// &quot;Update details&quot; button opens the &lt;dialog&gt; modally</span></span><br><span class=\"line\">updateButton.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;click&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> favDialog.<span class=\"property\">showModal</span> === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    favDialog.<span class=\"title function_\">showModal</span>();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    outputBox.<span class=\"property\">value</span> =</span><br><span class=\"line\">      <span class=\"string\">&quot;Sorry, the &lt;dialog&gt; API is not supported by this browser.&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// &quot;Favorite animal&quot; input sets the value of the submit button</span></span><br><span class=\"line\">selectEl.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;change&quot;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  confirmBtn.<span class=\"property\">value</span> = selectEl.<span class=\"property\">value</span>;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// &quot;Confirm&quot; button of form triggers &quot;close&quot; on dialog because of [method=&quot;dialog&quot;]</span></span><br><span class=\"line\">favDialog.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;close&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  outputBox.<span class=\"property\">value</span> = <span class=\"string\">`<span class=\"subst\">$&#123;</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">    favDialog.returnValue</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">  &#125;</span> button clicked - <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toString()&#125;</span>`</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> <code>autofocus</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;q&quot;</span> <span class=\"attr\">autofocus</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"and\"><a href=\"#and\" class=\"headerlink\" title=\"&lt;details&gt; and &lt;summary&gt;\"></a><code>&lt;details&gt; and &lt;summary&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--  &lt;details open&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &lt;summary&gt;  list-style: none;  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>Details<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">  Something small enough to escape casual notice.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"and-1\"><a href=\"#and-1\" class=\"headerlink\" title=\"&lt;fieldset&gt; and &lt;legend&gt;\"></a><code>&lt;fieldset&gt; and &lt;legend&gt;</code></h3><p> label </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">fieldset</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">legend</span>&gt;</span>Choose your favorite monster<span class=\"tag\">&lt;/<span class=\"name\">legend</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;kraken&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;K&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;kraken&quot;</span>&gt;</span>Kraken<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sasquatch&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;S&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;sasquatch&quot;</span>&gt;</span>Sasquatch<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mothman&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;M&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;mothman&quot;</span>&gt;</span>Mothman<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">fieldset</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> tkinter </p>\n<p> <code>disabled</code> </p>\n<h3 id=\"-10\"><a href=\"#-10\" class=\"headerlink\" title=\"&lt;hgroup&gt;\"></a><code>&lt;hgroup&gt;</code></h3><p> <code>&lt;h1&gt;</code><code>&lt;h6&gt;</code>  <code>&lt;p&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">hgroup</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Frankenstein<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Or: The Modern Prometheus<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">hgroup</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-11\"><a href=\"#-11\" class=\"headerlink\" title=\"&lt;kbd&gt;\"></a><code>&lt;kbd&gt;</code></h3><p>HTML  <code>monospace</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Save the document by pressing <span class=\"tag\">&lt;<span class=\"name\">kbd</span>&gt;</span>Ctrl<span class=\"tag\">&lt;/<span class=\"name\">kbd</span>&gt;</span> + <span class=\"tag\">&lt;<span class=\"name\">kbd</span>&gt;</span>S<span class=\"tag\">&lt;/<span class=\"name\">kbd</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-12\"><a href=\"#-12\" class=\"headerlink\" title=\"&lt;meter&gt;\"></a><code>&lt;meter&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;fuel&quot;</span>&gt;</span>Fuel level:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meter</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;fuel&quot;</span> <span class=\"attr\">min</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">low</span>=<span class=\"string\">&quot;33&quot;</span> <span class=\"attr\">high</span>=<span class=\"string\">&quot;66&quot;</span> <span class=\"attr\">optimum</span>=<span class=\"string\">&quot;80&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;50&quot;</span>&gt;</span>at 50/100<span class=\"tag\">&lt;/<span class=\"name\">meter</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meter#%E5%B1%9E%E6%80%A7\">here</a></p>\n<h3 id=\"-13\"><a href=\"#-13\" class=\"headerlink\" title=\"&lt;noscript&gt;\"></a><code>&lt;noscript&gt;</code></h3><p><code>XSS</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- anchor linking to external file --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.mozilla.com/&quot;</span>&gt;</span>External Link<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Rocks!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"and-2\"><a href=\"#and-2\" class=\"headerlink\" title=\"&lt;picture&gt; and &lt;source&gt;\"></a><code>&lt;picture&gt; and &lt;source&gt;</code></h3><p> <code>&lt;source&gt;</code>  <code>&lt;img&gt;</code> &#x2F; <code>&lt;source&gt;</code>  <code>&lt;img&gt;</code>  <code>src</code>  URL <code>&lt;img&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--Change the browser window width to see the image change.--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">picture</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;/media/cc0-images/surfer-240-200.jpg&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(orientation: portrait)&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/media/cc0-images/painted-hand-298-332.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture#%E5%B1%9E%E6%80%A7\">here</a></p>\n<h3 id=\"-14\"><a href=\"#-14\" class=\"headerlink\" title=\"&lt;progress&gt;\"></a><code>&lt;progress&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;file&quot;</span>&gt;</span>File progress:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">progress</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;70&quot;</span>&gt;</span>70%<span class=\"tag\">&lt;/<span class=\"name\">progress</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h2><h3 id=\"accesskey\"><a href=\"#accesskey\" class=\"headerlink\" title=\"accesskey\"></a><code>accesskey</code></h3><p></p>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  If you need to relax, press the <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u</span>&gt;</span>S<span class=\"tag\">&lt;/<span class=\"name\">u</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span>tress reliever!</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">accesskey</span>=<span class=\"string\">&quot;s&quot;</span>&gt;</span>Stress reliever<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"autocomplete\"><a href=\"#autocomplete\" class=\"headerlink\" title=\"autocomplete\"></a><code>autocomplete</code></h3><p> web </p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/autocomplete\">autocomplete</a>.<br> <code>off</code>, </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;firstName&quot;</span>&gt;</span>First Name:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;firstName&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;firstName&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;given-name&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;lastName&quot;</span>&gt;</span>Last Name:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;lastName&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;lastName&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;family-name&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span>Email:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"autofocus\"><a href=\"#autofocus\" class=\"headerlink\" title=\"autofocus\"></a><code>autofocus</code></h3><p></p>\n<h3 id=\"contenteditable\"><a href=\"#contenteditable\" class=\"headerlink\" title=\"contenteditable\"></a><code>contenteditable</code></h3><p> <code>true</code>  <code>false</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Edit this content to add your own quote<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"inert\"><a href=\"#inert\" class=\"headerlink\" title=\"inert\"></a><code>inert</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">inert</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://example.com&quot;</span>&gt;</span>Click<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"spellcheck\"><a href=\"#spellcheck\" class=\"headerlink\" title=\"spellcheck\"></a><code>spellcheck</code></h3><p> <code>true</code>  <code>false</code>.</p>\n<h3 id=\"translate\"><a href=\"#translate\" class=\"headerlink\" title=\"translate\"></a><code>translate</code></h3><p> <code>yes</code>  <code>no</code>.</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span> 2020 <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">translate</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span>BrandName<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"&lt;head&gt;\"></a><code>&lt;head&gt;</code></h2><p> HTML  <code>&lt;head&gt;</code> </p>\n<ol>\n<li>preconnect</li>\n<li>script-async</li>\n<li>css-contains-@ import</li>\n<li>sync-js</li>\n<li>sync-css</li>\n<li>preload</li>\n<li>script-defer</li>\n<li>prefetch &#x2F; prerender</li>\n<li>seo-relative</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- preconnect --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;preconnect&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.example.com&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- script-async --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.example.com/js/analytics.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- css-contains-@ import --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"keyword\">@import</span> url(<span class=\"string\">&#x27;https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- sync-js --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- sync-css --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;css/styles.css&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- preload --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;preload&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;img/background.jpg&quot;</span> <span class=\"attr\">as</span>=<span class=\"string\">&quot;image&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- script-defer --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">defer</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/interactive.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- prefetch / prerender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;prefetch&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;about.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;prerender&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;contact.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- seo-relative --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;canonical&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/index.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Other SEO related tags --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>capo.js</code>  <code>&lt;head&gt;</code> GitHub <a href=\"https://github.com/rviscomi/capo.js\">capo.js</a>.</p>\n<p><a href=\"https://chrome.google.com/webstore/detail/capo-get-your-%EF%B9%A4%F0%9D%9A%91%F0%9D%9A%8E%F0%9D%9A%8A%F0%9D%9A%8D%EF%B9%A5/ohabpnaccigjhkkebjofhpmebofgpbeb?utm_source=ext_sidebar&hl=zh-CN\">Capo: get your  in order</a>,<br> Web  <code>&lt;head&gt;</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231006101948.png\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTML  <em></em> Markdown  Golang  CSS  JavaScript HTML HTML </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML\">HTML - MDN</a></li>\n<li><a href=\"https://weibo.com/1812166904/NbGRFCRtU\"> - Barret</a></li>\n</ul>\n","excerpt":"","more":"<p> Web </p>\n<p> <code>node_modules</code>  <code>File Nesting Updater</code> </p>\n<p> Web </p>\n<p> copy <br><a href=\"https://c.runoob.com/front-end/61/\">HTML&#x2F;CSS&#x2F;JS </a></p>\n<h2 id=\"HTML-\"><a href=\"#HTML-\" class=\"headerlink\" title=\"HTML \"></a>HTML </h2><p>Web  HTML  CSS  SEO </p>\n<p> <code>&lt;div&gt;</code>  API  <code>POST</code> <br> <a href=\"https://www.beian.gov.cn/\"></a> <code>&lt;div&gt;</code> </p>\n<p> <code>&lt;header&gt;</code><code>&lt;main&gt;</code> <code>&lt;em&gt;</code><code>&lt;br&gt;</code> <br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"&lt;abbr&gt;\"></a><code>&lt;abbr&gt;</code></h3><p> <code>title</code>  hover </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;HyperText Markup Language&quot;</span>&gt;</span>HTML<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span> is fun!</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"&lt;address&gt;\"></a><code>&lt;address&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;mailto:jim@rock.com&quot;</span>&gt;</span>jim@rock.com<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;tel:+13115552368&quot;</span>&gt;</span>(311) 555-2368<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"&lt;bdi&gt;\"></a><code>&lt;bdi&gt;</code></h3><p><code>dir</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">dir</span>=<span class=\"string\">&quot;rtl&quot;</span>&gt;</span></span><br><span class=\"line\">  This arabic word <span class=\"tag\">&lt;<span class=\"name\">bdi</span>&gt;</span>ARABIC_PLACEHOLDER<span class=\"tag\">&lt;/<span class=\"name\">bdi</span>&gt;</span> is automatically displayed</span><br><span class=\"line\">  right-to-left.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"&lt;bdo&gt;\"></a><code>&lt;bdo&gt;</code></h3><p> CSS </p>\n<p> <code>dir</code> </p>\n<ul>\n<li><code>ltr</code> - </li>\n<li><code>rtl</code> - <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bdo</span> <span class=\"attr\">dir</span>=<span class=\"string\">&quot;rtl&quot;</span>&gt;</span>This text will go right to left.<span class=\"tag\">&lt;/<span class=\"name\">bdo</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"&lt;caption&gt;\"></a><code>&lt;caption&gt;</code></h3><p>HTML  <code>&lt;table&gt;</code> </p>\n<p> CSS  <code>caption-side</code>  <code>text-align</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>HEX<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>HSLa<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;col&quot;</span>&gt;</span>RGBa<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span>Teal<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>#51F6F6<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>hsla(180, 90%, 64%, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>rgba(81, 246, 246, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span> <span class=\"attr\">scope</span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span>Goldenrod<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>#F6BC57<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>hsla(38, 90%, 65%, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">code</span>&gt;</span>rgba(246, 188, 87, 1)<span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-5\"><a href=\"#-5\" class=\"headerlink\" title=\"&lt;cite&gt;\"></a><code>&lt;cite&gt;</code></h3><p>HTML </p>\n<p> <code>&lt;blackquote&gt;</code>  <code>&lt;q&gt;</code>  <code>cite</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">figure</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">blockquote</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>It was a bright cold day in April, and the clocks were striking thirteen.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">figcaption</span>&gt;</span></span><br><span class=\"line\">    First sentence in <span class=\"tag\">&lt;<span class=\"name\">cite</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.george-orwell.org/1984/0.html&quot;</span>&gt;</span>Nineteen Eighty-Four<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cite</span>&gt;</span> by George</span><br><span class=\"line\">    Orwell (Part 1, Chapter 1).</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">figcaption</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-6\"><a href=\"#-6\" class=\"headerlink\" title=\"&lt;data&gt;\"></a><code>&lt;data&gt;</code></h3><p> <code>&lt;time&gt;</code></p>\n<p><code>value</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;398&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;399&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">data</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;400&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">data</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-7\"><a href=\"#-7\" class=\"headerlink\" title=\"&lt;datalist&gt;\"></a><code>&lt;datalist&gt;</code></h3><p> <code>&lt;option&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">datalist</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;ice-cream-flavors&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Chocolate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Coconut&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Mint&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Strawberry&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Vanilla&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-8\"><a href=\"#-8\" class=\"headerlink\" title=\"&lt;dfn&gt;\"></a><code>&lt;dfn&gt;</code></h3><p>HTML  <code>&lt;addr&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dfn</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">abbr</span> <span class=\"attr\">title</span>=<span class=\"string\">&quot;World-Wide Web&quot;</span>&gt;</span>WWW<span class=\"tag\">&lt;/<span class=\"name\">abbr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dfn</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-9\"><a href=\"#-9\" class=\"headerlink\" title=\"&lt;dialog&gt;\"></a><code>&lt;dialog&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Simple modal dialog containing a form --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dialog</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;favDialog&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;dialog&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">label</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>Favorite animal:</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>Choose<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Brine shrimp<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Red panda<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Spider monkey<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;cancel&quot;</span>&gt;</span>Cancel<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;confirmBtn&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;default&quot;</span>&gt;</span>Confirm<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dialog</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;updateDetails&quot;</span>&gt;</span>Update details<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">output</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">output</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>JavaScript</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> updateButton = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;updateDetails&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> favDialog = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;favDialog&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> outputBox = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;output&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> selectEl = favDialog.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;select&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> confirmBtn = favDialog.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;#confirmBtn&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// If a browser doesn&#x27;t support the dialog, then hide the</span></span><br><span class=\"line\"><span class=\"comment\">// dialog contents by default.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> favDialog.<span class=\"property\">showModal</span> !== <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">  favDialog.<span class=\"property\">hidden</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"comment\">/* a fallback script to allow this dialog/form to function</span></span><br><span class=\"line\"><span class=\"comment\">     for legacy browsers that do not support &lt;dialog&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     could be provided here.</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// &quot;Update details&quot; button opens the &lt;dialog&gt; modally</span></span><br><span class=\"line\">updateButton.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;click&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> favDialog.<span class=\"property\">showModal</span> === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    favDialog.<span class=\"title function_\">showModal</span>();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    outputBox.<span class=\"property\">value</span> =</span><br><span class=\"line\">      <span class=\"string\">&quot;Sorry, the &lt;dialog&gt; API is not supported by this browser.&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// &quot;Favorite animal&quot; input sets the value of the submit button</span></span><br><span class=\"line\">selectEl.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;change&quot;</span>, <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  confirmBtn.<span class=\"property\">value</span> = selectEl.<span class=\"property\">value</span>;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// &quot;Confirm&quot; button of form triggers &quot;close&quot; on dialog because of [method=&quot;dialog&quot;]</span></span><br><span class=\"line\">favDialog.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;close&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  outputBox.<span class=\"property\">value</span> = <span class=\"string\">`<span class=\"subst\">$&#123;</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">    favDialog.returnValue</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">  &#125;</span> button clicked - <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toString()&#125;</span>`</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> <code>autofocus</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;q&quot;</span> <span class=\"attr\">autofocus</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"and\"><a href=\"#and\" class=\"headerlink\" title=\"&lt;details&gt; and &lt;summary&gt;\"></a><code>&lt;details&gt; and &lt;summary&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--  &lt;details open&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &lt;summary&gt;  list-style: none;  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">details</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">summary</span>&gt;</span>Details<span class=\"tag\">&lt;/<span class=\"name\">summary</span>&gt;</span></span><br><span class=\"line\">  Something small enough to escape casual notice.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">details</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h3 id=\"and-1\"><a href=\"#and-1\" class=\"headerlink\" title=\"&lt;fieldset&gt; and &lt;legend&gt;\"></a><code>&lt;fieldset&gt; and &lt;legend&gt;</code></h3><p> label </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">fieldset</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">legend</span>&gt;</span>Choose your favorite monster<span class=\"tag\">&lt;/<span class=\"name\">legend</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;kraken&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;K&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;kraken&quot;</span>&gt;</span>Kraken<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sasquatch&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;S&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;sasquatch&quot;</span>&gt;</span>Sasquatch<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mothman&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;monster&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;M&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;mothman&quot;</span>&gt;</span>Mothman<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">fieldset</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> tkinter </p>\n<p> <code>disabled</code> </p>\n<h3 id=\"-10\"><a href=\"#-10\" class=\"headerlink\" title=\"&lt;hgroup&gt;\"></a><code>&lt;hgroup&gt;</code></h3><p> <code>&lt;h1&gt;</code><code>&lt;h6&gt;</code>  <code>&lt;p&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">hgroup</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Frankenstein<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Or: The Modern Prometheus<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">hgroup</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-11\"><a href=\"#-11\" class=\"headerlink\" title=\"&lt;kbd&gt;\"></a><code>&lt;kbd&gt;</code></h3><p>HTML  <code>monospace</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Save the document by pressing <span class=\"tag\">&lt;<span class=\"name\">kbd</span>&gt;</span>Ctrl<span class=\"tag\">&lt;/<span class=\"name\">kbd</span>&gt;</span> + <span class=\"tag\">&lt;<span class=\"name\">kbd</span>&gt;</span>S<span class=\"tag\">&lt;/<span class=\"name\">kbd</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-12\"><a href=\"#-12\" class=\"headerlink\" title=\"&lt;meter&gt;\"></a><code>&lt;meter&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;fuel&quot;</span>&gt;</span>Fuel level:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meter</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;fuel&quot;</span> <span class=\"attr\">min</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">low</span>=<span class=\"string\">&quot;33&quot;</span> <span class=\"attr\">high</span>=<span class=\"string\">&quot;66&quot;</span> <span class=\"attr\">optimum</span>=<span class=\"string\">&quot;80&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;50&quot;</span>&gt;</span>at 50/100<span class=\"tag\">&lt;/<span class=\"name\">meter</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meter#%E5%B1%9E%E6%80%A7\">here</a></p>\n<h3 id=\"-13\"><a href=\"#-13\" class=\"headerlink\" title=\"&lt;noscript&gt;\"></a><code>&lt;noscript&gt;</code></h3><p><code>XSS</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- anchor linking to external file --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.mozilla.com/&quot;</span>&gt;</span>External Link<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Rocks!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"and-2\"><a href=\"#and-2\" class=\"headerlink\" title=\"&lt;picture&gt; and &lt;source&gt;\"></a><code>&lt;picture&gt; and &lt;source&gt;</code></h3><p> <code>&lt;source&gt;</code>  <code>&lt;img&gt;</code> &#x2F; <code>&lt;source&gt;</code>  <code>&lt;img&gt;</code>  <code>src</code>  URL <code>&lt;img&gt;</code> </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--Change the browser window width to see the image change.--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">picture</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;/media/cc0-images/surfer-240-200.jpg&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(orientation: portrait)&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/media/cc0-images/painted-hand-298-332.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture#%E5%B1%9E%E6%80%A7\">here</a></p>\n<h3 id=\"-14\"><a href=\"#-14\" class=\"headerlink\" title=\"&lt;progress&gt;\"></a><code>&lt;progress&gt;</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;file&quot;</span>&gt;</span>File progress:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">progress</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">max</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;70&quot;</span>&gt;</span>70%<span class=\"tag\">&lt;/<span class=\"name\">progress</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h2><h3 id=\"accesskey\"><a href=\"#accesskey\" class=\"headerlink\" title=\"accesskey\"></a><code>accesskey</code></h3><p></p>\n<p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  If you need to relax, press the <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u</span>&gt;</span>S<span class=\"tag\">&lt;/<span class=\"name\">u</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span>tress reliever!</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">accesskey</span>=<span class=\"string\">&quot;s&quot;</span>&gt;</span>Stress reliever<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"autocomplete\"><a href=\"#autocomplete\" class=\"headerlink\" title=\"autocomplete\"></a><code>autocomplete</code></h3><p> web </p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/autocomplete\">autocomplete</a>.<br> <code>off</code>, </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;firstName&quot;</span>&gt;</span>First Name:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;firstName&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;firstName&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;given-name&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;lastName&quot;</span>&gt;</span>Last Name:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;lastName&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;lastName&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;family-name&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;email&quot;</span>&gt;</span>Email:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">&quot;off&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"autofocus\"><a href=\"#autofocus\" class=\"headerlink\" title=\"autofocus\"></a><code>autofocus</code></h3><p></p>\n<h3 id=\"contenteditable\"><a href=\"#contenteditable\" class=\"headerlink\" title=\"contenteditable\"></a><code>contenteditable</code></h3><p> <code>true</code>  <code>false</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">contenteditable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Edit this content to add your own quote<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"inert\"><a href=\"#inert\" class=\"headerlink\" title=\"inert\"></a><code>inert</code></h3><p></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">inert</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://example.com&quot;</span>&gt;</span>Click<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"spellcheck\"><a href=\"#spellcheck\" class=\"headerlink\" title=\"spellcheck\"></a><code>spellcheck</code></h3><p> <code>true</code>  <code>false</code>.</p>\n<h3 id=\"translate\"><a href=\"#translate\" class=\"headerlink\" title=\"translate\"></a><code>translate</code></h3><p> <code>yes</code>  <code>no</code>.</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span> 2020 <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">translate</span>=<span class=\"string\">&quot;no&quot;</span>&gt;</span>BrandName<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"&lt;head&gt;\"></a><code>&lt;head&gt;</code></h2><p> HTML  <code>&lt;head&gt;</code> </p>\n<ol>\n<li>preconnect</li>\n<li>script-async</li>\n<li>css-contains-@ import</li>\n<li>sync-js</li>\n<li>sync-css</li>\n<li>preload</li>\n<li>script-defer</li>\n<li>prefetch &#x2F; prerender</li>\n<li>seo-relative</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- preconnect --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;preconnect&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.example.com&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- script-async --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.example.com/js/analytics.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- css-contains-@ import --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"keyword\">@import</span> url(<span class=\"string\">&#x27;https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- sync-js --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- sync-css --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;css/styles.css&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- preload --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;preload&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;img/background.jpg&quot;</span> <span class=\"attr\">as</span>=<span class=\"string\">&quot;image&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- script-defer --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">defer</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/interactive.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- prefetch / prerender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;prefetch&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;about.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;prerender&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;contact.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- seo-relative --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;canonical&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/index.html&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Other SEO related tags --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">      <span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>capo.js</code>  <code>&lt;head&gt;</code> GitHub <a href=\"https://github.com/rviscomi/capo.js\">capo.js</a>.</p>\n<p><a href=\"https://chrome.google.com/webstore/detail/capo-get-your-%EF%B9%A4%F0%9D%9A%91%F0%9D%9A%8E%F0%9D%9A%8A%F0%9D%9A%8D%EF%B9%A5/ohabpnaccigjhkkebjofhpmebofgpbeb?utm_source=ext_sidebar&hl=zh-CN\">Capo: get your  in order</a>,<br> Web  <code>&lt;head&gt;</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231006101948.png\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HTML  <em></em> Markdown  Golang  CSS  JavaScript HTML HTML </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML\">HTML - MDN</a></li>\n<li><a href=\"https://weibo.com/1812166904/NbGRFCRtU\"> - Barret</a></li>\n</ul>\n"},{"title":"JavaScript ","date":"2024-02-11T16:00:00.000Z","author":"ma5hr00m","_content":"\n## Obfuscation \n\nJavaScript Obfuscation JS  JS \n\n JS  \n\nJS \n\n### \n\n JS JS   JS  HTTP JS Minification\n\n JS \n\n-  JS \n-  JS \n-  JS \n- \n\n JS  JS  JS JS  JS \n\n>  JS  JS \n\n### \n\n- /\n\n    ```JavaScript\n    /*\n    function calculateArea(radius) {\n      return Math.PI * radius * radius;\n    }\n    console.log(calculateArea(5));\n    */\n    function _0x2d8f05(_0x4b083b) {\n      return Math.PI * _0x4b083b * _0x4b083b;\n    }\n    console.log(_0x2d8f05(5));\n    ```\n\n- \n\n    ```JavaScript\n    // console.log(\"Hello, world!\");\n    console.log(\"\\x48\\x65\\x6c\\x6c\\x6f\\x2c\\x20\\x77\\x6f\\x72\\x6c\\x64\\x21\");\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    let c;\n    if (a === 1) {\n      if (b === 2) {\n        c = a + b;\n      }\n    }\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    if (false) {\n      console.log(a - b);\n    }\n    let c = a + b;\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    let c = a - (-b);\n    console.log(c);\n    ```\n\n### \n\n\n\n-  debugger\n\n    ```JavaScript\n    var c = new RegExp(\"1\");\n    c.toString = function () {\n        alert(\"\")\n        setInterval(function() {\n            debugger\n        }, 1000);\n    }\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    var startTime = new Date();\n    debugger;\n    var endTime = new Date();\n    var isDev = endTime - startTime > 100;\n    var stack = [];\n    \n    if (isDev) {\n        while (true) {\n            stack.push(this);\n            console.log(stack.length, this);\n        }\n    }\n    ```\n\n- \n\n    ```JavaScript\n    function eval() {\n        [native code]\n    }\n    \n    window.eval = function(str) {\n        console.log(\"[native code]\");\n    };\n    \n    window.eval = function(str) {\n    };\n    \n    window.eval.toString = function() {\n        return `function eval() {[native code]}`\n    };\n    \n    function hijacked(fun) {\n        return \"prototype\" in fun || fun.toString().replace(/\\n|\\s/g, \"\") != \"function\" + fun.name + \"() {[nativecode]}\";\n    }\n    ```\n\n### \n\n Web  [UglifyJS](https://github.com/mishoo/UglifyJS)  [JavaScript Obfuscator](https://github.com/javascript-obfuscator/javascript-obfuscator)\n\n Vite  vite UglifyJS UglifyJS\n\n\n\n```Bash\nnpm install vite-plugin-uglify --save-dev\n```\n\n\n\n```JavaScript\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport VitePluginUglify from 'vite-plugin-uglify'\n\nexport default defineConfig({\n  plugins: [\n    vue(),\n    VitePluginUglify()\n  ]\n})\n```\n\n`VitePluginUglify``plugins`Vite `vite-plugin-uglify`\n\n### \n\n [Free JavaScript Obfuscator](https://javascriptobfuscator.dev/) JS  [JavaScript Obfuscator](https://github.com/javascript-obfuscator/javascript-obfuscator) \n\n```JavaScript\nfunction fibonacci(n) {\n  let fib = [0, 1];\n  for (let i = 2; i <= n; i++) {\n    fib[i] = fib[i - 1] + fib[i - 2];\n  }\n  return fib;\n}\n\n// the first 10 numbers in the Fibonacci sequence\nconsole.log(fibonacci(10));\n```\n\n 10 \n\n```JavaScript\nconst _0x323128=_0x5512;(function(_0x589643,_0x5459af){const _0x1b79b8=_0x5512,_0x3e96ed=_0x589643();while(!![]){try{const _0x1fb1b3=-parseInt(_0x1b79b8(0x1f1))/0x1*(-parseInt(_0x1b79b8(0x1ea))/0x2)+-parseInt(_0x1b79b8(0x1ec))/0x3*(parseInt(_0x1b79b8(0x1f3))/0x4)+-parseInt(_0x1b79b8(0x1ed))/0x5*(parseInt(_0x1b79b8(0x1f2))/0x6)+-parseInt(_0x1b79b8(0x1e8))/0x7+parseInt(_0x1b79b8(0x1e9))/0x8*(-parseInt(_0x1b79b8(0x1f4))/0x9)+parseInt(_0x1b79b8(0x1f0))/0xa+-parseInt(_0x1b79b8(0x1ef))/0xb*(-parseInt(_0x1b79b8(0x1ee))/0xc);if(_0x1fb1b3===_0x5459af)break;else _0x3e96ed['push'](_0x3e96ed['shift']());}catch(_0x56184c){_0x3e96ed['push'](_0x3e96ed['shift']());}}}(_0x138e,0xdf35a));function _0x138e(){const _0x3a0863=['354072hRaVAZ','9mNckCh','1622341lDdscp','2787864kenYBK','546362IExhCV','log','3fofuVm','1946005vlrFyq','516IsqKpc','725241tPbpzZ','316200mzqtLe','1mgkmrs','24Zwposp'];_0x138e=function(){return _0x3a0863;};return _0x138e();}function fibonacci(_0x1b3125){let _0x9e88df=[0x0,0x1];for(let _0x406b50=0x2;_0x406b50<=_0x1b3125;_0x406b50++){_0x9e88df[_0x406b50]=_0x9e88df[_0x406b50-0x1]+_0x9e88df[_0x406b50-0x2];}return _0x9e88df;}function _0x5512(_0x2d5465,_0x1d0a2f){const _0x138ec4=_0x138e();return _0x5512=function(_0x5512ef,_0x5e1f2e){_0x5512ef=_0x5512ef-0x1e8;let _0x4be64a=_0x138ec4[_0x5512ef];return _0x4be64a;},_0x5512(_0x2d5465,_0x1d0a2f);}console[_0x323128(0x1eb)](fibonacci(0xa));\n```\n\n## Deobfuscator \n\nJS Deobfuscator Deobfuscator Obfuscation  Deobfuscator \n\n JS \n\n### \n\n JS \n\n- [javascript-deobfuscator](https://seosniffer.com/javascript-deobfuscator)\n- [Raz1ner JavaScript Deobfuscator](https://dev-coco.github.io/Online-Tools/JavaScript-Deobfuscator.html)\n- [synchrony deobuscator](https://deobfuscate.relative.im/)\n- [js-beauty](https://beautifier.io/)\n\n\n\n```JavaScript\nfunction fibonacci(jayandre) {\n  let ramonita = [0, 1];\n  for (let ancel = 2; ancel <= jayandre; ancel++) {\n    ramonita[ancel] = ramonita[ancel - 1] + ramonita[ancel - 2];\n  }\n  return ramonita;\n}\nconsole.log(fibonacci(10));\n```\n\n JS \n\n### \n\nchrome\n\nSourceNetworkNetwork  API API  JS Source  JS \n\n Source `ctrl+shift+p`\n\n![20240222095405](https://img.ma5hr00m.top/blog/20240222095405.png)\n\nOverride JS `ctrl+s` JS \n\n![20240222095414](https://img.ma5hr00m.top/blog/20240222095414.png)\n\n\n\n### /\n\n JS \n\n- \n- \n\n## \n\n### \n\n Network `/v2transapi` POST  payload  `query`\n\n![20240222095423](https://img.ma5hr00m.top/blog/20240222095423.png)\n\n`sign``query``transtype``realtime``enter``sign`\n\n`sign` Sources `sign``sign``sign:``sign=`\n\n Sources `sign:` index.36217dc5.js  6 `sign:` 25800 `sign: b(e);`\n\n![20240222095432](https://img.ma5hr00m.top/blog/20240222095432.png)\n\n t \n\n![20240222095443](https://img.ma5hr00m.top/blog/20240222095443.png)\n\n main.js \n\n```JavaScript\nb = function(t) {\n  var o, i = t.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g);\n  if (null === i) {\n    var a = t.length;\n    a > 30 && (t = \"\".concat(t.substr(0, 10)).concat(t.substr(Math.floor(a / 2) - 5, 10)).concat(t.substr(-10, 10)))\n  } else {\n    for (var s = t.split(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/), c = 0, u = s.length, l = []; c < u; c++)\n      \"\" !== s[c] && l.push.apply(l, function(t) {\n        if (Array.isArray(t))\n          return e(t)\n      }(o = s[c].split(\"\")) || function(t) {\n        if (\"undefined\" != typeof Symbol && null != t[Symbol.iterator] || null != t[\"@@iterator\"])\n          return Array.from(t)\n      }(o) || function(t, n) {\n        if (t) {\n          if (\"string\" == typeof t)\n            return e(t, n);\n          var r = Object.prototype.toString.call(t).slice(8, -1);\n          return \"Object\" === r && t.constructor && (r = t.constructor.name),\n          \"Map\" === r || \"Set\" === r ? Array.from(t) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? e(t, n) : void 0\n        }\n      }(o) || function() {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\n      }()),\n      c !== u - 1 && l.push(i[c]);\n    var p = l.length;\n    p > 30 && (t = l.slice(0, 10).join(\"\") + l.slice(Math.floor(p / 2) - 5, Math.floor(p / 2) + 5).join(\"\") + l.slice(-10).join(\"\"))\n  }\n  for (var d = \"\".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)), h = (null !== r ? r : (r = window[d] || \"\") || \"\").split(\".\"), f = Number(h[0]) || 0, m = Number(h[1]) || 0, g = [], y = 0, v = 0; v < t.length; v++) {\n    var _ = t.charCodeAt(v);\n    _ < 128 ? g[y++] = _ : (_ < 2048 ? g[y++] = _ >> 6 | 192 : (55296 == (64512 & _) && v + 1 < t.length && 56320 == (64512 & t.charCodeAt(v + 1)) ? (_ = 65536 + ((1023 & _) << 10) + (1023 & t.charCodeAt(++v)),\n    g[y++] = _ >> 18 | 240,\n    g[y++] = _ >> 12 & 63 | 128) : g[y++] = _ >> 12 | 224,\n    g[y++] = _ >> 6 & 63 | 128),\n    g[y++] = 63 & _ | 128)\n  }\n  for (var b = f, w = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)), k = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98)) + \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)), x = 0; x < g.length; x++)\n    b = n(b += g[x], w);\n  return b = n(b, k),\n  (b ^= m) < 0 && (b = 2147483648 + (2147483647 & b)),\n  \"\".concat((b %= 1e6).toString(), \".\").concat(b ^ f)\n}\n\nconst query = \"abandon\";\nconsole.log(b(query))\n```\n\n`r``r``r``window[d]` \"320305.131321201\"null\n\n![20240222095453](https://img.ma5hr00m.top/blog/20240222095453.png)\n\n`d``gtk` Node.js  JS `window[]` Web API`320305.131321201``n`\n\n![20240222095459](https://img.ma5hr00m.top/blog/20240222095459.png)\n\n`n`\n\n![20240222095511](https://img.ma5hr00m.top/blog/20240222095511.png)\n\n`n` JS `103339.356506` Network `sign`\n\n`query``/v2transapi` payload\n\n```JavaScript\n/**\n * function to generate sign\n */\nn = function (t, e) {\n  for (var n = 0; n < e.length - 2; n += 3) {\n      var r = e.charAt(n + 2);\n      r = \"a\" <= r ? r.charCodeAt(0) - 87 : Number(r),\n      r = \"+\" === e.charAt(n + 1) ? t >>> r : t << r,\n      t = \"+\" === e.charAt(n) ? t + r & 4294967295 : t ^ r\n  }\n  return t\n}\n\nb = function(t) {\n  var o, i = t.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g);\n  if (null === i) {\n    var a = t.length;\n    a > 30 && (t = \"\".concat(t.substr(0, 10)).concat(t.substr(Math.floor(a / 2) - 5, 10)).concat(t.substr(-10, 10)))\n  } else {\n    for (var s = t.split(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/), c = 0, u = s.length, l = []; c < u; c++)\n      \"\" !== s[c] && l.push.apply(l, function(t) {\n        if (Array.isArray(t))\n          return e(t)\n      }(o = s[c].split(\"\")) || function(t) {\n        if (\"undefined\" != typeof Symbol && null != t[Symbol.iterator] || null != t[\"@@iterator\"])\n          return Array.from(t)\n      }(o) || function(t, n) {\n        if (t) {\n          if (\"string\" == typeof t)\n            return e(t, n);\n          var r = Object.prototype.toString.call(t).slice(8, -1);\n          return \"Object\" === r && t.constructor && (r = t.constructor.name),\n          \"Map\" === r || \"Set\" === r ? Array.from(t) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? e(t, n) : void 0\n        }\n      }(o) || function() {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\n      }()),\n      c !== u - 1 && l.push(i[c]);\n    var p = l.length;\n    p > 30 && (t = l.slice(0, 10).join(\"\") + l.slice(Math.floor(p / 2) - 5, Math.floor(p / 2) + 5).join(\"\") + l.slice(-10).join(\"\"))\n  }\n  for (var d = \"\".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)), h = (r = \"320305.131321201\").split(\".\"), f = Number(h[0]) || 0, m = Number(h[1]) || 0, g = [], y = 0, v = 0; v < t.length; v++) {\n    var _ = t.charCodeAt(v);\n    _ < 128 ? g[y++] = _ : (_ < 2048 ? g[y++] = _ >> 6 | 192 : (55296 == (64512 & _) && v + 1 < t.length && 56320 == (64512 & t.charCodeAt(v + 1)) ? (_ = 65536 + ((1023 & _) << 10) + (1023 & t.charCodeAt(++v)),\n    g[y++] = _ >> 18 | 240,\n    g[y++] = _ >> 12 & 63 | 128) : g[y++] = _ >> 12 | 224,\n    g[y++] = _ >> 6 & 63 | 128),\n    g[y++] = 63 & _ | 128)\n  }\n  for (var b = f, w = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)), k = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98)) + \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)), x = 0; x < g.length; x++)\n    b = n(b += g[x], w);\n  return b = n(b, k),\n  (b ^= m) < 0 && (b = 2147483648 + (2147483647 & b)),\n  \"\".concat((b %= 1e6).toString(), \".\").concat(b ^ f)\n}\n\n/**\n * test\n */\nconst query = \"abandon\";\nconsole.log(`from=en&to=zh&query=${query}&simple_means_flag=3&sign=${b(query)}&token=14025658070b41f40739347cef0ec62a&domain=common&ts=1708512893507`)\n```\n\n### \n\n`/passport/web/user/login`\n\n```\n# GET \naid: 2608\naccount_sdk_source: web\nsdk_version: 2.2.6\nverifyFp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79\nfp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79\nsign: d9116c9cae3fcdf848f1288e1850eb2a489a4e23ece930692912a8bc155d89ec\nqs: 6466666a706b715a76616e5a766a7077666029646c612963752976616e5a736077766c6a6b297360776c637c4375\n\n# POST \nmix_mode: 1\naccount: 34363d3336373d3d343c3c\npassword: 343736343736343736\nfixed_mix_mode: 1\n```\n\n POST GET `sign``account``password` GET `sign`\n\n POST `sign``account``password`\n\n```JavaScript\n/**\n * raw data\n */\nconst account = '00000000000'\nconst password = '1q2w3e'\n\n/**\n * handle account and password\n */\nvar T = function(e) {\n  var t, n = [];\n  if (void 0 === e)\n    return \"\";\n  t = function(e) {\n    for (var t, n = e.toString(), r = [], a = 0; a < n.length; a++)\n      0 <= (t = n.charCodeAt(a)) && t <= 127 ? r.push(t) : 128 <= t && t <= 2047 ? (r.push(192 | 31 & t >> 6),\n      r.push(128 | 63 & t)) : (2048 <= t && t <= 55295 || 57344 <= t && t <= 65535) && (r.push(224 | 15 & t >> 12),\n      r.push(128 | 63 & t >> 6),\n      r.push(128 | 63 & t));\n    for (var i = 0; i < r.length; i++)\n      r[i] &= 255;\n    return r\n  }(e);\n  for (var r = 0, a = t.length; r < a; ++r)\n    n.push((5 ^ t[r]).toString(16));\n  return n.join(\"\")\n}\n\n/**\n * obtain the post form\n */\nconst postForm = `mix_mode=1&account=${T(account)}&password=${T(password)}&fixed_mix_mode=1`\nconsole.log(postForm)\n```\n\n### HGAME2024 2048*16\n\nBaiMeow HGAME2024 Week1  F12JS \n\n## \n\n- [Javascript](https://lizh.gitbook.io/knowledge/research/javascript-jia-mi-hun-xiao#hun-xiao-cha-jian)by \n- [js](https://ek1ng.com/jsobuscation.html)by ek1ng","source":"_posts/js-obfuscation-deobfuscation.md","raw":"---\ntitle: JavaScript \ndate: 2024/2/12\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n## Obfuscation \n\nJavaScript Obfuscation JS  JS \n\n JS  \n\nJS \n\n### \n\n JS JS   JS  HTTP JS Minification\n\n JS \n\n-  JS \n-  JS \n-  JS \n- \n\n JS  JS  JS JS  JS \n\n>  JS  JS \n\n### \n\n- /\n\n    ```JavaScript\n    /*\n    function calculateArea(radius) {\n      return Math.PI * radius * radius;\n    }\n    console.log(calculateArea(5));\n    */\n    function _0x2d8f05(_0x4b083b) {\n      return Math.PI * _0x4b083b * _0x4b083b;\n    }\n    console.log(_0x2d8f05(5));\n    ```\n\n- \n\n    ```JavaScript\n    // console.log(\"Hello, world!\");\n    console.log(\"\\x48\\x65\\x6c\\x6c\\x6f\\x2c\\x20\\x77\\x6f\\x72\\x6c\\x64\\x21\");\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    let c;\n    if (a === 1) {\n      if (b === 2) {\n        c = a + b;\n      }\n    }\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    if (false) {\n      console.log(a - b);\n    }\n    let c = a + b;\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    /*\n    let a = 1;\n    let b = 2;\n    let c = a + b;\n    console.log(c);\n    */\n    let a = 1;\n    let b = 2;\n    let c = a - (-b);\n    console.log(c);\n    ```\n\n### \n\n\n\n-  debugger\n\n    ```JavaScript\n    var c = new RegExp(\"1\");\n    c.toString = function () {\n        alert(\"\")\n        setInterval(function() {\n            debugger\n        }, 1000);\n    }\n    console.log(c);\n    ```\n\n- \n\n    ```JavaScript\n    var startTime = new Date();\n    debugger;\n    var endTime = new Date();\n    var isDev = endTime - startTime > 100;\n    var stack = [];\n    \n    if (isDev) {\n        while (true) {\n            stack.push(this);\n            console.log(stack.length, this);\n        }\n    }\n    ```\n\n- \n\n    ```JavaScript\n    function eval() {\n        [native code]\n    }\n    \n    window.eval = function(str) {\n        console.log(\"[native code]\");\n    };\n    \n    window.eval = function(str) {\n    };\n    \n    window.eval.toString = function() {\n        return `function eval() {[native code]}`\n    };\n    \n    function hijacked(fun) {\n        return \"prototype\" in fun || fun.toString().replace(/\\n|\\s/g, \"\") != \"function\" + fun.name + \"() {[nativecode]}\";\n    }\n    ```\n\n### \n\n Web  [UglifyJS](https://github.com/mishoo/UglifyJS)  [JavaScript Obfuscator](https://github.com/javascript-obfuscator/javascript-obfuscator)\n\n Vite  vite UglifyJS UglifyJS\n\n\n\n```Bash\nnpm install vite-plugin-uglify --save-dev\n```\n\n\n\n```JavaScript\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport VitePluginUglify from 'vite-plugin-uglify'\n\nexport default defineConfig({\n  plugins: [\n    vue(),\n    VitePluginUglify()\n  ]\n})\n```\n\n`VitePluginUglify``plugins`Vite `vite-plugin-uglify`\n\n### \n\n [Free JavaScript Obfuscator](https://javascriptobfuscator.dev/) JS  [JavaScript Obfuscator](https://github.com/javascript-obfuscator/javascript-obfuscator) \n\n```JavaScript\nfunction fibonacci(n) {\n  let fib = [0, 1];\n  for (let i = 2; i <= n; i++) {\n    fib[i] = fib[i - 1] + fib[i - 2];\n  }\n  return fib;\n}\n\n// the first 10 numbers in the Fibonacci sequence\nconsole.log(fibonacci(10));\n```\n\n 10 \n\n```JavaScript\nconst _0x323128=_0x5512;(function(_0x589643,_0x5459af){const _0x1b79b8=_0x5512,_0x3e96ed=_0x589643();while(!![]){try{const _0x1fb1b3=-parseInt(_0x1b79b8(0x1f1))/0x1*(-parseInt(_0x1b79b8(0x1ea))/0x2)+-parseInt(_0x1b79b8(0x1ec))/0x3*(parseInt(_0x1b79b8(0x1f3))/0x4)+-parseInt(_0x1b79b8(0x1ed))/0x5*(parseInt(_0x1b79b8(0x1f2))/0x6)+-parseInt(_0x1b79b8(0x1e8))/0x7+parseInt(_0x1b79b8(0x1e9))/0x8*(-parseInt(_0x1b79b8(0x1f4))/0x9)+parseInt(_0x1b79b8(0x1f0))/0xa+-parseInt(_0x1b79b8(0x1ef))/0xb*(-parseInt(_0x1b79b8(0x1ee))/0xc);if(_0x1fb1b3===_0x5459af)break;else _0x3e96ed['push'](_0x3e96ed['shift']());}catch(_0x56184c){_0x3e96ed['push'](_0x3e96ed['shift']());}}}(_0x138e,0xdf35a));function _0x138e(){const _0x3a0863=['354072hRaVAZ','9mNckCh','1622341lDdscp','2787864kenYBK','546362IExhCV','log','3fofuVm','1946005vlrFyq','516IsqKpc','725241tPbpzZ','316200mzqtLe','1mgkmrs','24Zwposp'];_0x138e=function(){return _0x3a0863;};return _0x138e();}function fibonacci(_0x1b3125){let _0x9e88df=[0x0,0x1];for(let _0x406b50=0x2;_0x406b50<=_0x1b3125;_0x406b50++){_0x9e88df[_0x406b50]=_0x9e88df[_0x406b50-0x1]+_0x9e88df[_0x406b50-0x2];}return _0x9e88df;}function _0x5512(_0x2d5465,_0x1d0a2f){const _0x138ec4=_0x138e();return _0x5512=function(_0x5512ef,_0x5e1f2e){_0x5512ef=_0x5512ef-0x1e8;let _0x4be64a=_0x138ec4[_0x5512ef];return _0x4be64a;},_0x5512(_0x2d5465,_0x1d0a2f);}console[_0x323128(0x1eb)](fibonacci(0xa));\n```\n\n## Deobfuscator \n\nJS Deobfuscator Deobfuscator Obfuscation  Deobfuscator \n\n JS \n\n### \n\n JS \n\n- [javascript-deobfuscator](https://seosniffer.com/javascript-deobfuscator)\n- [Raz1ner JavaScript Deobfuscator](https://dev-coco.github.io/Online-Tools/JavaScript-Deobfuscator.html)\n- [synchrony deobuscator](https://deobfuscate.relative.im/)\n- [js-beauty](https://beautifier.io/)\n\n\n\n```JavaScript\nfunction fibonacci(jayandre) {\n  let ramonita = [0, 1];\n  for (let ancel = 2; ancel <= jayandre; ancel++) {\n    ramonita[ancel] = ramonita[ancel - 1] + ramonita[ancel - 2];\n  }\n  return ramonita;\n}\nconsole.log(fibonacci(10));\n```\n\n JS \n\n### \n\nchrome\n\nSourceNetworkNetwork  API API  JS Source  JS \n\n Source `ctrl+shift+p`\n\n![20240222095405](https://img.ma5hr00m.top/blog/20240222095405.png)\n\nOverride JS `ctrl+s` JS \n\n![20240222095414](https://img.ma5hr00m.top/blog/20240222095414.png)\n\n\n\n### /\n\n JS \n\n- \n- \n\n## \n\n### \n\n Network `/v2transapi` POST  payload  `query`\n\n![20240222095423](https://img.ma5hr00m.top/blog/20240222095423.png)\n\n`sign``query``transtype``realtime``enter``sign`\n\n`sign` Sources `sign``sign``sign:``sign=`\n\n Sources `sign:` index.36217dc5.js  6 `sign:` 25800 `sign: b(e);`\n\n![20240222095432](https://img.ma5hr00m.top/blog/20240222095432.png)\n\n t \n\n![20240222095443](https://img.ma5hr00m.top/blog/20240222095443.png)\n\n main.js \n\n```JavaScript\nb = function(t) {\n  var o, i = t.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g);\n  if (null === i) {\n    var a = t.length;\n    a > 30 && (t = \"\".concat(t.substr(0, 10)).concat(t.substr(Math.floor(a / 2) - 5, 10)).concat(t.substr(-10, 10)))\n  } else {\n    for (var s = t.split(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/), c = 0, u = s.length, l = []; c < u; c++)\n      \"\" !== s[c] && l.push.apply(l, function(t) {\n        if (Array.isArray(t))\n          return e(t)\n      }(o = s[c].split(\"\")) || function(t) {\n        if (\"undefined\" != typeof Symbol && null != t[Symbol.iterator] || null != t[\"@@iterator\"])\n          return Array.from(t)\n      }(o) || function(t, n) {\n        if (t) {\n          if (\"string\" == typeof t)\n            return e(t, n);\n          var r = Object.prototype.toString.call(t).slice(8, -1);\n          return \"Object\" === r && t.constructor && (r = t.constructor.name),\n          \"Map\" === r || \"Set\" === r ? Array.from(t) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? e(t, n) : void 0\n        }\n      }(o) || function() {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\n      }()),\n      c !== u - 1 && l.push(i[c]);\n    var p = l.length;\n    p > 30 && (t = l.slice(0, 10).join(\"\") + l.slice(Math.floor(p / 2) - 5, Math.floor(p / 2) + 5).join(\"\") + l.slice(-10).join(\"\"))\n  }\n  for (var d = \"\".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)), h = (null !== r ? r : (r = window[d] || \"\") || \"\").split(\".\"), f = Number(h[0]) || 0, m = Number(h[1]) || 0, g = [], y = 0, v = 0; v < t.length; v++) {\n    var _ = t.charCodeAt(v);\n    _ < 128 ? g[y++] = _ : (_ < 2048 ? g[y++] = _ >> 6 | 192 : (55296 == (64512 & _) && v + 1 < t.length && 56320 == (64512 & t.charCodeAt(v + 1)) ? (_ = 65536 + ((1023 & _) << 10) + (1023 & t.charCodeAt(++v)),\n    g[y++] = _ >> 18 | 240,\n    g[y++] = _ >> 12 & 63 | 128) : g[y++] = _ >> 12 | 224,\n    g[y++] = _ >> 6 & 63 | 128),\n    g[y++] = 63 & _ | 128)\n  }\n  for (var b = f, w = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)), k = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98)) + \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)), x = 0; x < g.length; x++)\n    b = n(b += g[x], w);\n  return b = n(b, k),\n  (b ^= m) < 0 && (b = 2147483648 + (2147483647 & b)),\n  \"\".concat((b %= 1e6).toString(), \".\").concat(b ^ f)\n}\n\nconst query = \"abandon\";\nconsole.log(b(query))\n```\n\n`r``r``r``window[d]` \"320305.131321201\"null\n\n![20240222095453](https://img.ma5hr00m.top/blog/20240222095453.png)\n\n`d``gtk` Node.js  JS `window[]` Web API`320305.131321201``n`\n\n![20240222095459](https://img.ma5hr00m.top/blog/20240222095459.png)\n\n`n`\n\n![20240222095511](https://img.ma5hr00m.top/blog/20240222095511.png)\n\n`n` JS `103339.356506` Network `sign`\n\n`query``/v2transapi` payload\n\n```JavaScript\n/**\n * function to generate sign\n */\nn = function (t, e) {\n  for (var n = 0; n < e.length - 2; n += 3) {\n      var r = e.charAt(n + 2);\n      r = \"a\" <= r ? r.charCodeAt(0) - 87 : Number(r),\n      r = \"+\" === e.charAt(n + 1) ? t >>> r : t << r,\n      t = \"+\" === e.charAt(n) ? t + r & 4294967295 : t ^ r\n  }\n  return t\n}\n\nb = function(t) {\n  var o, i = t.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g);\n  if (null === i) {\n    var a = t.length;\n    a > 30 && (t = \"\".concat(t.substr(0, 10)).concat(t.substr(Math.floor(a / 2) - 5, 10)).concat(t.substr(-10, 10)))\n  } else {\n    for (var s = t.split(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/), c = 0, u = s.length, l = []; c < u; c++)\n      \"\" !== s[c] && l.push.apply(l, function(t) {\n        if (Array.isArray(t))\n          return e(t)\n      }(o = s[c].split(\"\")) || function(t) {\n        if (\"undefined\" != typeof Symbol && null != t[Symbol.iterator] || null != t[\"@@iterator\"])\n          return Array.from(t)\n      }(o) || function(t, n) {\n        if (t) {\n          if (\"string\" == typeof t)\n            return e(t, n);\n          var r = Object.prototype.toString.call(t).slice(8, -1);\n          return \"Object\" === r && t.constructor && (r = t.constructor.name),\n          \"Map\" === r || \"Set\" === r ? Array.from(t) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? e(t, n) : void 0\n        }\n      }(o) || function() {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\n      }()),\n      c !== u - 1 && l.push(i[c]);\n    var p = l.length;\n    p > 30 && (t = l.slice(0, 10).join(\"\") + l.slice(Math.floor(p / 2) - 5, Math.floor(p / 2) + 5).join(\"\") + l.slice(-10).join(\"\"))\n  }\n  for (var d = \"\".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)), h = (r = \"320305.131321201\").split(\".\"), f = Number(h[0]) || 0, m = Number(h[1]) || 0, g = [], y = 0, v = 0; v < t.length; v++) {\n    var _ = t.charCodeAt(v);\n    _ < 128 ? g[y++] = _ : (_ < 2048 ? g[y++] = _ >> 6 | 192 : (55296 == (64512 & _) && v + 1 < t.length && 56320 == (64512 & t.charCodeAt(v + 1)) ? (_ = 65536 + ((1023 & _) << 10) + (1023 & t.charCodeAt(++v)),\n    g[y++] = _ >> 18 | 240,\n    g[y++] = _ >> 12 & 63 | 128) : g[y++] = _ >> 12 | 224,\n    g[y++] = _ >> 6 & 63 | 128),\n    g[y++] = 63 & _ | 128)\n  }\n  for (var b = f, w = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)), k = \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51)) + \"\".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98)) + \"\".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)), x = 0; x < g.length; x++)\n    b = n(b += g[x], w);\n  return b = n(b, k),\n  (b ^= m) < 0 && (b = 2147483648 + (2147483647 & b)),\n  \"\".concat((b %= 1e6).toString(), \".\").concat(b ^ f)\n}\n\n/**\n * test\n */\nconst query = \"abandon\";\nconsole.log(`from=en&to=zh&query=${query}&simple_means_flag=3&sign=${b(query)}&token=14025658070b41f40739347cef0ec62a&domain=common&ts=1708512893507`)\n```\n\n### \n\n`/passport/web/user/login`\n\n```\n# GET \naid: 2608\naccount_sdk_source: web\nsdk_version: 2.2.6\nverifyFp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79\nfp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79\nsign: d9116c9cae3fcdf848f1288e1850eb2a489a4e23ece930692912a8bc155d89ec\nqs: 6466666a706b715a76616e5a766a7077666029646c612963752976616e5a736077766c6a6b297360776c637c4375\n\n# POST \nmix_mode: 1\naccount: 34363d3336373d3d343c3c\npassword: 343736343736343736\nfixed_mix_mode: 1\n```\n\n POST GET `sign``account``password` GET `sign`\n\n POST `sign``account``password`\n\n```JavaScript\n/**\n * raw data\n */\nconst account = '00000000000'\nconst password = '1q2w3e'\n\n/**\n * handle account and password\n */\nvar T = function(e) {\n  var t, n = [];\n  if (void 0 === e)\n    return \"\";\n  t = function(e) {\n    for (var t, n = e.toString(), r = [], a = 0; a < n.length; a++)\n      0 <= (t = n.charCodeAt(a)) && t <= 127 ? r.push(t) : 128 <= t && t <= 2047 ? (r.push(192 | 31 & t >> 6),\n      r.push(128 | 63 & t)) : (2048 <= t && t <= 55295 || 57344 <= t && t <= 65535) && (r.push(224 | 15 & t >> 12),\n      r.push(128 | 63 & t >> 6),\n      r.push(128 | 63 & t));\n    for (var i = 0; i < r.length; i++)\n      r[i] &= 255;\n    return r\n  }(e);\n  for (var r = 0, a = t.length; r < a; ++r)\n    n.push((5 ^ t[r]).toString(16));\n  return n.join(\"\")\n}\n\n/**\n * obtain the post form\n */\nconst postForm = `mix_mode=1&account=${T(account)}&password=${T(password)}&fixed_mix_mode=1`\nconsole.log(postForm)\n```\n\n### HGAME2024 2048*16\n\nBaiMeow HGAME2024 Week1  F12JS \n\n## \n\n- [Javascript](https://lizh.gitbook.io/knowledge/research/javascript-jia-mi-hun-xiao#hun-xiao-cha-jian)by \n- [js](https://ek1ng.com/jsobuscation.html)by ek1ng","slug":"js-obfuscation-deobfuscation","published":1,"updated":"2024-06-09T12:55:21.238Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap4000pf4lyhxuy6cqo","content":"<h2 id=\"Obfuscation-\"><a href=\"#Obfuscation-\" class=\"headerlink\" title=\"Obfuscation \"></a>Obfuscation </h2><p>JavaScript Obfuscation JS  JS </p>\n<p> JS  </p>\n<p>JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JS JS   JS  HTTP JS Minification</p>\n<p> JS </p>\n<ul>\n<li> JS </li>\n<li> JS </li>\n<li> JS </li>\n<li></li>\n</ul>\n<p> JS  JS  JS JS  JS </p>\n<blockquote>\n<p> JS  JS </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>&#x2F;</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">function calculateArea(radius) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  return Math.PI * radius * radius;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(calculateArea(5));</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">_0x2d8f05</span>(<span class=\"params\">_0x4b083b</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span> * _0x4b083b * _0x4b083b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">_0x2d8f05</span>(<span class=\"number\">5</span>));</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// console.log(&quot;Hello, world!&quot;);</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;\\x48\\x65\\x6c\\x6c\\x6f\\x2c\\x20\\x77\\x6f\\x72\\x6c\\x64\\x21&quot;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (a === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (b === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    c = a + b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a - b);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = a + b;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = a - (-b);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><p> debugger</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"keyword\">new</span> <span class=\"title class_\">RegExp</span>(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">c.<span class=\"property\">toString</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">setInterval</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">debugger</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> startTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\"><span class=\"keyword\">debugger</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> endTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> isDev = endTime - startTime &gt; <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> stack = [];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (isDev) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">        stack.<span class=\"title function_\">push</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(stack.<span class=\"property\">length</span>, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">eval</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    [native code]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span> = <span class=\"keyword\">function</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;[native code]&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span> = <span class=\"keyword\">function</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span>.<span class=\"property\">toString</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`function eval() &#123;[native code]&#125;`</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">hijacked</span>(<span class=\"params\">fun</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;prototype&quot;</span> <span class=\"keyword\">in</span> fun || fun.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"regexp\">/\\n|\\s/g</span>, <span class=\"string\">&quot;&quot;</span>) != <span class=\"string\">&quot;function&quot;</span> + fun.<span class=\"property\">name</span> + <span class=\"string\">&quot;() &#123;[nativecode]&#125;&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  <a href=\"https://github.com/mishoo/UglifyJS\">UglifyJS</a>  <a href=\"https://github.com/javascript-obfuscator/javascript-obfuscator\">JavaScript Obfuscator</a></p>\n<p> Vite  vite UglifyJS UglifyJS</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vite-plugin-uglify --save-dev</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> vue <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">VitePluginUglify</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite-plugin-uglify&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"title function_\">vue</span>(),</span><br><span class=\"line\">    <span class=\"title class_\">VitePluginUglify</span>()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><code>VitePluginUglify</code><code>plugins</code>Vite <code>vite-plugin-uglify</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://javascriptobfuscator.dev/\">Free JavaScript Obfuscator</a> JS  <a href=\"https://github.com/javascript-obfuscator/javascript-obfuscator\">JavaScript Obfuscator</a> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">n</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> fib = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">    fib[i] = fib[i - <span class=\"number\">1</span>] + fib[i - <span class=\"number\">2</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fib;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// the first 10 numbers in the Fibonacci sequence</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fibonacci</span>(<span class=\"number\">10</span>));</span><br></pre></td></tr></table></figure>\n\n<p> 10 </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _0x323128=_0x5512;(<span class=\"keyword\">function</span>(<span class=\"params\">_0x589643,_0x5459af</span>)&#123;<span class=\"keyword\">const</span> _0x1b79b8=_0x5512,_0x3e96ed=<span class=\"title function_\">_0x589643</span>();<span class=\"keyword\">while</span>(!![])&#123;<span class=\"keyword\">try</span>&#123;<span class=\"keyword\">const</span> _0x1fb1b3=-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f1</span>))/<span class=\"number\">0x1</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ea</span>))/<span class=\"number\">0x2</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ec</span>))/<span class=\"number\">0x3</span>*(<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f3</span>))/<span class=\"number\">0x4</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ed</span>))/<span class=\"number\">0x5</span>*(<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f2</span>))/<span class=\"number\">0x6</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1e8</span>))/<span class=\"number\">0x7</span>+<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1e9</span>))/<span class=\"number\">0x8</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f4</span>))/<span class=\"number\">0x9</span>)+<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f0</span>))/<span class=\"number\">0xa</span>+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ef</span>))/<span class=\"number\">0xb</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ee</span>))/<span class=\"number\">0xc</span>);<span class=\"keyword\">if</span>(_0x1fb1b3===_0x5459af)<span class=\"keyword\">break</span>;<span class=\"keyword\">else</span> _0x3e96ed[<span class=\"string\">&#x27;push&#x27;</span>](_0x3e96ed[<span class=\"string\">&#x27;shift&#x27;</span>]());&#125;<span class=\"keyword\">catch</span>(_0x56184c)&#123;_0x3e96ed[<span class=\"string\">&#x27;push&#x27;</span>](_0x3e96ed[<span class=\"string\">&#x27;shift&#x27;</span>]());&#125;&#125;&#125;(_0x138e,<span class=\"number\">0xdf35a</span>));<span class=\"keyword\">function</span> <span class=\"title function_\">_0x138e</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">const</span> _0x3a0863=[<span class=\"string\">&#x27;354072hRaVAZ&#x27;</span>,<span class=\"string\">&#x27;9mNckCh&#x27;</span>,<span class=\"string\">&#x27;1622341lDdscp&#x27;</span>,<span class=\"string\">&#x27;2787864kenYBK&#x27;</span>,<span class=\"string\">&#x27;546362IExhCV&#x27;</span>,<span class=\"string\">&#x27;log&#x27;</span>,<span class=\"string\">&#x27;3fofuVm&#x27;</span>,<span class=\"string\">&#x27;1946005vlrFyq&#x27;</span>,<span class=\"string\">&#x27;516IsqKpc&#x27;</span>,<span class=\"string\">&#x27;725241tPbpzZ&#x27;</span>,<span class=\"string\">&#x27;316200mzqtLe&#x27;</span>,<span class=\"string\">&#x27;1mgkmrs&#x27;</span>,<span class=\"string\">&#x27;24Zwposp&#x27;</span>];_0x138e=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">return</span> _0x3a0863;&#125;;<span class=\"keyword\">return</span> <span class=\"title function_\">_0x138e</span>();&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">_0x1b3125</span>)&#123;<span class=\"keyword\">let</span> _0x9e88df=[<span class=\"number\">0x0</span>,<span class=\"number\">0x1</span>];<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> _0x406b50=<span class=\"number\">0x2</span>;_0x406b50&lt;=_0x1b3125;_0x406b50++)&#123;_0x9e88df[_0x406b50]=_0x9e88df[_0x406b50-<span class=\"number\">0x1</span>]+_0x9e88df[_0x406b50-<span class=\"number\">0x2</span>];&#125;<span class=\"keyword\">return</span> _0x9e88df;&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">_0x5512</span>(<span class=\"params\">_0x2d5465,_0x1d0a2f</span>)&#123;<span class=\"keyword\">const</span> _0x138ec4=<span class=\"title function_\">_0x138e</span>();<span class=\"keyword\">return</span> _0x5512=<span class=\"keyword\">function</span>(<span class=\"params\">_0x5512ef,_0x5e1f2e</span>)&#123;_0x5512ef=_0x5512ef-<span class=\"number\">0x1e8</span>;<span class=\"keyword\">let</span> _0x4be64a=_0x138ec4[_0x5512ef];<span class=\"keyword\">return</span> _0x4be64a;&#125;,<span class=\"title function_\">_0x5512</span>(_0x2d5465,_0x1d0a2f);&#125;<span class=\"variable language_\">console</span>[<span class=\"title function_\">_0x323128</span>(<span class=\"number\">0x1eb</span>)](<span class=\"title function_\">fibonacci</span>(<span class=\"number\">0xa</span>));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Deobfuscator-\"><a href=\"#Deobfuscator-\" class=\"headerlink\" title=\"Deobfuscator \"></a>Deobfuscator </h2><p>JS Deobfuscator Deobfuscator Obfuscation  Deobfuscator </p>\n<p> JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JS </p>\n<ul>\n<li><a href=\"https://seosniffer.com/javascript-deobfuscator\">javascript-deobfuscator</a></li>\n<li><a href=\"https://dev-coco.github.io/Online-Tools/JavaScript-Deobfuscator.html\">Raz1ner JavaScript Deobfuscator</a></li>\n<li><a href=\"https://deobfuscate.relative.im/\">synchrony deobuscator</a></li>\n<li><a href=\"https://beautifier.io/\">js-beauty</a></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">jayandre</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ramonita = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ancel = <span class=\"number\">2</span>; ancel &lt;= jayandre; ancel++) &#123;</span><br><span class=\"line\">    ramonita[ancel] = ramonita[ancel - <span class=\"number\">1</span>] + ramonita[ancel - <span class=\"number\">2</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ramonita;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fibonacci</span>(<span class=\"number\">10</span>));</span><br></pre></td></tr></table></figure>\n\n<p> JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>chrome</p>\n<p>SourceNetworkNetwork  API API  JS Source  JS </p>\n<p> Source <code>ctrl+shift+p</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095405.png\" alt=\"20240222095405\"></p>\n<p>Override JS <code>ctrl+s</code> JS </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095414.png\" alt=\"20240222095414\"></p>\n<p></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"&#x2F;\"></a>&#x2F;</h3><p> JS </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Network <code>/v2transapi</code> POST  payload  <code>query</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095423.png\" alt=\"20240222095423\"></p>\n<p><code>sign</code><code>query</code><code>transtype</code><code>realtime</code><code>enter</code><code>sign</code></p>\n<p><code>sign</code> Sources <code>sign</code><code>sign</code><code>sign:</code><code>sign=</code></p>\n<p> Sources <code>sign:</code> index.36217dc5.js  6 <code>sign:</code> 25800 <code>sign: b(e);</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095432.png\" alt=\"20240222095432\"></p>\n<p> t </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095443.png\" alt=\"20240222095443\"></p>\n<p> main.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">b = <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o, i = t.<span class=\"title function_\">match</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> === i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = t.<span class=\"property\">length</span>;</span><br><span class=\"line\">    a &gt; <span class=\"number\">30</span> &amp;&amp; (t = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(a / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(-<span class=\"number\">10</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = t.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/</span>), c = <span class=\"number\">0</span>, u = s.<span class=\"property\">length</span>, l = []; c &lt; u; c++)</span><br><span class=\"line\">      <span class=\"string\">&quot;&quot;</span> !== s[c] &amp;&amp; l.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(l, <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(t))</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t)</span><br><span class=\"line\">      &#125;(o = s[c].<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>)) || <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;undefined&quot;</span> != <span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> &amp;&amp; <span class=\"literal\">null</span> != t[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>] || <span class=\"literal\">null</span> != t[<span class=\"string\">&quot;@@iterator&quot;</span>])</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t)</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\">t, n</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (<span class=\"string\">&quot;string&quot;</span> == <span class=\"keyword\">typeof</span> t)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t, n);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> r = <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">toString</span>.<span class=\"title function_\">call</span>(t).<span class=\"title function_\">slice</span>(<span class=\"number\">8</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">&quot;Object&quot;</span> === r &amp;&amp; t.<span class=\"property\">constructor</span> &amp;&amp; (r = t.<span class=\"property\">constructor</span>.<span class=\"property\">name</span>),</span><br><span class=\"line\">          <span class=\"string\">&quot;Map&quot;</span> === r || <span class=\"string\">&quot;Set&quot;</span> === r ? <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t) : <span class=\"string\">&quot;Arguments&quot;</span> === r || <span class=\"regexp\">/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/</span>.<span class=\"title function_\">test</span>(r) ? <span class=\"title function_\">e</span>(t, n) : <span class=\"keyword\">void</span> <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&quot;Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>)</span><br><span class=\"line\">      &#125;()),</span><br><span class=\"line\">      c !== u - <span class=\"number\">1</span> &amp;&amp; l.<span class=\"title function_\">push</span>(i[c]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> p = l.<span class=\"property\">length</span>;</span><br><span class=\"line\">    p &gt; <span class=\"number\">30</span> &amp;&amp; (t = l.<span class=\"title function_\">slice</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) + <span class=\"number\">5</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(-<span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> d = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">103</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">116</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">107</span>)), h = (<span class=\"literal\">null</span> !== r ? r : (r = <span class=\"variable language_\">window</span>[d] || <span class=\"string\">&quot;&quot;</span>) || <span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>), f = <span class=\"title class_\">Number</span>(h[<span class=\"number\">0</span>]) || <span class=\"number\">0</span>, m = <span class=\"title class_\">Number</span>(h[<span class=\"number\">1</span>]) || <span class=\"number\">0</span>, g = [], y = <span class=\"number\">0</span>, v = <span class=\"number\">0</span>; v &lt; t.<span class=\"property\">length</span>; v++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _ = t.<span class=\"title function_\">charCodeAt</span>(v);</span><br><span class=\"line\">    _ &lt; <span class=\"number\">128</span> ? g[y++] = _ : (_ &lt; <span class=\"number\">2048</span> ? g[y++] = _ &gt;&gt; <span class=\"number\">6</span> | <span class=\"number\">192</span> : (<span class=\"number\">55296</span> == (<span class=\"number\">64512</span> &amp; _) &amp;&amp; v + <span class=\"number\">1</span> &lt; t.<span class=\"property\">length</span> &amp;&amp; <span class=\"number\">56320</span> == (<span class=\"number\">64512</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(v + <span class=\"number\">1</span>)) ? (_ = <span class=\"number\">65536</span> + ((<span class=\"number\">1023</span> &amp; _) &lt;&lt; <span class=\"number\">10</span>) + (<span class=\"number\">1023</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(++v)),</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">18</span> | <span class=\"number\">240</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">12</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>) : g[y++] = _ &gt;&gt; <span class=\"number\">12</span> | <span class=\"number\">224</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">6</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>),</span><br><span class=\"line\">    g[y++] = <span class=\"number\">63</span> &amp; _ | <span class=\"number\">128</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> b = f, w = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">97</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">54</span>)), k = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">51</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">98</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">102</span>)), x = <span class=\"number\">0</span>; x &lt; g.<span class=\"property\">length</span>; x++)</span><br><span class=\"line\">    b = <span class=\"title function_\">n</span>(b += g[x], w);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> b = <span class=\"title function_\">n</span>(b, k),</span><br><span class=\"line\">  (b ^= m) &lt; <span class=\"number\">0</span> &amp;&amp; (b = <span class=\"number\">2147483648</span> + (<span class=\"number\">2147483647</span> &amp; b)),</span><br><span class=\"line\">  <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>((b %= <span class=\"number\">1e6</span>).<span class=\"title function_\">toString</span>(), <span class=\"string\">&quot;.&quot;</span>).<span class=\"title function_\">concat</span>(b ^ f)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> query = <span class=\"string\">&quot;abandon&quot;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">b</span>(query))</span><br></pre></td></tr></table></figure>\n\n<p><code>r</code><code>r</code><code>r</code><code>window[d]</code> 320305.131321201null</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095453.png\" alt=\"20240222095453\"></p>\n<p><code>d</code><code>gtk</code> Node.js  JS <code>window[]</code> Web API<code>320305.131321201</code><code>n</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095459.png\" alt=\"20240222095459\"></p>\n<p><code>n</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095511.png\" alt=\"20240222095511\"></p>\n<p><code>n</code> JS <code>103339.356506</code> Network <code>sign</code></p>\n<p><code>query</code><code>/v2transapi</code> payload</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * function to generate sign</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">n = <span class=\"keyword\">function</span> (<span class=\"params\">t, e</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> n = <span class=\"number\">0</span>; n &lt; e.<span class=\"property\">length</span> - <span class=\"number\">2</span>; n += <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> r = e.<span class=\"title function_\">charAt</span>(n + <span class=\"number\">2</span>);</span><br><span class=\"line\">      r = <span class=\"string\">&quot;a&quot;</span> &lt;= r ? r.<span class=\"title function_\">charCodeAt</span>(<span class=\"number\">0</span>) - <span class=\"number\">87</span> : <span class=\"title class_\">Number</span>(r),</span><br><span class=\"line\">      r = <span class=\"string\">&quot;+&quot;</span> === e.<span class=\"title function_\">charAt</span>(n + <span class=\"number\">1</span>) ? t &gt;&gt;&gt; r : t &lt;&lt; r,</span><br><span class=\"line\">      t = <span class=\"string\">&quot;+&quot;</span> === e.<span class=\"title function_\">charAt</span>(n) ? t + r &amp; <span class=\"number\">4294967295</span> : t ^ r</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">b = <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o, i = t.<span class=\"title function_\">match</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> === i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = t.<span class=\"property\">length</span>;</span><br><span class=\"line\">    a &gt; <span class=\"number\">30</span> &amp;&amp; (t = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(a / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(-<span class=\"number\">10</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = t.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/</span>), c = <span class=\"number\">0</span>, u = s.<span class=\"property\">length</span>, l = []; c &lt; u; c++)</span><br><span class=\"line\">      <span class=\"string\">&quot;&quot;</span> !== s[c] &amp;&amp; l.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(l, <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(t))</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t)</span><br><span class=\"line\">      &#125;(o = s[c].<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>)) || <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;undefined&quot;</span> != <span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> &amp;&amp; <span class=\"literal\">null</span> != t[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>] || <span class=\"literal\">null</span> != t[<span class=\"string\">&quot;@@iterator&quot;</span>])</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t)</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\">t, n</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (<span class=\"string\">&quot;string&quot;</span> == <span class=\"keyword\">typeof</span> t)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t, n);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> r = <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">toString</span>.<span class=\"title function_\">call</span>(t).<span class=\"title function_\">slice</span>(<span class=\"number\">8</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">&quot;Object&quot;</span> === r &amp;&amp; t.<span class=\"property\">constructor</span> &amp;&amp; (r = t.<span class=\"property\">constructor</span>.<span class=\"property\">name</span>),</span><br><span class=\"line\">          <span class=\"string\">&quot;Map&quot;</span> === r || <span class=\"string\">&quot;Set&quot;</span> === r ? <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t) : <span class=\"string\">&quot;Arguments&quot;</span> === r || <span class=\"regexp\">/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/</span>.<span class=\"title function_\">test</span>(r) ? <span class=\"title function_\">e</span>(t, n) : <span class=\"keyword\">void</span> <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&quot;Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>)</span><br><span class=\"line\">      &#125;()),</span><br><span class=\"line\">      c !== u - <span class=\"number\">1</span> &amp;&amp; l.<span class=\"title function_\">push</span>(i[c]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> p = l.<span class=\"property\">length</span>;</span><br><span class=\"line\">    p &gt; <span class=\"number\">30</span> &amp;&amp; (t = l.<span class=\"title function_\">slice</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) + <span class=\"number\">5</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(-<span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> d = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">103</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">116</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">107</span>)), h = (r = <span class=\"string\">&quot;320305.131321201&quot;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>), f = <span class=\"title class_\">Number</span>(h[<span class=\"number\">0</span>]) || <span class=\"number\">0</span>, m = <span class=\"title class_\">Number</span>(h[<span class=\"number\">1</span>]) || <span class=\"number\">0</span>, g = [], y = <span class=\"number\">0</span>, v = <span class=\"number\">0</span>; v &lt; t.<span class=\"property\">length</span>; v++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _ = t.<span class=\"title function_\">charCodeAt</span>(v);</span><br><span class=\"line\">    _ &lt; <span class=\"number\">128</span> ? g[y++] = _ : (_ &lt; <span class=\"number\">2048</span> ? g[y++] = _ &gt;&gt; <span class=\"number\">6</span> | <span class=\"number\">192</span> : (<span class=\"number\">55296</span> == (<span class=\"number\">64512</span> &amp; _) &amp;&amp; v + <span class=\"number\">1</span> &lt; t.<span class=\"property\">length</span> &amp;&amp; <span class=\"number\">56320</span> == (<span class=\"number\">64512</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(v + <span class=\"number\">1</span>)) ? (_ = <span class=\"number\">65536</span> + ((<span class=\"number\">1023</span> &amp; _) &lt;&lt; <span class=\"number\">10</span>) + (<span class=\"number\">1023</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(++v)),</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">18</span> | <span class=\"number\">240</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">12</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>) : g[y++] = _ &gt;&gt; <span class=\"number\">12</span> | <span class=\"number\">224</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">6</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>),</span><br><span class=\"line\">    g[y++] = <span class=\"number\">63</span> &amp; _ | <span class=\"number\">128</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> b = f, w = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">97</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">54</span>)), k = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">51</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">98</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">102</span>)), x = <span class=\"number\">0</span>; x &lt; g.<span class=\"property\">length</span>; x++)</span><br><span class=\"line\">    b = <span class=\"title function_\">n</span>(b += g[x], w);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> b = <span class=\"title function_\">n</span>(b, k),</span><br><span class=\"line\">  (b ^= m) &lt; <span class=\"number\">0</span> &amp;&amp; (b = <span class=\"number\">2147483648</span> + (<span class=\"number\">2147483647</span> &amp; b)),</span><br><span class=\"line\">  <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>((b %= <span class=\"number\">1e6</span>).<span class=\"title function_\">toString</span>(), <span class=\"string\">&quot;.&quot;</span>).<span class=\"title function_\">concat</span>(b ^ f)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * test</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> query = <span class=\"string\">&quot;abandon&quot;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`from=en&amp;to=zh&amp;query=<span class=\"subst\">$&#123;query&#125;</span>&amp;simple_means_flag=3&amp;sign=<span class=\"subst\">$&#123;b(query)&#125;</span>&amp;token=14025658070b41f40739347cef0ec62a&amp;domain=common&amp;ts=1708512893507`</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>/passport/web/user/login</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># GET </span><br><span class=\"line\">aid: 2608</span><br><span class=\"line\">account_sdk_source: web</span><br><span class=\"line\">sdk_version: 2.2.6</span><br><span class=\"line\">verifyFp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79</span><br><span class=\"line\">fp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79</span><br><span class=\"line\">sign: d9116c9cae3fcdf848f1288e1850eb2a489a4e23ece930692912a8bc155d89ec</span><br><span class=\"line\">qs: 6466666a706b715a76616e5a766a7077666029646c612963752976616e5a736077766c6a6b297360776c637c4375</span><br><span class=\"line\"></span><br><span class=\"line\"># POST </span><br><span class=\"line\">mix_mode: 1</span><br><span class=\"line\">account: 34363d3336373d3d343c3c</span><br><span class=\"line\">password: 343736343736343736</span><br><span class=\"line\">fixed_mix_mode: 1</span><br></pre></td></tr></table></figure>\n\n<p> POST GET <code>sign</code><code>account</code><code>password</code> GET <code>sign</code></p>\n<p> POST <code>sign</code><code>account</code><code>password</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * raw data</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> account = <span class=\"string\">&#x27;00000000000&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> password = <span class=\"string\">&#x27;1q2w3e&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * handle account and password</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> T = <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> t, n = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">void</span> <span class=\"number\">0</span> === e)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  t = <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> t, n = e.<span class=\"title function_\">toString</span>(), r = [], a = <span class=\"number\">0</span>; a &lt; n.<span class=\"property\">length</span>; a++)</span><br><span class=\"line\">      <span class=\"number\">0</span> &lt;= (t = n.<span class=\"title function_\">charCodeAt</span>(a)) &amp;&amp; t &lt;= <span class=\"number\">127</span> ? r.<span class=\"title function_\">push</span>(t) : <span class=\"number\">128</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">2047</span> ? (r.<span class=\"title function_\">push</span>(<span class=\"number\">192</span> | <span class=\"number\">31</span> &amp; t &gt;&gt; <span class=\"number\">6</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t)) : (<span class=\"number\">2048</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">55295</span> || <span class=\"number\">57344</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">65535</span>) &amp;&amp; (r.<span class=\"title function_\">push</span>(<span class=\"number\">224</span> | <span class=\"number\">15</span> &amp; t &gt;&gt; <span class=\"number\">12</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t &gt;&gt; <span class=\"number\">6</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t));</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; r.<span class=\"property\">length</span>; i++)</span><br><span class=\"line\">      r[i] &amp;= <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br><span class=\"line\">  &#125;(e);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> r = <span class=\"number\">0</span>, a = t.<span class=\"property\">length</span>; r &lt; a; ++r)</span><br><span class=\"line\">    n.<span class=\"title function_\">push</span>((<span class=\"number\">5</span> ^ t[r]).<span class=\"title function_\">toString</span>(<span class=\"number\">16</span>));</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * obtain the post form</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> postForm = <span class=\"string\">`mix_mode=1&amp;account=<span class=\"subst\">$&#123;T(account)&#125;</span>&amp;password=<span class=\"subst\">$&#123;T(password)&#125;</span>&amp;fixed_mix_mode=1`</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(postForm)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HGAME2024-2048-16\"><a href=\"#HGAME2024-2048-16\" class=\"headerlink\" title=\"HGAME2024 2048*16\"></a>HGAME2024 2048*16</h3><p>BaiMeow HGAME2024 Week1  F12JS </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://lizh.gitbook.io/knowledge/research/javascript-jia-mi-hun-xiao#hun-xiao-cha-jian\">Javascript</a>by </li>\n<li><a href=\"https://ek1ng.com/jsobuscation.html\">js</a>by ek1ng</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"Obfuscation-\"><a href=\"#Obfuscation-\" class=\"headerlink\" title=\"Obfuscation \"></a>Obfuscation </h2><p>JavaScript Obfuscation JS  JS </p>\n<p> JS  </p>\n<p>JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JS JS   JS  HTTP JS Minification</p>\n<p> JS </p>\n<ul>\n<li> JS </li>\n<li> JS </li>\n<li> JS </li>\n<li></li>\n</ul>\n<p> JS  JS  JS JS  JS </p>\n<blockquote>\n<p> JS  JS </p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>&#x2F;</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">function calculateArea(radius) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">  return Math.PI * radius * radius;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(calculateArea(5));</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">_0x2d8f05</span>(<span class=\"params\">_0x4b083b</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span> * _0x4b083b * _0x4b083b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">_0x2d8f05</span>(<span class=\"number\">5</span>));</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// console.log(&quot;Hello, world!&quot;);</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;\\x48\\x65\\x6c\\x6c\\x6f\\x2c\\x20\\x77\\x6f\\x72\\x6c\\x64\\x21&quot;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (a === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (b === <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    c = a + b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a - b);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = a + b;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">let a = 1;</span></span><br><span class=\"line\"><span class=\"comment\">let b = 2;</span></span><br><span class=\"line\"><span class=\"comment\">let c = a + b;</span></span><br><span class=\"line\"><span class=\"comment\">console.log(c);</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = a - (-b);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><p> debugger</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"keyword\">new</span> <span class=\"title class_\">RegExp</span>(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">c.<span class=\"property\">toString</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">setInterval</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">debugger</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> startTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\"><span class=\"keyword\">debugger</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> endTime = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> isDev = endTime - startTime &gt; <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> stack = [];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (isDev) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">        stack.<span class=\"title function_\">push</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(stack.<span class=\"property\">length</span>, <span class=\"variable language_\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">eval</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    [native code]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span> = <span class=\"keyword\">function</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;[native code]&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span> = <span class=\"keyword\">function</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">eval</span>.<span class=\"property\">toString</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`function eval() &#123;[native code]&#125;`</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">hijacked</span>(<span class=\"params\">fun</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;prototype&quot;</span> <span class=\"keyword\">in</span> fun || fun.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"regexp\">/\\n|\\s/g</span>, <span class=\"string\">&quot;&quot;</span>) != <span class=\"string\">&quot;function&quot;</span> + fun.<span class=\"property\">name</span> + <span class=\"string\">&quot;() &#123;[nativecode]&#125;&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web  <a href=\"https://github.com/mishoo/UglifyJS\">UglifyJS</a>  <a href=\"https://github.com/javascript-obfuscator/javascript-obfuscator\">JavaScript Obfuscator</a></p>\n<p> Vite  vite UglifyJS UglifyJS</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vite-plugin-uglify --save-dev</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> vue <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">VitePluginUglify</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite-plugin-uglify&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"title function_\">vue</span>(),</span><br><span class=\"line\">    <span class=\"title class_\">VitePluginUglify</span>()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><code>VitePluginUglify</code><code>plugins</code>Vite <code>vite-plugin-uglify</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://javascriptobfuscator.dev/\">Free JavaScript Obfuscator</a> JS  <a href=\"https://github.com/javascript-obfuscator/javascript-obfuscator\">JavaScript Obfuscator</a> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">n</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> fib = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">    fib[i] = fib[i - <span class=\"number\">1</span>] + fib[i - <span class=\"number\">2</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fib;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// the first 10 numbers in the Fibonacci sequence</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fibonacci</span>(<span class=\"number\">10</span>));</span><br></pre></td></tr></table></figure>\n\n<p> 10 </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _0x323128=_0x5512;(<span class=\"keyword\">function</span>(<span class=\"params\">_0x589643,_0x5459af</span>)&#123;<span class=\"keyword\">const</span> _0x1b79b8=_0x5512,_0x3e96ed=<span class=\"title function_\">_0x589643</span>();<span class=\"keyword\">while</span>(!![])&#123;<span class=\"keyword\">try</span>&#123;<span class=\"keyword\">const</span> _0x1fb1b3=-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f1</span>))/<span class=\"number\">0x1</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ea</span>))/<span class=\"number\">0x2</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ec</span>))/<span class=\"number\">0x3</span>*(<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f3</span>))/<span class=\"number\">0x4</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ed</span>))/<span class=\"number\">0x5</span>*(<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f2</span>))/<span class=\"number\">0x6</span>)+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1e8</span>))/<span class=\"number\">0x7</span>+<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1e9</span>))/<span class=\"number\">0x8</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f4</span>))/<span class=\"number\">0x9</span>)+<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1f0</span>))/<span class=\"number\">0xa</span>+-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ef</span>))/<span class=\"number\">0xb</span>*(-<span class=\"built_in\">parseInt</span>(<span class=\"title function_\">_0x1b79b8</span>(<span class=\"number\">0x1ee</span>))/<span class=\"number\">0xc</span>);<span class=\"keyword\">if</span>(_0x1fb1b3===_0x5459af)<span class=\"keyword\">break</span>;<span class=\"keyword\">else</span> _0x3e96ed[<span class=\"string\">&#x27;push&#x27;</span>](_0x3e96ed[<span class=\"string\">&#x27;shift&#x27;</span>]());&#125;<span class=\"keyword\">catch</span>(_0x56184c)&#123;_0x3e96ed[<span class=\"string\">&#x27;push&#x27;</span>](_0x3e96ed[<span class=\"string\">&#x27;shift&#x27;</span>]());&#125;&#125;&#125;(_0x138e,<span class=\"number\">0xdf35a</span>));<span class=\"keyword\">function</span> <span class=\"title function_\">_0x138e</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">const</span> _0x3a0863=[<span class=\"string\">&#x27;354072hRaVAZ&#x27;</span>,<span class=\"string\">&#x27;9mNckCh&#x27;</span>,<span class=\"string\">&#x27;1622341lDdscp&#x27;</span>,<span class=\"string\">&#x27;2787864kenYBK&#x27;</span>,<span class=\"string\">&#x27;546362IExhCV&#x27;</span>,<span class=\"string\">&#x27;log&#x27;</span>,<span class=\"string\">&#x27;3fofuVm&#x27;</span>,<span class=\"string\">&#x27;1946005vlrFyq&#x27;</span>,<span class=\"string\">&#x27;516IsqKpc&#x27;</span>,<span class=\"string\">&#x27;725241tPbpzZ&#x27;</span>,<span class=\"string\">&#x27;316200mzqtLe&#x27;</span>,<span class=\"string\">&#x27;1mgkmrs&#x27;</span>,<span class=\"string\">&#x27;24Zwposp&#x27;</span>];_0x138e=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">return</span> _0x3a0863;&#125;;<span class=\"keyword\">return</span> <span class=\"title function_\">_0x138e</span>();&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">_0x1b3125</span>)&#123;<span class=\"keyword\">let</span> _0x9e88df=[<span class=\"number\">0x0</span>,<span class=\"number\">0x1</span>];<span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> _0x406b50=<span class=\"number\">0x2</span>;_0x406b50&lt;=_0x1b3125;_0x406b50++)&#123;_0x9e88df[_0x406b50]=_0x9e88df[_0x406b50-<span class=\"number\">0x1</span>]+_0x9e88df[_0x406b50-<span class=\"number\">0x2</span>];&#125;<span class=\"keyword\">return</span> _0x9e88df;&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">_0x5512</span>(<span class=\"params\">_0x2d5465,_0x1d0a2f</span>)&#123;<span class=\"keyword\">const</span> _0x138ec4=<span class=\"title function_\">_0x138e</span>();<span class=\"keyword\">return</span> _0x5512=<span class=\"keyword\">function</span>(<span class=\"params\">_0x5512ef,_0x5e1f2e</span>)&#123;_0x5512ef=_0x5512ef-<span class=\"number\">0x1e8</span>;<span class=\"keyword\">let</span> _0x4be64a=_0x138ec4[_0x5512ef];<span class=\"keyword\">return</span> _0x4be64a;&#125;,<span class=\"title function_\">_0x5512</span>(_0x2d5465,_0x1d0a2f);&#125;<span class=\"variable language_\">console</span>[<span class=\"title function_\">_0x323128</span>(<span class=\"number\">0x1eb</span>)](<span class=\"title function_\">fibonacci</span>(<span class=\"number\">0xa</span>));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Deobfuscator-\"><a href=\"#Deobfuscator-\" class=\"headerlink\" title=\"Deobfuscator \"></a>Deobfuscator </h2><p>JS Deobfuscator Deobfuscator Obfuscation  Deobfuscator </p>\n<p> JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JS </p>\n<ul>\n<li><a href=\"https://seosniffer.com/javascript-deobfuscator\">javascript-deobfuscator</a></li>\n<li><a href=\"https://dev-coco.github.io/Online-Tools/JavaScript-Deobfuscator.html\">Raz1ner JavaScript Deobfuscator</a></li>\n<li><a href=\"https://deobfuscate.relative.im/\">synchrony deobuscator</a></li>\n<li><a href=\"https://beautifier.io/\">js-beauty</a></li>\n</ul>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fibonacci</span>(<span class=\"params\">jayandre</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ramonita = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> ancel = <span class=\"number\">2</span>; ancel &lt;= jayandre; ancel++) &#123;</span><br><span class=\"line\">    ramonita[ancel] = ramonita[ancel - <span class=\"number\">1</span>] + ramonita[ancel - <span class=\"number\">2</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ramonita;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fibonacci</span>(<span class=\"number\">10</span>));</span><br></pre></td></tr></table></figure>\n\n<p> JS </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>chrome</p>\n<p>SourceNetworkNetwork  API API  JS Source  JS </p>\n<p> Source <code>ctrl+shift+p</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095405.png\" alt=\"20240222095405\"></p>\n<p>Override JS <code>ctrl+s</code> JS </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095414.png\" alt=\"20240222095414\"></p>\n<p></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"&#x2F;\"></a>&#x2F;</h3><p> JS </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Network <code>/v2transapi</code> POST  payload  <code>query</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095423.png\" alt=\"20240222095423\"></p>\n<p><code>sign</code><code>query</code><code>transtype</code><code>realtime</code><code>enter</code><code>sign</code></p>\n<p><code>sign</code> Sources <code>sign</code><code>sign</code><code>sign:</code><code>sign=</code></p>\n<p> Sources <code>sign:</code> index.36217dc5.js  6 <code>sign:</code> 25800 <code>sign: b(e);</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095432.png\" alt=\"20240222095432\"></p>\n<p> t </p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095443.png\" alt=\"20240222095443\"></p>\n<p> main.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">b = <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o, i = t.<span class=\"title function_\">match</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> === i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = t.<span class=\"property\">length</span>;</span><br><span class=\"line\">    a &gt; <span class=\"number\">30</span> &amp;&amp; (t = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(a / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(-<span class=\"number\">10</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = t.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/</span>), c = <span class=\"number\">0</span>, u = s.<span class=\"property\">length</span>, l = []; c &lt; u; c++)</span><br><span class=\"line\">      <span class=\"string\">&quot;&quot;</span> !== s[c] &amp;&amp; l.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(l, <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(t))</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t)</span><br><span class=\"line\">      &#125;(o = s[c].<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>)) || <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;undefined&quot;</span> != <span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> &amp;&amp; <span class=\"literal\">null</span> != t[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>] || <span class=\"literal\">null</span> != t[<span class=\"string\">&quot;@@iterator&quot;</span>])</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t)</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\">t, n</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (<span class=\"string\">&quot;string&quot;</span> == <span class=\"keyword\">typeof</span> t)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t, n);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> r = <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">toString</span>.<span class=\"title function_\">call</span>(t).<span class=\"title function_\">slice</span>(<span class=\"number\">8</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">&quot;Object&quot;</span> === r &amp;&amp; t.<span class=\"property\">constructor</span> &amp;&amp; (r = t.<span class=\"property\">constructor</span>.<span class=\"property\">name</span>),</span><br><span class=\"line\">          <span class=\"string\">&quot;Map&quot;</span> === r || <span class=\"string\">&quot;Set&quot;</span> === r ? <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t) : <span class=\"string\">&quot;Arguments&quot;</span> === r || <span class=\"regexp\">/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/</span>.<span class=\"title function_\">test</span>(r) ? <span class=\"title function_\">e</span>(t, n) : <span class=\"keyword\">void</span> <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&quot;Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>)</span><br><span class=\"line\">      &#125;()),</span><br><span class=\"line\">      c !== u - <span class=\"number\">1</span> &amp;&amp; l.<span class=\"title function_\">push</span>(i[c]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> p = l.<span class=\"property\">length</span>;</span><br><span class=\"line\">    p &gt; <span class=\"number\">30</span> &amp;&amp; (t = l.<span class=\"title function_\">slice</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) + <span class=\"number\">5</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(-<span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> d = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">103</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">116</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">107</span>)), h = (<span class=\"literal\">null</span> !== r ? r : (r = <span class=\"variable language_\">window</span>[d] || <span class=\"string\">&quot;&quot;</span>) || <span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>), f = <span class=\"title class_\">Number</span>(h[<span class=\"number\">0</span>]) || <span class=\"number\">0</span>, m = <span class=\"title class_\">Number</span>(h[<span class=\"number\">1</span>]) || <span class=\"number\">0</span>, g = [], y = <span class=\"number\">0</span>, v = <span class=\"number\">0</span>; v &lt; t.<span class=\"property\">length</span>; v++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _ = t.<span class=\"title function_\">charCodeAt</span>(v);</span><br><span class=\"line\">    _ &lt; <span class=\"number\">128</span> ? g[y++] = _ : (_ &lt; <span class=\"number\">2048</span> ? g[y++] = _ &gt;&gt; <span class=\"number\">6</span> | <span class=\"number\">192</span> : (<span class=\"number\">55296</span> == (<span class=\"number\">64512</span> &amp; _) &amp;&amp; v + <span class=\"number\">1</span> &lt; t.<span class=\"property\">length</span> &amp;&amp; <span class=\"number\">56320</span> == (<span class=\"number\">64512</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(v + <span class=\"number\">1</span>)) ? (_ = <span class=\"number\">65536</span> + ((<span class=\"number\">1023</span> &amp; _) &lt;&lt; <span class=\"number\">10</span>) + (<span class=\"number\">1023</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(++v)),</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">18</span> | <span class=\"number\">240</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">12</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>) : g[y++] = _ &gt;&gt; <span class=\"number\">12</span> | <span class=\"number\">224</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">6</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>),</span><br><span class=\"line\">    g[y++] = <span class=\"number\">63</span> &amp; _ | <span class=\"number\">128</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> b = f, w = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">97</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">54</span>)), k = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">51</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">98</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">102</span>)), x = <span class=\"number\">0</span>; x &lt; g.<span class=\"property\">length</span>; x++)</span><br><span class=\"line\">    b = <span class=\"title function_\">n</span>(b += g[x], w);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> b = <span class=\"title function_\">n</span>(b, k),</span><br><span class=\"line\">  (b ^= m) &lt; <span class=\"number\">0</span> &amp;&amp; (b = <span class=\"number\">2147483648</span> + (<span class=\"number\">2147483647</span> &amp; b)),</span><br><span class=\"line\">  <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>((b %= <span class=\"number\">1e6</span>).<span class=\"title function_\">toString</span>(), <span class=\"string\">&quot;.&quot;</span>).<span class=\"title function_\">concat</span>(b ^ f)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> query = <span class=\"string\">&quot;abandon&quot;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">b</span>(query))</span><br></pre></td></tr></table></figure>\n\n<p><code>r</code><code>r</code><code>r</code><code>window[d]</code> 320305.131321201null</p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095453.png\" alt=\"20240222095453\"></p>\n<p><code>d</code><code>gtk</code> Node.js  JS <code>window[]</code> Web API<code>320305.131321201</code><code>n</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095459.png\" alt=\"20240222095459\"></p>\n<p><code>n</code></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240222095511.png\" alt=\"20240222095511\"></p>\n<p><code>n</code> JS <code>103339.356506</code> Network <code>sign</code></p>\n<p><code>query</code><code>/v2transapi</code> payload</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * function to generate sign</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">n = <span class=\"keyword\">function</span> (<span class=\"params\">t, e</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> n = <span class=\"number\">0</span>; n &lt; e.<span class=\"property\">length</span> - <span class=\"number\">2</span>; n += <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> r = e.<span class=\"title function_\">charAt</span>(n + <span class=\"number\">2</span>);</span><br><span class=\"line\">      r = <span class=\"string\">&quot;a&quot;</span> &lt;= r ? r.<span class=\"title function_\">charCodeAt</span>(<span class=\"number\">0</span>) - <span class=\"number\">87</span> : <span class=\"title class_\">Number</span>(r),</span><br><span class=\"line\">      r = <span class=\"string\">&quot;+&quot;</span> === e.<span class=\"title function_\">charAt</span>(n + <span class=\"number\">1</span>) ? t &gt;&gt;&gt; r : t &lt;&lt; r,</span><br><span class=\"line\">      t = <span class=\"string\">&quot;+&quot;</span> === e.<span class=\"title function_\">charAt</span>(n) ? t + r &amp; <span class=\"number\">4294967295</span> : t ^ r</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">b = <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> o, i = t.<span class=\"title function_\">match</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> === i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = t.<span class=\"property\">length</span>;</span><br><span class=\"line\">    a &gt; <span class=\"number\">30</span> &amp;&amp; (t = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(a / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"number\">10</span>)).<span class=\"title function_\">concat</span>(t.<span class=\"title function_\">substr</span>(-<span class=\"number\">10</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = t.<span class=\"title function_\">split</span>(<span class=\"regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/</span>), c = <span class=\"number\">0</span>, u = s.<span class=\"property\">length</span>, l = []; c &lt; u; c++)</span><br><span class=\"line\">      <span class=\"string\">&quot;&quot;</span> !== s[c] &amp;&amp; l.<span class=\"property\">push</span>.<span class=\"title function_\">apply</span>(l, <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title class_\">Array</span>.<span class=\"title function_\">isArray</span>(t))</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t)</span><br><span class=\"line\">      &#125;(o = s[c].<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>)) || <span class=\"keyword\">function</span>(<span class=\"params\">t</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;undefined&quot;</span> != <span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span> &amp;&amp; <span class=\"literal\">null</span> != t[<span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>] || <span class=\"literal\">null</span> != t[<span class=\"string\">&quot;@@iterator&quot;</span>])</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t)</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\">t, n</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (<span class=\"string\">&quot;string&quot;</span> == <span class=\"keyword\">typeof</span> t)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_\">e</span>(t, n);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> r = <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">toString</span>.<span class=\"title function_\">call</span>(t).<span class=\"title function_\">slice</span>(<span class=\"number\">8</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">&quot;Object&quot;</span> === r &amp;&amp; t.<span class=\"property\">constructor</span> &amp;&amp; (r = t.<span class=\"property\">constructor</span>.<span class=\"property\">name</span>),</span><br><span class=\"line\">          <span class=\"string\">&quot;Map&quot;</span> === r || <span class=\"string\">&quot;Set&quot;</span> === r ? <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(t) : <span class=\"string\">&quot;Arguments&quot;</span> === r || <span class=\"regexp\">/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/</span>.<span class=\"title function_\">test</span>(r) ? <span class=\"title function_\">e</span>(t, n) : <span class=\"keyword\">void</span> <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;(o) || <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&quot;Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>)</span><br><span class=\"line\">      &#125;()),</span><br><span class=\"line\">      c !== u - <span class=\"number\">1</span> &amp;&amp; l.<span class=\"title function_\">push</span>(i[c]);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> p = l.<span class=\"property\">length</span>;</span><br><span class=\"line\">    p &gt; <span class=\"number\">30</span> &amp;&amp; (t = l.<span class=\"title function_\">slice</span>(<span class=\"number\">0</span>, <span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) - <span class=\"number\">5</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(p / <span class=\"number\">2</span>) + <span class=\"number\">5</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>) + l.<span class=\"title function_\">slice</span>(-<span class=\"number\">10</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> d = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">103</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">116</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">107</span>)), h = (r = <span class=\"string\">&quot;320305.131321201&quot;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>), f = <span class=\"title class_\">Number</span>(h[<span class=\"number\">0</span>]) || <span class=\"number\">0</span>, m = <span class=\"title class_\">Number</span>(h[<span class=\"number\">1</span>]) || <span class=\"number\">0</span>, g = [], y = <span class=\"number\">0</span>, v = <span class=\"number\">0</span>; v &lt; t.<span class=\"property\">length</span>; v++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _ = t.<span class=\"title function_\">charCodeAt</span>(v);</span><br><span class=\"line\">    _ &lt; <span class=\"number\">128</span> ? g[y++] = _ : (_ &lt; <span class=\"number\">2048</span> ? g[y++] = _ &gt;&gt; <span class=\"number\">6</span> | <span class=\"number\">192</span> : (<span class=\"number\">55296</span> == (<span class=\"number\">64512</span> &amp; _) &amp;&amp; v + <span class=\"number\">1</span> &lt; t.<span class=\"property\">length</span> &amp;&amp; <span class=\"number\">56320</span> == (<span class=\"number\">64512</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(v + <span class=\"number\">1</span>)) ? (_ = <span class=\"number\">65536</span> + ((<span class=\"number\">1023</span> &amp; _) &lt;&lt; <span class=\"number\">10</span>) + (<span class=\"number\">1023</span> &amp; t.<span class=\"title function_\">charCodeAt</span>(++v)),</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">18</span> | <span class=\"number\">240</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">12</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>) : g[y++] = _ &gt;&gt; <span class=\"number\">12</span> | <span class=\"number\">224</span>,</span><br><span class=\"line\">    g[y++] = _ &gt;&gt; <span class=\"number\">6</span> &amp; <span class=\"number\">63</span> | <span class=\"number\">128</span>),</span><br><span class=\"line\">    g[y++] = <span class=\"number\">63</span> &amp; _ | <span class=\"number\">128</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> b = f, w = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">97</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">54</span>)), k = <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">51</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">94</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">98</span>)) + <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">43</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">45</span>)).<span class=\"title function_\">concat</span>(<span class=\"title class_\">String</span>.<span class=\"title function_\">fromCharCode</span>(<span class=\"number\">102</span>)), x = <span class=\"number\">0</span>; x &lt; g.<span class=\"property\">length</span>; x++)</span><br><span class=\"line\">    b = <span class=\"title function_\">n</span>(b += g[x], w);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> b = <span class=\"title function_\">n</span>(b, k),</span><br><span class=\"line\">  (b ^= m) &lt; <span class=\"number\">0</span> &amp;&amp; (b = <span class=\"number\">2147483648</span> + (<span class=\"number\">2147483647</span> &amp; b)),</span><br><span class=\"line\">  <span class=\"string\">&quot;&quot;</span>.<span class=\"title function_\">concat</span>((b %= <span class=\"number\">1e6</span>).<span class=\"title function_\">toString</span>(), <span class=\"string\">&quot;.&quot;</span>).<span class=\"title function_\">concat</span>(b ^ f)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * test</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> query = <span class=\"string\">&quot;abandon&quot;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`from=en&amp;to=zh&amp;query=<span class=\"subst\">$&#123;query&#125;</span>&amp;simple_means_flag=3&amp;sign=<span class=\"subst\">$&#123;b(query)&#125;</span>&amp;token=14025658070b41f40739347cef0ec62a&amp;domain=common&amp;ts=1708512893507`</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>/passport/web/user/login</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># GET </span><br><span class=\"line\">aid: 2608</span><br><span class=\"line\">account_sdk_source: web</span><br><span class=\"line\">sdk_version: 2.2.6</span><br><span class=\"line\">verifyFp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79</span><br><span class=\"line\">fp: verify_lsom0d3u_s6mZvQBP_pamX_41TO_81V1_VRng2UjxFI79</span><br><span class=\"line\">sign: d9116c9cae3fcdf848f1288e1850eb2a489a4e23ece930692912a8bc155d89ec</span><br><span class=\"line\">qs: 6466666a706b715a76616e5a766a7077666029646c612963752976616e5a736077766c6a6b297360776c637c4375</span><br><span class=\"line\"></span><br><span class=\"line\"># POST </span><br><span class=\"line\">mix_mode: 1</span><br><span class=\"line\">account: 34363d3336373d3d343c3c</span><br><span class=\"line\">password: 343736343736343736</span><br><span class=\"line\">fixed_mix_mode: 1</span><br></pre></td></tr></table></figure>\n\n<p> POST GET <code>sign</code><code>account</code><code>password</code> GET <code>sign</code></p>\n<p> POST <code>sign</code><code>account</code><code>password</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * raw data</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> account = <span class=\"string\">&#x27;00000000000&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> password = <span class=\"string\">&#x27;1q2w3e&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * handle account and password</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> T = <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> t, n = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">void</span> <span class=\"number\">0</span> === e)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  t = <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> t, n = e.<span class=\"title function_\">toString</span>(), r = [], a = <span class=\"number\">0</span>; a &lt; n.<span class=\"property\">length</span>; a++)</span><br><span class=\"line\">      <span class=\"number\">0</span> &lt;= (t = n.<span class=\"title function_\">charCodeAt</span>(a)) &amp;&amp; t &lt;= <span class=\"number\">127</span> ? r.<span class=\"title function_\">push</span>(t) : <span class=\"number\">128</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">2047</span> ? (r.<span class=\"title function_\">push</span>(<span class=\"number\">192</span> | <span class=\"number\">31</span> &amp; t &gt;&gt; <span class=\"number\">6</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t)) : (<span class=\"number\">2048</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">55295</span> || <span class=\"number\">57344</span> &lt;= t &amp;&amp; t &lt;= <span class=\"number\">65535</span>) &amp;&amp; (r.<span class=\"title function_\">push</span>(<span class=\"number\">224</span> | <span class=\"number\">15</span> &amp; t &gt;&gt; <span class=\"number\">12</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t &gt;&gt; <span class=\"number\">6</span>),</span><br><span class=\"line\">      r.<span class=\"title function_\">push</span>(<span class=\"number\">128</span> | <span class=\"number\">63</span> &amp; t));</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; r.<span class=\"property\">length</span>; i++)</span><br><span class=\"line\">      r[i] &amp;= <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br><span class=\"line\">  &#125;(e);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> r = <span class=\"number\">0</span>, a = t.<span class=\"property\">length</span>; r &lt; a; ++r)</span><br><span class=\"line\">    n.<span class=\"title function_\">push</span>((<span class=\"number\">5</span> ^ t[r]).<span class=\"title function_\">toString</span>(<span class=\"number\">16</span>));</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * obtain the post form</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> postForm = <span class=\"string\">`mix_mode=1&amp;account=<span class=\"subst\">$&#123;T(account)&#125;</span>&amp;password=<span class=\"subst\">$&#123;T(password)&#125;</span>&amp;fixed_mix_mode=1`</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(postForm)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HGAME2024-2048-16\"><a href=\"#HGAME2024-2048-16\" class=\"headerlink\" title=\"HGAME2024 2048*16\"></a>HGAME2024 2048*16</h3><p>BaiMeow HGAME2024 Week1  F12JS </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://lizh.gitbook.io/knowledge/research/javascript-jia-mi-hun-xiao#hun-xiao-cha-jian\">Javascript</a>by </li>\n<li><a href=\"https://ek1ng.com/jsobuscation.html\">js</a>by ek1ng</li>\n</ul>\n"},{"title":"JavaScript ","date":"2024-02-13T16:00:00.000Z","author":"ma5hr00m","_content":"\n [JavaScript](#)  [JavaScript](#)\n\n JS \n\n## JS \n\n1994Netscape Navigator v0.9\n\n [Brendan Eich](https://brendaneich.com/) \n\nobject-oriented programmingBrendan   JS object JS \n\n> \n\nBrendan  JS class\n\n Java  class construct\n\n```Java\nclass Dog {\n    public String name;\n    \n    public Dog(String name) {\n        this.name = name;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Dog dog = new Dog(\"Rover\");\n        System.out.println(dog.name); // Rover\n    }\n}\n```\n\nBrendam  JS `new`\n\n```JavaScript\nfunction Dog(name) {\n    this.name = name;\n}\n\nvar dog = new Dog(\"Rover\");\nconsole.log(dog.name) // Rover\n```\n\n JS  classJS \n\n Java  class \n\n```Java\nclass Animal {\n    public void eat() {\n        System.out.println(\"Animal is eating\");\n    }\n}\n\nclass Dog extends Animal {\n    public void bark() {\n        System.out.println(\"Dog is barking\");\n    }\n}\n\nclass Cat extends Animal {\n    public void meow() {\n        System.out.println(\"Cat is meowing\");\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Dog myDog = new Dog();\n        Cat myCat = new Cat();\n        \n        myDog.eat(); // Animal is eating\n        myDog.bark(); // Dog is barking\n        myCat.eat(); // Animal is eating\n        myCat.meow(); // Cat is meowing\n    }\n}\n```\n\n`Dog``Cat``Animal``eat()``bark()``meow()`\n\nJS  classBrendan `prototype`\n\n```JavaScript\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype.bark = function() {\n    console.log(this.name)\n}\n\nvar dogA = new Dog(\"Rover\");\nvar dogB = new Dog(\"Fido\");\ndogA.bark(); // Rover\ndogB.bark(); // Fido\n```\n\n`Dog``prototype``bark()``Dog``bark()`\n\n`prototype`\n\n JS \n\n![img](https://wiki.wgpsec.org/images/js-prototype-chain-pollution/3.png)\n\n## prototype \n\n JS `prototype``__proto__`\n\n`prototype`  `new` \n\n`__proto__``prototype``var dog = new Dog()``dog.__proto__``Dog.prototype`\n\n> `dog.__proto__``Dog.prototype`\n\n JS `prototype`\n\nJS `__proto__``prototype``prototype` JS `prototype``prototype``__proto__``null`\n\nJS `__proto__` JS \n\n\n\n```JavaScript\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype = {\n  \"species\": \"dog\",\n} \n  \nvar dog = new Dog('Rover');\n\nconsole.log(dog.name); // Rover\nconsole.log(dog.species); // dog\nconsole.log(dog.age); // undefined\nconsole.log(dog.__proto__.__proto__.__proto__); // null\n\nconsole.log(dog.__proto__ === Dog.prototype) // true\nconsole.log(Dog.prototype.__proto__ === Object.prototype) // true\nconsole.log(Object.prototype.__proto__) // null\n```\n\n`dog.name`JS `dog``name``Rover`\n\n`dog.species`JS `dog.__proto__``species``dog`\n\n`dog.age`JS `__proto__``Dog.prototype.__proto__``Object.prototype``Object.prototype.__proto__``null`JS `age``undefined`\n\n`dog.__proto__.__proto__.__proto__.__proto__`JS `null`yejiu1`prototype`\n\n## constructor \n\n JS `constructor`JS `prototype``prototype``constructor`\n\n`prototype``constructor`\n\n`constructor``prototype`\n\n```JavaScript\nconsole.log(Dog.prototype.constructor === Dog); // true\n```\n\n## \n\n### class \n\n Web JS  ES6ECMAScript 2015Class\n\n JS  Brendan Eich  JS  JS  JS \n\nJS  class \n\n```JavaScript\nclass Animal {\n  constructor(name) {\n    this.name = name;\n  }\n\n  speak() {\n    console.log(this.name + ' makes a noise.');\n  }\n}\n\nlet animal = new Animal('Simba');\nanimal.speak(); // Outputs: \"Simba makes a noise.\"\n```\n\n class  JS \n\n```JavaScript\nfunction Animal(name) {\n  this.name = name;\n}\n\nAnimal.prototype.speak = function() {\n  console.log(this.name + ' makes a noise.');\n}\n\nlet animal = new Animal('Simba');\nanimal.speak(); // Outputs: \"Simba makes a noise.\"\n```\n\nclass  class \n\n### \n\nJS JS \n\n`hasOwnProperty``Object.hasOwn`\n\n`hasOwnProperty``Object.prototype``null`\n\n\n\n```JavaScript\nlet obj = {\n    prop: 'value'\n};\nconsole.log(obj.hasOwnProperty('prop')); // true\n\nlet objWithNoProto = Object.create(null);\nconsole.log(objWithNoProto.hasOwnProperty); // undefined\n```\n\n JS  JS  JS \n\n## JS \n\n> JS  phithon  [ JavaScript Prototype ](https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03)`merge`\n\nJS JS \n\n JS \n\n```JavaScript\n//  userA\nlet userA = {};\n\n//  userA  isAdmin\nuserA.isAdmin = false;\nconsole.log(userA.isAdmin); // false\n\n// \nuserA.__proto__.isAdmin = true;\nconsole.log(userA.isAdmin); // false\n\n//  userB\nlet userB = {};\n// userB  userA  isAdmin \nconsole.log(userB.isAdmin); // true\n```\n\n CTF `merge``clone``merge``merge`\n\n```JavaScript\nfunction merge(target, source) {\n  for (let key in source) {\n      if (key in source && key in target) {\n          merge(target[key], source[key])\n      } else {\n          target[key] = source[key]\n      }\n  }\n}\n```\n\n JSON `o2``o1``target[key] = source[key]``Object.prototype`\n\n```JavaScript\nlet o1 = {};\nlet o2 = JSON.parse('{\"a\": 1, \"__proto__\": {\"b\": 2}}');\n\nmerge(o1, o2); // 1 2\nconsole.log(o1.a, o1.b);\n\no3 = {};\nconsole.log(o3.b); // 2\nconsole.log(Object.prototype); // [Object: null prototype] { b: 2 }\n```\n\n`o2``let o2 = {a: 1, \"__proto__\": {b: 2}}`\n\n## \n\n JS  JS \n\nJS \n\nPrototype Chain Object  `__proto__` `dog.__proto__.__proto__.__proto__`\n\n## \n\n- [Javascript](https://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html)by \n- [ JavaScript ](https://blog.huli.tw/2017/08/27/the-javascripts-prototype-chain/)by Huli's Blog\n- [](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)by MDN Web Docs\n- [ JavaScript Prototype ](https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03)by phithon","source":"_posts/js-prototype-chain.md","raw":"---\ntitle: JavaScript \ndate: 2024/2/14\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n [JavaScript](#)  [JavaScript](#)\n\n JS \n\n## JS \n\n1994Netscape Navigator v0.9\n\n [Brendan Eich](https://brendaneich.com/) \n\nobject-oriented programmingBrendan   JS object JS \n\n> \n\nBrendan  JS class\n\n Java  class construct\n\n```Java\nclass Dog {\n    public String name;\n    \n    public Dog(String name) {\n        this.name = name;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Dog dog = new Dog(\"Rover\");\n        System.out.println(dog.name); // Rover\n    }\n}\n```\n\nBrendam  JS `new`\n\n```JavaScript\nfunction Dog(name) {\n    this.name = name;\n}\n\nvar dog = new Dog(\"Rover\");\nconsole.log(dog.name) // Rover\n```\n\n JS  classJS \n\n Java  class \n\n```Java\nclass Animal {\n    public void eat() {\n        System.out.println(\"Animal is eating\");\n    }\n}\n\nclass Dog extends Animal {\n    public void bark() {\n        System.out.println(\"Dog is barking\");\n    }\n}\n\nclass Cat extends Animal {\n    public void meow() {\n        System.out.println(\"Cat is meowing\");\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Dog myDog = new Dog();\n        Cat myCat = new Cat();\n        \n        myDog.eat(); // Animal is eating\n        myDog.bark(); // Dog is barking\n        myCat.eat(); // Animal is eating\n        myCat.meow(); // Cat is meowing\n    }\n}\n```\n\n`Dog``Cat``Animal``eat()``bark()``meow()`\n\nJS  classBrendan `prototype`\n\n```JavaScript\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype.bark = function() {\n    console.log(this.name)\n}\n\nvar dogA = new Dog(\"Rover\");\nvar dogB = new Dog(\"Fido\");\ndogA.bark(); // Rover\ndogB.bark(); // Fido\n```\n\n`Dog``prototype``bark()``Dog``bark()`\n\n`prototype`\n\n JS \n\n![img](https://wiki.wgpsec.org/images/js-prototype-chain-pollution/3.png)\n\n## prototype \n\n JS `prototype``__proto__`\n\n`prototype`  `new` \n\n`__proto__``prototype``var dog = new Dog()``dog.__proto__``Dog.prototype`\n\n> `dog.__proto__``Dog.prototype`\n\n JS `prototype`\n\nJS `__proto__``prototype``prototype` JS `prototype``prototype``__proto__``null`\n\nJS `__proto__` JS \n\n\n\n```JavaScript\nfunction Dog(name) {\n  this.name = name;\n}\n\nDog.prototype = {\n  \"species\": \"dog\",\n} \n  \nvar dog = new Dog('Rover');\n\nconsole.log(dog.name); // Rover\nconsole.log(dog.species); // dog\nconsole.log(dog.age); // undefined\nconsole.log(dog.__proto__.__proto__.__proto__); // null\n\nconsole.log(dog.__proto__ === Dog.prototype) // true\nconsole.log(Dog.prototype.__proto__ === Object.prototype) // true\nconsole.log(Object.prototype.__proto__) // null\n```\n\n`dog.name`JS `dog``name``Rover`\n\n`dog.species`JS `dog.__proto__``species``dog`\n\n`dog.age`JS `__proto__``Dog.prototype.__proto__``Object.prototype``Object.prototype.__proto__``null`JS `age``undefined`\n\n`dog.__proto__.__proto__.__proto__.__proto__`JS `null`yejiu1`prototype`\n\n## constructor \n\n JS `constructor`JS `prototype``prototype``constructor`\n\n`prototype``constructor`\n\n`constructor``prototype`\n\n```JavaScript\nconsole.log(Dog.prototype.constructor === Dog); // true\n```\n\n## \n\n### class \n\n Web JS  ES6ECMAScript 2015Class\n\n JS  Brendan Eich  JS  JS  JS \n\nJS  class \n\n```JavaScript\nclass Animal {\n  constructor(name) {\n    this.name = name;\n  }\n\n  speak() {\n    console.log(this.name + ' makes a noise.');\n  }\n}\n\nlet animal = new Animal('Simba');\nanimal.speak(); // Outputs: \"Simba makes a noise.\"\n```\n\n class  JS \n\n```JavaScript\nfunction Animal(name) {\n  this.name = name;\n}\n\nAnimal.prototype.speak = function() {\n  console.log(this.name + ' makes a noise.');\n}\n\nlet animal = new Animal('Simba');\nanimal.speak(); // Outputs: \"Simba makes a noise.\"\n```\n\nclass  class \n\n### \n\nJS JS \n\n`hasOwnProperty``Object.hasOwn`\n\n`hasOwnProperty``Object.prototype``null`\n\n\n\n```JavaScript\nlet obj = {\n    prop: 'value'\n};\nconsole.log(obj.hasOwnProperty('prop')); // true\n\nlet objWithNoProto = Object.create(null);\nconsole.log(objWithNoProto.hasOwnProperty); // undefined\n```\n\n JS  JS  JS \n\n## JS \n\n> JS  phithon  [ JavaScript Prototype ](https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03)`merge`\n\nJS JS \n\n JS \n\n```JavaScript\n//  userA\nlet userA = {};\n\n//  userA  isAdmin\nuserA.isAdmin = false;\nconsole.log(userA.isAdmin); // false\n\n// \nuserA.__proto__.isAdmin = true;\nconsole.log(userA.isAdmin); // false\n\n//  userB\nlet userB = {};\n// userB  userA  isAdmin \nconsole.log(userB.isAdmin); // true\n```\n\n CTF `merge``clone``merge``merge`\n\n```JavaScript\nfunction merge(target, source) {\n  for (let key in source) {\n      if (key in source && key in target) {\n          merge(target[key], source[key])\n      } else {\n          target[key] = source[key]\n      }\n  }\n}\n```\n\n JSON `o2``o1``target[key] = source[key]``Object.prototype`\n\n```JavaScript\nlet o1 = {};\nlet o2 = JSON.parse('{\"a\": 1, \"__proto__\": {\"b\": 2}}');\n\nmerge(o1, o2); // 1 2\nconsole.log(o1.a, o1.b);\n\no3 = {};\nconsole.log(o3.b); // 2\nconsole.log(Object.prototype); // [Object: null prototype] { b: 2 }\n```\n\n`o2``let o2 = {a: 1, \"__proto__\": {b: 2}}`\n\n## \n\n JS  JS \n\nJS \n\nPrototype Chain Object  `__proto__` `dog.__proto__.__proto__.__proto__`\n\n## \n\n- [Javascript](https://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html)by \n- [ JavaScript ](https://blog.huli.tw/2017/08/27/the-javascripts-prototype-chain/)by Huli's Blog\n- [](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)by MDN Web Docs\n- [ JavaScript Prototype ](https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03)by phithon","slug":"js-prototype-chain","published":1,"updated":"2024-06-09T12:55:18.848Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap7000sf4ly3kga2gj1","content":"<p> <a href=\"#\">JavaScript</a>  <a href=\"#\">JavaScript</a></p>\n<p> JS </p>\n<h2 id=\"JS-\"><a href=\"#JS-\" class=\"headerlink\" title=\"JS \"></a>JS </h2><p>1994Netscape Navigator v0.9</p>\n<p> <a href=\"https://brendaneich.com/\">Brendan Eich</a> </p>\n<p>object-oriented programmingBrendan   JS object JS </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>Brendan  JS class</p>\n<p> Java  class construct</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dog</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String name;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Dog</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Dog</span> <span class=\"variable\">dog</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\">        System.out.println(dog.name); <span class=\"comment\">// Rover</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Brendam  JS <code>new</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dog = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">name</span>) <span class=\"comment\">// Rover</span></span><br></pre></td></tr></table></figure>\n\n<p> JS  classJS </p>\n<p> Java  class </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Animal is eating&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dog</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">bark</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Dog is barking&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Cat</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">meow</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cat is meowing&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Dog</span> <span class=\"variable\">myDog</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>();</span><br><span class=\"line\">        <span class=\"type\">Cat</span> <span class=\"variable\">myCat</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Cat</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        myDog.eat(); <span class=\"comment\">// Animal is eating</span></span><br><span class=\"line\">        myDog.bark(); <span class=\"comment\">// Dog is barking</span></span><br><span class=\"line\">        myCat.eat(); <span class=\"comment\">// Animal is eating</span></span><br><span class=\"line\">        myCat.meow(); <span class=\"comment\">// Cat is meowing</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Dog</code><code>Cat</code><code>Animal</code><code>eat()</code><code>bark()</code><code>meow()</code></p>\n<p>JS  classBrendan <code>prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">bark</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dogA = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> dogB = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Fido&quot;</span>);</span><br><span class=\"line\">dogA.<span class=\"title function_\">bark</span>(); <span class=\"comment\">// Rover</span></span><br><span class=\"line\">dogB.<span class=\"title function_\">bark</span>(); <span class=\"comment\">// Fido</span></span><br></pre></td></tr></table></figure>\n\n<p><code>Dog</code><code>prototype</code><code>bark()</code><code>Dog</code><code>bark()</code></p>\n<p><code>prototype</code></p>\n<p> JS </p>\n<p><img src=\"https://wiki.wgpsec.org/images/js-prototype-chain-pollution/3.png\" alt=\"img\"></p>\n<h2 id=\"prototype-\"><a href=\"#prototype-\" class=\"headerlink\" title=\"prototype \"></a>prototype </h2><p> JS <code>prototype</code><code>__proto__</code></p>\n<p><code>prototype</code>  <code>new</code> </p>\n<p><code>__proto__</code><code>prototype</code><code>var dog = new Dog()</code><code>dog.__proto__</code><code>Dog.prototype</code></p>\n<blockquote>\n<p><code>dog.__proto__</code><code>Dog.prototype</code></p>\n</blockquote>\n<p> JS <code>prototype</code></p>\n<p>JS <code>__proto__</code><code>prototype</code><code>prototype</code> JS <code>prototype</code><code>prototype</code><code>__proto__</code><code>null</code></p>\n<p>JS <code>__proto__</code> JS </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;species&quot;</span>: <span class=\"string\">&quot;dog&quot;</span>,</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> dog = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&#x27;Rover&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">name</span>); <span class=\"comment\">// Rover</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">species</span>); <span class=\"comment\">// dog</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">age</span>); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>); <span class=\"comment\">// null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span>) <span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n\n<p><code>dog.name</code>JS <code>dog</code><code>name</code><code>Rover</code></p>\n<p><code>dog.species</code>JS <code>dog.__proto__</code><code>species</code><code>dog</code></p>\n<p><code>dog.age</code>JS <code>__proto__</code><code>Dog.prototype.__proto__</code><code>Object.prototype</code><code>Object.prototype.__proto__</code><code>null</code>JS <code>age</code><code>undefined</code></p>\n<p><code>dog.__proto__.__proto__.__proto__.__proto__</code>JS <code>null</code>yejiu1<code>prototype</code></p>\n<h2 id=\"constructor-\"><a href=\"#constructor-\" class=\"headerlink\" title=\"constructor \"></a>constructor </h2><p> JS <code>constructor</code>JS <code>prototype</code><code>prototype</code><code>constructor</code></p>\n<p><code>prototype</code><code>constructor</code></p>\n<p><code>constructor</code><code>prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Dog</span>); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"class-\"><a href=\"#class-\" class=\"headerlink\" title=\"class \"></a>class </h3><p> Web JS  ES6ECMAScript 2015Class</p>\n<p> JS  Brendan Eich  JS  JS  JS </p>\n<p>JS  class </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">speak</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&#x27; makes a noise.&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;Simba&#x27;</span>);</span><br><span class=\"line\">animal.<span class=\"title function_\">speak</span>(); <span class=\"comment\">// Outputs: &quot;Simba makes a noise.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> class  JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Animal</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Animal</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">speak</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&#x27; makes a noise.&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;Simba&#x27;</span>);</span><br><span class=\"line\">animal.<span class=\"title function_\">speak</span>(); <span class=\"comment\">// Outputs: &quot;Simba makes a noise.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>class  class </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JS JS </p>\n<p><code>hasOwnProperty</code><code>Object.hasOwn</code></p>\n<p><code>hasOwnProperty</code><code>Object.prototype</code><code>null</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">prop</span>: <span class=\"string\">&#x27;value&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj.<span class=\"title function_\">hasOwnProperty</span>(<span class=\"string\">&#x27;prop&#x27;</span>)); <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> objWithNoProto = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(objWithNoProto.<span class=\"property\">hasOwnProperty</span>); <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n\n<p> JS  JS  JS </p>\n<h2 id=\"JS-\"><a href=\"#JS-\" class=\"headerlink\" title=\"JS \"></a>JS </h2><blockquote>\n<p>JS  phithon  <a href=\"https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03\"> JavaScript Prototype </a><code>merge</code></p>\n</blockquote>\n<p>JS JS </p>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  userA</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  userA  isAdmin</span></span><br><span class=\"line\">userA.<span class=\"property\">isAdmin</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userA.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">userA.<span class=\"property\">__proto__</span>.<span class=\"property\">isAdmin</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userA.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  userB</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userB = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// userB  userA  isAdmin </span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userB.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<p> CTF <code>merge</code><code>clone</code><code>merge</code><code>merge</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">merge</span>(<span class=\"params\">target, source</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> source) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key <span class=\"keyword\">in</span> source &amp;&amp; key <span class=\"keyword\">in</span> target) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">merge</span>(target[key], source[key])</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          target[key] = source[key]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> JSON <code>o2</code><code>o1</code><code>target[key] = source[key]</code><code>Object.prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> o1 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> o2 = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&#x27;&#123;&quot;a&quot;: 1, &quot;__proto__&quot;: &#123;&quot;b&quot;: 2&#125;&#125;&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">merge</span>(o1, o2); <span class=\"comment\">// 1 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(o1.<span class=\"property\">a</span>, o1.<span class=\"property\">b</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(o3.<span class=\"property\">b</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>); <span class=\"comment\">// [Object: null prototype] &#123; b: 2 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>o2</code><code>let o2 = &#123;a: 1, &quot;__proto__&quot;: &#123;b: 2&#125;&#125;</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JS  JS </p>\n<p>JS </p>\n<p>Prototype Chain Object  <code>__proto__</code> <code>dog.__proto__.__proto__.__proto__</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html\">Javascript</a>by </li>\n<li><a href=\"https://blog.huli.tw/2017/08/27/the-javascripts-prototype-chain/\"> JavaScript </a>by Hulis Blog</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain\"></a>by MDN Web Docs</li>\n<li><a href=\"https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03\"> JavaScript Prototype </a>by phithon</li>\n</ul>\n","excerpt":"","more":"<p> <a href=\"#\">JavaScript</a>  <a href=\"#\">JavaScript</a></p>\n<p> JS </p>\n<h2 id=\"JS-\"><a href=\"#JS-\" class=\"headerlink\" title=\"JS \"></a>JS </h2><p>1994Netscape Navigator v0.9</p>\n<p> <a href=\"https://brendaneich.com/\">Brendan Eich</a> </p>\n<p>object-oriented programmingBrendan   JS object JS </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>Brendan  JS class</p>\n<p> Java  class construct</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dog</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String name;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Dog</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Dog</span> <span class=\"variable\">dog</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\">        System.out.println(dog.name); <span class=\"comment\">// Rover</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Brendam  JS <code>new</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dog = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">name</span>) <span class=\"comment\">// Rover</span></span><br></pre></td></tr></table></figure>\n\n<p> JS  classJS </p>\n<p> Java  class </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">eat</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Animal is eating&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Dog</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">bark</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Dog is barking&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Cat</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">meow</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Cat is meowing&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Dog</span> <span class=\"variable\">myDog</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>();</span><br><span class=\"line\">        <span class=\"type\">Cat</span> <span class=\"variable\">myCat</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Cat</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        myDog.eat(); <span class=\"comment\">// Animal is eating</span></span><br><span class=\"line\">        myDog.bark(); <span class=\"comment\">// Dog is barking</span></span><br><span class=\"line\">        myCat.eat(); <span class=\"comment\">// Animal is eating</span></span><br><span class=\"line\">        myCat.meow(); <span class=\"comment\">// Cat is meowing</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Dog</code><code>Cat</code><code>Animal</code><code>eat()</code><code>bark()</code><code>meow()</code></p>\n<p>JS  classBrendan <code>prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">bark</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> dogA = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Rover&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> dogB = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&quot;Fido&quot;</span>);</span><br><span class=\"line\">dogA.<span class=\"title function_\">bark</span>(); <span class=\"comment\">// Rover</span></span><br><span class=\"line\">dogB.<span class=\"title function_\">bark</span>(); <span class=\"comment\">// Fido</span></span><br></pre></td></tr></table></figure>\n\n<p><code>Dog</code><code>prototype</code><code>bark()</code><code>Dog</code><code>bark()</code></p>\n<p><code>prototype</code></p>\n<p> JS </p>\n<p><img src=\"https://wiki.wgpsec.org/images/js-prototype-chain-pollution/3.png\" alt=\"img\"></p>\n<h2 id=\"prototype-\"><a href=\"#prototype-\" class=\"headerlink\" title=\"prototype \"></a>prototype </h2><p> JS <code>prototype</code><code>__proto__</code></p>\n<p><code>prototype</code>  <code>new</code> </p>\n<p><code>__proto__</code><code>prototype</code><code>var dog = new Dog()</code><code>dog.__proto__</code><code>Dog.prototype</code></p>\n<blockquote>\n<p><code>dog.__proto__</code><code>Dog.prototype</code></p>\n</blockquote>\n<p> JS <code>prototype</code></p>\n<p>JS <code>__proto__</code><code>prototype</code><code>prototype</code> JS <code>prototype</code><code>prototype</code><code>__proto__</code><code>null</code></p>\n<p>JS <code>__proto__</code> JS </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dog</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;species&quot;</span>: <span class=\"string\">&quot;dog&quot;</span>,</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">var</span> dog = <span class=\"keyword\">new</span> <span class=\"title class_\">Dog</span>(<span class=\"string\">&#x27;Rover&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">name</span>); <span class=\"comment\">// Rover</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">species</span>); <span class=\"comment\">// dog</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">age</span>); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span>); <span class=\"comment\">// null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(dog.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span>) <span class=\"comment\">// null</span></span><br></pre></td></tr></table></figure>\n\n<p><code>dog.name</code>JS <code>dog</code><code>name</code><code>Rover</code></p>\n<p><code>dog.species</code>JS <code>dog.__proto__</code><code>species</code><code>dog</code></p>\n<p><code>dog.age</code>JS <code>__proto__</code><code>Dog.prototype.__proto__</code><code>Object.prototype</code><code>Object.prototype.__proto__</code><code>null</code>JS <code>age</code><code>undefined</code></p>\n<p><code>dog.__proto__.__proto__.__proto__.__proto__</code>JS <code>null</code>yejiu1<code>prototype</code></p>\n<h2 id=\"constructor-\"><a href=\"#constructor-\" class=\"headerlink\" title=\"constructor \"></a>constructor </h2><p> JS <code>constructor</code>JS <code>prototype</code><code>prototype</code><code>constructor</code></p>\n<p><code>prototype</code><code>constructor</code></p>\n<p><code>constructor</code><code>prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Dog</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Dog</span>); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"class-\"><a href=\"#class-\" class=\"headerlink\" title=\"class \"></a>class </h3><p> Web JS  ES6ECMAScript 2015Class</p>\n<p> JS  Brendan Eich  JS  JS  JS </p>\n<p>JS  class </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Animal</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"title function_\">speak</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&#x27; makes a noise.&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;Simba&#x27;</span>);</span><br><span class=\"line\">animal.<span class=\"title function_\">speak</span>(); <span class=\"comment\">// Outputs: &quot;Simba makes a noise.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> class  JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Animal</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Animal</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">speak</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + <span class=\"string\">&#x27; makes a noise.&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;Simba&#x27;</span>);</span><br><span class=\"line\">animal.<span class=\"title function_\">speak</span>(); <span class=\"comment\">// Outputs: &quot;Simba makes a noise.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>class  class </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JS JS </p>\n<p><code>hasOwnProperty</code><code>Object.hasOwn</code></p>\n<p><code>hasOwnProperty</code><code>Object.prototype</code><code>null</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">prop</span>: <span class=\"string\">&#x27;value&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj.<span class=\"title function_\">hasOwnProperty</span>(<span class=\"string\">&#x27;prop&#x27;</span>)); <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> objWithNoProto = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(<span class=\"literal\">null</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(objWithNoProto.<span class=\"property\">hasOwnProperty</span>); <span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n\n<p> JS  JS  JS </p>\n<h2 id=\"JS-\"><a href=\"#JS-\" class=\"headerlink\" title=\"JS \"></a>JS </h2><blockquote>\n<p>JS  phithon  <a href=\"https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03\"> JavaScript Prototype </a><code>merge</code></p>\n</blockquote>\n<p>JS JS </p>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  userA</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  userA  isAdmin</span></span><br><span class=\"line\">userA.<span class=\"property\">isAdmin</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userA.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">userA.<span class=\"property\">__proto__</span>.<span class=\"property\">isAdmin</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userA.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  userB</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userB = &#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// userB  userA  isAdmin </span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(userB.<span class=\"property\">isAdmin</span>); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<p> CTF <code>merge</code><code>clone</code><code>merge</code><code>merge</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">merge</span>(<span class=\"params\">target, source</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> key <span class=\"keyword\">in</span> source) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key <span class=\"keyword\">in</span> source &amp;&amp; key <span class=\"keyword\">in</span> target) &#123;</span><br><span class=\"line\">          <span class=\"title function_\">merge</span>(target[key], source[key])</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          target[key] = source[key]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> JSON <code>o2</code><code>o1</code><code>target[key] = source[key]</code><code>Object.prototype</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> o1 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> o2 = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">&#x27;&#123;&quot;a&quot;: 1, &quot;__proto__&quot;: &#123;&quot;b&quot;: 2&#125;&#125;&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">merge</span>(o1, o2); <span class=\"comment\">// 1 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(o1.<span class=\"property\">a</span>, o1.<span class=\"property\">b</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">o3 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(o3.<span class=\"property\">b</span>); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>); <span class=\"comment\">// [Object: null prototype] &#123; b: 2 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>o2</code><code>let o2 = &#123;a: 1, &quot;__proto__&quot;: &#123;b: 2&#125;&#125;</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JS  JS </p>\n<p>JS </p>\n<p>Prototype Chain Object  <code>__proto__</code> <code>dog.__proto__.__proto__.__proto__</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html\">Javascript</a>by </li>\n<li><a href=\"https://blog.huli.tw/2017/08/27/the-javascripts-prototype-chain/\"> JavaScript </a>by Hulis Blog</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain\"></a>by MDN Web Docs</li>\n<li><a href=\"https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html#0x03\"> JavaScript Prototype </a>by phithon</li>\n</ul>\n"},{"title":"JavaScript ","date":"2024-02-15T16:00:00.000Z","author":"ma5hr00m","_content":"\n\n\n JavaScript  node v18.19.1 ES6 \n\n## Scope \n\n\n\nJS global scopelocal scope\n\n JS \n\n```JavaScript\nfunction myFunction() {\n  var localVariable = \"\";\n  console.log(localVariable);\n}\n\nmyFunction();\nconsole.log(localVariable);\n```\n\n`localVariable``myFunction``ReferenceError: localVariable is not defined`\n\n\n\n```JavaScript\nvar globalVariable = \"\";\n\nfunction myFunction() {\n  console.log(globalVariable);\n}\n\nmyFunction();\nconsole.log(globalVariable);\n```\n\n`globalVariable``myFunction``myFunction``globalVariable``globalVariable`free variable\n\n`myFunction``globalVariable``is not defined`\n\n```\nxxx-scope -> ... -> global scope\n```\n\nscope chain\n\n>  prototype chain \n\n### Block Scope \n\nES6 JS /\n\n```JavaScript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(function() {\n    console.log(i); // Outputs: 3, 3, 3\n  }, 100);\n}\n```\n\n`var``for``i``setTimeout`\n\nES6 `let&const`block scope\n\n\n\n```JavaScript\nfor (let j = 0; j < 3; j++) {\n  setTimeout(function() {\n    console.log(j); // Outputs: 0, 1, 2\n  }, 100);\n}\n```\n\n`let``j``for``j`\n\n`let&const``var` bug\n\n### Static/Lexical Scope \n\n\n\n```JavaScript\nvar x = 'global';\nfunction foo() {\n    console.log(x);\n}\nfunction bar() {\n    var x = 'local';\n    foo();\n}\nbar();\n```\n\n`global``foo()``x``global`\n\n Perl \n\n>  [](https://www.jyshare.com/compile/) \n\n```Perl\nour $x = 'global';\nsub foo {\n    print \"$x\\n\";\n}\nsub bar {\n    local $x = 'local';\n    foo();\n}\nbar(); # output: local\n```\n\n\n\nstatic scopedynamic scope\n\nJS Lexical Scope\n\n> [JavaScript ](https://ma5hr00m.top/archives/2024/02/how-js-run.html)\n\n## Hoisting \n\nhoisting\n\nhoisting \n\n`ping()`\n\n```JavaScript\nping();\nfunction ping() {\n    console.log('pong');\n}\n```\n\n JS `ping()`\n\n hoisting  Twitter Brendan Eich \n\n> Function declaration hoisting is for mutual recursion & generally to avoid painful bottom-up ML-like order.\n\n JS Brendan  JS  ML \n\n### \n\n>  Hoisting \n\n`undefined``ReferenceError: a is not defined`\n\n```JavaScript\nconsole.log(a) // output: undefined\nvar a = 1;\n```\n\nJS \n\n```JavaScript\nvar a;\nconsole.log(a) // output: undefined\na = 1;\n```\n\n`2``1`\n\n```JavaScript\nfunction test(v){\n    console.log(v);\n    var v = 1;\n}\ntest(2); // output: 2\n```\n\n`test()``v`+`var v = 1;``v=2``2`\n\n```JavaScript\nfunction test(v){\n    var v;\n    var v;\n    v = 2;\n    console.log(v);\n    v = 1;\n}\ntest(2); // output: 2\n```\n\n`[Function: a]``undefined`\n\n```JavaScript\nconsole.log(a); // output: [Function: a]\nvar a;\nfunction a(){};\n```\n\n23 > \n\n JS \n\n- \n- \n-  > \n\n### Execution Context \n\n hoisting  JS \n\nES6  JS \n\n- lexical environment\n- variable environment\n- this this binding\n\nenvironment recordouter environment reference\n\n`var` ES6  ES6 `let&const`\n\n`this``this``this`\n\n> `this`\n\n\n\n![20240226195039](https://img.ma5hr00m.top/blog/20240226195039.png)\n\n\n\n`var``var` ES6 JS \n\nES6 `let``const`TDZ\n\n\n\n```JavaScript\n// \nvar a = 1; // \nlet b = 2; // \n\nfunction foo() {\n  // foo\n  var c = 3; // foo\n  let d = 4; // foo\n  console.log(a, b, c, d); // 1, 2, 3, 4\n  if (true) {\n    // \n    var e = 5; // foo\n    let f = 6; // \n    console.log(a, b, c, d, e, f); // 1, 2, 3, 4, 5, 6\n  }\n  // \n  console.log(a, b, c, d, e); // 1, 2, 3, 4, 5\n  console.log(f); // ReferenceError: f is not defined\n}\n\n// foo\nfoo();\nconsole.log(a, b); // 1, 2\nconsole.log(c, d, e, f); // ReferenceError: c is not defined\n```\n\n [Variable Environment vs lexical environment](https://stackoverflow.com/questions/23948198/variable-environment-vs-lexical-environment) \n\n### \n\n Hoisting  Hositing \n\n JS \n\n1. \n2. `var``undefined``let``const`TDZ\n3. \n4. `var``undefined``let``const`\n5. 34`return`\n6. \n\n JS \n\n```JavaScript\nconsole.log(a); // undefined\nconsole.log(b); // ReferenceError: Cannot access 'b' before initialization\nconsole.log(c()); // 3\nconsole.log(d()); // TypeError: d is not a function\nvar a = 1;\nlet b = 2;\nfunction c() {\n  return 3;\n}\nvar d = function() {\n  return 4;\n};\n```\n\n## \n\n\n\n### ML-like Order\n\nML ML  HaskellRustScala \n\n Standard ML \n\n```\nfun factorial n =\n    if n = 0 then 1 else n * factorial (n-1)\n```\n\n\n\nML-like Order  ML ML  fun  and \n\n```\nfun isOdd n = if n = 0 then false else isEven (n-1)\nand isEven n = if n = 0 then true else isOdd (n-1)\n```\n\n JSFDs hoisting\n\n## \n\n- [ECMAScript[1\\]](https://www.cnblogs.com/leoo2sk/archive/2010/12/19/ecmascript-scope.html)by Eric Zhang\n- [JavaScript](https://juejin.cn/post/7030765196574457892#heading-8)by Rockky\n- [ JS  Closure](https://blog.huli.tw/2018/12/08/javascript-closure/)by Huli\n- [ hoisting](https://blog.huli.tw/2018/11/10/javascript-hoisting-and-tdz/)by Huli\n- [ECMAScript 2015 Language Specification](https://262.ecma-international.org/6.0/)","source":"_posts/js-scope-and-hoisting.md","raw":"---\ntitle: JavaScript \ndate: 2024/02/16\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\n\n\n JavaScript  node v18.19.1 ES6 \n\n## Scope \n\n\n\nJS global scopelocal scope\n\n JS \n\n```JavaScript\nfunction myFunction() {\n  var localVariable = \"\";\n  console.log(localVariable);\n}\n\nmyFunction();\nconsole.log(localVariable);\n```\n\n`localVariable``myFunction``ReferenceError: localVariable is not defined`\n\n\n\n```JavaScript\nvar globalVariable = \"\";\n\nfunction myFunction() {\n  console.log(globalVariable);\n}\n\nmyFunction();\nconsole.log(globalVariable);\n```\n\n`globalVariable``myFunction``myFunction``globalVariable``globalVariable`free variable\n\n`myFunction``globalVariable``is not defined`\n\n```\nxxx-scope -> ... -> global scope\n```\n\nscope chain\n\n>  prototype chain \n\n### Block Scope \n\nES6 JS /\n\n```JavaScript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(function() {\n    console.log(i); // Outputs: 3, 3, 3\n  }, 100);\n}\n```\n\n`var``for``i``setTimeout`\n\nES6 `let&const`block scope\n\n\n\n```JavaScript\nfor (let j = 0; j < 3; j++) {\n  setTimeout(function() {\n    console.log(j); // Outputs: 0, 1, 2\n  }, 100);\n}\n```\n\n`let``j``for``j`\n\n`let&const``var` bug\n\n### Static/Lexical Scope \n\n\n\n```JavaScript\nvar x = 'global';\nfunction foo() {\n    console.log(x);\n}\nfunction bar() {\n    var x = 'local';\n    foo();\n}\nbar();\n```\n\n`global``foo()``x``global`\n\n Perl \n\n>  [](https://www.jyshare.com/compile/) \n\n```Perl\nour $x = 'global';\nsub foo {\n    print \"$x\\n\";\n}\nsub bar {\n    local $x = 'local';\n    foo();\n}\nbar(); # output: local\n```\n\n\n\nstatic scopedynamic scope\n\nJS Lexical Scope\n\n> [JavaScript ](https://ma5hr00m.top/archives/2024/02/how-js-run.html)\n\n## Hoisting \n\nhoisting\n\nhoisting \n\n`ping()`\n\n```JavaScript\nping();\nfunction ping() {\n    console.log('pong');\n}\n```\n\n JS `ping()`\n\n hoisting  Twitter Brendan Eich \n\n> Function declaration hoisting is for mutual recursion & generally to avoid painful bottom-up ML-like order.\n\n JS Brendan  JS  ML \n\n### \n\n>  Hoisting \n\n`undefined``ReferenceError: a is not defined`\n\n```JavaScript\nconsole.log(a) // output: undefined\nvar a = 1;\n```\n\nJS \n\n```JavaScript\nvar a;\nconsole.log(a) // output: undefined\na = 1;\n```\n\n`2``1`\n\n```JavaScript\nfunction test(v){\n    console.log(v);\n    var v = 1;\n}\ntest(2); // output: 2\n```\n\n`test()``v`+`var v = 1;``v=2``2`\n\n```JavaScript\nfunction test(v){\n    var v;\n    var v;\n    v = 2;\n    console.log(v);\n    v = 1;\n}\ntest(2); // output: 2\n```\n\n`[Function: a]``undefined`\n\n```JavaScript\nconsole.log(a); // output: [Function: a]\nvar a;\nfunction a(){};\n```\n\n23 > \n\n JS \n\n- \n- \n-  > \n\n### Execution Context \n\n hoisting  JS \n\nES6  JS \n\n- lexical environment\n- variable environment\n- this this binding\n\nenvironment recordouter environment reference\n\n`var` ES6  ES6 `let&const`\n\n`this``this``this`\n\n> `this`\n\n\n\n![20240226195039](https://img.ma5hr00m.top/blog/20240226195039.png)\n\n\n\n`var``var` ES6 JS \n\nES6 `let``const`TDZ\n\n\n\n```JavaScript\n// \nvar a = 1; // \nlet b = 2; // \n\nfunction foo() {\n  // foo\n  var c = 3; // foo\n  let d = 4; // foo\n  console.log(a, b, c, d); // 1, 2, 3, 4\n  if (true) {\n    // \n    var e = 5; // foo\n    let f = 6; // \n    console.log(a, b, c, d, e, f); // 1, 2, 3, 4, 5, 6\n  }\n  // \n  console.log(a, b, c, d, e); // 1, 2, 3, 4, 5\n  console.log(f); // ReferenceError: f is not defined\n}\n\n// foo\nfoo();\nconsole.log(a, b); // 1, 2\nconsole.log(c, d, e, f); // ReferenceError: c is not defined\n```\n\n [Variable Environment vs lexical environment](https://stackoverflow.com/questions/23948198/variable-environment-vs-lexical-environment) \n\n### \n\n Hoisting  Hositing \n\n JS \n\n1. \n2. `var``undefined``let``const`TDZ\n3. \n4. `var``undefined``let``const`\n5. 34`return`\n6. \n\n JS \n\n```JavaScript\nconsole.log(a); // undefined\nconsole.log(b); // ReferenceError: Cannot access 'b' before initialization\nconsole.log(c()); // 3\nconsole.log(d()); // TypeError: d is not a function\nvar a = 1;\nlet b = 2;\nfunction c() {\n  return 3;\n}\nvar d = function() {\n  return 4;\n};\n```\n\n## \n\n\n\n### ML-like Order\n\nML ML  HaskellRustScala \n\n Standard ML \n\n```\nfun factorial n =\n    if n = 0 then 1 else n * factorial (n-1)\n```\n\n\n\nML-like Order  ML ML  fun  and \n\n```\nfun isOdd n = if n = 0 then false else isEven (n-1)\nand isEven n = if n = 0 then true else isOdd (n-1)\n```\n\n JSFDs hoisting\n\n## \n\n- [ECMAScript[1\\]](https://www.cnblogs.com/leoo2sk/archive/2010/12/19/ecmascript-scope.html)by Eric Zhang\n- [JavaScript](https://juejin.cn/post/7030765196574457892#heading-8)by Rockky\n- [ JS  Closure](https://blog.huli.tw/2018/12/08/javascript-closure/)by Huli\n- [ hoisting](https://blog.huli.tw/2018/11/10/javascript-hoisting-and-tdz/)by Huli\n- [ECMAScript 2015 Language Specification](https://262.ecma-international.org/6.0/)","slug":"js-scope-and-hoisting","published":1,"updated":"2024-06-09T12:55:16.794Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap8000tf4lygcko4722","content":"<p></p>\n<p> JavaScript  node v18.19.1 ES6 </p>\n<h2 id=\"Scope-\"><a href=\"#Scope-\" class=\"headerlink\" title=\"Scope \"></a>Scope </h2><p></p>\n<p>JS global scopelocal scope</p>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> localVariable = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(localVariable);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">myFunction</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(localVariable);</span><br></pre></td></tr></table></figure>\n\n<p><code>localVariable</code><code>myFunction</code><code>ReferenceError: localVariable is not defined</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> globalVariable = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(globalVariable);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">myFunction</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(globalVariable);</span><br></pre></td></tr></table></figure>\n\n<p><code>globalVariable</code><code>myFunction</code><code>myFunction</code><code>globalVariable</code><code>globalVariable</code>free variable</p>\n<p><code>myFunction</code><code>globalVariable</code><code>is not defined</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xxx-scope -&gt; ... -&gt; global scope</span><br></pre></td></tr></table></figure>\n\n<p>scope chain</p>\n<blockquote>\n<p> prototype chain </p>\n</blockquote>\n<h3 id=\"Block-Scope-\"><a href=\"#Block-Scope-\" class=\"headerlink\" title=\"Block Scope \"></a>Block Scope </h3><p>ES6 JS &#x2F;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(i); <span class=\"comment\">// Outputs: 3, 3, 3</span></span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>var</code><code>for</code><code>i</code><code>setTimeout</code></p>\n<p>ES6 <code>let&amp;const</code>block scope</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(j); <span class=\"comment\">// Outputs: 0, 1, 2</span></span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>let</code><code>j</code><code>for</code><code>j</code></p>\n<p><code>let&amp;const</code><code>var</code> bug</p>\n<h3 id=\"Static-Lexical-Scope-\"><a href=\"#Static-Lexical-Scope-\" class=\"headerlink\" title=\"Static&#x2F;Lexical Scope \"></a>Static&#x2F;Lexical Scope </h3><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">&#x27;global&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bar</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"string\">&#x27;local&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">foo</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">bar</span>();</span><br></pre></td></tr></table></figure>\n\n<p><code>global</code><code>foo()</code><code>x</code><code>global</code></p>\n<p> Perl </p>\n<blockquote>\n<p> <a href=\"https://www.jyshare.com/compile/\"></a> </p>\n</blockquote>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">our</span> $x = <span class=\"string\">&#x27;global&#x27;</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">sub</span> <span class=\"title\">foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">&quot;$x\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">sub</span> <span class=\"title\">bar</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">local</span> $x = <span class=\"string\">&#x27;local&#x27;</span>;</span><br><span class=\"line\">    foo();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">bar(); <span class=\"comment\"># output: local</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>static scopedynamic scope</p>\n<p>JS Lexical Scope</p>\n<blockquote>\n<p><a href=\"https://ma5hr00m.top/archives/2024/02/how-js-run.html\">JavaScript </a></p>\n</blockquote>\n<h2 id=\"Hoisting-\"><a href=\"#Hoisting-\" class=\"headerlink\" title=\"Hoisting \"></a>Hoisting </h2><p>hoisting</p>\n<p>hoisting </p>\n<p><code>ping()</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">ping</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ping</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;pong&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> JS <code>ping()</code></p>\n<p> hoisting  Twitter Brendan Eich </p>\n<blockquote>\n<p>Function declaration hoisting is for mutual recursion &amp; generally to avoid painful bottom-up ML-like order.</p>\n</blockquote>\n<p> JS Brendan  JS  ML </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p> Hoisting </p>\n</blockquote>\n<p><code>undefined</code><code>ReferenceError: a is not defined</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a) <span class=\"comment\">// output: undefined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p>JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a) <span class=\"comment\">// output: undefined</span></span><br><span class=\"line\">a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>2</code><code>1</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(v);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">test</span>(<span class=\"number\">2</span>); <span class=\"comment\">// output: 2</span></span><br></pre></td></tr></table></figure>\n\n<p><code>test()</code><code>v</code>+<code>var v = 1;</code><code>v=2</code><code>2</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v;</span><br><span class=\"line\">    v = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(v);</span><br><span class=\"line\">    v = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">test</span>(<span class=\"number\">2</span>); <span class=\"comment\">// output: 2</span></span><br></pre></td></tr></table></figure>\n\n<p><code>[Function: a]</code><code>undefined</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a); <span class=\"comment\">// output: [Function: a]</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">a</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>23 &gt; </p>\n<p> JS </p>\n<ul>\n<li></li>\n<li></li>\n<li> &gt; </li>\n</ul>\n<h3 id=\"Execution-Context-\"><a href=\"#Execution-Context-\" class=\"headerlink\" title=\"Execution Context \"></a>Execution Context </h3><p> hoisting  JS </p>\n<p>ES6  JS </p>\n<ul>\n<li>lexical environment</li>\n<li>variable environment</li>\n<li>this this binding</li>\n</ul>\n<p>environment recordouter environment reference</p>\n<p><code>var</code> ES6  ES6 <code>let&amp;const</code></p>\n<p><code>this</code><code>this</code><code>this</code></p>\n<blockquote>\n<p><code>this</code></p>\n</blockquote>\n<p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240226195039.png\" alt=\"20240226195039\"></p>\n<p></p>\n<p><code>var</code><code>var</code> ES6 JS </p>\n<p>ES6 <code>let</code><code>const</code>TDZ</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = <span class=\"number\">3</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> d = <span class=\"number\">4</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d); <span class=\"comment\">// 1, 2, 3, 4</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> e = <span class=\"number\">5</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> f = <span class=\"number\">6</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d, e, f); <span class=\"comment\">// 1, 2, 3, 4, 5, 6</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d, e); <span class=\"comment\">// 1, 2, 3, 4, 5</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(f); <span class=\"comment\">// ReferenceError: f is not defined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// foo</span></span><br><span class=\"line\"><span class=\"title function_\">foo</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b); <span class=\"comment\">// 1, 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c, d, e, f); <span class=\"comment\">// ReferenceError: c is not defined</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://stackoverflow.com/questions/23948198/variable-environment-vs-lexical-environment\">Variable Environment vs lexical environment</a> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Hoisting  Hositing </p>\n<p> JS </p>\n<ol>\n<li></li>\n<li><code>var</code><code>undefined</code><code>let</code><code>const</code>TDZ</li>\n<li></li>\n<li><code>var</code><code>undefined</code><code>let</code><code>const</code></li>\n<li>34<code>return</code></li>\n<li></li>\n</ol>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(b); <span class=\"comment\">// ReferenceError: Cannot access &#x27;b&#x27; before initialization</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">c</span>()); <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">d</span>()); <span class=\"comment\">// TypeError: d is not a function</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">c</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"ML-like-Order\"><a href=\"#ML-like-Order\" class=\"headerlink\" title=\"ML-like Order\"></a>ML-like Order</h3><p>ML ML  HaskellRustScala </p>\n<p> Standard ML </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun factorial n =</span><br><span class=\"line\">    if n = 0 then 1 else n * factorial (n-1)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>ML-like Order  ML ML  fun  and </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun isOdd n = if n = 0 then false else isEven (n-1)</span><br><span class=\"line\">and isEven n = if n = 0 then true else isOdd (n-1)</span><br></pre></td></tr></table></figure>\n\n<p> JSFDs hoisting</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[ECMAScript<a href=\"https://www.cnblogs.com/leoo2sk/archive/2010/12/19/ecmascript-scope.html\">1]</a>by Eric Zhang</li>\n<li><a href=\"https://juejin.cn/post/7030765196574457892#heading-8\">JavaScript</a>by Rockky</li>\n<li><a href=\"https://blog.huli.tw/2018/12/08/javascript-closure/\"> JS  Closure</a>by Huli</li>\n<li><a href=\"https://blog.huli.tw/2018/11/10/javascript-hoisting-and-tdz/\"> hoisting</a>by Huli</li>\n<li><a href=\"https://262.ecma-international.org/6.0/\">ECMAScript 2015 Language Specification</a></li>\n</ul>\n","excerpt":"","more":"<p></p>\n<p> JavaScript  node v18.19.1 ES6 </p>\n<h2 id=\"Scope-\"><a href=\"#Scope-\" class=\"headerlink\" title=\"Scope \"></a>Scope </h2><p></p>\n<p>JS global scopelocal scope</p>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> localVariable = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(localVariable);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">myFunction</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(localVariable);</span><br></pre></td></tr></table></figure>\n\n<p><code>localVariable</code><code>myFunction</code><code>ReferenceError: localVariable is not defined</code></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> globalVariable = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myFunction</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(globalVariable);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">myFunction</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(globalVariable);</span><br></pre></td></tr></table></figure>\n\n<p><code>globalVariable</code><code>myFunction</code><code>myFunction</code><code>globalVariable</code><code>globalVariable</code>free variable</p>\n<p><code>myFunction</code><code>globalVariable</code><code>is not defined</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xxx-scope -&gt; ... -&gt; global scope</span><br></pre></td></tr></table></figure>\n\n<p>scope chain</p>\n<blockquote>\n<p> prototype chain </p>\n</blockquote>\n<h3 id=\"Block-Scope-\"><a href=\"#Block-Scope-\" class=\"headerlink\" title=\"Block Scope \"></a>Block Scope </h3><p>ES6 JS &#x2F;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(i); <span class=\"comment\">// Outputs: 3, 3, 3</span></span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>var</code><code>for</code><code>i</code><code>setTimeout</code></p>\n<p>ES6 <code>let&amp;const</code>block scope</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(j); <span class=\"comment\">// Outputs: 0, 1, 2</span></span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>let</code><code>j</code><code>for</code><code>j</code></p>\n<p><code>let&amp;const</code><code>var</code> bug</p>\n<h3 id=\"Static-Lexical-Scope-\"><a href=\"#Static-Lexical-Scope-\" class=\"headerlink\" title=\"Static&#x2F;Lexical Scope \"></a>Static&#x2F;Lexical Scope </h3><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">&#x27;global&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bar</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"string\">&#x27;local&#x27;</span>;</span><br><span class=\"line\">    <span class=\"title function_\">foo</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">bar</span>();</span><br></pre></td></tr></table></figure>\n\n<p><code>global</code><code>foo()</code><code>x</code><code>global</code></p>\n<p> Perl </p>\n<blockquote>\n<p> <a href=\"https://www.jyshare.com/compile/\"></a> </p>\n</blockquote>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">our</span> $x = <span class=\"string\">&#x27;global&#x27;</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">sub</span> <span class=\"title\">foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">&quot;$x\\n&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">sub</span> <span class=\"title\">bar</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">local</span> $x = <span class=\"string\">&#x27;local&#x27;</span>;</span><br><span class=\"line\">    foo();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">bar(); <span class=\"comment\"># output: local</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>static scopedynamic scope</p>\n<p>JS Lexical Scope</p>\n<blockquote>\n<p><a href=\"https://ma5hr00m.top/archives/2024/02/how-js-run.html\">JavaScript </a></p>\n</blockquote>\n<h2 id=\"Hoisting-\"><a href=\"#Hoisting-\" class=\"headerlink\" title=\"Hoisting \"></a>Hoisting </h2><p>hoisting</p>\n<p>hoisting </p>\n<p><code>ping()</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">ping</span>();</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ping</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;pong&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> JS <code>ping()</code></p>\n<p> hoisting  Twitter Brendan Eich </p>\n<blockquote>\n<p>Function declaration hoisting is for mutual recursion &amp; generally to avoid painful bottom-up ML-like order.</p>\n</blockquote>\n<p> JS Brendan  JS  ML </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote>\n<p> Hoisting </p>\n</blockquote>\n<p><code>undefined</code><code>ReferenceError: a is not defined</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a) <span class=\"comment\">// output: undefined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p>JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a) <span class=\"comment\">// output: undefined</span></span><br><span class=\"line\">a = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>2</code><code>1</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(v);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">test</span>(<span class=\"number\">2</span>); <span class=\"comment\">// output: 2</span></span><br></pre></td></tr></table></figure>\n\n<p><code>test()</code><code>v</code>+<code>var v = 1;</code><code>v=2</code><code>2</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> v;</span><br><span class=\"line\">    v = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(v);</span><br><span class=\"line\">    v = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">test</span>(<span class=\"number\">2</span>); <span class=\"comment\">// output: 2</span></span><br></pre></td></tr></table></figure>\n\n<p><code>[Function: a]</code><code>undefined</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a); <span class=\"comment\">// output: [Function: a]</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">a</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>23 &gt; </p>\n<p> JS </p>\n<ul>\n<li></li>\n<li></li>\n<li> &gt; </li>\n</ul>\n<h3 id=\"Execution-Context-\"><a href=\"#Execution-Context-\" class=\"headerlink\" title=\"Execution Context \"></a>Execution Context </h3><p> hoisting  JS </p>\n<p>ES6  JS </p>\n<ul>\n<li>lexical environment</li>\n<li>variable environment</li>\n<li>this this binding</li>\n</ul>\n<p>environment recordouter environment reference</p>\n<p><code>var</code> ES6  ES6 <code>let&amp;const</code></p>\n<p><code>this</code><code>this</code><code>this</code></p>\n<blockquote>\n<p><code>this</code></p>\n</blockquote>\n<p></p>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240226195039.png\" alt=\"20240226195039\"></p>\n<p></p>\n<p><code>var</code><code>var</code> ES6 JS </p>\n<p>ES6 <code>let</code><code>const</code>TDZ</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = <span class=\"number\">3</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> d = <span class=\"number\">4</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d); <span class=\"comment\">// 1, 2, 3, 4</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> e = <span class=\"number\">5</span>; <span class=\"comment\">// foo</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> f = <span class=\"number\">6</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d, e, f); <span class=\"comment\">// 1, 2, 3, 4, 5, 6</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b, c, d, e); <span class=\"comment\">// 1, 2, 3, 4, 5</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(f); <span class=\"comment\">// ReferenceError: f is not defined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// foo</span></span><br><span class=\"line\"><span class=\"title function_\">foo</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a, b); <span class=\"comment\">// 1, 2</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c, d, e, f); <span class=\"comment\">// ReferenceError: c is not defined</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://stackoverflow.com/questions/23948198/variable-environment-vs-lexical-environment\">Variable Environment vs lexical environment</a> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Hoisting  Hositing </p>\n<p> JS </p>\n<ol>\n<li></li>\n<li><code>var</code><code>undefined</code><code>let</code><code>const</code>TDZ</li>\n<li></li>\n<li><code>var</code><code>undefined</code><code>let</code><code>const</code></li>\n<li>34<code>return</code></li>\n<li></li>\n</ol>\n<p> JS </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(b); <span class=\"comment\">// ReferenceError: Cannot access &#x27;b&#x27; before initialization</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">c</span>()); <span class=\"comment\">// 3</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">d</span>()); <span class=\"comment\">// TypeError: d is not a function</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">c</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"ML-like-Order\"><a href=\"#ML-like-Order\" class=\"headerlink\" title=\"ML-like Order\"></a>ML-like Order</h3><p>ML ML  HaskellRustScala </p>\n<p> Standard ML </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun factorial n =</span><br><span class=\"line\">    if n = 0 then 1 else n * factorial (n-1)</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>ML-like Order  ML ML  fun  and </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fun isOdd n = if n = 0 then false else isEven (n-1)</span><br><span class=\"line\">and isEven n = if n = 0 then true else isOdd (n-1)</span><br></pre></td></tr></table></figure>\n\n<p> JSFDs hoisting</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[ECMAScript<a href=\"https://www.cnblogs.com/leoo2sk/archive/2010/12/19/ecmascript-scope.html\">1]</a>by Eric Zhang</li>\n<li><a href=\"https://juejin.cn/post/7030765196574457892#heading-8\">JavaScript</a>by Rockky</li>\n<li><a href=\"https://blog.huli.tw/2018/12/08/javascript-closure/\"> JS  Closure</a>by Huli</li>\n<li><a href=\"https://blog.huli.tw/2018/11/10/javascript-hoisting-and-tdz/\"> hoisting</a>by Huli</li>\n<li><a href=\"https://262.ecma-international.org/6.0/\">ECMAScript 2015 Language Specification</a></li>\n</ul>\n"},{"title":" Linux ","date":"2023-10-13T16:00:00.000Z","author":"ma5hr00m","_content":"\n2023  ***Vidar-Team***  Linux \n\n## \n### \n\n\n\nOperating System OS\n\n\n vscodefirefox  C Python \n\n### \n\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231013143007.png)\n\n- CPU\n- \n\n shell\n\n\n## Linux\nLinux  *Linus*  1991 \n\n\n![Linux Logo](https://pakhotin.org/wp-content/uploads/2023/07/53113-106400-Linux-xl.jpg)\n\n Windows Windwos \n Linux \n\n Linux\n Linux \n\n## Linux \n Linux\n\nLinux \n windows  Linux \n\n Windows Linux \n Linux  Linux \n\nLinux \n Linux  Linux \n\n Linux \n\n Windows  Java [](https://www.runoob.com/java/java-environment-setup.html)\n Java  JDK `JAVA_HOME` \n Linux \n```bash\nsudo apt install openjdk-17-jdk\n```\n\n Java \n\n## \nLinux  Linux  Linux *Linux distribution*\n\n Linux \n\n Linux \n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015001556.png)\n\n `Ubuntu``Fedora``ArchLinux``CentOS` \n\n\n Linux  Linux  300 \n\n\n `Ubuntu22.04`  Linux \n\n## Ubuntu\n### \n Ubuntu \n1. VMwareVirtual Box\n2.   \n     \n    Windows  Linux \n3. WSL*Windows Subsystem for Linux* Windows  Linux \n    WSL \n\n Ubuntu \n\n\n###  & \n Ubuntu \n\n![Ubuntu](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015005727.png)\n\n `windows` \n\n\n\n*software source* Linux \n\n*package manager*\n`Ubuntu`  `apt`\n\n\n\n\n\n\n\n `sudo apt update`\n `apt` \n\n `apt` \n\n![apt](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015010916.png)\n\n apt Linux  CentOS  `yum`Fedora  `dnf`Arch  `pacman` \n\n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231014223037.png)\n\n Linux \n\n## \n Windows  Linux \n\nWindows  C D \n\n\n Linux \n Linux \n\n Linux  `ls /`\n\n![ls / ](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015105831.png)\n\nLinux  `/`\n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015113020.png)\n\n\n\n `/home`  Linux \n alicebobeve\n\n `/lib`  Windows  DLL \n\n\n<!--  -->\n\n\n\n `/bin`bin  `binary`  `ls``cp``mv``rm` \n bin  `/usr/bin` `vim``gcc` \n\n `/sbin`  `/usr/sbin`\n\n## \n Linux \n\n`ls`\n```\nls\nls -a\nls -l\nls <path>\n```\n\n`cd`\n```\ncd ~ \ncd ..\ncd -\ncd <path>\n```\n\n`mkdir` \n```\nmkdir <name>\nmkdir p <name>\n```\n\n`cp` \n```\ncp <src> <dst>\ncp r <src> <dst>\n```\n\n`mv` \n```\nmv <src> <dst>\n```\n\n`rm` \n```\nrm <target>\nrm r <target>\nrm f <target>\n```\n\n## \n\n\n\n\n\n\n windows Linux \n Linux  root \n `/etc/shadow`  root \n\n root \n root  root \n\n root \n\n### \n\nLinux  `ls -al` \n\n![ls -al ](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015122718.png)\n\n 10 \n\n 10  3 \n\n\n\n| `d` | `-` | `l` | `b` | `c` | `s` | `p` |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n|  |  |  |  |  |  |  |\n\n\n\n| `r` | `w` | `x` | `-` |\n| :---: | :---: | :---: | :---: |\n| 4 | 2 | 1 | 0 |\n\n\n```bash\ndrwxr-xr-x   3 root root       4096  9 11 22:23 home\n```\n\n `/home`  `drwxr-xr-x`\n\n### \n `chmod` \n\n#### \n\n```bash\nchmod [ugoa][+-=][rwx] filename\n```\n\n\n\n\n- `u` \n- `g` \n- `o` \n- `a`  `ugo` \n\n\n- `+` \n- `-` \n- `=` \n\n `rwx`\n\n\n```bash\nchmod u+x filename\nchmod g-w filename\nchmod o=rw- filename\n```\n\n#### \n rwx bit `0` `1` rwx  bit \n bit rwx\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015141918.png)\n\n\n\n `777` `111 111 111`\n```bash\nchmod 777 filename\n```\n\n### \n `chmod`  Linux  `chown``chgrp` \n```bash\nchown user2 filename\nchgrp group2 filename\n```\n\n\n\n## \nLinux \n\n Linux  Linux  Linux \n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015143017.png)\n\n Linux","source":"_posts/linux_for_freshman.md","raw":"---\ntitle:  Linux \ndate: 2023/10/14\nauthor: ma5hr00m\ncategories:\n- Linux\n---\n\n2023  ***Vidar-Team***  Linux \n\n## \n### \n\n\n\nOperating System OS\n\n\n vscodefirefox  C Python \n\n### \n\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231013143007.png)\n\n- CPU\n- \n\n shell\n\n\n## Linux\nLinux  *Linus*  1991 \n\n\n![Linux Logo](https://pakhotin.org/wp-content/uploads/2023/07/53113-106400-Linux-xl.jpg)\n\n Windows Windwos \n Linux \n\n Linux\n Linux \n\n## Linux \n Linux\n\nLinux \n windows  Linux \n\n Windows Linux \n Linux  Linux \n\nLinux \n Linux  Linux \n\n Linux \n\n Windows  Java [](https://www.runoob.com/java/java-environment-setup.html)\n Java  JDK `JAVA_HOME` \n Linux \n```bash\nsudo apt install openjdk-17-jdk\n```\n\n Java \n\n## \nLinux  Linux  Linux *Linux distribution*\n\n Linux \n\n Linux \n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015001556.png)\n\n `Ubuntu``Fedora``ArchLinux``CentOS` \n\n\n Linux  Linux  300 \n\n\n `Ubuntu22.04`  Linux \n\n## Ubuntu\n### \n Ubuntu \n1. VMwareVirtual Box\n2.   \n     \n    Windows  Linux \n3. WSL*Windows Subsystem for Linux* Windows  Linux \n    WSL \n\n Ubuntu \n\n\n###  & \n Ubuntu \n\n![Ubuntu](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015005727.png)\n\n `windows` \n\n\n\n*software source* Linux \n\n*package manager*\n`Ubuntu`  `apt`\n\n\n\n\n\n\n\n `sudo apt update`\n `apt` \n\n `apt` \n\n![apt](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015010916.png)\n\n apt Linux  CentOS  `yum`Fedora  `dnf`Arch  `pacman` \n\n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231014223037.png)\n\n Linux \n\n## \n Windows  Linux \n\nWindows  C D \n\n\n Linux \n Linux \n\n Linux  `ls /`\n\n![ls / ](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015105831.png)\n\nLinux  `/`\n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015113020.png)\n\n\n\n `/home`  Linux \n alicebobeve\n\n `/lib`  Windows  DLL \n\n\n<!--  -->\n\n\n\n `/bin`bin  `binary`  `ls``cp``mv``rm` \n bin  `/usr/bin` `vim``gcc` \n\n `/sbin`  `/usr/sbin`\n\n## \n Linux \n\n`ls`\n```\nls\nls -a\nls -l\nls <path>\n```\n\n`cd`\n```\ncd ~ \ncd ..\ncd -\ncd <path>\n```\n\n`mkdir` \n```\nmkdir <name>\nmkdir p <name>\n```\n\n`cp` \n```\ncp <src> <dst>\ncp r <src> <dst>\n```\n\n`mv` \n```\nmv <src> <dst>\n```\n\n`rm` \n```\nrm <target>\nrm r <target>\nrm f <target>\n```\n\n## \n\n\n\n\n\n\n windows Linux \n Linux  root \n `/etc/shadow`  root \n\n root \n root  root \n\n root \n\n### \n\nLinux  `ls -al` \n\n![ls -al ](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015122718.png)\n\n 10 \n\n 10  3 \n\n\n\n| `d` | `-` | `l` | `b` | `c` | `s` | `p` |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n|  |  |  |  |  |  |  |\n\n\n\n| `r` | `w` | `x` | `-` |\n| :---: | :---: | :---: | :---: |\n| 4 | 2 | 1 | 0 |\n\n\n```bash\ndrwxr-xr-x   3 root root       4096  9 11 22:23 home\n```\n\n `/home`  `drwxr-xr-x`\n\n### \n `chmod` \n\n#### \n\n```bash\nchmod [ugoa][+-=][rwx] filename\n```\n\n\n\n\n- `u` \n- `g` \n- `o` \n- `a`  `ugo` \n\n\n- `+` \n- `-` \n- `=` \n\n `rwx`\n\n\n```bash\nchmod u+x filename\nchmod g-w filename\nchmod o=rw- filename\n```\n\n#### \n rwx bit `0` `1` rwx  bit \n bit rwx\n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015141918.png)\n\n\n\n `777` `111 111 111`\n```bash\nchmod 777 filename\n```\n\n### \n `chmod`  Linux  `chown``chgrp` \n```bash\nchown user2 filename\nchgrp group2 filename\n```\n\n\n\n## \nLinux \n\n Linux  Linux  Linux \n\n\n![Linux](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015143017.png)\n\n Linux","slug":"linux_for_freshman","published":1,"updated":"2024-06-09T12:55:42.717Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap8000wf4lycx870b8u","content":"<p>2023  <em><strong>Vidar-Team</strong></em>  Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p>Operating System OS<br></p>\n<p> vscodefirefox  C Python </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231013143007.png\" alt=\"\"></p>\n<ul>\n<li>CPU</li>\n<li></li>\n</ul>\n<p> shell</p>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><p>Linux  <em>Linus</em>  1991 <br></p>\n<p><img src=\"https://pakhotin.org/wp-content/uploads/2023/07/53113-106400-Linux-xl.jpg\" alt=\"Linux Logo\"></p>\n<p> Windows Windwos <br> Linux </p>\n<p> Linux<br> Linux </p>\n<h2 id=\"Linux-\"><a href=\"#Linux-\" class=\"headerlink\" title=\"Linux \"></a>Linux </h2><p> Linux</p>\n<p>Linux <br> windows  Linux </p>\n<p> Windows Linux <br> Linux  Linux </p>\n<p>Linux <br> Linux  Linux </p>\n<p> Linux </p>\n<p> Windows  Java <a href=\"https://www.runoob.com/java/java-environment-setup.html\"></a><br> Java  JDK <code>JAVA_HOME</code> <br> Linux </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure>\n\n<p> Java </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux  Linux  Linux <em>Linux distribution</em></p>\n<p> Linux </p>\n<p> Linux </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015001556.png\" alt=\"Linux\"></p>\n<p> <code>Ubuntu</code><code>Fedora</code><code>ArchLinux</code><code>CentOS</code> <br></p>\n<p> Linux  Linux  300 <br></p>\n<p> <code>Ubuntu22.04</code>  Linux </p>\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Ubuntu </p>\n<ol>\n<li>VMwareVirtual Box</li>\n<li><br><br> Windows  Linux </li>\n<li>WSL<em>Windows Subsystem for Linux</em> Windows  Linux <br> WSL </li>\n</ol>\n<p> Ubuntu <br></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" &amp; \"></a> &amp; </h3><p> Ubuntu </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015005727.png\" alt=\"Ubuntu\"></p>\n<p> <code>windows</code> </p>\n<p></p>\n<p><em>software source</em> Linux </p>\n<p><em>package manager</em><br><code>Ubuntu</code>  <code>apt</code></p>\n<p><br><br></p>\n<p></p>\n<p> <code>sudo apt update</code><br> <code>apt</code> </p>\n<p> <code>apt</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015010916.png\" alt=\"apt\"></p>\n<p> apt Linux  CentOS  <code>yum</code>Fedora  <code>dnf</code>Arch  <code>pacman</code> <br><br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231014223037.png\" alt=\"Linux\"></p>\n<p> Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Windows  Linux </p>\n<p>Windows  C D <br></p>\n<p> Linux <br> Linux </p>\n<p> Linux  <code>ls /</code></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015105831.png\" alt=\"ls / \"></p>\n<p>Linux  <code>/</code><br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015113020.png\" alt=\"Linux\"></p>\n<p></p>\n<p> <code>/home</code>  Linux <br> alicebobeve</p>\n<p> <code>/lib</code>  Windows  DLL <br></p>\n<!--  -->\n\n<p></p>\n<p> <code>/bin</code>bin  <code>binary</code>  <code>ls</code><code>cp</code><code>mv</code><code>rm</code> <br> bin  <code>/usr/bin</code> <code>vim</code><code>gcc</code> </p>\n<p> <code>/sbin</code>  <code>/usr/sbin</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Linux </p>\n<p><code>ls</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br><span class=\"line\">ls -a</span><br><span class=\"line\">ls -l</span><br><span class=\"line\">ls &lt;path&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>cd</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~ </span><br><span class=\"line\">cd ..</span><br><span class=\"line\">cd -</span><br><span class=\"line\">cd &lt;path&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>mkdir</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &lt;name&gt;</span><br><span class=\"line\">mkdir p &lt;name&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>cp</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp &lt;src&gt; &lt;dst&gt;</span><br><span class=\"line\">cp r &lt;src&gt; &lt;dst&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>mv</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv &lt;src&gt; &lt;dst&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>rm</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm &lt;target&gt;</span><br><span class=\"line\">rm r &lt;target&gt;</span><br><span class=\"line\">rm f &lt;target&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><br><br></p>\n<p> windows Linux <br> Linux  root <br> <code>/etc/shadow</code>  root </p>\n<p> root <br> root  root </p>\n<p> root </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Linux  <code>ls -al</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015122718.png\" alt=\"ls -al \"></p>\n<p> 10 </p>\n<p> 10  3 </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><code>d</code></th>\n<th align=\"center\"><code>-</code></th>\n<th align=\"center\"><code>l</code></th>\n<th align=\"center\"><code>b</code></th>\n<th align=\"center\"><code>c</code></th>\n<th align=\"center\"><code>s</code></th>\n<th align=\"center\"><code>p</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><code>r</code></th>\n<th align=\"center\"><code>w</code></th>\n<th align=\"center\"><code>x</code></th>\n<th align=\"center\"><code>-</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">4</td>\n<td align=\"center\">2</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody></table>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drwxr-xr-x   3 root root       4096  9 11 22:23 home</span><br></pre></td></tr></table></figure>\n\n<p> <code>/home</code>  <code>drwxr-xr-x</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>chmod</code> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> [ugoa][+-=][rwx] filename</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p></p>\n<ul>\n<li><code>u</code> </li>\n<li><code>g</code> </li>\n<li><code>o</code> </li>\n<li><code>a</code>  <code>ugo</code> </li>\n</ul>\n<p></p>\n<ul>\n<li><code>+</code> </li>\n<li><code>-</code> </li>\n<li><code>=</code> </li>\n</ul>\n<p> <code>rwx</code></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> u+x filename</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> g-w filename</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> o=rw- filename</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> rwx bit <code>0</code> <code>1</code> rwx  bit <br> bit rwx</p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015141918.png\" alt=\"\"></p>\n<p></p>\n<p> <code>777</code> <code>111 111 111</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 777 filename</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>chmod</code>  Linux  <code>chown</code><code>chgrp</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chown</span> user2 filename</span><br><span class=\"line\"><span class=\"built_in\">chgrp</span> group2 filename</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux </p>\n<p> Linux  Linux  Linux <br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015143017.png\" alt=\"Linux\"></p>\n<p> Linux</p>\n","excerpt":"","more":"<p>2023  <em><strong>Vidar-Team</strong></em>  Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br></p>\n<p>Operating System OS<br></p>\n<p> vscodefirefox  C Python </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231013143007.png\" alt=\"\"></p>\n<ul>\n<li>CPU</li>\n<li></li>\n</ul>\n<p> shell</p>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><p>Linux  <em>Linus</em>  1991 <br></p>\n<p><img src=\"https://pakhotin.org/wp-content/uploads/2023/07/53113-106400-Linux-xl.jpg\" alt=\"Linux Logo\"></p>\n<p> Windows Windwos <br> Linux </p>\n<p> Linux<br> Linux </p>\n<h2 id=\"Linux-\"><a href=\"#Linux-\" class=\"headerlink\" title=\"Linux \"></a>Linux </h2><p> Linux</p>\n<p>Linux <br> windows  Linux </p>\n<p> Windows Linux <br> Linux  Linux </p>\n<p>Linux <br> Linux  Linux </p>\n<p> Linux </p>\n<p> Windows  Java <a href=\"https://www.runoob.com/java/java-environment-setup.html\"></a><br> Java  JDK <code>JAVA_HOME</code> <br> Linux </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure>\n\n<p> Java </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux  Linux  Linux <em>Linux distribution</em></p>\n<p> Linux </p>\n<p> Linux </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015001556.png\" alt=\"Linux\"></p>\n<p> <code>Ubuntu</code><code>Fedora</code><code>ArchLinux</code><code>CentOS</code> <br></p>\n<p> Linux  Linux  300 <br></p>\n<p> <code>Ubuntu22.04</code>  Linux </p>\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Ubuntu </p>\n<ol>\n<li>VMwareVirtual Box</li>\n<li><br><br> Windows  Linux </li>\n<li>WSL<em>Windows Subsystem for Linux</em> Windows  Linux <br> WSL </li>\n</ol>\n<p> Ubuntu <br></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" &amp; \"></a> &amp; </h3><p> Ubuntu </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015005727.png\" alt=\"Ubuntu\"></p>\n<p> <code>windows</code> </p>\n<p></p>\n<p><em>software source</em> Linux </p>\n<p><em>package manager</em><br><code>Ubuntu</code>  <code>apt</code></p>\n<p><br><br></p>\n<p></p>\n<p> <code>sudo apt update</code><br> <code>apt</code> </p>\n<p> <code>apt</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015010916.png\" alt=\"apt\"></p>\n<p> apt Linux  CentOS  <code>yum</code>Fedora  <code>dnf</code>Arch  <code>pacman</code> <br><br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231014223037.png\" alt=\"Linux\"></p>\n<p> Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Windows  Linux </p>\n<p>Windows  C D <br></p>\n<p> Linux <br> Linux </p>\n<p> Linux  <code>ls /</code></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015105831.png\" alt=\"ls / \"></p>\n<p>Linux  <code>/</code><br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015113020.png\" alt=\"Linux\"></p>\n<p></p>\n<p> <code>/home</code>  Linux <br> alicebobeve</p>\n<p> <code>/lib</code>  Windows  DLL <br></p>\n<!--  -->\n\n<p></p>\n<p> <code>/bin</code>bin  <code>binary</code>  <code>ls</code><code>cp</code><code>mv</code><code>rm</code> <br> bin  <code>/usr/bin</code> <code>vim</code><code>gcc</code> </p>\n<p> <code>/sbin</code>  <code>/usr/sbin</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Linux </p>\n<p><code>ls</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br><span class=\"line\">ls -a</span><br><span class=\"line\">ls -l</span><br><span class=\"line\">ls &lt;path&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>cd</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~ </span><br><span class=\"line\">cd ..</span><br><span class=\"line\">cd -</span><br><span class=\"line\">cd &lt;path&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>mkdir</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &lt;name&gt;</span><br><span class=\"line\">mkdir p &lt;name&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>cp</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp &lt;src&gt; &lt;dst&gt;</span><br><span class=\"line\">cp r &lt;src&gt; &lt;dst&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>mv</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv &lt;src&gt; &lt;dst&gt;</span><br></pre></td></tr></table></figure>\n\n<p><code>rm</code> </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm &lt;target&gt;</span><br><span class=\"line\">rm r &lt;target&gt;</span><br><span class=\"line\">rm f &lt;target&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><br><br></p>\n<p> windows Linux <br> Linux  root <br> <code>/etc/shadow</code>  root </p>\n<p> root <br> root  root </p>\n<p> root </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Linux  <code>ls -al</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015122718.png\" alt=\"ls -al \"></p>\n<p> 10 </p>\n<p> 10  3 </p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><code>d</code></th>\n<th align=\"center\"><code>-</code></th>\n<th align=\"center\"><code>l</code></th>\n<th align=\"center\"><code>b</code></th>\n<th align=\"center\"><code>c</code></th>\n<th align=\"center\"><code>s</code></th>\n<th align=\"center\"><code>p</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><code>r</code></th>\n<th align=\"center\"><code>w</code></th>\n<th align=\"center\"><code>x</code></th>\n<th align=\"center\"><code>-</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">4</td>\n<td align=\"center\">2</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody></table>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drwxr-xr-x   3 root root       4096  9 11 22:23 home</span><br></pre></td></tr></table></figure>\n\n<p> <code>/home</code>  <code>drwxr-xr-x</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>chmod</code> </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> [ugoa][+-=][rwx] filename</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p></p>\n<ul>\n<li><code>u</code> </li>\n<li><code>g</code> </li>\n<li><code>o</code> </li>\n<li><code>a</code>  <code>ugo</code> </li>\n</ul>\n<p></p>\n<ul>\n<li><code>+</code> </li>\n<li><code>-</code> </li>\n<li><code>=</code> </li>\n</ul>\n<p> <code>rwx</code></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> u+x filename</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> g-w filename</span><br><span class=\"line\"><span class=\"built_in\">chmod</span> o=rw- filename</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> rwx bit <code>0</code> <code>1</code> rwx  bit <br> bit rwx</p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015141918.png\" alt=\"\"></p>\n<p></p>\n<p> <code>777</code> <code>111 111 111</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> 777 filename</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>chmod</code>  Linux  <code>chown</code><code>chgrp</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chown</span> user2 filename</span><br><span class=\"line\"><span class=\"built_in\">chgrp</span> group2 filename</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Linux </p>\n<p> Linux  Linux  Linux <br></p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20231015143017.png\" alt=\"Linux\"></p>\n<p> Linux</p>\n"},{"title":" nvm  Node.js ","date":"2023-06-11T16:00:00.000Z","author":"ma5hr00m","_content":"\n `Ubuntu22.04` Linux \n\n## \n Node.js\n\n> Node.js is an open-source, cross-platform JavaScript runtime environment.\n\n Node.js  Web  Node.js `nvm`  node.js  Node.js\n\n## nvm\n Node.js\n\n `curl` \n\n curl nvm\n```bash\nsudo curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | sh\n```\n\n nvm\n```bash\n# bash\n=> nvm is already installed in /root/.nvm, trying to update the script\n=> nvm source string already in /root/.profile\n=> bash_completion source string already in /root/.profile\n=> Close and reopen your terminal to start using nvm or run the following to use it now:\nexport NVM_DIR=\"$HOME/.nvm\"\n```\n\n `nvm -v`  nvm \n```bash\nnvm --version\n# 0.35.3\n```\n\n### \n curl  nvm \n```bash\ncurl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused\n```\n\n `/etc/hosts`  dns \n```\n199.232.68.133 raw.githubusercontent.com\n199.232.68.133 user-images.githubusercontent.com\n199.232.68.133 avatars2.githubusercontent.com\n199.232.68.133 avatars1.githubusercontent.com\n```\n\n\n\n## Node.js\n nvm  Node.js  node \n```bash\nnvm ls-remote\n```\n\n `v0.1.14`  `v20,5.1`  `v20.0.0`  node \n```bash\nnvm install v20.0.0\n```\n\n `Checksums matched!`  node \n\n node \n```bash\nnode -v \n# v20.0.0\n```\n\n nvm \n```bash\n#  node\nnvm install <version>\n\n#  node\nnvm use <version>\n\n#  node\nnvm ls\n\n#  node\nnvm ls-remote\n\n#  node \nnvm current\n```\n\n## \n Node,js  docker  nvm\n\n Node.js web \n\n vim  `app.js`\n```javascript\nconst http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/plain');\n  res.end('hello, Node.js!');\n});\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});\n```\n\n web  [http://127.0.0.1:3000](http://127.0.0.1:3000)  `hello, Node.js!` \n\n Node.js \n\n## \n DNS \n\nDNS  IP  DNS  [nvm ](https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh)  DNS ","source":"_posts/nvm-node.md","raw":"---\ntitle:  nvm  Node.js \ndate: 2023/6/12\nauthor: ma5hr00m\ncategories:\n- Node.js\n---\n\n `Ubuntu22.04` Linux \n\n## \n Node.js\n\n> Node.js is an open-source, cross-platform JavaScript runtime environment.\n\n Node.js  Web  Node.js `nvm`  node.js  Node.js\n\n## nvm\n Node.js\n\n `curl` \n\n curl nvm\n```bash\nsudo curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | sh\n```\n\n nvm\n```bash\n# bash\n=> nvm is already installed in /root/.nvm, trying to update the script\n=> nvm source string already in /root/.profile\n=> bash_completion source string already in /root/.profile\n=> Close and reopen your terminal to start using nvm or run the following to use it now:\nexport NVM_DIR=\"$HOME/.nvm\"\n```\n\n `nvm -v`  nvm \n```bash\nnvm --version\n# 0.35.3\n```\n\n### \n curl  nvm \n```bash\ncurl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused\n```\n\n `/etc/hosts`  dns \n```\n199.232.68.133 raw.githubusercontent.com\n199.232.68.133 user-images.githubusercontent.com\n199.232.68.133 avatars2.githubusercontent.com\n199.232.68.133 avatars1.githubusercontent.com\n```\n\n\n\n## Node.js\n nvm  Node.js  node \n```bash\nnvm ls-remote\n```\n\n `v0.1.14`  `v20,5.1`  `v20.0.0`  node \n```bash\nnvm install v20.0.0\n```\n\n `Checksums matched!`  node \n\n node \n```bash\nnode -v \n# v20.0.0\n```\n\n nvm \n```bash\n#  node\nnvm install <version>\n\n#  node\nnvm use <version>\n\n#  node\nnvm ls\n\n#  node\nnvm ls-remote\n\n#  node \nnvm current\n```\n\n## \n Node,js  docker  nvm\n\n Node.js web \n\n vim  `app.js`\n```javascript\nconst http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/plain');\n  res.end('hello, Node.js!');\n});\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});\n```\n\n web  [http://127.0.0.1:3000](http://127.0.0.1:3000)  `hello, Node.js!` \n\n Node.js \n\n## \n DNS \n\nDNS  IP  DNS  [nvm ](https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh)  DNS ","slug":"nvm-node","published":1,"updated":"2024-06-09T12:56:11.441Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap9000yf4ly6y2z6e7s","content":"<p> <code>Ubuntu22.04</code> Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Node.js</p>\n<blockquote>\n<p>Node.js is an open-source, cross-platform JavaScript runtime environment.</p>\n</blockquote>\n<p> Node.js  Web  Node.js <code>nvm</code>  node.js  Node.js</p>\n<h2 id=\"nvm\"><a href=\"#nvm\" class=\"headerlink\" title=\"nvm\"></a>nvm</h2><p> Node.js</p>\n<p> <code>curl</code> </p>\n<p> curl nvm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | sh</span><br></pre></td></tr></table></figure>\n\n<p> nvm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\">=&gt; nvm is already installed <span class=\"keyword\">in</span> /root/.nvm, trying to update the script</span><br><span class=\"line\">=&gt; nvm <span class=\"built_in\">source</span> string already <span class=\"keyword\">in</span> /root/.profile</span><br><span class=\"line\">=&gt; bash_completion <span class=\"built_in\">source</span> string already <span class=\"keyword\">in</span> /root/.profile</span><br><span class=\"line\">=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:</span><br><span class=\"line\"><span class=\"built_in\">export</span> NVM_DIR=<span class=\"string\">&quot;<span class=\"variable\">$HOME</span>/.nvm&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>nvm -v</code>  nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm --version</span><br><span class=\"line\"><span class=\"comment\"># 0.35.3</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> curl  nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused</span><br></pre></td></tr></table></figure>\n\n<p> <code>/etc/hosts</code>  dns </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">199.232.68.133 raw.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 user-images.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 avatars2.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 avatars1.githubusercontent.com</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h2><p> nvm  Node.js  node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm ls-remote</span><br></pre></td></tr></table></figure>\n\n<p> <code>v0.1.14</code>  <code>v20,5.1</code>  <code>v20.0.0</code>  node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install v20.0.0</span><br></pre></td></tr></table></figure>\n\n<p> <code>Checksums matched!</code>  node </p>\n<p> node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v </span><br><span class=\"line\"><span class=\"comment\"># v20.0.0</span></span><br></pre></td></tr></table></figure>\n\n<p> nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm install &lt;version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm use &lt;version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm <span class=\"built_in\">ls</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm ls-remote</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node </span></span><br><span class=\"line\">nvm current</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Node,js  docker  nvm</p>\n<p> Node.js web </p>\n<p> vim  <code>app.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> hostname = <span class=\"string\">&#x27;127.0.0.1&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.<span class=\"title function_\">createServer</span>(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.<span class=\"property\">statusCode</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">  res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&#x27;Content-Type&#x27;</span>, <span class=\"string\">&#x27;text/plain&#x27;</span>);</span><br><span class=\"line\">  res.<span class=\"title function_\">end</span>(<span class=\"string\">&#x27;hello, Node.js!&#x27;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">server.<span class=\"title function_\">listen</span>(port, hostname, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Server running at http://<span class=\"subst\">$&#123;hostname&#125;</span>:<span class=\"subst\">$&#123;port&#125;</span>/`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> web  <a href=\"http://127.0.0.1:3000/\">http://127.0.0.1:3000</a>  <code>hello, Node.js!</code> </p>\n<p> Node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> DNS </p>\n<p>DNS  IP  DNS  <a href=\"https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh\">nvm </a>  DNS </p>\n","excerpt":"","more":"<p> <code>Ubuntu22.04</code> Linux </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Node.js</p>\n<blockquote>\n<p>Node.js is an open-source, cross-platform JavaScript runtime environment.</p>\n</blockquote>\n<p> Node.js  Web  Node.js <code>nvm</code>  node.js  Node.js</p>\n<h2 id=\"nvm\"><a href=\"#nvm\" class=\"headerlink\" title=\"nvm\"></a>nvm</h2><p> Node.js</p>\n<p> <code>curl</code> </p>\n<p> curl nvm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | sh</span><br></pre></td></tr></table></figure>\n\n<p> nvm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\">=&gt; nvm is already installed <span class=\"keyword\">in</span> /root/.nvm, trying to update the script</span><br><span class=\"line\">=&gt; nvm <span class=\"built_in\">source</span> string already <span class=\"keyword\">in</span> /root/.profile</span><br><span class=\"line\">=&gt; bash_completion <span class=\"built_in\">source</span> string already <span class=\"keyword\">in</span> /root/.profile</span><br><span class=\"line\">=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:</span><br><span class=\"line\"><span class=\"built_in\">export</span> NVM_DIR=<span class=\"string\">&quot;<span class=\"variable\">$HOME</span>/.nvm&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>nvm -v</code>  nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm --version</span><br><span class=\"line\"><span class=\"comment\"># 0.35.3</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> curl  nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused</span><br></pre></td></tr></table></figure>\n\n<p> <code>/etc/hosts</code>  dns </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">199.232.68.133 raw.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 user-images.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 avatars2.githubusercontent.com</span><br><span class=\"line\">199.232.68.133 avatars1.githubusercontent.com</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h2 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h2><p> nvm  Node.js  node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm ls-remote</span><br></pre></td></tr></table></figure>\n\n<p> <code>v0.1.14</code>  <code>v20,5.1</code>  <code>v20.0.0</code>  node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install v20.0.0</span><br></pre></td></tr></table></figure>\n\n<p> <code>Checksums matched!</code>  node </p>\n<p> node </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v </span><br><span class=\"line\"><span class=\"comment\"># v20.0.0</span></span><br></pre></td></tr></table></figure>\n\n<p> nvm </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm install &lt;version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm use &lt;version&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm <span class=\"built_in\">ls</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node</span></span><br><span class=\"line\">nvm ls-remote</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  node </span></span><br><span class=\"line\">nvm current</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Node,js  docker  nvm</p>\n<p> Node.js web </p>\n<p> vim  <code>app.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> hostname = <span class=\"string\">&#x27;127.0.0.1&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.<span class=\"title function_\">createServer</span>(<span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  res.<span class=\"property\">statusCode</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">  res.<span class=\"title function_\">setHeader</span>(<span class=\"string\">&#x27;Content-Type&#x27;</span>, <span class=\"string\">&#x27;text/plain&#x27;</span>);</span><br><span class=\"line\">  res.<span class=\"title function_\">end</span>(<span class=\"string\">&#x27;hello, Node.js!&#x27;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">server.<span class=\"title function_\">listen</span>(port, hostname, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Server running at http://<span class=\"subst\">$&#123;hostname&#125;</span>:<span class=\"subst\">$&#123;port&#125;</span>/`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> web  <a href=\"http://127.0.0.1:3000/\">http://127.0.0.1:3000</a>  <code>hello, Node.js!</code> </p>\n<p> Node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> DNS </p>\n<p>DNS  IP  DNS  <a href=\"https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh\">nvm </a>  DNS </p>\n"},{"title":" Koa2+SQLite  CRUD API","date":"2023-04-27T16:00:00.000Z","author":"ma5hr00m","_content":"\n React  koa  node.js \n\n## \n\n\n### koa\n`koa`  Node.js  Web **** HTTP  koa  Express\n\n [koa ](https://www.koajs.com.cn/) \n\n koa \n\n[Koa3 ](https://chenshenhai.github.io/koa2-note/)\n\n### sqlite\n`sqlite`  SQL  MySQL  sqlite.db  sqlite\n\n## \n`MVC` \n\n![MVC](https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828212321994.png)\n\nMVC  Model-View-Controller--\n\nMVC ModelViewControllerModel Controller View \n\nMVC \n\n MVC\n- [MVPModel-View-Presenter](https://zh.wikipedia.org/wiki/Model-view-presenter)\n- [MVVMModel-View-ViewModel](https://en.wikipedia.org/wiki/Modelviewviewmodel)\n\n## \n `users`  idusername  password  koa  crud api  `postman` \n\n GitHub \n\n[koa2-crud-example](https://github.com/ma5hr00m/koa2-crud-example)\n\n## \n koa  [Koa ](https://www.koajs.com.cn/#application)\n```bash\n#  node.js \nmkdir example\ncd example\nyarn init\n\n#  koa\nyarn add -D koa\n```\n\n## init & ping\n[ URL - ](https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960) koa  `/ping` api \n\n\n```bash\nyarn add -D koa-router require-directory\n```\n\n`koa-router`  koa  Express  app.getapp.putapp.post  URL  URL  OPTIONS  405  501 \n\n`require-directory`  `require()`  Common JS\n\n koa  http://localhost:3000/ping  `pong!` \n\n\n\n<div align='center'>\n    <img style='height:200px' src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828220513695.png' />\n</div>\n\n`/core/init.js`  /api/  api \n\n```js\nconst requireDirectory = require('require-directory');\nconst Router = require('koa-router');\n\nclass InitManager {\n    static initCore(app) {\n        InitManager.app = app;\n        InitManager.initLoadRouters();\n    }\n\n    static initLoadRouters() {\n        function whenLoadModule(obj) {\n            if (obj instanceof Router) {\n                InitManager.app.use(obj.routes())\n            }\n        }\n\n        const apiDirectory = `${process.cwd()}/api`\n        \n        requireDirectory(module, apiDirectory, {\n            visit: whenLoadModule\n        });\n    }\n}\n\nmodule.exports = InitManager;\n```\n\n`/api/ping.js`  api  /ping  `pong!` \n\n```js\nconst Router = require('koa-router');\n\nconst router = new Router();\n\nrouter.get('/ping',async ctx => {\n    ctx.body = 'pong!';\n} );\n\nmodule.exports = router;\n```\n\n`/app.js`  Koa  `init.js`  api  3000 \n\n```js\nconst Koa = require('koa');\nconst InitManager = require('./core/init');\n\nconst app = new Koa();\n\nInitManager.initCore(app);\n\napp.listen(3000);\nconsole.log(` Listening on localhost:3000 ...`);\n```\n\n\n\n```bash\nnode app.js\n```\n\n## database\n\n```bash\nyarn add -D sqlite3 sequelize\n```\n\n`sequelize`  promise  Node.js ORM PostgresSQLMySQLMariaDBSQLite  Microsoft SQL Server \n\n Raw SQL SQL \n\n `/database/db.js`\n\n```js\n//  database.db\nconst { Sequelize } = require('sequelize');\n\nconst sequelize = new Sequelize({\n    dialect: 'sqlite',\n    storage: './sqlite.db'\n});\n\ntry {\n    sequelize.authenticate();\n    console.log(`Connect to database successfully`);\n} catch (err) {\n    console.log(`Connection failed: ${err}`);\n}\n\nmodule.exports = { sequelize };\n```\n\n## schema\n `/schema/user.js`\n```js\nconst { DataTypes } = require('sequelize');\n\nmodule.exports = function(sequelize) {\n    return sequelize.define('user', {\n        id: {\n            type: DataTypes.INTEGER,\n            primaryKey: true,\n            autoIncrement: true,\n            allowNull: false,\n            field: 'id',\n        },\n        username: {\n            type: DataTypes.TEXT,\n            allowNull: false,\n            field: 'username',\n        },\n        password: {\n            type: DataTypes.TEXT,\n            allowNull: false,\n            field: 'password',\n        },\n    });\n}\n```\n\n## modules\n `userModel`  `users` \n```js\nconst db = require('../database/db');\n\nconst sequelize = db.sequelize;\n\nconst user = require('../schema/user')(sequelize);\nuser.sync({force: false});\n\nclass userModel {\n    static async showAllUsers() {\n        const users = await user.findAll();\n        return users;\n    }\n\n    static async createUser(username, password) {\n        const newUser = await user.create({\n            username,\n            password\n        });\n        return newUser;\n    }\n\n    static async deleteUser(username) {\n        const result = await user.destroy({\n            where: {\n                username\n            }\n        });\n        return result;\n    }\n\n    static async searchUser(username) {\n        const result = await user.findOne({\n            where: {\n                username\n            }\n        });\n        return result;\n    }\n\n    static async updateUser(userId, username, password) {\n        const result = await user.update({\n            username,\n            password,\n        }, {\n            where: {\n                id: userId\n            }\n        });\n        return result;\n    }\n}\n\nmodule.exports = userModel;\n```\n\n## controllers\n `userController`  HTTP \n\ncontrollers  modules \n```javascript\nconst userModel = require('../modules/user');\n\nclass userController {\n    static async show(ctx) {\n        const users = await userModel.showAllUsers();\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: users\n        };\n    }\n\n    static async create(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const password = data.password;\n        console.log(username + ' ' + password);\n\n        const newUser = await userModel.createUser(username, password);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: newUser\n        };\n    }\n\n    static async delete(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const result = await userModel.deleteUser(username);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n\n    static async search(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const result = await userModel.searchUser(username);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n\n    static async update(ctx) {\n        const data = ctx.request.body;\n        const userId = data.userId;\n        const username = data.username;\n        const password = data.password;\n        const result = await userModel.updateUser(userId, username, password);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n}\n\nmodule.exports = userController;\n```\n\n## router/api\n `userControllers` \n\n`/api/show` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.get('/api/show', userController.show);\n\nmodule.exports = router;\n```\n\n`/api/create` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/create', userController.create);\n\nmodule.exports = router;\n```\n\n`/api/delete` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/delete', userController.delete);\n\nmodule.exports = router;\n```\n\n`/api/search` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/search', userController.search);\n\nmodule.exports = router;\n```\n\n`/api/update` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/update', userController.update);\n\nmodule.exports = router;\n```\n\n## bodyparser & cors\n### \n kao  POST  body \n\n controllers  POST \n```javascript\n// /controllers/user.js\nclass userController {\n \t... ...\n    \n    static async create(ctx) {\n        //  POST  username & password \n        const data = ctx.request.body;\n        const username = data.username;\n        const password = data.password;\n        ...\n    }\n\n    ... ...\n}\n```\n\n\n```bash\nyarn add -D koa-bodyparser\n```\n\n`koa-bodyparser`  koa  HTTP body `ctx.request.body`  JSONmultipart\n\n app.js  body \n\n```javascript\nconst bodyParser = require('koa-bodyparser');\n\napp.use(bodyParser());\n```\n\n### \n koa  [http://localhost:3000](http://localhost:3000) react  [http://localhost:5173](http://localhost:5173) api \n\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829135418397.png' />\n</div>\n\n app.js CORS\n```bash\nyarn add -D koa-cors\n```\n\n app.js \n```javascript\nconst cors = require('koa-cors');\n...\napp.use(cors());\n```\n\n## app\n app.js\n\n```JavaScript\nconst Koa = require('koa');\nconst bodyParser = require('koa-bodyparser');\nconst cors = require('koa-cors');\nconst InitManager = require('./core/init');\n\nconst app = new Koa();\n\napp.use(cors());\napp.use(bodyParser());\nInitManager.initCore(app);\n\napp.listen(3000);\nconsole.log(` Listening on localhost:3000 ...`);\n```\n\n `node app.js`  koa \n\n## \n koa-crud\n\n api \n\n `postman`\n\npostman  API  HTTP  API \n\n postman HTTP  GETPOST  PUTassertionsAPI\n\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829141158347.png' />\n</div>\n\n [postman ](https://www.postman.com/) \n\n## \n `kao+sqlite`  CRUD \n\n koa  api  POST  `RESTful`  POST \n\n controllers  DEBUG\n\n koa-bodyparser \n\n> \n\n koa  GitHub  api  `/api/v1/*` `/api/v2/`\n\n## \n- [Koa ](https://www.koajs.com.cn/#)\n- [Koa2 ](https://chenshenhai.github.io/koa2-note/)\n- [koa - ](https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960)\n- [Koa  - ](https://ruanyifeng.com/blog/2017/08/koa.html)\n- [koa sqlite3  - ](https://juejin.cn/post/7066568536944017438#heading-8)\n\n## \nCRUD\n\n`koa`  `sqlite` ","source":"_posts/koa2-crud-example.md","raw":"---\ntitle:  Koa2+SQLite  CRUD API\ndate: 2023/04/28\nauthor: ma5hr00m\ncategories:\n- Node.js\n---\n\n React  koa  node.js \n\n## \n\n\n### koa\n`koa`  Node.js  Web **** HTTP  koa  Express\n\n [koa ](https://www.koajs.com.cn/) \n\n koa \n\n[Koa3 ](https://chenshenhai.github.io/koa2-note/)\n\n### sqlite\n`sqlite`  SQL  MySQL  sqlite.db  sqlite\n\n## \n`MVC` \n\n![MVC](https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828212321994.png)\n\nMVC  Model-View-Controller--\n\nMVC ModelViewControllerModel Controller View \n\nMVC \n\n MVC\n- [MVPModel-View-Presenter](https://zh.wikipedia.org/wiki/Model-view-presenter)\n- [MVVMModel-View-ViewModel](https://en.wikipedia.org/wiki/Modelviewviewmodel)\n\n## \n `users`  idusername  password  koa  crud api  `postman` \n\n GitHub \n\n[koa2-crud-example](https://github.com/ma5hr00m/koa2-crud-example)\n\n## \n koa  [Koa ](https://www.koajs.com.cn/#application)\n```bash\n#  node.js \nmkdir example\ncd example\nyarn init\n\n#  koa\nyarn add -D koa\n```\n\n## init & ping\n[ URL - ](https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960) koa  `/ping` api \n\n\n```bash\nyarn add -D koa-router require-directory\n```\n\n`koa-router`  koa  Express  app.getapp.putapp.post  URL  URL  OPTIONS  405  501 \n\n`require-directory`  `require()`  Common JS\n\n koa  http://localhost:3000/ping  `pong!` \n\n\n\n<div align='center'>\n    <img style='height:200px' src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828220513695.png' />\n</div>\n\n`/core/init.js`  /api/  api \n\n```js\nconst requireDirectory = require('require-directory');\nconst Router = require('koa-router');\n\nclass InitManager {\n    static initCore(app) {\n        InitManager.app = app;\n        InitManager.initLoadRouters();\n    }\n\n    static initLoadRouters() {\n        function whenLoadModule(obj) {\n            if (obj instanceof Router) {\n                InitManager.app.use(obj.routes())\n            }\n        }\n\n        const apiDirectory = `${process.cwd()}/api`\n        \n        requireDirectory(module, apiDirectory, {\n            visit: whenLoadModule\n        });\n    }\n}\n\nmodule.exports = InitManager;\n```\n\n`/api/ping.js`  api  /ping  `pong!` \n\n```js\nconst Router = require('koa-router');\n\nconst router = new Router();\n\nrouter.get('/ping',async ctx => {\n    ctx.body = 'pong!';\n} );\n\nmodule.exports = router;\n```\n\n`/app.js`  Koa  `init.js`  api  3000 \n\n```js\nconst Koa = require('koa');\nconst InitManager = require('./core/init');\n\nconst app = new Koa();\n\nInitManager.initCore(app);\n\napp.listen(3000);\nconsole.log(` Listening on localhost:3000 ...`);\n```\n\n\n\n```bash\nnode app.js\n```\n\n## database\n\n```bash\nyarn add -D sqlite3 sequelize\n```\n\n`sequelize`  promise  Node.js ORM PostgresSQLMySQLMariaDBSQLite  Microsoft SQL Server \n\n Raw SQL SQL \n\n `/database/db.js`\n\n```js\n//  database.db\nconst { Sequelize } = require('sequelize');\n\nconst sequelize = new Sequelize({\n    dialect: 'sqlite',\n    storage: './sqlite.db'\n});\n\ntry {\n    sequelize.authenticate();\n    console.log(`Connect to database successfully`);\n} catch (err) {\n    console.log(`Connection failed: ${err}`);\n}\n\nmodule.exports = { sequelize };\n```\n\n## schema\n `/schema/user.js`\n```js\nconst { DataTypes } = require('sequelize');\n\nmodule.exports = function(sequelize) {\n    return sequelize.define('user', {\n        id: {\n            type: DataTypes.INTEGER,\n            primaryKey: true,\n            autoIncrement: true,\n            allowNull: false,\n            field: 'id',\n        },\n        username: {\n            type: DataTypes.TEXT,\n            allowNull: false,\n            field: 'username',\n        },\n        password: {\n            type: DataTypes.TEXT,\n            allowNull: false,\n            field: 'password',\n        },\n    });\n}\n```\n\n## modules\n `userModel`  `users` \n```js\nconst db = require('../database/db');\n\nconst sequelize = db.sequelize;\n\nconst user = require('../schema/user')(sequelize);\nuser.sync({force: false});\n\nclass userModel {\n    static async showAllUsers() {\n        const users = await user.findAll();\n        return users;\n    }\n\n    static async createUser(username, password) {\n        const newUser = await user.create({\n            username,\n            password\n        });\n        return newUser;\n    }\n\n    static async deleteUser(username) {\n        const result = await user.destroy({\n            where: {\n                username\n            }\n        });\n        return result;\n    }\n\n    static async searchUser(username) {\n        const result = await user.findOne({\n            where: {\n                username\n            }\n        });\n        return result;\n    }\n\n    static async updateUser(userId, username, password) {\n        const result = await user.update({\n            username,\n            password,\n        }, {\n            where: {\n                id: userId\n            }\n        });\n        return result;\n    }\n}\n\nmodule.exports = userModel;\n```\n\n## controllers\n `userController`  HTTP \n\ncontrollers  modules \n```javascript\nconst userModel = require('../modules/user');\n\nclass userController {\n    static async show(ctx) {\n        const users = await userModel.showAllUsers();\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: users\n        };\n    }\n\n    static async create(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const password = data.password;\n        console.log(username + ' ' + password);\n\n        const newUser = await userModel.createUser(username, password);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: newUser\n        };\n    }\n\n    static async delete(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const result = await userModel.deleteUser(username);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n\n    static async search(ctx) {\n        const data = ctx.request.body;\n        const username = data.username;\n        const result = await userModel.searchUser(username);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n\n    static async update(ctx) {\n        const data = ctx.request.body;\n        const userId = data.userId;\n        const username = data.username;\n        const password = data.password;\n        const result = await userModel.updateUser(userId, username, password);\n        ctx.response.status = 200;\n        ctx.body = {\n            status: 200,\n            message: 'success',\n            data: result\n        };\n    }\n}\n\nmodule.exports = userController;\n```\n\n## router/api\n `userControllers` \n\n`/api/show` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.get('/api/show', userController.show);\n\nmodule.exports = router;\n```\n\n`/api/create` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/create', userController.create);\n\nmodule.exports = router;\n```\n\n`/api/delete` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/delete', userController.delete);\n\nmodule.exports = router;\n```\n\n`/api/search` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/search', userController.search);\n\nmodule.exports = router;\n```\n\n`/api/update` \n```javascript\nconst Router = require('koa-router');\nconst userController = require('../controllers/user');\n\nconst router = new Router();\n\nrouter.post('/api/update', userController.update);\n\nmodule.exports = router;\n```\n\n## bodyparser & cors\n### \n kao  POST  body \n\n controllers  POST \n```javascript\n// /controllers/user.js\nclass userController {\n \t... ...\n    \n    static async create(ctx) {\n        //  POST  username & password \n        const data = ctx.request.body;\n        const username = data.username;\n        const password = data.password;\n        ...\n    }\n\n    ... ...\n}\n```\n\n\n```bash\nyarn add -D koa-bodyparser\n```\n\n`koa-bodyparser`  koa  HTTP body `ctx.request.body`  JSONmultipart\n\n app.js  body \n\n```javascript\nconst bodyParser = require('koa-bodyparser');\n\napp.use(bodyParser());\n```\n\n### \n koa  [http://localhost:3000](http://localhost:3000) react  [http://localhost:5173](http://localhost:5173) api \n\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829135418397.png' />\n</div>\n\n app.js CORS\n```bash\nyarn add -D koa-cors\n```\n\n app.js \n```javascript\nconst cors = require('koa-cors');\n...\napp.use(cors());\n```\n\n## app\n app.js\n\n```JavaScript\nconst Koa = require('koa');\nconst bodyParser = require('koa-bodyparser');\nconst cors = require('koa-cors');\nconst InitManager = require('./core/init');\n\nconst app = new Koa();\n\napp.use(cors());\napp.use(bodyParser());\nInitManager.initCore(app);\n\napp.listen(3000);\nconsole.log(` Listening on localhost:3000 ...`);\n```\n\n `node app.js`  koa \n\n## \n koa-crud\n\n api \n\n `postman`\n\npostman  API  HTTP  API \n\n postman HTTP  GETPOST  PUTassertionsAPI\n\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829141158347.png' />\n</div>\n\n [postman ](https://www.postman.com/) \n\n## \n `kao+sqlite`  CRUD \n\n koa  api  POST  `RESTful`  POST \n\n controllers  DEBUG\n\n koa-bodyparser \n\n> \n\n koa  GitHub  api  `/api/v1/*` `/api/v2/`\n\n## \n- [Koa ](https://www.koajs.com.cn/#)\n- [Koa2 ](https://chenshenhai.github.io/koa2-note/)\n- [koa - ](https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960)\n- [Koa  - ](https://ruanyifeng.com/blog/2017/08/koa.html)\n- [koa sqlite3  - ](https://juejin.cn/post/7066568536944017438#heading-8)\n\n## \nCRUD\n\n`koa`  `sqlite` ","slug":"koa2-crud-example","published":1,"updated":"2024-06-09T12:56:25.626Z","comments":1,"layout":"post","photos":[],"_id":"clxhruap90010f4lydrji24xy","content":"<p> React  koa  node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"koa\"><a href=\"#koa\" class=\"headerlink\" title=\"koa\"></a>koa</h3><p><code>koa</code>  Node.js  Web <strong></strong> HTTP  koa  Express</p>\n<p> <a href=\"https://www.koajs.com.cn/\">koa </a> </p>\n<p> koa </p>\n<p><a href=\"https://chenshenhai.github.io/koa2-note/\">Koa3 </a></p>\n<h3 id=\"sqlite\"><a href=\"#sqlite\" class=\"headerlink\" title=\"sqlite\"></a>sqlite</h3><p><code>sqlite</code>  SQL  MySQL  sqlite.db  sqlite</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>MVC</code> </p>\n<p><img src=\"https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828212321994.png\" alt=\"MVC\"></p>\n<p>MVC  Model-View-Controller--</p>\n<p>MVC ModelViewControllerModel Controller View </p>\n<p>MVC </p>\n<p> MVC</p>\n<ul>\n<li><a href=\"https://zh.wikipedia.org/wiki/Model-view-presenter\">MVPModel-View-Presenter</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel\">MVVMModel-View-ViewModel</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>users</code>  idusername  password  koa  crud api  <code>postman</code> </p>\n<p> GitHub </p>\n<p><a href=\"https://github.com/ma5hr00m/koa2-crud-example\">koa2-crud-example</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> koa  <a href=\"https://www.koajs.com.cn/#application\">Koa </a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  node.js </span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> example</span><br><span class=\"line\"><span class=\"built_in\">cd</span> example</span><br><span class=\"line\">yarn init</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  koa</span></span><br><span class=\"line\">yarn add -D koa</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"init-ping\"><a href=\"#init-ping\" class=\"headerlink\" title=\"init &amp; ping\"></a>init &amp; ping</h2><p><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960\"> URL - </a> koa  <code>/ping</code> api </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-router require-directory</span><br></pre></td></tr></table></figure>\n\n<p><code>koa-router</code>  koa  Express  app.getapp.putapp.post  URL  URL  OPTIONS  405  501 </p>\n<p><code>require-directory</code>  <code>require()</code>  Common JS</p>\n<p> koa  <a href=\"http://localhost:3000/ping\">http://localhost:3000/ping</a>  <code>pong!</code> </p>\n<p></p>\n<div align='center'>\n    <img style='height:200px' src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828220513695.png' />\n</div>\n\n<p><code>/core/init.js</code>  &#x2F;api&#x2F;  api </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> requireDirectory = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;require-directory&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">InitManager</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">initCore</span>(<span class=\"params\">app</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">InitManager</span>.<span class=\"property\">app</span> = app;</span><br><span class=\"line\">        <span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initLoadRouters</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">initLoadRouters</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">whenLoadModule</span>(<span class=\"params\">obj</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (obj <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Router</span>) &#123;</span><br><span class=\"line\">                <span class=\"title class_\">InitManager</span>.<span class=\"property\">app</span>.<span class=\"title function_\">use</span>(obj.<span class=\"title function_\">routes</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">const</span> apiDirectory = <span class=\"string\">`<span class=\"subst\">$&#123;process.cwd()&#125;</span>/api`</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        requireDirectory(<span class=\"variable language_\">module</span>, apiDirectory, &#123;</span><br><span class=\"line\">            <span class=\"attr\">visit</span>: whenLoadModule</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"title class_\">InitManager</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/ping.js</code>  api  &#x2F;ping  <code>pong!</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/ping&#x27;</span>,<span class=\"keyword\">async</span> ctx =&gt; &#123;</span><br><span class=\"line\">    ctx.<span class=\"property\">body</span> = <span class=\"string\">&#x27;pong!&#x27;</span>;</span><br><span class=\"line\">&#125; );</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/app.js</code>  Koa  <code>init.js</code>  api  3000 </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Koa</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">InitManager</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./core/init&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Koa</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initCore</span>(app);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">` Listening on localhost:3000 ...`</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node app.js</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"database\"><a href=\"#database\" class=\"headerlink\" title=\"database\"></a>database</h2><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D sqlite3 sequelize</span><br></pre></td></tr></table></figure>\n\n<p><code>sequelize</code>  promise  Node.js ORM PostgresSQLMySQLMariaDBSQLite  Microsoft SQL Server </p>\n<p> Raw SQL SQL </p>\n<p> <code>/database/db.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  database.db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">Sequelize</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> <span class=\"title class_\">Sequelize</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">dialect</span>: <span class=\"string\">&#x27;sqlite&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">storage</span>: <span class=\"string\">&#x27;./sqlite.db&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    sequelize.<span class=\"title function_\">authenticate</span>();</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Connect to database successfully`</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Connection failed: <span class=\"subst\">$&#123;err&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123; sequelize &#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"schema\"><a href=\"#schema\" class=\"headerlink\" title=\"schema\"></a>schema</h2><p> <code>/schema/user.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">DataTypes</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span>(<span class=\"params\">sequelize</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sequelize.<span class=\"title function_\">define</span>(<span class=\"string\">&#x27;user&#x27;</span>, &#123;</span><br><span class=\"line\">        <span class=\"attr\">id</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">INTEGER</span>,</span><br><span class=\"line\">            <span class=\"attr\">primaryKey</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">autoIncrement</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">username</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">TEXT</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;username&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">password</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">TEXT</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;password&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"modules\"><a href=\"#modules\" class=\"headerlink\" title=\"modules\"></a>modules</h2><p> <code>userModel</code>  <code>users</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../database/db&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = db.<span class=\"property\">sequelize</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../schema/user&#x27;</span>)(sequelize);</span><br><span class=\"line\">user.<span class=\"title function_\">sync</span>(&#123;<span class=\"attr\">force</span>: <span class=\"literal\">false</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">showAllUsers</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> users = <span class=\"keyword\">await</span> user.<span class=\"title function_\">findAll</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">createUser</span>(<span class=\"params\">username, password</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> newUser = <span class=\"keyword\">await</span> user.<span class=\"title function_\">create</span>(&#123;</span><br><span class=\"line\">            username,</span><br><span class=\"line\">            password</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newUser;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">deleteUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">destroy</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                username</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">searchUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">findOne</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                username</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">updateUser</span>(<span class=\"params\">userId, username, password</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">update</span>(&#123;</span><br><span class=\"line\">            username,</span><br><span class=\"line\">            password,</span><br><span class=\"line\">        &#125;, &#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">id</span>: userId</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = userModel;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"controllers\"><a href=\"#controllers\" class=\"headerlink\" title=\"controllers\"></a>controllers</h2><p> <code>userController</code>  HTTP </p>\n<p>controllers  modules </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> userModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../modules/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userController</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">show</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> users = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">showAllUsers</span>();</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: users</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">create</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(username + <span class=\"string\">&#x27; &#x27;</span> + password);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">const</span> newUser = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">createUser</span>(username, password);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: newUser</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">delete</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">deleteUser</span>(username);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">search</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">searchUser</span>(username);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">update</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> userId = data.<span class=\"property\">userId</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">updateUser</span>(userId, username, password);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = userController;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"router-api\"><a href=\"#router-api\" class=\"headerlink\" title=\"router&#x2F;api\"></a>router&#x2F;api</h2><p> <code>userControllers</code> </p>\n<p><code>/api/show</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/api/show&#x27;</span>, userController.<span class=\"property\">show</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/create</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/create&#x27;</span>, userController.<span class=\"property\">create</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/delete</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/delete&#x27;</span>, userController.<span class=\"property\">delete</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/search</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/search&#x27;</span>, userController.<span class=\"property\">search</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/update</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/update&#x27;</span>, userController.<span class=\"property\">update</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"bodyparser-cors\"><a href=\"#bodyparser-cors\" class=\"headerlink\" title=\"bodyparser &amp; cors\"></a>bodyparser &amp; cors</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> kao  POST  body </p>\n<p> controllers  POST </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// /controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userController</span> &#123;</span><br><span class=\"line\"> \t... ...</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">create</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  POST  username &amp; password </span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ... ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-bodyparser</span><br></pre></td></tr></table></figure>\n\n<p><code>koa-bodyparser</code>  koa  HTTP body <code>ctx.request.body</code>  JSONmultipart</p>\n<p> app.js  body </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-bodyparser&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">bodyParser</span>());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> koa  <a href=\"http://localhost:3000/\">http://localhost:3000</a> react  <a href=\"http://localhost:5173/\">http://localhost:5173</a> api </p>\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829135418397.png' />\n</div>\n\n<p> app.js CORS</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-cors</span><br></pre></td></tr></table></figure>\n\n<p> app.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-cors&#x27;</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">cors</span>());</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"app\"><a href=\"#app\" class=\"headerlink\" title=\"app\"></a>app</h2><p> app.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Koa</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-bodyparser&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-cors&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">InitManager</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./core/init&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Koa</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">cors</span>());</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">bodyParser</span>());</span><br><span class=\"line\"><span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initCore</span>(app);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">` Listening on localhost:3000 ...`</span>);</span><br></pre></td></tr></table></figure>\n\n<p> <code>node app.js</code>  koa </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> koa-crud</p>\n<p> api </p>\n<p> <code>postman</code></p>\n<p>postman  API  HTTP  API </p>\n<p> postman HTTP  GETPOST  PUTassertionsAPI</p>\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829141158347.png' />\n</div>\n\n<p> <a href=\"https://www.postman.com/\">postman </a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>kao+sqlite</code>  CRUD </p>\n<p> koa  api  POST  <code>RESTful</code>  POST </p>\n<p> controllers  DEBUG</p>\n<p> koa-bodyparser </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p> koa  GitHub  api  <code>/api/v1/*</code> <code>/api/v2/</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.koajs.com.cn/#\">Koa </a></li>\n<li><a href=\"https://chenshenhai.github.io/koa2-note/\">Koa2 </a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960\">koa - </a></li>\n<li><a href=\"https://ruanyifeng.com/blog/2017/08/koa.html\">Koa  - </a></li>\n<li><a href=\"https://juejin.cn/post/7066568536944017438#heading-8\">koa sqlite3  - </a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CRUD</p>\n<p><code>koa</code>  <code>sqlite</code> </p>\n","excerpt":"","more":"<p> React  koa  node.js </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"koa\"><a href=\"#koa\" class=\"headerlink\" title=\"koa\"></a>koa</h3><p><code>koa</code>  Node.js  Web <strong></strong> HTTP  koa  Express</p>\n<p> <a href=\"https://www.koajs.com.cn/\">koa </a> </p>\n<p> koa </p>\n<p><a href=\"https://chenshenhai.github.io/koa2-note/\">Koa3 </a></p>\n<h3 id=\"sqlite\"><a href=\"#sqlite\" class=\"headerlink\" title=\"sqlite\"></a>sqlite</h3><p><code>sqlite</code>  SQL  MySQL  sqlite.db  sqlite</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>MVC</code> </p>\n<p><img src=\"https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828212321994.png\" alt=\"MVC\"></p>\n<p>MVC  Model-View-Controller--</p>\n<p>MVC ModelViewControllerModel Controller View </p>\n<p>MVC </p>\n<p> MVC</p>\n<ul>\n<li><a href=\"https://zh.wikipedia.org/wiki/Model-view-presenter\">MVPModel-View-Presenter</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel\">MVVMModel-View-ViewModel</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>users</code>  idusername  password  koa  crud api  <code>postman</code> </p>\n<p> GitHub </p>\n<p><a href=\"https://github.com/ma5hr00m/koa2-crud-example\">koa2-crud-example</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> koa  <a href=\"https://www.koajs.com.cn/#application\">Koa </a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  node.js </span></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> example</span><br><span class=\"line\"><span class=\"built_in\">cd</span> example</span><br><span class=\"line\">yarn init</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  koa</span></span><br><span class=\"line\">yarn add -D koa</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"init-ping\"><a href=\"#init-ping\" class=\"headerlink\" title=\"init &amp; ping\"></a>init &amp; ping</h2><p><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960\"> URL - </a> koa  <code>/ping</code> api </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-router require-directory</span><br></pre></td></tr></table></figure>\n\n<p><code>koa-router</code>  koa  Express  app.getapp.putapp.post  URL  URL  OPTIONS  405  501 </p>\n<p><code>require-directory</code>  <code>require()</code>  Common JS</p>\n<p> koa  <a href=\"http://localhost:3000/ping\">http://localhost:3000/ping</a>  <code>pong!</code> </p>\n<p></p>\n<div align='center'>\n    <img style='height:200px' src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230828220513695.png' />\n</div>\n\n<p><code>/core/init.js</code>  &#x2F;api&#x2F;  api </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> requireDirectory = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;require-directory&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">InitManager</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">initCore</span>(<span class=\"params\">app</span>) &#123;</span><br><span class=\"line\">        <span class=\"title class_\">InitManager</span>.<span class=\"property\">app</span> = app;</span><br><span class=\"line\">        <span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initLoadRouters</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">initLoadRouters</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">whenLoadModule</span>(<span class=\"params\">obj</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (obj <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Router</span>) &#123;</span><br><span class=\"line\">                <span class=\"title class_\">InitManager</span>.<span class=\"property\">app</span>.<span class=\"title function_\">use</span>(obj.<span class=\"title function_\">routes</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">const</span> apiDirectory = <span class=\"string\">`<span class=\"subst\">$&#123;process.cwd()&#125;</span>/api`</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        requireDirectory(<span class=\"variable language_\">module</span>, apiDirectory, &#123;</span><br><span class=\"line\">            <span class=\"attr\">visit</span>: whenLoadModule</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"title class_\">InitManager</span>;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/ping.js</code>  api  &#x2F;ping  <code>pong!</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/ping&#x27;</span>,<span class=\"keyword\">async</span> ctx =&gt; &#123;</span><br><span class=\"line\">    ctx.<span class=\"property\">body</span> = <span class=\"string\">&#x27;pong!&#x27;</span>;</span><br><span class=\"line\">&#125; );</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/app.js</code>  Koa  <code>init.js</code>  api  3000 </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Koa</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">InitManager</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./core/init&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Koa</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initCore</span>(app);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">` Listening on localhost:3000 ...`</span>);</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node app.js</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"database\"><a href=\"#database\" class=\"headerlink\" title=\"database\"></a>database</h2><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D sqlite3 sequelize</span><br></pre></td></tr></table></figure>\n\n<p><code>sequelize</code>  promise  Node.js ORM PostgresSQLMySQLMariaDBSQLite  Microsoft SQL Server </p>\n<p> Raw SQL SQL </p>\n<p> <code>/database/db.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  database.db</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">Sequelize</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> <span class=\"title class_\">Sequelize</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">dialect</span>: <span class=\"string\">&#x27;sqlite&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">storage</span>: <span class=\"string\">&#x27;./sqlite.db&#x27;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    sequelize.<span class=\"title function_\">authenticate</span>();</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Connect to database successfully`</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Connection failed: <span class=\"subst\">$&#123;err&#125;</span>`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123; sequelize &#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"schema\"><a href=\"#schema\" class=\"headerlink\" title=\"schema\"></a>schema</h2><p> <code>/schema/user.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">DataTypes</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;sequelize&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span>(<span class=\"params\">sequelize</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sequelize.<span class=\"title function_\">define</span>(<span class=\"string\">&#x27;user&#x27;</span>, &#123;</span><br><span class=\"line\">        <span class=\"attr\">id</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">INTEGER</span>,</span><br><span class=\"line\">            <span class=\"attr\">primaryKey</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">autoIncrement</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">username</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">TEXT</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;username&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">password</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"title class_\">DataTypes</span>.<span class=\"property\">TEXT</span>,</span><br><span class=\"line\">            <span class=\"attr\">allowNull</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"attr\">field</span>: <span class=\"string\">&#x27;password&#x27;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"modules\"><a href=\"#modules\" class=\"headerlink\" title=\"modules\"></a>modules</h2><p> <code>userModel</code>  <code>users</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../database/db&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = db.<span class=\"property\">sequelize</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../schema/user&#x27;</span>)(sequelize);</span><br><span class=\"line\">user.<span class=\"title function_\">sync</span>(&#123;<span class=\"attr\">force</span>: <span class=\"literal\">false</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">showAllUsers</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> users = <span class=\"keyword\">await</span> user.<span class=\"title function_\">findAll</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">createUser</span>(<span class=\"params\">username, password</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> newUser = <span class=\"keyword\">await</span> user.<span class=\"title function_\">create</span>(&#123;</span><br><span class=\"line\">            username,</span><br><span class=\"line\">            password</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newUser;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">deleteUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">destroy</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                username</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">searchUser</span>(<span class=\"params\">username</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">findOne</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                username</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">updateUser</span>(<span class=\"params\">userId, username, password</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> user.<span class=\"title function_\">update</span>(&#123;</span><br><span class=\"line\">            username,</span><br><span class=\"line\">            password,</span><br><span class=\"line\">        &#125;, &#123;</span><br><span class=\"line\">            <span class=\"attr\">where</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">id</span>: userId</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = userModel;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"controllers\"><a href=\"#controllers\" class=\"headerlink\" title=\"controllers\"></a>controllers</h2><p> <code>userController</code>  HTTP </p>\n<p>controllers  modules </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> userModel = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../modules/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userController</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">show</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> users = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">showAllUsers</span>();</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: users</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">create</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(username + <span class=\"string\">&#x27; &#x27;</span> + password);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">const</span> newUser = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">createUser</span>(username, password);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: newUser</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">delete</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">deleteUser</span>(username);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">search</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">searchUser</span>(username);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">update</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> userId = data.<span class=\"property\">userId</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> userModel.<span class=\"title function_\">updateUser</span>(userId, username, password);</span><br><span class=\"line\">        ctx.<span class=\"property\">response</span>.<span class=\"property\">status</span> = <span class=\"number\">200</span>;</span><br><span class=\"line\">        ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">            <span class=\"attr\">status</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">            <span class=\"attr\">message</span>: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: result</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = userController;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"router-api\"><a href=\"#router-api\" class=\"headerlink\" title=\"router&#x2F;api\"></a>router&#x2F;api</h2><p> <code>userControllers</code> </p>\n<p><code>/api/show</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;/api/show&#x27;</span>, userController.<span class=\"property\">show</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/create</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/create&#x27;</span>, userController.<span class=\"property\">create</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/delete</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/delete&#x27;</span>, userController.<span class=\"property\">delete</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/search</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/search&#x27;</span>, userController.<span class=\"property\">search</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<p><code>/api/update</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Router</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-router&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> userController = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../controllers/user&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">Router</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/api/update&#x27;</span>, userController.<span class=\"property\">update</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = router;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"bodyparser-cors\"><a href=\"#bodyparser-cors\" class=\"headerlink\" title=\"bodyparser &amp; cors\"></a>bodyparser &amp; cors</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> kao  POST  body </p>\n<p> controllers  POST </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// /controllers/user.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">userController</span> &#123;</span><br><span class=\"line\"> \t... ...</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">async</span> <span class=\"title function_\">create</span>(<span class=\"params\">ctx</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  POST  username &amp; password </span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = ctx.<span class=\"property\">request</span>.<span class=\"property\">body</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> username = data.<span class=\"property\">username</span>;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> password = data.<span class=\"property\">password</span>;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ... ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-bodyparser</span><br></pre></td></tr></table></figure>\n\n<p><code>koa-bodyparser</code>  koa  HTTP body <code>ctx.request.body</code>  JSONmultipart</p>\n<p> app.js  body </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-bodyparser&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">bodyParser</span>());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> koa  <a href=\"http://localhost:3000/\">http://localhost:3000</a> react  <a href=\"http://localhost:5173/\">http://localhost:5173</a> api </p>\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829135418397.png' />\n</div>\n\n<p> app.js CORS</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add -D koa-cors</span><br></pre></td></tr></table></figure>\n\n<p> app.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-cors&#x27;</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">cors</span>());</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"app\"><a href=\"#app\" class=\"headerlink\" title=\"app\"></a>app</h2><p> app.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Koa</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-bodyparser&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;koa-cors&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">InitManager</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./core/init&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> <span class=\"title class_\">Koa</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">cors</span>());</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">bodyParser</span>());</span><br><span class=\"line\"><span class=\"title class_\">InitManager</span>.<span class=\"title function_\">initCore</span>(app);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">` Listening on localhost:3000 ...`</span>);</span><br></pre></td></tr></table></figure>\n\n<p> <code>node app.js</code>  koa </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> koa-crud</p>\n<p> api </p>\n<p> <code>postman</code></p>\n<p>postman  API  HTTP  API </p>\n<p> postman HTTP  GETPOST  PUTassertionsAPI</p>\n<div align='center'>\n    <img src='https://agu-images.oss-cn-hangzhou.aliyuncs.com/test/image-20230829141158347.png' />\n</div>\n\n<p> <a href=\"https://www.postman.com/\">postman </a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>kao+sqlite</code>  CRUD </p>\n<p> koa  api  POST  <code>RESTful</code>  POST </p>\n<p> controllers  DEBUG</p>\n<p> koa-bodyparser </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p> koa  GitHub  api  <code>/api/v1/*</code> <code>/api/v2/</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://www.koajs.com.cn/#\">Koa </a></li>\n<li><a href=\"https://chenshenhai.github.io/koa2-note/\">Koa2 </a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023025933764960\">koa - </a></li>\n<li><a href=\"https://ruanyifeng.com/blog/2017/08/koa.html\">Koa  - </a></li>\n<li><a href=\"https://juejin.cn/post/7066568536944017438#heading-8\">koa sqlite3  - </a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CRUD</p>\n<p><code>koa</code>  <code>sqlite</code> </p>\n"},{"title":"Nginx ","date":"2024-02-19T16:00:00.000Z","author":"ma5hr00m","_content":"\nNginx \n\n## \n\nNginx  2002  Igor Sysoev  C10K \n\n 2004  10 Nginx Nginx  Web  Netcraft  2024  2 Nginx  Web  32.8%  Apache\n\n## \n\n Linux  nginx Manjaro \n\n```Bash\nsudo pacman -S nginx\n```\n\nNginx `-s`\n\n- `stop`\n- `quit`\n- `reload`\n- `reopen`\n\n`etc/nginx/conf.d` Web  nginx `-s reload`\n\n`systemctl` Nginx  Nginx \n\n```Bash\nsystemctl status nginx\n```\n\n## Nginx\n\n nginx  nginx \n\nLinux  nginx `/etc/nginx/nginx.conf`\n\n```Nginx\n# \nuser  nobody; # nginx\nworker_processes  1; # \nerror_log  logs/error.log; # \npid        logs/nginx.pid; # pid\n\n# events\nevents {\n    worker_connections  1024; # \n}\n\n# http\nhttp {\n    # http\n    include       mime.types; # MIME-Type\n    default_type  application/octet-stream; # MIME-Type\n    sendfile        on; # sendfile\n    keepalive_timeout  65; # \n\n    # server\n    server {\n        # server\n        listen       8000; # 8000\n        server_name  localhost; # \n\n        # location\n        location / {\n            root   html; # \n            index  index.html index.htm; # \n        }\n\n        # location\n        location /images {\n            root   /data; # \n            autoindex on; # \n        }\n\n        # location\n        location ~ \\.php$ {\n            root           html; # PHP\n            fastcgi_pass   127.0.0.1:9000; # PHP-FPM\n            fastcgi_index  index.php; # PHP\n            fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name; # PHP\n            include        fastcgi_params; # fastcgi\n        }\n    }\n}\n```\n\n- `events` nginx `user``worker_processes``error_log``pid`\n- `events` nginx `worker_connections``accept_mutex``multi_accept``use`\n- `http``http``server``http``server``http``include``default_type``server``server``server``location``server``location``listen``server_name``location` URL `location``root``index``proxy_pass`\n\n`server``location` Web `http``server`\n\n nginx  80 `server``location`\n\n```Nginx\nlocation / {\n    default_type text/plain\n    return 200 \"pong\"\n}\n```\n\n`nginx -s reload``curl``http://ocalhost/ping``pong`\n\n```Bash\ncurl http://localhost/ping # pong\n```\n\n## \n\n Nginx  nginx \n\nNginx  master  workernginx  http \n\nnginx \n\n## \n\nNginx  master-worker  apache nginx \n\n- Master-worker  nginx  workder  worker  master \n-  nginx \n- \n\n![20240229225629](https://img.ma5hr00m.top/blog/20240229225629.png)\n\n### master \n\nmaster  worker master  worker \n\n nginx master `-t` nginx \n\n```Bash\nsudo nginx -t\n```\n\nmaster  worker  worker master `fork()` worker  nginx \n\n master  worker  \n\n### master  worker\n\nmaster Semaphore MechanismTimer Mechanism worker \n\nsemaphore mechanismatomic operation\n\nnginx  master  worker signalnginx `SIGCHLD``SIGALRM``SIGTERM``SIGQUIT``SIGHUP``SIGUSR1`\n\n-  worker  master `SIGCHLD` master master `SIGCHLD``waitpid()``fork()` worker \n-  master  worker `SIGTERM``SIGQUIT` worker worker master  worker `SIGCHLD` worker \n-  master  worker `SIGHUP``SIGUSR1` worker worker \n\ntimer mechanism\n\nnginx `SIGALRM`\n\n-  master  5  worker  `SIGALRM` worker  master master  worker  worker  worker  worker \n-  master `SIGALRM` worker  worker `fork()` worker master  worker  worker  worker  worker `SIGKILL` worker `fork()` worker \n\n### worker  \n\nworker  master  worker  worker worker \n\nworker  worker worker master  worker \n\n### worker \n\n nginx  accepy_mutex thundering herd problemlock convoy nginx \n\naccept_mutex mutex worker  worker \n\naccept_mutex `accept_mutex``off``accept_mutex_delay` worker worker `500ms` accept_mutex\n\n worker \n\n nginx  master master `listen` socketlistenfd`worker_process` worker master  accept_mutex worker\n\n worker event moduleconnection moduleworker `use`,`worker_connections`connection poolconnectionread eventwrite event\n\n worker worker  accept_mutex mutex  worker  listenfd  accept  worker  accept_mutex\n\n mutex  worker `accept_mutex_delay` worker  mutex mutex worker  mutex worker \n\n mutex  worker event loop HTTP  HTTP HTTP modulemail module\n\nworker \n\n## \n\n### Netcraft\n\nNetcraft  1995  Netcraft \n\nNetcraft IP \n\nNetcraft  [Netcraft](https://www.netcraft.com/) \n\n### \n\n master-worker \n\n- **** nginx  master-worker master  worker  worker master  worker master  worker \n- ****nginx  worker  I/O  I/O worker worker \n- ****nginx  I/O  epoll  kqueue I/Onginx \n\nnginx  master-worker  nginx  I/O  apache Prefork nginx  apache \n\n## \n\n \n\n## \n\n- [Nginx ](https://docshome.gitbook.io/nginx-docs/)\n- [Nginx ](https://www.freecodecamp.org/chinese/news/the-nginx-handbook/)by freeCodeCamp\n- [Nginx ](https://learnku.com/articles/38414)by \n","source":"_posts/overview-of-nginx-process-model.md","raw":"---\ntitle: Nginx \ndate: 2024/2/20\nauthor: ma5hr00m\ncategories:\n- Nginx\n---\n\nNginx \n\n## \n\nNginx  2002  Igor Sysoev  C10K \n\n 2004  10 Nginx Nginx  Web  Netcraft  2024  2 Nginx  Web  32.8%  Apache\n\n## \n\n Linux  nginx Manjaro \n\n```Bash\nsudo pacman -S nginx\n```\n\nNginx `-s`\n\n- `stop`\n- `quit`\n- `reload`\n- `reopen`\n\n`etc/nginx/conf.d` Web  nginx `-s reload`\n\n`systemctl` Nginx  Nginx \n\n```Bash\nsystemctl status nginx\n```\n\n## Nginx\n\n nginx  nginx \n\nLinux  nginx `/etc/nginx/nginx.conf`\n\n```Nginx\n# \nuser  nobody; # nginx\nworker_processes  1; # \nerror_log  logs/error.log; # \npid        logs/nginx.pid; # pid\n\n# events\nevents {\n    worker_connections  1024; # \n}\n\n# http\nhttp {\n    # http\n    include       mime.types; # MIME-Type\n    default_type  application/octet-stream; # MIME-Type\n    sendfile        on; # sendfile\n    keepalive_timeout  65; # \n\n    # server\n    server {\n        # server\n        listen       8000; # 8000\n        server_name  localhost; # \n\n        # location\n        location / {\n            root   html; # \n            index  index.html index.htm; # \n        }\n\n        # location\n        location /images {\n            root   /data; # \n            autoindex on; # \n        }\n\n        # location\n        location ~ \\.php$ {\n            root           html; # PHP\n            fastcgi_pass   127.0.0.1:9000; # PHP-FPM\n            fastcgi_index  index.php; # PHP\n            fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name; # PHP\n            include        fastcgi_params; # fastcgi\n        }\n    }\n}\n```\n\n- `events` nginx `user``worker_processes``error_log``pid`\n- `events` nginx `worker_connections``accept_mutex``multi_accept``use`\n- `http``http``server``http``server``http``include``default_type``server``server``server``location``server``location``listen``server_name``location` URL `location``root``index``proxy_pass`\n\n`server``location` Web `http``server`\n\n nginx  80 `server``location`\n\n```Nginx\nlocation / {\n    default_type text/plain\n    return 200 \"pong\"\n}\n```\n\n`nginx -s reload``curl``http://ocalhost/ping``pong`\n\n```Bash\ncurl http://localhost/ping # pong\n```\n\n## \n\n Nginx  nginx \n\nNginx  master  workernginx  http \n\nnginx \n\n## \n\nNginx  master-worker  apache nginx \n\n- Master-worker  nginx  workder  worker  master \n-  nginx \n- \n\n![20240229225629](https://img.ma5hr00m.top/blog/20240229225629.png)\n\n### master \n\nmaster  worker master  worker \n\n nginx master `-t` nginx \n\n```Bash\nsudo nginx -t\n```\n\nmaster  worker  worker master `fork()` worker  nginx \n\n master  worker  \n\n### master  worker\n\nmaster Semaphore MechanismTimer Mechanism worker \n\nsemaphore mechanismatomic operation\n\nnginx  master  worker signalnginx `SIGCHLD``SIGALRM``SIGTERM``SIGQUIT``SIGHUP``SIGUSR1`\n\n-  worker  master `SIGCHLD` master master `SIGCHLD``waitpid()``fork()` worker \n-  master  worker `SIGTERM``SIGQUIT` worker worker master  worker `SIGCHLD` worker \n-  master  worker `SIGHUP``SIGUSR1` worker worker \n\ntimer mechanism\n\nnginx `SIGALRM`\n\n-  master  5  worker  `SIGALRM` worker  master master  worker  worker  worker  worker \n-  master `SIGALRM` worker  worker `fork()` worker master  worker  worker  worker  worker `SIGKILL` worker `fork()` worker \n\n### worker  \n\nworker  master  worker  worker worker \n\nworker  worker worker master  worker \n\n### worker \n\n nginx  accepy_mutex thundering herd problemlock convoy nginx \n\naccept_mutex mutex worker  worker \n\naccept_mutex `accept_mutex``off``accept_mutex_delay` worker worker `500ms` accept_mutex\n\n worker \n\n nginx  master master `listen` socketlistenfd`worker_process` worker master  accept_mutex worker\n\n worker event moduleconnection moduleworker `use`,`worker_connections`connection poolconnectionread eventwrite event\n\n worker worker  accept_mutex mutex  worker  listenfd  accept  worker  accept_mutex\n\n mutex  worker `accept_mutex_delay` worker  mutex mutex worker  mutex worker \n\n mutex  worker event loop HTTP  HTTP HTTP modulemail module\n\nworker \n\n## \n\n### Netcraft\n\nNetcraft  1995  Netcraft \n\nNetcraft IP \n\nNetcraft  [Netcraft](https://www.netcraft.com/) \n\n### \n\n master-worker \n\n- **** nginx  master-worker master  worker  worker master  worker master  worker \n- ****nginx  worker  I/O  I/O worker worker \n- ****nginx  I/O  epoll  kqueue I/Onginx \n\nnginx  master-worker  nginx  I/O  apache Prefork nginx  apache \n\n## \n\n \n\n## \n\n- [Nginx ](https://docshome.gitbook.io/nginx-docs/)\n- [Nginx ](https://www.freecodecamp.org/chinese/news/the-nginx-handbook/)by freeCodeCamp\n- [Nginx ](https://learnku.com/articles/38414)by \n","slug":"overview-of-nginx-process-model","published":1,"updated":"2024-06-09T12:55:13.557Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapa0013f4ly8kec40m6","content":"<p>Nginx </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Nginx  2002  Igor Sysoev  C10K </p>\n<p> 2004  10 Nginx Nginx  Web  Netcraft  2024  2 Nginx  Web  32.8%  Apache</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Linux  nginx Manjaro </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pacman -S nginx</span><br></pre></td></tr></table></figure>\n\n<p>Nginx <code>-s</code></p>\n<ul>\n<li><code>stop</code></li>\n<li><code>quit</code></li>\n<li><code>reload</code></li>\n<li><code>reopen</code></li>\n</ul>\n<p><code>etc/nginx/conf.d</code> Web  nginx <code>-s reload</code></p>\n<p><code>systemctl</code> Nginx  Nginx </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status nginx</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h2><p> nginx  nginx </p>\n<p>Linux  nginx <code>/etc/nginx/nginx.conf</code></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">user</span>  nobody; <span class=\"comment\"># nginx</span></span><br><span class=\"line\"><span class=\"attribute\">worker_processes</span>  <span class=\"number\">1</span>; <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">error_log</span>  logs/<span class=\"literal\">error</span>.log; <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">pid</span>        logs/nginx.pid; <span class=\"comment\"># pid</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># events</span></span><br><span class=\"line\"><span class=\"section\">events</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">worker_connections</span>  <span class=\"number\">1024</span>; <span class=\"comment\"># </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># http</span></span><br><span class=\"line\"><span class=\"section\">http</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\"># http</span></span><br><span class=\"line\">    <span class=\"attribute\">include</span>       mime.types; <span class=\"comment\"># MIME-Type</span></span><br><span class=\"line\">    <span class=\"attribute\">default_type</span>  application/octet-stream; <span class=\"comment\"># MIME-Type</span></span><br><span class=\"line\">    <span class=\"attribute\">sendfile</span>        <span class=\"literal\">on</span>; <span class=\"comment\"># sendfile</span></span><br><span class=\"line\">    <span class=\"attribute\">keepalive_timeout</span>  <span class=\"number\">65</span>; <span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># server</span></span><br><span class=\"line\">    <span class=\"section\">server</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># server</span></span><br><span class=\"line\">        <span class=\"attribute\">listen</span>       <span class=\"number\">8000</span>; <span class=\"comment\"># 8000</span></span><br><span class=\"line\">        <span class=\"attribute\">server_name</span>  localhost; <span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>   html; <span class=\"comment\"># </span></span><br><span class=\"line\">            <span class=\"attribute\">index</span>  index.html index.htm; <span class=\"comment\"># </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> /images &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>   /data; <span class=\"comment\"># </span></span><br><span class=\"line\">            <span class=\"attribute\">autoindex</span> <span class=\"literal\">on</span>; <span class=\"comment\"># </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> <span class=\"regexp\">~ \\.php$</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>           html; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_pass</span>   <span class=\"number\">127.0.0.1:9000</span>; <span class=\"comment\"># PHP-FPM</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_index</span>  index.php; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_param</span>  SCRIPT_FILENAME  /scripts<span class=\"variable\">$fastcgi_script_name</span>; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">include</span>        fastcgi_params; <span class=\"comment\"># fastcgi</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>events</code> nginx <code>user</code><code>worker_processes</code><code>error_log</code><code>pid</code></li>\n<li><code>events</code> nginx <code>worker_connections</code><code>accept_mutex</code><code>multi_accept</code><code>use</code></li>\n<li><code>http</code><code>http</code><code>server</code><code>http</code><code>server</code><code>http</code><code>include</code><code>default_type</code><code>server</code><code>server</code><code>server</code><code>location</code><code>server</code><code>location</code><code>listen</code><code>server_name</code><code>location</code> URL <code>location</code><code>root</code><code>index</code><code>proxy_pass</code></li>\n</ul>\n<p><code>server</code><code>location</code> Web <code>http</code><code>server</code></p>\n<p> nginx  80 <code>server</code><code>location</code></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">    <span class=\"attribute\">default_type</span> text/plain</span><br><span class=\"line\">    return <span class=\"number\">200</span> <span class=\"string\">&quot;pong&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>nginx -s reload</code><code>curl</code><code>http://ocalhost/ping</code><code>pong</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl http://localhost/ping <span class=\"comment\"># pong</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Nginx  nginx </p>\n<p>Nginx  master  workernginx  http </p>\n<p>nginx </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Nginx  master-worker  apache nginx </p>\n<ul>\n<li>Master-worker  nginx  workder  worker  master </li>\n<li> nginx </li>\n<li></li>\n</ul>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240229225629.png\" alt=\"20240229225629\"></p>\n<h3 id=\"master-\"><a href=\"#master-\" class=\"headerlink\" title=\"master \"></a>master </h3><p>master  worker master  worker </p>\n<p> nginx master <code>-t</code> nginx </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nginx -t</span><br></pre></td></tr></table></figure>\n\n<p>master  worker  worker master <code>fork()</code> worker  nginx </p>\n<p> master  worker  </p>\n<h3 id=\"master--worker\"><a href=\"#master--worker\" class=\"headerlink\" title=\"master  worker\"></a>master  worker</h3><p>master Semaphore MechanismTimer Mechanism worker </p>\n<p>semaphore mechanismatomic operation</p>\n<p>nginx  master  worker signalnginx <code>SIGCHLD</code><code>SIGALRM</code><code>SIGTERM</code><code>SIGQUIT</code><code>SIGHUP</code><code>SIGUSR1</code></p>\n<ul>\n<li> worker  master <code>SIGCHLD</code> master master <code>SIGCHLD</code><code>waitpid()</code><code>fork()</code> worker </li>\n<li> master  worker <code>SIGTERM</code><code>SIGQUIT</code> worker worker master  worker <code>SIGCHLD</code> worker </li>\n<li> master  worker <code>SIGHUP</code><code>SIGUSR1</code> worker worker </li>\n</ul>\n<p>timer mechanism</p>\n<p>nginx <code>SIGALRM</code></p>\n<ul>\n<li> master  5  worker  <code>SIGALRM</code> worker  master master  worker  worker  worker  worker </li>\n<li> master <code>SIGALRM</code> worker  worker <code>fork()</code> worker master  worker  worker  worker  worker <code>SIGKILL</code> worker <code>fork()</code> worker </li>\n</ul>\n<h3 id=\"worker-\"><a href=\"#worker-\" class=\"headerlink\" title=\"worker \"></a>worker </h3><p>worker  master  worker  worker worker </p>\n<p>worker  worker worker master  worker </p>\n<h3 id=\"worker-\"><a href=\"#worker-\" class=\"headerlink\" title=\"worker \"></a>worker </h3><p> nginx  accepy_mutex thundering herd problemlock convoy nginx </p>\n<p>accept_mutex mutex worker  worker </p>\n<p>accept_mutex <code>accept_mutex</code><code>off</code><code>accept_mutex_delay</code> worker worker <code>500ms</code> accept_mutex</p>\n<p> worker </p>\n<p> nginx  master master <code>listen</code> socketlistenfd<code>worker_process</code> worker master  accept_mutex worker</p>\n<p> worker event moduleconnection moduleworker <code>use</code>,<code>worker_connections</code>connection poolconnectionread eventwrite event</p>\n<p> worker worker  accept_mutex mutex  worker  listenfd  accept  worker  accept_mutex</p>\n<p> mutex  worker <code>accept_mutex_delay</code> worker  mutex mutex worker  mutex worker </p>\n<p> mutex  worker event loop HTTP  HTTP HTTP modulemail module</p>\n<p>worker </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Netcraft\"><a href=\"#Netcraft\" class=\"headerlink\" title=\"Netcraft\"></a>Netcraft</h3><p>Netcraft  1995  Netcraft </p>\n<p>Netcraft IP </p>\n<p>Netcraft  <a href=\"https://www.netcraft.com/\">Netcraft</a> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> master-worker </p>\n<ul>\n<li><strong></strong> nginx  master-worker master  worker  worker master  worker master  worker </li>\n<li><strong></strong>nginx  worker  I&#x2F;O  I&#x2F;O worker worker </li>\n<li><strong></strong>nginx  I&#x2F;O  epoll  kqueue I&#x2F;Onginx </li>\n</ul>\n<p>nginx  master-worker  nginx  I&#x2F;O  apache Prefork nginx  apache </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://docshome.gitbook.io/nginx-docs/\">Nginx </a></li>\n<li><a href=\"https://www.freecodecamp.org/chinese/news/the-nginx-handbook/\">Nginx </a>by freeCodeCamp</li>\n<li><a href=\"https://learnku.com/articles/38414\">Nginx </a>by </li>\n</ul>\n","excerpt":"","more":"<p>Nginx </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Nginx  2002  Igor Sysoev  C10K </p>\n<p> 2004  10 Nginx Nginx  Web  Netcraft  2024  2 Nginx  Web  32.8%  Apache</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Linux  nginx Manjaro </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pacman -S nginx</span><br></pre></td></tr></table></figure>\n\n<p>Nginx <code>-s</code></p>\n<ul>\n<li><code>stop</code></li>\n<li><code>quit</code></li>\n<li><code>reload</code></li>\n<li><code>reopen</code></li>\n</ul>\n<p><code>etc/nginx/conf.d</code> Web  nginx <code>-s reload</code></p>\n<p><code>systemctl</code> Nginx  Nginx </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status nginx</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h2><p> nginx  nginx </p>\n<p>Linux  nginx <code>/etc/nginx/nginx.conf</code></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">user</span>  nobody; <span class=\"comment\"># nginx</span></span><br><span class=\"line\"><span class=\"attribute\">worker_processes</span>  <span class=\"number\">1</span>; <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">error_log</span>  logs/<span class=\"literal\">error</span>.log; <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"attribute\">pid</span>        logs/nginx.pid; <span class=\"comment\"># pid</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># events</span></span><br><span class=\"line\"><span class=\"section\">events</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">worker_connections</span>  <span class=\"number\">1024</span>; <span class=\"comment\"># </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># http</span></span><br><span class=\"line\"><span class=\"section\">http</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\"># http</span></span><br><span class=\"line\">    <span class=\"attribute\">include</span>       mime.types; <span class=\"comment\"># MIME-Type</span></span><br><span class=\"line\">    <span class=\"attribute\">default_type</span>  application/octet-stream; <span class=\"comment\"># MIME-Type</span></span><br><span class=\"line\">    <span class=\"attribute\">sendfile</span>        <span class=\"literal\">on</span>; <span class=\"comment\"># sendfile</span></span><br><span class=\"line\">    <span class=\"attribute\">keepalive_timeout</span>  <span class=\"number\">65</span>; <span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># server</span></span><br><span class=\"line\">    <span class=\"section\">server</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\"># server</span></span><br><span class=\"line\">        <span class=\"attribute\">listen</span>       <span class=\"number\">8000</span>; <span class=\"comment\"># 8000</span></span><br><span class=\"line\">        <span class=\"attribute\">server_name</span>  localhost; <span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>   html; <span class=\"comment\"># </span></span><br><span class=\"line\">            <span class=\"attribute\">index</span>  index.html index.htm; <span class=\"comment\"># </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> /images &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>   /data; <span class=\"comment\"># </span></span><br><span class=\"line\">            <span class=\"attribute\">autoindex</span> <span class=\"literal\">on</span>; <span class=\"comment\"># </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># location</span></span><br><span class=\"line\">        <span class=\"section\">location</span> <span class=\"regexp\">~ \\.php$</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">root</span>           html; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_pass</span>   <span class=\"number\">127.0.0.1:9000</span>; <span class=\"comment\"># PHP-FPM</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_index</span>  index.php; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">fastcgi_param</span>  SCRIPT_FILENAME  /scripts<span class=\"variable\">$fastcgi_script_name</span>; <span class=\"comment\"># PHP</span></span><br><span class=\"line\">            <span class=\"attribute\">include</span>        fastcgi_params; <span class=\"comment\"># fastcgi</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>events</code> nginx <code>user</code><code>worker_processes</code><code>error_log</code><code>pid</code></li>\n<li><code>events</code> nginx <code>worker_connections</code><code>accept_mutex</code><code>multi_accept</code><code>use</code></li>\n<li><code>http</code><code>http</code><code>server</code><code>http</code><code>server</code><code>http</code><code>include</code><code>default_type</code><code>server</code><code>server</code><code>server</code><code>location</code><code>server</code><code>location</code><code>listen</code><code>server_name</code><code>location</code> URL <code>location</code><code>root</code><code>index</code><code>proxy_pass</code></li>\n</ul>\n<p><code>server</code><code>location</code> Web <code>http</code><code>server</code></p>\n<p> nginx  80 <code>server</code><code>location</code></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">location</span> / &#123;</span><br><span class=\"line\">    <span class=\"attribute\">default_type</span> text/plain</span><br><span class=\"line\">    return <span class=\"number\">200</span> <span class=\"string\">&quot;pong&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>nginx -s reload</code><code>curl</code><code>http://ocalhost/ping</code><code>pong</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl http://localhost/ping <span class=\"comment\"># pong</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> Nginx  nginx </p>\n<p>Nginx  master  workernginx  http </p>\n<p>nginx </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Nginx  master-worker  apache nginx </p>\n<ul>\n<li>Master-worker  nginx  workder  worker  master </li>\n<li> nginx </li>\n<li></li>\n</ul>\n<p><img src=\"https://img.ma5hr00m.top/blog/20240229225629.png\" alt=\"20240229225629\"></p>\n<h3 id=\"master-\"><a href=\"#master-\" class=\"headerlink\" title=\"master \"></a>master </h3><p>master  worker master  worker </p>\n<p> nginx master <code>-t</code> nginx </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nginx -t</span><br></pre></td></tr></table></figure>\n\n<p>master  worker  worker master <code>fork()</code> worker  nginx </p>\n<p> master  worker  </p>\n<h3 id=\"master--worker\"><a href=\"#master--worker\" class=\"headerlink\" title=\"master  worker\"></a>master  worker</h3><p>master Semaphore MechanismTimer Mechanism worker </p>\n<p>semaphore mechanismatomic operation</p>\n<p>nginx  master  worker signalnginx <code>SIGCHLD</code><code>SIGALRM</code><code>SIGTERM</code><code>SIGQUIT</code><code>SIGHUP</code><code>SIGUSR1</code></p>\n<ul>\n<li> worker  master <code>SIGCHLD</code> master master <code>SIGCHLD</code><code>waitpid()</code><code>fork()</code> worker </li>\n<li> master  worker <code>SIGTERM</code><code>SIGQUIT</code> worker worker master  worker <code>SIGCHLD</code> worker </li>\n<li> master  worker <code>SIGHUP</code><code>SIGUSR1</code> worker worker </li>\n</ul>\n<p>timer mechanism</p>\n<p>nginx <code>SIGALRM</code></p>\n<ul>\n<li> master  5  worker  <code>SIGALRM</code> worker  master master  worker  worker  worker  worker </li>\n<li> master <code>SIGALRM</code> worker  worker <code>fork()</code> worker master  worker  worker  worker  worker <code>SIGKILL</code> worker <code>fork()</code> worker </li>\n</ul>\n<h3 id=\"worker-\"><a href=\"#worker-\" class=\"headerlink\" title=\"worker \"></a>worker </h3><p>worker  master  worker  worker worker </p>\n<p>worker  worker worker master  worker </p>\n<h3 id=\"worker-\"><a href=\"#worker-\" class=\"headerlink\" title=\"worker \"></a>worker </h3><p> nginx  accepy_mutex thundering herd problemlock convoy nginx </p>\n<p>accept_mutex mutex worker  worker </p>\n<p>accept_mutex <code>accept_mutex</code><code>off</code><code>accept_mutex_delay</code> worker worker <code>500ms</code> accept_mutex</p>\n<p> worker </p>\n<p> nginx  master master <code>listen</code> socketlistenfd<code>worker_process</code> worker master  accept_mutex worker</p>\n<p> worker event moduleconnection moduleworker <code>use</code>,<code>worker_connections</code>connection poolconnectionread eventwrite event</p>\n<p> worker worker  accept_mutex mutex  worker  listenfd  accept  worker  accept_mutex</p>\n<p> mutex  worker <code>accept_mutex_delay</code> worker  mutex mutex worker  mutex worker </p>\n<p> mutex  worker event loop HTTP  HTTP HTTP modulemail module</p>\n<p>worker </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Netcraft\"><a href=\"#Netcraft\" class=\"headerlink\" title=\"Netcraft\"></a>Netcraft</h3><p>Netcraft  1995  Netcraft </p>\n<p>Netcraft IP </p>\n<p>Netcraft  <a href=\"https://www.netcraft.com/\">Netcraft</a> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> master-worker </p>\n<ul>\n<li><strong></strong> nginx  master-worker master  worker  worker master  worker master  worker </li>\n<li><strong></strong>nginx  worker  I&#x2F;O  I&#x2F;O worker worker </li>\n<li><strong></strong>nginx  I&#x2F;O  epoll  kqueue I&#x2F;Onginx </li>\n</ul>\n<p>nginx  master-worker  nginx  I&#x2F;O  apache Prefork nginx  apache </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://docshome.gitbook.io/nginx-docs/\">Nginx </a></li>\n<li><a href=\"https://www.freecodecamp.org/chinese/news/the-nginx-handbook/\">Nginx </a>by freeCodeCamp</li>\n<li><a href=\"https://learnku.com/articles/38414\">Nginx </a>by </li>\n</ul>\n"},{"title":" UnoCSS &","date":"2023-01-25T16:00:00.000Z","author":"ma5hr00m","_content":"\nUnoCSS   CSS [UnoCSS ](https://alfred-skyblue.github.io/unocss-docs-cn/)\n\n[Online Demo](http://example.ma5hr00m.top/)\n\n## \n React&UnoCSS  Demo \n\n![Demo](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926170511.png)\n\n\n\n## \n### \n Web \n\n Web [](https://nic.eu.org/) DevTools \n\n> \n\n*responsive web designRWD**RWD* \n\n>  Devtools\n\n### \n\n- * viewport*  \n  meta\n- * media query*  \n  CSS\n- * fluid layout*    \n  emremvwvh\n- * breakpoint*  \n  \n- * flexbox*  \n  CSS\n- * grid*  \n  CSS\n\n## \n\n\n## \n### \n`UnoCSS`  `Tailwind CSS` \n\n `xxs``xxl` \n```javascript\n// uno.config.js\nexport default defineConfig({\n  ... ...\n  theme: {\n    breakpoints: {\n      xxs: '0px',\n      xs: '320px',\n      sm: '480px',\n      md: '768px',\n      lg: '1024px',\n      xl: '1280px',\n      xxl: '1600px',\n     },\n   },\n  ... ...\n})\n```\n\n React  `.jsx`  `md:` \n```jsx\n<div className={`shadow card-base text-base flex flex-col p-10 md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`}>\n    <h2 className=\"text-lg font-bold m-0\">\n        Responsive Design & Theme\n    </h2>\n    <p className=\"mb-4 text-center\">\n        Change window size or click the following button.\n    </p>\n    <div className='h-30px w-full flex items-center justify-center'>\n        <SwitchButton\n       height='50px'\n       width='60px'\n       layout='translate-x-[-50%]'\n       isChecked={isChecked}\n       SwitchFunction={handleSwitch}\n    />\n    </div>\n</div>\n```\n\n `768px`  `768px` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171533.png)\n\n### \n\n\n UnoCSS  `Anthony Fu` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171653.png)\n\n\n\n `shortcuts` \n```javascript\nexport default defineConfig({\n  ... ...\n  shortcuts:{\n    'switch-animation': 'transition duration-300',\n    'bg-base': 'bg-[#f0f0f0] dark:bg-[#20202a] switch-animation',\n    'card-base': 'bg-[#ffffff] dark:bg-[#10101a] switch-animation',\n    'text-base': 'text-[#20202a] dark:text-[#f0f0f0] switch-animation',\n    'switch-label-base': 'bg-gray-200 dark:bg-gray-800 switch-animation',\n    'switch-span-base': 'bg-white dark:bg-gray-300 switch-animation',\n   },\n  ... ...\n})\n```\n\n `SwitchButton.jsx`  `theme`  div \n```jsx\n// SwitchButton/index.jsx\nimport PropTypes from 'prop-types';\n\nfunction SwitchButton({ height, width, layout, theme, SwitchFunction }) {\n  const handleSwitch = (event) => {\n    SwitchFunction(event.target.checked);\n   };\n\n  return (\n    <div className={`relative h-[${height}] w-[${width}] flex items-center justify-center ${layout}`}>\n      <input\n        type=\"checkbox\"\n        id=\"dark-light\"\n        className=\"absolute z-1 w-12 h-5\"\n        onChange={handleSwitch}\n      />\n      <label \n        htmlFor=\"dark-light\"\n        className='absolute z-2 block w-11 h-6 switch-label-base rounded-full shadow-inner cursor-pointer switch-animation hover:cursor-pointer'\n      >\n        <span\n          className={`absolute top-1 left-1.5 w-4 h-4 switch-span-base rounded-full shadow-md switch-animation ${theme=='dark' ? 'translate-x-[100%]' : ''}`}\n        >  \n        </span>\n      </label>\n    </div>\n   );\n}\n\nSwitchButton.propTypes = {\n  height: PropTypes.string.isRequired,\n  width: PropTypes.string.isRequired,\n  layout: PropTypes.string.isRequired,\n  theme: PropTypes.string.isRequired,\n  SwitchFunction: PropTypes.func.isRequired,\n};\n\nexport default SwitchButton;\n```\n\n<br/>\n\n```jsx\n// App.jsx\nimport { useState } from 'react';\nimport SwitchButton from './SwitchButton/index';\n\nfunction App() {\n const [theme, setTheme] = useState('dark');\n\n const handleSwitch = () => {\n  setTheme((prevChecked) => (prevChecked === 'dark' ? 'light' : 'dark'));\n  };\n\n return (\n  <div className={`w-100vw h-100vh flex flex-col ${theme}`}>\n   <main className=\"w-100vw flex-1 flex justify-center items-center bg-base\">\n    <div className={` shadow card-base text-base flex flex-col p-10  md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`}>\n     <h2 className=\"text-lg font-bold m-0\">\n       Responsive Design & Theme\n     </h2>\n     <p className=\"mb-4 text-center\">\n       Change window size or click the following button.\n     </p>\n     <div className='h-30px w-full flex items-center justify-center'>\n      <SwitchButton\n       height='50px'\n       width='60px'\n       layout='translate-x-[-50%]'\n       theme={theme}\n       SwitchFunction={handleSwitch}\n      />\n     </div>\n    </div>\n   </main>\n  </div>\n  );\n}\n\nexport default App;\n```\n\n `demo` [demo](http://example.ma5hr00m.top/)\n\n## \n demo \n\n `jotai`.","source":"_posts/unocss-theme.md","raw":"---\ntitle:  UnoCSS &\ndate: 2023/01/26\nauthor: ma5hr00m\ncategories:\n- CSS\n---\n\nUnoCSS   CSS [UnoCSS ](https://alfred-skyblue.github.io/unocss-docs-cn/)\n\n[Online Demo](http://example.ma5hr00m.top/)\n\n## \n React&UnoCSS  Demo \n\n![Demo](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926170511.png)\n\n\n\n## \n### \n Web \n\n Web [](https://nic.eu.org/) DevTools \n\n> \n\n*responsive web designRWD**RWD* \n\n>  Devtools\n\n### \n\n- * viewport*  \n  meta\n- * media query*  \n  CSS\n- * fluid layout*    \n  emremvwvh\n- * breakpoint*  \n  \n- * flexbox*  \n  CSS\n- * grid*  \n  CSS\n\n## \n\n\n## \n### \n`UnoCSS`  `Tailwind CSS` \n\n `xxs``xxl` \n```javascript\n// uno.config.js\nexport default defineConfig({\n  ... ...\n  theme: {\n    breakpoints: {\n      xxs: '0px',\n      xs: '320px',\n      sm: '480px',\n      md: '768px',\n      lg: '1024px',\n      xl: '1280px',\n      xxl: '1600px',\n     },\n   },\n  ... ...\n})\n```\n\n React  `.jsx`  `md:` \n```jsx\n<div className={`shadow card-base text-base flex flex-col p-10 md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`}>\n    <h2 className=\"text-lg font-bold m-0\">\n        Responsive Design & Theme\n    </h2>\n    <p className=\"mb-4 text-center\">\n        Change window size or click the following button.\n    </p>\n    <div className='h-30px w-full flex items-center justify-center'>\n        <SwitchButton\n       height='50px'\n       width='60px'\n       layout='translate-x-[-50%]'\n       isChecked={isChecked}\n       SwitchFunction={handleSwitch}\n    />\n    </div>\n</div>\n```\n\n `768px`  `768px` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171533.png)\n\n### \n\n\n UnoCSS  `Anthony Fu` \n\n![](https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171653.png)\n\n\n\n `shortcuts` \n```javascript\nexport default defineConfig({\n  ... ...\n  shortcuts:{\n    'switch-animation': 'transition duration-300',\n    'bg-base': 'bg-[#f0f0f0] dark:bg-[#20202a] switch-animation',\n    'card-base': 'bg-[#ffffff] dark:bg-[#10101a] switch-animation',\n    'text-base': 'text-[#20202a] dark:text-[#f0f0f0] switch-animation',\n    'switch-label-base': 'bg-gray-200 dark:bg-gray-800 switch-animation',\n    'switch-span-base': 'bg-white dark:bg-gray-300 switch-animation',\n   },\n  ... ...\n})\n```\n\n `SwitchButton.jsx`  `theme`  div \n```jsx\n// SwitchButton/index.jsx\nimport PropTypes from 'prop-types';\n\nfunction SwitchButton({ height, width, layout, theme, SwitchFunction }) {\n  const handleSwitch = (event) => {\n    SwitchFunction(event.target.checked);\n   };\n\n  return (\n    <div className={`relative h-[${height}] w-[${width}] flex items-center justify-center ${layout}`}>\n      <input\n        type=\"checkbox\"\n        id=\"dark-light\"\n        className=\"absolute z-1 w-12 h-5\"\n        onChange={handleSwitch}\n      />\n      <label \n        htmlFor=\"dark-light\"\n        className='absolute z-2 block w-11 h-6 switch-label-base rounded-full shadow-inner cursor-pointer switch-animation hover:cursor-pointer'\n      >\n        <span\n          className={`absolute top-1 left-1.5 w-4 h-4 switch-span-base rounded-full shadow-md switch-animation ${theme=='dark' ? 'translate-x-[100%]' : ''}`}\n        >  \n        </span>\n      </label>\n    </div>\n   );\n}\n\nSwitchButton.propTypes = {\n  height: PropTypes.string.isRequired,\n  width: PropTypes.string.isRequired,\n  layout: PropTypes.string.isRequired,\n  theme: PropTypes.string.isRequired,\n  SwitchFunction: PropTypes.func.isRequired,\n};\n\nexport default SwitchButton;\n```\n\n<br/>\n\n```jsx\n// App.jsx\nimport { useState } from 'react';\nimport SwitchButton from './SwitchButton/index';\n\nfunction App() {\n const [theme, setTheme] = useState('dark');\n\n const handleSwitch = () => {\n  setTheme((prevChecked) => (prevChecked === 'dark' ? 'light' : 'dark'));\n  };\n\n return (\n  <div className={`w-100vw h-100vh flex flex-col ${theme}`}>\n   <main className=\"w-100vw flex-1 flex justify-center items-center bg-base\">\n    <div className={` shadow card-base text-base flex flex-col p-10  md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`}>\n     <h2 className=\"text-lg font-bold m-0\">\n       Responsive Design & Theme\n     </h2>\n     <p className=\"mb-4 text-center\">\n       Change window size or click the following button.\n     </p>\n     <div className='h-30px w-full flex items-center justify-center'>\n      <SwitchButton\n       height='50px'\n       width='60px'\n       layout='translate-x-[-50%]'\n       theme={theme}\n       SwitchFunction={handleSwitch}\n      />\n     </div>\n    </div>\n   </main>\n  </div>\n  );\n}\n\nexport default App;\n```\n\n `demo` [demo](http://example.ma5hr00m.top/)\n\n## \n demo \n\n `jotai`.","slug":"unocss-theme","published":1,"updated":"2024-06-09T12:56:40.121Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapa0015f4lycz8s6ow8","content":"<p>UnoCSS   CSS <a href=\"https://alfred-skyblue.github.io/unocss-docs-cn/\">UnoCSS </a></p>\n<p><a href=\"http://example.ma5hr00m.top/\">Online Demo</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> React&amp;UnoCSS  Demo <br><br><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926170511.png\" alt=\"Demo\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web </p>\n<p> Web <a href=\"https://nic.eu.org/\"></a> DevTools </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><em>responsive web designRWD</em><em>RWD</em> </p>\n<blockquote>\n<p> Devtools<br></p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><em> viewport</em><br>meta</li>\n<li><em> media query</em><br>CSS</li>\n<li><em> fluid layout</em><br>emremvwvh</li>\n<li><em> breakpoint</em><br></li>\n<li><em> flexbox</em><br>CSS</li>\n<li><em> grid</em><br>CSS</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p><code>UnoCSS</code>  <code>Tailwind CSS</code> </p>\n<p> <code>xxs</code><code>xxl</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// uno.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">  <span class=\"attr\">theme</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">breakpoints</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">xxs</span>: <span class=\"string\">&#x27;0px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xs</span>: <span class=\"string\">&#x27;320px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">sm</span>: <span class=\"string\">&#x27;480px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">md</span>: <span class=\"string\">&#x27;768px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">lg</span>: <span class=\"string\">&#x27;1024px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xl</span>: <span class=\"string\">&#x27;1280px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xxl</span>: <span class=\"string\">&#x27;1600px&#x27;</span>,</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> React  <code>.jsx</code>  <code>md:</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div className=&#123;<span class=\"string\">`shadow card-base text-base flex flex-col p-10 md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`</span>&#125;&gt;</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-lg font-bold m-0&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        Responsive Design &amp; Theme</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;mb-4 text-center&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        Change window size or click the following button.</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#x27;h-30px w-full flex items-center justify-center&#x27;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">SwitchButton</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">height</span>=<span class=\"string\">&#x27;50px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">width</span>=<span class=\"string\">&#x27;60px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">layout</span>=<span class=\"string\">&#x27;translate-x-[-50%]&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">isChecked</span>=<span class=\"string\">&#123;isChecked&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">SwitchFunction</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p> <code>768px</code>  <code>768px</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171533.png\" alt=\"\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> UnoCSS  <code>Anthony Fu</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171653.png\" alt=\"\"></p>\n<p><br><br> <code>shortcuts</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">  <span class=\"attr\">shortcuts</span>:&#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-animation&#x27;</span>: <span class=\"string\">&#x27;transition duration-300&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;bg-base&#x27;</span>: <span class=\"string\">&#x27;bg-[#f0f0f0] dark:bg-[#20202a] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;card-base&#x27;</span>: <span class=\"string\">&#x27;bg-[#ffffff] dark:bg-[#10101a] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;text-base&#x27;</span>: <span class=\"string\">&#x27;text-[#20202a] dark:text-[#f0f0f0] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-label-base&#x27;</span>: <span class=\"string\">&#x27;bg-gray-200 dark:bg-gray-800 switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-span-base&#x27;</span>: <span class=\"string\">&#x27;bg-white dark:bg-gray-300 switch-animation&#x27;</span>,</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> <code>SwitchButton.jsx</code>  <code>theme</code>  div </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// SwitchButton/index.jsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">PropTypes</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;prop-types&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">SwitchButton</span>(<span class=\"params\">&#123; height, width, layout, theme, SwitchFunction &#125;</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> <span class=\"title function_\">handleSwitch</span> = (<span class=\"params\">event</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"title class_\">SwitchFunction</span>(event.<span class=\"property\">target</span>.<span class=\"property\">checked</span>);</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">relative</span> <span class=\"attr\">h-</span>[$&#123;<span class=\"attr\">height</span>&#125;] <span class=\"attr\">w-</span>[$&#123;<span class=\"attr\">width</span>&#125;] <span class=\"attr\">flex</span> <span class=\"attr\">items-center</span> <span class=\"attr\">justify-center</span> $&#123;<span class=\"attr\">layout</span>&#125;`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">id</span>=<span class=\"string\">&quot;dark-light&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">className</span>=<span class=\"string\">&quot;absolute z-1 w-12 h-5&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">htmlFor</span>=<span class=\"string\">&quot;dark-light&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">className</span>=<span class=\"string\">&#x27;absolute z-2 block w-11 h-6 switch-label-base rounded-full shadow-inner cursor-pointer switch-animation hover:cursor-pointer&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">          <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">absolute</span> <span class=\"attr\">top-1</span> <span class=\"attr\">left-1.5</span> <span class=\"attr\">w-4</span> <span class=\"attr\">h-4</span> <span class=\"attr\">switch-span-base</span> <span class=\"attr\">rounded-full</span> <span class=\"attr\">shadow-md</span> <span class=\"attr\">switch-animation</span> $&#123;<span class=\"attr\">theme</span>==<span class=\"string\">&#x27;dark&#x27;</span> ? &#x27;<span class=\"attr\">translate-x-</span>[<span class=\"attr\">100</span>%]&#x27; <span class=\"attr\">:</span> &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        &gt;</span>  </span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">   );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">SwitchButton</span>.<span class=\"property\">propTypes</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">height</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">width</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">layout</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">theme</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"title class_\">SwitchFunction</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">func</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">SwitchButton</span>;</span><br></pre></td></tr></table></figure>\n\n<br/>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.jsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">SwitchButton</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./SwitchButton/index&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> [theme, setTheme] = <span class=\"title function_\">useState</span>(<span class=\"string\">&#x27;dark&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> <span class=\"title function_\">handleSwitch</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">setTheme</span>(<span class=\"function\">(<span class=\"params\">prevChecked</span>) =&gt;</span> (prevChecked === <span class=\"string\">&#x27;dark&#x27;</span> ? <span class=\"string\">&#x27;light&#x27;</span> : <span class=\"string\">&#x27;dark&#x27;</span>));</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> (</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">w-100vw</span> <span class=\"attr\">h-100vh</span> <span class=\"attr\">flex</span> <span class=\"attr\">flex-col</span> $&#123;<span class=\"attr\">theme</span>&#125;`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   <span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;w-100vw flex-1 flex justify-center items-center bg-base&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>` <span class=\"attr\">shadow</span> <span class=\"attr\">card-base</span> <span class=\"attr\">text-base</span> <span class=\"attr\">flex</span> <span class=\"attr\">flex-col</span> <span class=\"attr\">p-10</span>  <span class=\"attr\">md:w-fit</span> <span class=\"attr\">md:h-fit</span> <span class=\"attr\">xxs:box-border</span> <span class=\"attr\">xxs:items-center</span> <span class=\"attr\">xxs:justify-center</span> <span class=\"attr\">xxs:w-full</span> <span class=\"attr\">xxs:h-full</span>`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-lg font-bold m-0&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">       Responsive Design &amp; Theme</span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;mb-4 text-center&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">       Change window size or click the following button.</span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#x27;h-30px w-full flex items-center justify-center&#x27;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">SwitchButton</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">height</span>=<span class=\"string\">&#x27;50px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">width</span>=<span class=\"string\">&#x27;60px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">layout</span>=<span class=\"string\">&#x27;translate-x-[-50%]&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">theme</span>=<span class=\"string\">&#123;theme&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">SwitchFunction</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">App</span>;</span><br></pre></td></tr></table></figure>\n\n<p> <code>demo</code> <a href=\"http://example.ma5hr00m.top/\">demo</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> demo </p>\n<p> <code>jotai</code>.</p>\n","excerpt":"","more":"<p>UnoCSS   CSS <a href=\"https://alfred-skyblue.github.io/unocss-docs-cn/\">UnoCSS </a></p>\n<p><a href=\"http://example.ma5hr00m.top/\">Online Demo</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> React&amp;UnoCSS  Demo <br><br><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926170511.png\" alt=\"Demo\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Web </p>\n<p> Web <a href=\"https://nic.eu.org/\"></a> DevTools </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><em>responsive web designRWD</em><em>RWD</em> </p>\n<blockquote>\n<p> Devtools<br></p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><em> viewport</em><br>meta</li>\n<li><em> media query</em><br>CSS</li>\n<li><em> fluid layout</em><br>emremvwvh</li>\n<li><em> breakpoint</em><br></li>\n<li><em> flexbox</em><br>CSS</li>\n<li><em> grid</em><br>CSS</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p><code>UnoCSS</code>  <code>Tailwind CSS</code> </p>\n<p> <code>xxs</code><code>xxl</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// uno.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">  <span class=\"attr\">theme</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">breakpoints</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">xxs</span>: <span class=\"string\">&#x27;0px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xs</span>: <span class=\"string\">&#x27;320px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">sm</span>: <span class=\"string\">&#x27;480px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">md</span>: <span class=\"string\">&#x27;768px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">lg</span>: <span class=\"string\">&#x27;1024px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xl</span>: <span class=\"string\">&#x27;1280px&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">xxl</span>: <span class=\"string\">&#x27;1600px&#x27;</span>,</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> React  <code>.jsx</code>  <code>md:</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div className=&#123;<span class=\"string\">`shadow card-base text-base flex flex-col p-10 md:w-fit md:h-fit xxs:box-border xxs:items-center xxs:justify-center xxs:w-full xxs:h-full`</span>&#125;&gt;</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-lg font-bold m-0&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        Responsive Design &amp; Theme</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;mb-4 text-center&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        Change window size or click the following button.</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#x27;h-30px w-full flex items-center justify-center&#x27;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">SwitchButton</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">height</span>=<span class=\"string\">&#x27;50px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">width</span>=<span class=\"string\">&#x27;60px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">layout</span>=<span class=\"string\">&#x27;translate-x-[-50%]&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">isChecked</span>=<span class=\"string\">&#123;isChecked&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">SwitchFunction</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p> <code>768px</code>  <code>768px</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171533.png\" alt=\"\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p> UnoCSS  <code>Anthony Fu</code> </p>\n<p><img src=\"https://agu-img.oss-cn-hangzhou.aliyuncs.com/blog/20230926171653.png\" alt=\"\"></p>\n<p><br><br> <code>shortcuts</code> </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">  <span class=\"attr\">shortcuts</span>:&#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-animation&#x27;</span>: <span class=\"string\">&#x27;transition duration-300&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;bg-base&#x27;</span>: <span class=\"string\">&#x27;bg-[#f0f0f0] dark:bg-[#20202a] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;card-base&#x27;</span>: <span class=\"string\">&#x27;bg-[#ffffff] dark:bg-[#10101a] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;text-base&#x27;</span>: <span class=\"string\">&#x27;text-[#20202a] dark:text-[#f0f0f0] switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-label-base&#x27;</span>: <span class=\"string\">&#x27;bg-gray-200 dark:bg-gray-800 switch-animation&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;switch-span-base&#x27;</span>: <span class=\"string\">&#x27;bg-white dark:bg-gray-300 switch-animation&#x27;</span>,</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">  ... ...</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> <code>SwitchButton.jsx</code>  <code>theme</code>  div </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// SwitchButton/index.jsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">PropTypes</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;prop-types&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">SwitchButton</span>(<span class=\"params\">&#123; height, width, layout, theme, SwitchFunction &#125;</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> <span class=\"title function_\">handleSwitch</span> = (<span class=\"params\">event</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"title class_\">SwitchFunction</span>(event.<span class=\"property\">target</span>.<span class=\"property\">checked</span>);</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">relative</span> <span class=\"attr\">h-</span>[$&#123;<span class=\"attr\">height</span>&#125;] <span class=\"attr\">w-</span>[$&#123;<span class=\"attr\">width</span>&#125;] <span class=\"attr\">flex</span> <span class=\"attr\">items-center</span> <span class=\"attr\">justify-center</span> $&#123;<span class=\"attr\">layout</span>&#125;`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">id</span>=<span class=\"string\">&quot;dark-light&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">className</span>=<span class=\"string\">&quot;absolute z-1 w-12 h-5&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">label</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">htmlFor</span>=<span class=\"string\">&quot;dark-light&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">className</span>=<span class=\"string\">&#x27;absolute z-2 block w-11 h-6 switch-label-base rounded-full shadow-inner cursor-pointer switch-animation hover:cursor-pointer&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">          <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">absolute</span> <span class=\"attr\">top-1</span> <span class=\"attr\">left-1.5</span> <span class=\"attr\">w-4</span> <span class=\"attr\">h-4</span> <span class=\"attr\">switch-span-base</span> <span class=\"attr\">rounded-full</span> <span class=\"attr\">shadow-md</span> <span class=\"attr\">switch-animation</span> $&#123;<span class=\"attr\">theme</span>==<span class=\"string\">&#x27;dark&#x27;</span> ? &#x27;<span class=\"attr\">translate-x-</span>[<span class=\"attr\">100</span>%]&#x27; <span class=\"attr\">:</span> &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        &gt;</span>  </span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">   );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">SwitchButton</span>.<span class=\"property\">propTypes</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">height</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">width</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">layout</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"attr\">theme</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">string</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">  <span class=\"title class_\">SwitchFunction</span>: <span class=\"title class_\">PropTypes</span>.<span class=\"property\">func</span>.<span class=\"property\">isRequired</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">SwitchButton</span>;</span><br></pre></td></tr></table></figure>\n\n<br/>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.jsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">SwitchButton</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./SwitchButton/index&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> [theme, setTheme] = <span class=\"title function_\">useState</span>(<span class=\"string\">&#x27;dark&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> <span class=\"title function_\">handleSwitch</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"title function_\">setTheme</span>(<span class=\"function\">(<span class=\"params\">prevChecked</span>) =&gt;</span> (prevChecked === <span class=\"string\">&#x27;dark&#x27;</span> ? <span class=\"string\">&#x27;light&#x27;</span> : <span class=\"string\">&#x27;dark&#x27;</span>));</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> (</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>`<span class=\"attr\">w-100vw</span> <span class=\"attr\">h-100vh</span> <span class=\"attr\">flex</span> <span class=\"attr\">flex-col</span> $&#123;<span class=\"attr\">theme</span>&#125;`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   <span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;w-100vw flex-1 flex justify-center items-center bg-base&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;</span>` <span class=\"attr\">shadow</span> <span class=\"attr\">card-base</span> <span class=\"attr\">text-base</span> <span class=\"attr\">flex</span> <span class=\"attr\">flex-col</span> <span class=\"attr\">p-10</span>  <span class=\"attr\">md:w-fit</span> <span class=\"attr\">md:h-fit</span> <span class=\"attr\">xxs:box-border</span> <span class=\"attr\">xxs:items-center</span> <span class=\"attr\">xxs:justify-center</span> <span class=\"attr\">xxs:w-full</span> <span class=\"attr\">xxs:h-full</span>`&#125;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;text-lg font-bold m-0&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">       Responsive Design &amp; Theme</span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">className</span>=<span class=\"string\">&quot;mb-4 text-center&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">       Change window size or click the following button.</span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#x27;h-30px w-full flex items-center justify-center&#x27;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">SwitchButton</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">height</span>=<span class=\"string\">&#x27;50px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">width</span>=<span class=\"string\">&#x27;60px&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">layout</span>=<span class=\"string\">&#x27;translate-x-[-50%]&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">theme</span>=<span class=\"string\">&#123;theme&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">       <span class=\"attr\">SwitchFunction</span>=<span class=\"string\">&#123;handleSwitch&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">App</span>;</span><br></pre></td></tr></table></figure>\n\n<p> <code>demo</code> <a href=\"http://example.ma5hr00m.top/\">demo</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> demo </p>\n<p> <code>jotai</code>.</p>\n"},{"title":"Promise ","date":"2024-06-08T16:00:00.000Z","author":"ma5hr00m","_content":"\nPromise  CommonJS  ES2015ES6 \n\n- [ Promise - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises)\n- [Promise](https://www.liaoxuefeng.com/wiki/1022910821149312/1023024413276544)\n\n## \n\n- `Penfing`  \n- `Fulfilled` \n- `rejected` \n\n##  Promise(excutor)\n\n`Promise`  JavaScript \n\n- ** `Promise(executor)`**\n    - `Promise`  `executor`  `Promise`  `executor` \n    - `executor` `resolve`  `reject` `executor`  `Promise` \n- ****\n    -  `resolve`  `Promise`  pending fulfilled\n    -  `reject`  `Promise`  pending rejected\n    -  `executor`  `Promise`  rejected  `reject` \n- ** `Promise`**\n    -  `executor`  `resolve`  `reject` \n    -  `resolve`  `Promise` `Promise.reject(\"err\")` `Promise`  `Promise` \n\n\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  // \n  setTimeout(() => {\n    const data = fetchData(); // \n    if (data) {\n      resolve(data); // resolvePromisefulfilled\n    } else {\n      reject(''); // rejectPromiserejected\n    }\n  }, 1000);\n});\n\npromise.then(data => {\n  console.log(data); // Promisefulfilled\n}).catch(error => {\n  console.error(error); // Promiserejected\n});\n\n```\n\n`promise`  `Promise`  `executor`  `Promise` `setTimeout` `resolve`  `reject`  `Promise`  `.then()`  `.catch()`  `Promise` \n\n## \n\n### then(onFulfilled, onRejected)\n\n![20240609140952](https://img.ma5hr00m.top/blog/20240609140952.png)\n\n`then(onFulfilled, onRejected)`  `Promise`  `Promise`  `onFulfilled`  `onRejected` \n\n- ****\n    -  `Promise`  `onFulfilled`  `onRejected`  `Promise` fulfilledrejected\n    -  `Promise`  `then`  `then`  `catch` \n- ****\n    - `then`  `Promise`  `Promise` fulfilled  rejected `onFulfilled`  `onRejected` \n    -  `onFulfilled`  `onRejected`  `Promise` resolve\n    -  `Promise` `Promise`  `Promise`  `Promise`  `Promise`  `Promise`  `Promise` \n\n\n\n `then` \n\n```jsx\ndoSomething()\n  .then(function(result) {\n    return doSomethingElse(result);\n  })\n  .then(function(newResult) {\n    return doThirdThing(newResult);\n  })\n  .then(function(finalResult) {\n    console.log(': ' + finalResult);\n  })\n  .catch(failureCallback);\n\n```\n\n `then`  `Promise` `Promise` `catch`  `Promise` \n\n### catch(onRejected)\n\n`catch(onRejected)`  `Promise`  `Promise`  `reject` \n\n- ****\n    - `catch(onRejected)`  `Promise`  `onRejected`  `Promise` \n- ****\n    - `catch`  `Promise` \n    -  `Promise`  `catch` resolve\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  //  Promise \n  reject(100);\n});\n\npromise\n  .catch((reason) => {\n    //  Promise \n    console.log(reason); // 100\n    return 200; // 'catch'  Promise \n  })\n  .then((res) => {\n    //  'catch'  Promise \n    console.log(res); // 200\n  });\n```\n\n`promise` `reject(100)` `Promise`  `promise` `.catch`  `100``catch`  `200` `Promise` \n\n`.then`  `Promise`  `catch`  `Promise` resolve `.then`  `200`\n\n`catch`  `then`  `Promise` \n\n### finally(finallyCallback)\n\n`finally(finallyCallback)`  `Promise`  `Promise`  `finallyCallback`  `Promise` resolvedrejected\n\n- ****\n    - `finally(finallyCallback)`  `Promise`  `Promise` \n- ****\n    - `finally`  `finallyCallback`  `Promise` \n    - `finally`  `Promise` `Promise`  `Promise`  `finallyCallback`  `Promise`\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  //  Promise \n  resolve(100);\n});\n\npromise\n  .finally(() => {\n    // 'finally' \n    console.log(\"finally\");\n    // 'finally' promise undefined\n    console.log(res); // undefined\n  })\n  .then((res) => {\n    // 'finally' promise\n    //  'res'  'resolve' \n    console.log(res); // 100\n  });\n```\n\n`promise` `resolve(100)` `Promise` `.finally`  `Promise`  `console.log(res);`  `res`  `undefined`\n\n`.then`  `Promise`  `finally`  `Promise`  `Promise` `.then`  `100` \n\n`finally`  `then`  `catch` \n\n## \n\n### Promise.all(promiseArray)\n\n`Promise.all(promiseArray)`  `Promise`  `Promise` \n\n- ****\n    - `Promise.all`  `Promise` \n    -  `Promise`  `Promise` \n- ****\n    -  `promiseArray` \n    - `Promise.all` \n    -  `Promise` `Promise.all`  `Promise` \n\n```jsx\n//  Promise \nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p1\");\n  }, 2000);\n});\nconst promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p2\");\n  }, 1000);\n});\n\n//  Promise.all  Promise \nconst promiseAll = Promise.all([1, 2, promise1, 3, 4, promise2, 5]);\npromiseAll.then((res) => {\n  //  Promise\n  console.log(res); // [1, 2, \"p1\", 3, 4, \"p2\", 5]\n});\n\n//  Promise  Promise.all \nconst promiseAllFail = Promise.all([1, 2, promise1, 3, 4, Promise.reject(''), 5]);\npromiseAllFail.then((res) => {\n  console.log(res);\n}).catch(e => {\n  //  Promise.all \n  console.log('fail', e); // fail \n});\n\n```\n\n`promise1`  `promise2`  `Promise`  2000  1000 `promise2` `Promise.all`  `Promise`  `catch`  `promiseArray`  `Promise` `Promise.all`  `Promise`  `Promise` \n\n### Promise.allSettled\n\n`Promise.allSettled`  promise promises fulfilledrejected promise \n\n- ****\n    - **** promise promise  promises \n    - ****`status`  `value`  `reason` promise `status`  `'fulfilled'` `value`  promise  promise `status`  `'rejected'` `reason` \n    - **** `Promise.all` `Promise.allSettled`  promise  promises \n\n `.all`  `Promise.allSettled`  ECMAScript 2020  polyfill \n\n### **Promise.race**\n\n**`Promise.race`** promises promise  promise promise **** promise \n\n- \n    - **** promises \n    - **** promise **`Promise.race`**\n    - **** promise  promise \n    - ****\n\n```jsx\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p1\");\n  }, 2000);\n});\nconst promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p2\");\n  }, 1000);\n});\nconst promise3 = new Promise((resolve, reject) => {\n  // 500\n  setTimeout(() => {\n    reject(\"\");\n  }, 500);\n});\n\nconst promiseRace = Promise.race([promise1, promise2, promise3]);\npromiseRace\n  .then((res) => {\n    //  \"\" promise3 \n    console.log(res);\n  })\n  .catch((e) => {\n    //  promise3 \n    console.log(\"fail\", e);\n  });\n```\n\n**`promise1`****`promise2`****`promise3`****`Promise.race`** promise **`promise3`**500**`Promise.race`****`promise3`**\n\n**`Promise.race`**\n\n### **Promise.reject**\n\n**`Promise.reject`** JavaScript rejected Promise Promise \n\n- \n    - reason**`.catch()`**\n\n```jsx\nPromise.reject(\"rejected\")\n  .then((res) => {\n    //  Promise \n    console.log('value', res);\n  })\n  .catch((reason) => {\n    //  \"reason rejected\"\n    console.log('reason', reason);\n  });\n```\n\n**`Promise.reject`** Promise rejected **`.then()`****`.catch()`**\n\n**`Promise.reject`** Promise\n\n### Promise.resolve\n\n`Promise.resolve`  JavaScript fulfilled Promise Promise\n\n- ****\n    - **** `Promise.resolve`  Promise Promise \n    - **Promise ** Promise`Promise.resolve`  Promise Promise\n\n```jsx\n// 100Promise\nPromise.resolve(100).then((res) => {\n  // 100\n  console.log(res); //100\n});\n\n// Promise\nconst promise = new Promise((resolve, reject) => {\n  reject(200);\n});\n// .then()\npromise\n  .then((res) => {\n    // Promise\n    console.log(res);\n  });\n\n```\n\n`Promise.resolve`  `100`  Promise `.then()` \n\n Promise  `.catch()` `Promise.resolve`  Promise\n\n##  Promise\n\n[segmentfault.com](https://segmentfault.com/a/1190000041414230)\n\n```jsx\nclass myPromise {\n    static PENDING = 'pending'\n    static FULFILLEd = 'fulfilled'\n    static REJECTED = 'rejected'\n    constructor(init){\n        this.state = myPromise.PENDING // promise\n        this.promiseRes = null  // promise\n        this.resolveCallback = [] //\n        this.rejectCallback = [] //\n        const resolve = result=>{\n            // pending\n            if(this.state === myPromise.PENDING){\n                this.state = myPromise.FULFILLEd //\n                this.promiseRes = result //\n                //\n                this.resolveCallback.forEach(fn=>fn())\n            }\n        }\n        const reject = result=>{\n            // pending\n            if(this.state === myPromise.PENDING){\n                this.state = myPromise.REJECTED //\n                this.promiseRes = result //\n                // \n                this.rejectCallback.forEach(fn=>fn())\n            }\n        }\n        try{\n            init(resolve,reject)  // this\n        }catch(err){\n            reject(err)\n        }\n        \n    }\n    then(onFulfilled,onRejected){\n        const {promiseRes,state} = this\n        let promise = new myPromise((reso,reje)=>{\n            const resolveMyPromise = promiseRes => {\n                try{\n                    if(typeof onFulfilled !== 'function'){\n                        // thenpromise\n                        reso(promiseRes)\n                    }else{\n                        // \n                        const res = onFulfilled(promiseRes)\n                        // promise\n                        if(res instanceof myPromise){\n                            // promise,thenpromise\n                            res.then(reso,rej) \n                        }else{\n                            // promisepromiseresolve\n                            reso(res)\n                        }\n                    }\n                }catch(err){\n                    //promiserejected\n                    reje(err)\n                }\n            }\n            const rejectMyPromise = promiseRes => {\n                try{\n                    if(typeof onRejected !== 'function'){\n                        // thenpromise\n                        reje(promiseRes)\n                    }else{\n                        // \n                        const res = onRejected(promiseRes)\n                        // promise\n                        if(res instanceof myPromise){\n                            // promise,thenpromise\n                            res.then(reso,rej) \n                        }else{\n                            // promisepromiseresolve\n                            reje(res)\n                        }\n                    }\n                    \n                }catch(err){\n                    //promiserejected\n                    reje(err)\n                }\n            }\n            if(state === myPromise.FULFILLEd) {\n                resolveMyPromise(promiseRes)\n            }\n            if(state === myPromise.REJECTED) {\n                rejectMyPromise(promiseRes)\n            }\n            if(state === myPromise.PENDING){\n                if(onFulfilled && typeof onFulfilled === 'function'){\n                    this.resolveCallback.push(()=>\n                    // setTimeoutthen\n                    setTimeout(()=>{\n                        resolveMyPromise(this.promiseRes)\n                    },0)\n                    )\n                }\n                if(onRejected && typeof onRejected === 'function'){\n                    this.rejectCallback.push(()=>\n                    // setTimeoutthen\n                    setTimeout(()=>{\n                        rejectMyPromise(this.promiseRes)\n                    },0)\n                    )\n                }\n            }\n\n        })\n        return promise\n    }\n    catch(onRejected) {\n        return this.then(undefined,onRejected)\n    }\n    static all (promises){\n        return new myPromise((res,rej)=>{\n            let count = 0\n            const result = [];\n            function addFun(index,resf) {\n                result[index]=resf // push,\n                count++\n                if(count==promises.length) {\n                    res(result)\n                }\n            }\n            [].forEach.call(promises,(promise,index)=>{\n                if(promise instanceof myPromise) {\n                    promise.then(success=>{\n                        addFun(index,success)\n                    },err=>{\n                        rej(err)\n                    })\n                }else{\n                    addFun(index,promise)\n                }\n            })\n        })\n    }\n    static race(promises) {\n        return new myPromise((res,rej)=>{\n            [].forEach.call(promises,promise=>{\n                if(promise instanceof myPromise){\n                    promise.then(success=>{\n                        res(success)\n                    },error=>{\n                        rej(error)\n                    })\n                }else{\n                    res(promise)\n                } \n            })\n        })\n    }\n    static resolve(v){\n        //1.Promise,\n        if(v instanceof myPromise){\n            return v\n        }\n        //2.thenablePromisethen\n        if(typeof v === 'object' && typeof v.then === 'function'){\n            return new myPromise((res,rej)=>{\n                v.then(res,rej)\n            })\n        }\n        //3.resolvedpromise\n        if(!v){\n            return new myPromise(res=>{\n                res()\n            })\n        }\n        //4.Promiseresolved\n        return new myPromise(res=>{\n            res(v)\n        })\n    }\n    static reject(v){\n        return new myPromise((res,rej)=>{\n            rej(v)\n        })\n    }\n}\n```","source":"_posts/promise.md","raw":"---\ntitle: Promise \ndate: 2024/6/9\nauthor: ma5hr00m\ncategories:\n- JavaScript\n---\n\nPromise  CommonJS  ES2015ES6 \n\n- [ Promise - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises)\n- [Promise](https://www.liaoxuefeng.com/wiki/1022910821149312/1023024413276544)\n\n## \n\n- `Penfing`  \n- `Fulfilled` \n- `rejected` \n\n##  Promise(excutor)\n\n`Promise`  JavaScript \n\n- ** `Promise(executor)`**\n    - `Promise`  `executor`  `Promise`  `executor` \n    - `executor` `resolve`  `reject` `executor`  `Promise` \n- ****\n    -  `resolve`  `Promise`  pending fulfilled\n    -  `reject`  `Promise`  pending rejected\n    -  `executor`  `Promise`  rejected  `reject` \n- ** `Promise`**\n    -  `executor`  `resolve`  `reject` \n    -  `resolve`  `Promise` `Promise.reject(\"err\")` `Promise`  `Promise` \n\n\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  // \n  setTimeout(() => {\n    const data = fetchData(); // \n    if (data) {\n      resolve(data); // resolvePromisefulfilled\n    } else {\n      reject(''); // rejectPromiserejected\n    }\n  }, 1000);\n});\n\npromise.then(data => {\n  console.log(data); // Promisefulfilled\n}).catch(error => {\n  console.error(error); // Promiserejected\n});\n\n```\n\n`promise`  `Promise`  `executor`  `Promise` `setTimeout` `resolve`  `reject`  `Promise`  `.then()`  `.catch()`  `Promise` \n\n## \n\n### then(onFulfilled, onRejected)\n\n![20240609140952](https://img.ma5hr00m.top/blog/20240609140952.png)\n\n`then(onFulfilled, onRejected)`  `Promise`  `Promise`  `onFulfilled`  `onRejected` \n\n- ****\n    -  `Promise`  `onFulfilled`  `onRejected`  `Promise` fulfilledrejected\n    -  `Promise`  `then`  `then`  `catch` \n- ****\n    - `then`  `Promise`  `Promise` fulfilled  rejected `onFulfilled`  `onRejected` \n    -  `onFulfilled`  `onRejected`  `Promise` resolve\n    -  `Promise` `Promise`  `Promise`  `Promise`  `Promise`  `Promise`  `Promise` \n\n\n\n `then` \n\n```jsx\ndoSomething()\n  .then(function(result) {\n    return doSomethingElse(result);\n  })\n  .then(function(newResult) {\n    return doThirdThing(newResult);\n  })\n  .then(function(finalResult) {\n    console.log(': ' + finalResult);\n  })\n  .catch(failureCallback);\n\n```\n\n `then`  `Promise` `Promise` `catch`  `Promise` \n\n### catch(onRejected)\n\n`catch(onRejected)`  `Promise`  `Promise`  `reject` \n\n- ****\n    - `catch(onRejected)`  `Promise`  `onRejected`  `Promise` \n- ****\n    - `catch`  `Promise` \n    -  `Promise`  `catch` resolve\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  //  Promise \n  reject(100);\n});\n\npromise\n  .catch((reason) => {\n    //  Promise \n    console.log(reason); // 100\n    return 200; // 'catch'  Promise \n  })\n  .then((res) => {\n    //  'catch'  Promise \n    console.log(res); // 200\n  });\n```\n\n`promise` `reject(100)` `Promise`  `promise` `.catch`  `100``catch`  `200` `Promise` \n\n`.then`  `Promise`  `catch`  `Promise` resolve `.then`  `200`\n\n`catch`  `then`  `Promise` \n\n### finally(finallyCallback)\n\n`finally(finallyCallback)`  `Promise`  `Promise`  `finallyCallback`  `Promise` resolvedrejected\n\n- ****\n    - `finally(finallyCallback)`  `Promise`  `Promise` \n- ****\n    - `finally`  `finallyCallback`  `Promise` \n    - `finally`  `Promise` `Promise`  `Promise`  `finallyCallback`  `Promise`\n\n```jsx\nconst promise = new Promise((resolve, reject) => {\n  //  Promise \n  resolve(100);\n});\n\npromise\n  .finally(() => {\n    // 'finally' \n    console.log(\"finally\");\n    // 'finally' promise undefined\n    console.log(res); // undefined\n  })\n  .then((res) => {\n    // 'finally' promise\n    //  'res'  'resolve' \n    console.log(res); // 100\n  });\n```\n\n`promise` `resolve(100)` `Promise` `.finally`  `Promise`  `console.log(res);`  `res`  `undefined`\n\n`.then`  `Promise`  `finally`  `Promise`  `Promise` `.then`  `100` \n\n`finally`  `then`  `catch` \n\n## \n\n### Promise.all(promiseArray)\n\n`Promise.all(promiseArray)`  `Promise`  `Promise` \n\n- ****\n    - `Promise.all`  `Promise` \n    -  `Promise`  `Promise` \n- ****\n    -  `promiseArray` \n    - `Promise.all` \n    -  `Promise` `Promise.all`  `Promise` \n\n```jsx\n//  Promise \nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p1\");\n  }, 2000);\n});\nconst promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p2\");\n  }, 1000);\n});\n\n//  Promise.all  Promise \nconst promiseAll = Promise.all([1, 2, promise1, 3, 4, promise2, 5]);\npromiseAll.then((res) => {\n  //  Promise\n  console.log(res); // [1, 2, \"p1\", 3, 4, \"p2\", 5]\n});\n\n//  Promise  Promise.all \nconst promiseAllFail = Promise.all([1, 2, promise1, 3, 4, Promise.reject(''), 5]);\npromiseAllFail.then((res) => {\n  console.log(res);\n}).catch(e => {\n  //  Promise.all \n  console.log('fail', e); // fail \n});\n\n```\n\n`promise1`  `promise2`  `Promise`  2000  1000 `promise2` `Promise.all`  `Promise`  `catch`  `promiseArray`  `Promise` `Promise.all`  `Promise`  `Promise` \n\n### Promise.allSettled\n\n`Promise.allSettled`  promise promises fulfilledrejected promise \n\n- ****\n    - **** promise promise  promises \n    - ****`status`  `value`  `reason` promise `status`  `'fulfilled'` `value`  promise  promise `status`  `'rejected'` `reason` \n    - **** `Promise.all` `Promise.allSettled`  promise  promises \n\n `.all`  `Promise.allSettled`  ECMAScript 2020  polyfill \n\n### **Promise.race**\n\n**`Promise.race`** promises promise  promise promise **** promise \n\n- \n    - **** promises \n    - **** promise **`Promise.race`**\n    - **** promise  promise \n    - ****\n\n```jsx\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p1\");\n  }, 2000);\n});\nconst promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(\"p2\");\n  }, 1000);\n});\nconst promise3 = new Promise((resolve, reject) => {\n  // 500\n  setTimeout(() => {\n    reject(\"\");\n  }, 500);\n});\n\nconst promiseRace = Promise.race([promise1, promise2, promise3]);\npromiseRace\n  .then((res) => {\n    //  \"\" promise3 \n    console.log(res);\n  })\n  .catch((e) => {\n    //  promise3 \n    console.log(\"fail\", e);\n  });\n```\n\n**`promise1`****`promise2`****`promise3`****`Promise.race`** promise **`promise3`**500**`Promise.race`****`promise3`**\n\n**`Promise.race`**\n\n### **Promise.reject**\n\n**`Promise.reject`** JavaScript rejected Promise Promise \n\n- \n    - reason**`.catch()`**\n\n```jsx\nPromise.reject(\"rejected\")\n  .then((res) => {\n    //  Promise \n    console.log('value', res);\n  })\n  .catch((reason) => {\n    //  \"reason rejected\"\n    console.log('reason', reason);\n  });\n```\n\n**`Promise.reject`** Promise rejected **`.then()`****`.catch()`**\n\n**`Promise.reject`** Promise\n\n### Promise.resolve\n\n`Promise.resolve`  JavaScript fulfilled Promise Promise\n\n- ****\n    - **** `Promise.resolve`  Promise Promise \n    - **Promise ** Promise`Promise.resolve`  Promise Promise\n\n```jsx\n// 100Promise\nPromise.resolve(100).then((res) => {\n  // 100\n  console.log(res); //100\n});\n\n// Promise\nconst promise = new Promise((resolve, reject) => {\n  reject(200);\n});\n// .then()\npromise\n  .then((res) => {\n    // Promise\n    console.log(res);\n  });\n\n```\n\n`Promise.resolve`  `100`  Promise `.then()` \n\n Promise  `.catch()` `Promise.resolve`  Promise\n\n##  Promise\n\n[segmentfault.com](https://segmentfault.com/a/1190000041414230)\n\n```jsx\nclass myPromise {\n    static PENDING = 'pending'\n    static FULFILLEd = 'fulfilled'\n    static REJECTED = 'rejected'\n    constructor(init){\n        this.state = myPromise.PENDING // promise\n        this.promiseRes = null  // promise\n        this.resolveCallback = [] //\n        this.rejectCallback = [] //\n        const resolve = result=>{\n            // pending\n            if(this.state === myPromise.PENDING){\n                this.state = myPromise.FULFILLEd //\n                this.promiseRes = result //\n                //\n                this.resolveCallback.forEach(fn=>fn())\n            }\n        }\n        const reject = result=>{\n            // pending\n            if(this.state === myPromise.PENDING){\n                this.state = myPromise.REJECTED //\n                this.promiseRes = result //\n                // \n                this.rejectCallback.forEach(fn=>fn())\n            }\n        }\n        try{\n            init(resolve,reject)  // this\n        }catch(err){\n            reject(err)\n        }\n        \n    }\n    then(onFulfilled,onRejected){\n        const {promiseRes,state} = this\n        let promise = new myPromise((reso,reje)=>{\n            const resolveMyPromise = promiseRes => {\n                try{\n                    if(typeof onFulfilled !== 'function'){\n                        // thenpromise\n                        reso(promiseRes)\n                    }else{\n                        // \n                        const res = onFulfilled(promiseRes)\n                        // promise\n                        if(res instanceof myPromise){\n                            // promise,thenpromise\n                            res.then(reso,rej) \n                        }else{\n                            // promisepromiseresolve\n                            reso(res)\n                        }\n                    }\n                }catch(err){\n                    //promiserejected\n                    reje(err)\n                }\n            }\n            const rejectMyPromise = promiseRes => {\n                try{\n                    if(typeof onRejected !== 'function'){\n                        // thenpromise\n                        reje(promiseRes)\n                    }else{\n                        // \n                        const res = onRejected(promiseRes)\n                        // promise\n                        if(res instanceof myPromise){\n                            // promise,thenpromise\n                            res.then(reso,rej) \n                        }else{\n                            // promisepromiseresolve\n                            reje(res)\n                        }\n                    }\n                    \n                }catch(err){\n                    //promiserejected\n                    reje(err)\n                }\n            }\n            if(state === myPromise.FULFILLEd) {\n                resolveMyPromise(promiseRes)\n            }\n            if(state === myPromise.REJECTED) {\n                rejectMyPromise(promiseRes)\n            }\n            if(state === myPromise.PENDING){\n                if(onFulfilled && typeof onFulfilled === 'function'){\n                    this.resolveCallback.push(()=>\n                    // setTimeoutthen\n                    setTimeout(()=>{\n                        resolveMyPromise(this.promiseRes)\n                    },0)\n                    )\n                }\n                if(onRejected && typeof onRejected === 'function'){\n                    this.rejectCallback.push(()=>\n                    // setTimeoutthen\n                    setTimeout(()=>{\n                        rejectMyPromise(this.promiseRes)\n                    },0)\n                    )\n                }\n            }\n\n        })\n        return promise\n    }\n    catch(onRejected) {\n        return this.then(undefined,onRejected)\n    }\n    static all (promises){\n        return new myPromise((res,rej)=>{\n            let count = 0\n            const result = [];\n            function addFun(index,resf) {\n                result[index]=resf // push,\n                count++\n                if(count==promises.length) {\n                    res(result)\n                }\n            }\n            [].forEach.call(promises,(promise,index)=>{\n                if(promise instanceof myPromise) {\n                    promise.then(success=>{\n                        addFun(index,success)\n                    },err=>{\n                        rej(err)\n                    })\n                }else{\n                    addFun(index,promise)\n                }\n            })\n        })\n    }\n    static race(promises) {\n        return new myPromise((res,rej)=>{\n            [].forEach.call(promises,promise=>{\n                if(promise instanceof myPromise){\n                    promise.then(success=>{\n                        res(success)\n                    },error=>{\n                        rej(error)\n                    })\n                }else{\n                    res(promise)\n                } \n            })\n        })\n    }\n    static resolve(v){\n        //1.Promise,\n        if(v instanceof myPromise){\n            return v\n        }\n        //2.thenablePromisethen\n        if(typeof v === 'object' && typeof v.then === 'function'){\n            return new myPromise((res,rej)=>{\n                v.then(res,rej)\n            })\n        }\n        //3.resolvedpromise\n        if(!v){\n            return new myPromise(res=>{\n                res()\n            })\n        }\n        //4.Promiseresolved\n        return new myPromise(res=>{\n            res(v)\n        })\n    }\n    static reject(v){\n        return new myPromise((res,rej)=>{\n            rej(v)\n        })\n    }\n}\n```","slug":"promise","published":1,"updated":"2024-06-12T02:37:18.008Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapa0018f4ly70f0g35g","content":"<p>Promise  CommonJS  ES2015ES6 </p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises\"> Promise - JavaScript | MDN</a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023024413276544\">Promise</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>Penfing</code>  </li>\n<li><code>Fulfilled</code> </li>\n<li><code>rejected</code> </li>\n</ul>\n<h2 id=\"-Promise-excutor\"><a href=\"#-Promise-excutor\" class=\"headerlink\" title=\" Promise(excutor)\"></a> Promise(excutor)</h2><p><code>Promise</code>  JavaScript </p>\n<ul>\n<li>** <code>Promise(executor)</code>**<ul>\n<li><code>Promise</code>  <code>executor</code>  <code>Promise</code>  <code>executor</code> </li>\n<li><code>executor</code> <code>resolve</code>  <code>reject</code> <code>executor</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li> <code>resolve</code>  <code>Promise</code>  pending fulfilled</li>\n<li> <code>reject</code>  <code>Promise</code>  pending rejected</li>\n<li> <code>executor</code>  <code>Promise</code>  rejected  <code>reject</code> </li>\n</ul>\n</li>\n<li>** <code>Promise</code>**<ul>\n<li> <code>executor</code>  <code>resolve</code>  <code>reject</code> </li>\n<li> <code>resolve</code>  <code>Promise</code> <code>Promise.reject(&quot;err&quot;)</code> <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"title function_\">fetchData</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(data); <span class=\"comment\">// resolvePromisefulfilled</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">reject</span>(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// rejectPromiserejected</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data); <span class=\"comment\">// Promisefulfilled</span></span><br><span class=\"line\">&#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(error); <span class=\"comment\">// Promiserejected</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code>  <code>Promise</code>  <code>executor</code>  <code>Promise</code> <code>setTimeout</code> <code>resolve</code>  <code>reject</code>  <code>Promise</code>  <code>.then()</code>  <code>.catch()</code>  <code>Promise</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"then-onFulfilled-onRejected\"><a href=\"#then-onFulfilled-onRejected\" class=\"headerlink\" title=\"then(onFulfilled, onRejected)\"></a>then(onFulfilled, onRejected)</h3><p><img src=\"https://img.ma5hr00m.top/blog/20240609140952.png\" alt=\"20240609140952\"></p>\n<p><code>then(onFulfilled, onRejected)</code>  <code>Promise</code>  <code>Promise</code>  <code>onFulfilled</code>  <code>onRejected</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li> <code>Promise</code>  <code>onFulfilled</code>  <code>onRejected</code>  <code>Promise</code> fulfilledrejected</li>\n<li> <code>Promise</code>  <code>then</code>  <code>then</code>  <code>catch</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>then</code>  <code>Promise</code>  <code>Promise</code> fulfilled  rejected <code>onFulfilled</code>  <code>onRejected</code> </li>\n<li> <code>onFulfilled</code>  <code>onRejected</code>  <code>Promise</code> resolve</li>\n<li> <code>Promise</code> <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<p> <code>then</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">doSomething</span>()</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">result</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">doSomethingElse</span>(result);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">newResult</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">doThirdThing</span>(newResult);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">finalResult</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;: &#x27;</span> + finalResult);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(failureCallback);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> <code>then</code>  <code>Promise</code> <code>Promise</code> <code>catch</code>  <code>Promise</code> </p>\n<h3 id=\"catch-onRejected\"><a href=\"#catch-onRejected\" class=\"headerlink\" title=\"catch(onRejected)\"></a>catch(onRejected)</h3><p><code>catch(onRejected)</code>  <code>Promise</code>  <code>Promise</code>  <code>reject</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li><code>catch(onRejected)</code>  <code>Promise</code>  <code>onRejected</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>catch</code>  <code>Promise</code> </li>\n<li> <code>Promise</code>  <code>catch</code> resolve</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">  <span class=\"title function_\">reject</span>(<span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(reason); <span class=\"comment\">// 100</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">200</span>; <span class=\"comment\">// &#x27;catch&#x27;  Promise </span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &#x27;catch&#x27;  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// 200</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code> <code>reject(100)</code> <code>Promise</code>  <code>promise</code> <code>.catch</code>  <code>100</code><code>catch</code>  <code>200</code> <code>Promise</code> </p>\n<p><code>.then</code>  <code>Promise</code>  <code>catch</code>  <code>Promise</code> resolve <code>.then</code>  <code>200</code></p>\n<p><code>catch</code>  <code>then</code>  <code>Promise</code> </p>\n<h3 id=\"finally-finallyCallback\"><a href=\"#finally-finallyCallback\" class=\"headerlink\" title=\"finally(finallyCallback)\"></a>finally(finallyCallback)</h3><p><code>finally(finallyCallback)</code>  <code>Promise</code>  <code>Promise</code>  <code>finallyCallback</code>  <code>Promise</code> resolvedrejected</p>\n<ul>\n<li><strong></strong><ul>\n<li><code>finally(finallyCallback)</code>  <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>finally</code>  <code>finallyCallback</code>  <code>Promise</code> </li>\n<li><code>finally</code>  <code>Promise</code> <code>Promise</code>  <code>Promise</code>  <code>finallyCallback</code>  <code>Promise</code></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">  <span class=\"title function_\">resolve</span>(<span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">finally</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;finally&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; promise undefined</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// undefined</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; promise</span></span><br><span class=\"line\">    <span class=\"comment\">//  &#x27;res&#x27;  &#x27;resolve&#x27; </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// 100</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code> <code>resolve(100)</code> <code>Promise</code> <code>.finally</code>  <code>Promise</code>  <code>console.log(res);</code>  <code>res</code>  <code>undefined</code></p>\n<p><code>.then</code>  <code>Promise</code>  <code>finally</code>  <code>Promise</code>  <code>Promise</code> <code>.then</code>  <code>100</code> </p>\n<p><code>finally</code>  <code>then</code>  <code>catch</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Promise-all-promiseArray\"><a href=\"#Promise-all-promiseArray\" class=\"headerlink\" title=\"Promise.all(promiseArray)\"></a>Promise.all(promiseArray)</h3><p><code>Promise.all(promiseArray)</code>  <code>Promise</code>  <code>Promise</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li><code>Promise.all</code>  <code>Promise</code> </li>\n<li> <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li> <code>promiseArray</code> </li>\n<li><code>Promise.all</code> </li>\n<li> <code>Promise</code> <code>Promise.all</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  Promise </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p1&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p2&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Promise.all  Promise </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseAll = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">all</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, promise1, <span class=\"number\">3</span>, <span class=\"number\">4</span>, promise2, <span class=\"number\">5</span>]);</span><br><span class=\"line\">promiseAll.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// [1, 2, &quot;p1&quot;, 3, 4, &quot;p2&quot;, 5]</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Promise  Promise.all </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseAllFail = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">all</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, promise1, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(<span class=\"string\">&#x27;&#x27;</span>), <span class=\"number\">5</span>]);</span><br><span class=\"line\">promiseAllFail.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">&#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise.all </span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;fail&#x27;</span>, e); <span class=\"comment\">// fail </span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>promise1</code>  <code>promise2</code>  <code>Promise</code>  2000  1000 <code>promise2</code> <code>Promise.all</code>  <code>Promise</code>  <code>catch</code>  <code>promiseArray</code>  <code>Promise</code> <code>Promise.all</code>  <code>Promise</code>  <code>Promise</code> </p>\n<h3 id=\"Promise-allSettled\"><a href=\"#Promise-allSettled\" class=\"headerlink\" title=\"Promise.allSettled\"></a>Promise.allSettled</h3><p><code>Promise.allSettled</code>  promise promises fulfilledrejected promise </p>\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong> promise promise  promises </li>\n<li><strong></strong><code>status</code>  <code>value</code>  <code>reason</code> promise <code>status</code>  <code>&#39;fulfilled&#39;</code> <code>value</code>  promise  promise <code>status</code>  <code>&#39;rejected&#39;</code> <code>reason</code> </li>\n<li><strong></strong> <code>Promise.all</code> <code>Promise.allSettled</code>  promise  promises </li>\n</ul>\n</li>\n</ul>\n<p> <code>.all</code>  <code>Promise.allSettled</code>  ECMAScript 2020  polyfill </p>\n<h3 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a><strong>Promise.race</strong></h3><p><strong><code>Promise.race</code></strong> promises promise  promise promise <strong></strong> promise </p>\n<ul>\n<li><ul>\n<li><strong></strong> promises </li>\n<li><strong></strong> promise **<code>Promise.race</code>**</li>\n<li><strong></strong> promise  promise </li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p1&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p2&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise3 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 500</span></span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">reject</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">500</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseRace = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">race</span>([promise1, promise2, promise3]);</span><br><span class=\"line\">promiseRace</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &quot;&quot; promise3 </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  promise3 </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;fail&quot;</span>, e);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>**<code>promise1</code><strong></strong><code>promise2</code>**<strong><code>promise3</code></strong>**<code>Promise.race</code>** promise **<code>promise3</code>**500**<code>Promise.race</code>**<strong><code>promise3</code></strong></p>\n<p>**<code>Promise.race</code>**</p>\n<h3 id=\"Promise-reject\"><a href=\"#Promise-reject\" class=\"headerlink\" title=\"Promise.reject\"></a><strong>Promise.reject</strong></h3><p><strong><code>Promise.reject</code></strong> JavaScript rejected Promise Promise </p>\n<ul>\n<li><ul>\n<li>reason<strong><code>.catch()</code></strong></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(<span class=\"string\">&quot;rejected&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;value&#x27;</span>, res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &quot;reason rejected&quot;</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;reason&#x27;</span>, reason);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>**<code>Promise.reject</code>** Promise rejected <strong><code>.then()</code></strong><strong><code>.catch()</code></strong></p>\n<p>**<code>Promise.reject</code>** Promise</p>\n<h3 id=\"Promise-resolve\"><a href=\"#Promise-resolve\" class=\"headerlink\" title=\"Promise.resolve\"></a>Promise.resolve</h3><p><code>Promise.resolve</code>  JavaScript fulfilled Promise Promise</p>\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong> <code>Promise.resolve</code>  Promise Promise </li>\n<li><strong>Promise </strong> Promise<code>Promise.resolve</code>  Promise Promise</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 100Promise</span></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>(<span class=\"number\">100</span>).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 100</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">//100</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Promise</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">reject</span>(<span class=\"number\">200</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// .then()</span></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Promise</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>Promise.resolve</code>  <code>100</code>  Promise <code>.then()</code> </p>\n<p> Promise  <code>.catch()</code> <code>Promise.resolve</code>  Promise</p>\n<h2 id=\"-Promise\"><a href=\"#-Promise\" class=\"headerlink\" title=\" Promise\"></a> Promise</h2><p><a href=\"https://segmentfault.com/a/1190000041414230\">segmentfault.com</a></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">myPromise</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"variable constant_\">PENDING</span> = <span class=\"string\">&#x27;pending&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title class_\">FULFILLEd</span> = <span class=\"string\">&#x27;fulfilled&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"variable constant_\">REJECTED</span> = <span class=\"string\">&#x27;rejected&#x27;</span></span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">init</span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">PENDING</span> <span class=\"comment\">// promise</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = <span class=\"literal\">null</span>  <span class=\"comment\">// promise</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span> = [] <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span> = [] <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">resolve</span> = result=&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">// pending</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">FULFILLEd</span> <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = result <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span>=&gt;</span><span class=\"title function_\">fn</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">reject</span> = result=&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">// pending</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">REJECTED</span> <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = result <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span>=&gt;</span><span class=\"title function_\">fn</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">init</span>(resolve,reject)  <span class=\"comment\">// this</span></span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">            <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">then</span>(<span class=\"params\">onFulfilled,onRejected</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> &#123;promiseRes,state&#125; = <span class=\"variable language_\">this</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> promise = <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">reso,reje</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> <span class=\"title function_\">resolveMyPromise</span> = promiseRes =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> onFulfilled !== <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// thenpromise</span></span><br><span class=\"line\">                        <span class=\"title function_\">reso</span>(promiseRes)</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        <span class=\"keyword\">const</span> res = <span class=\"title function_\">onFulfilled</span>(promiseRes)</span><br><span class=\"line\">                        <span class=\"comment\">// promise</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(res <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promise,thenpromise</span></span><br><span class=\"line\">                            res.<span class=\"title function_\">then</span>(reso,rej) </span><br><span class=\"line\">                        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promisepromiseresolve</span></span><br><span class=\"line\">                            <span class=\"title function_\">reso</span>(res)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">                    <span class=\"comment\">//promiserejected</span></span><br><span class=\"line\">                    <span class=\"title function_\">reje</span>(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> <span class=\"title function_\">rejectMyPromise</span> = promiseRes =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> onRejected !== <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// thenpromise</span></span><br><span class=\"line\">                        <span class=\"title function_\">reje</span>(promiseRes)</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        <span class=\"keyword\">const</span> res = <span class=\"title function_\">onRejected</span>(promiseRes)</span><br><span class=\"line\">                        <span class=\"comment\">// promise</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(res <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promise,thenpromise</span></span><br><span class=\"line\">                            res.<span class=\"title function_\">then</span>(reso,rej) </span><br><span class=\"line\">                        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promisepromiseresolve</span></span><br><span class=\"line\">                            <span class=\"title function_\">reje</span>(res)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    </span><br><span class=\"line\">                &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">                    <span class=\"comment\">//promiserejected</span></span><br><span class=\"line\">                    <span class=\"title function_\">reje</span>(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">FULFILLEd</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">resolveMyPromise</span>(promiseRes)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">REJECTED</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">rejectMyPromise</span>(promiseRes)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(onFulfilled &amp;&amp; <span class=\"keyword\">typeof</span> onFulfilled === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span>.<span class=\"title function_\">push</span>(<span class=\"function\">()=&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">// setTimeoutthen</span></span><br><span class=\"line\">                    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">resolveMyPromise</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span>)</span><br><span class=\"line\">                    &#125;,<span class=\"number\">0</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(onRejected &amp;&amp; <span class=\"keyword\">typeof</span> onRejected === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span>.<span class=\"title function_\">push</span>(<span class=\"function\">()=&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">// setTimeoutthen</span></span><br><span class=\"line\">                    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rejectMyPromise</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span>)</span><br><span class=\"line\">                    &#125;,<span class=\"number\">0</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> promise</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">catch</span>(onRejected) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"title function_\">then</span>(<span class=\"literal\">undefined</span>,onRejected)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> all (promises)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> count = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">const</span> result = [];</span><br><span class=\"line\">            <span class=\"keyword\">function</span> <span class=\"title function_\">addFun</span>(<span class=\"params\">index,resf</span>) &#123;</span><br><span class=\"line\">                result[index]=resf <span class=\"comment\">// push,</span></span><br><span class=\"line\">                count++</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(count==promises.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">res</span>(result)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            [].<span class=\"property\">forEach</span>.<span class=\"title function_\">call</span>(promises,<span class=\"function\">(<span class=\"params\">promise,index</span>)=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(promise <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                    promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">success</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">addFun</span>(index,success)</span><br><span class=\"line\">                    &#125;,<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rej</span>(err)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"title function_\">addFun</span>(index,promise)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">race</span>(<span class=\"params\">promises</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            [].<span class=\"property\">forEach</span>.<span class=\"title function_\">call</span>(promises,<span class=\"function\"><span class=\"params\">promise</span>=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(promise <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                    promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">success</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">res</span>(success)</span><br><span class=\"line\">                    &#125;,<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rej</span>(error)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"title function_\">res</span>(promise)</span><br><span class=\"line\">                &#125; </span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">resolve</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.Promise,</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> v</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//2.thenablePromisethen</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> v === <span class=\"string\">&#x27;object&#x27;</span> &amp;&amp; <span class=\"keyword\">typeof</span> v.<span class=\"property\">then</span> === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">                v.<span class=\"title function_\">then</span>(res,rej)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3.resolvedpromise</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!v)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"title function_\">res</span>()</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//4.Promiseresolved</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">res</span>(v)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">reject</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">rej</span>(v)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>Promise  CommonJS  ES2015ES6 </p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises\"> Promise - JavaScript | MDN</a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1022910821149312/1023024413276544\">Promise</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>Penfing</code>  </li>\n<li><code>Fulfilled</code> </li>\n<li><code>rejected</code> </li>\n</ul>\n<h2 id=\"-Promise-excutor\"><a href=\"#-Promise-excutor\" class=\"headerlink\" title=\" Promise(excutor)\"></a> Promise(excutor)</h2><p><code>Promise</code>  JavaScript </p>\n<ul>\n<li>** <code>Promise(executor)</code>**<ul>\n<li><code>Promise</code>  <code>executor</code>  <code>Promise</code>  <code>executor</code> </li>\n<li><code>executor</code> <code>resolve</code>  <code>reject</code> <code>executor</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li> <code>resolve</code>  <code>Promise</code>  pending fulfilled</li>\n<li> <code>reject</code>  <code>Promise</code>  pending rejected</li>\n<li> <code>executor</code>  <code>Promise</code>  rejected  <code>reject</code> </li>\n</ul>\n</li>\n<li>** <code>Promise</code>**<ul>\n<li> <code>executor</code>  <code>resolve</code>  <code>reject</code> </li>\n<li> <code>resolve</code>  <code>Promise</code> <code>Promise.reject(&quot;err&quot;)</code> <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"title function_\">fetchData</span>(); <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(data); <span class=\"comment\">// resolvePromisefulfilled</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">reject</span>(<span class=\"string\">&#x27;&#x27;</span>); <span class=\"comment\">// rejectPromiserejected</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data); <span class=\"comment\">// Promisefulfilled</span></span><br><span class=\"line\">&#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(error); <span class=\"comment\">// Promiserejected</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code>  <code>Promise</code>  <code>executor</code>  <code>Promise</code> <code>setTimeout</code> <code>resolve</code>  <code>reject</code>  <code>Promise</code>  <code>.then()</code>  <code>.catch()</code>  <code>Promise</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"then-onFulfilled-onRejected\"><a href=\"#then-onFulfilled-onRejected\" class=\"headerlink\" title=\"then(onFulfilled, onRejected)\"></a>then(onFulfilled, onRejected)</h3><p><img src=\"https://img.ma5hr00m.top/blog/20240609140952.png\" alt=\"20240609140952\"></p>\n<p><code>then(onFulfilled, onRejected)</code>  <code>Promise</code>  <code>Promise</code>  <code>onFulfilled</code>  <code>onRejected</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li> <code>Promise</code>  <code>onFulfilled</code>  <code>onRejected</code>  <code>Promise</code> fulfilledrejected</li>\n<li> <code>Promise</code>  <code>then</code>  <code>then</code>  <code>catch</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>then</code>  <code>Promise</code>  <code>Promise</code> fulfilled  rejected <code>onFulfilled</code>  <code>onRejected</code> </li>\n<li> <code>onFulfilled</code>  <code>onRejected</code>  <code>Promise</code> resolve</li>\n<li> <code>Promise</code> <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<p> <code>then</code> </p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">doSomething</span>()</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">result</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">doSomethingElse</span>(result);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">newResult</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">doThirdThing</span>(newResult);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">finalResult</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;: &#x27;</span> + finalResult);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(failureCallback);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> <code>then</code>  <code>Promise</code> <code>Promise</code> <code>catch</code>  <code>Promise</code> </p>\n<h3 id=\"catch-onRejected\"><a href=\"#catch-onRejected\" class=\"headerlink\" title=\"catch(onRejected)\"></a>catch(onRejected)</h3><p><code>catch(onRejected)</code>  <code>Promise</code>  <code>Promise</code>  <code>reject</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li><code>catch(onRejected)</code>  <code>Promise</code>  <code>onRejected</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>catch</code>  <code>Promise</code> </li>\n<li> <code>Promise</code>  <code>catch</code> resolve</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">  <span class=\"title function_\">reject</span>(<span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(reason); <span class=\"comment\">// 100</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">200</span>; <span class=\"comment\">// &#x27;catch&#x27;  Promise </span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &#x27;catch&#x27;  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// 200</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code> <code>reject(100)</code> <code>Promise</code>  <code>promise</code> <code>.catch</code>  <code>100</code><code>catch</code>  <code>200</code> <code>Promise</code> </p>\n<p><code>.then</code>  <code>Promise</code>  <code>catch</code>  <code>Promise</code> resolve <code>.then</code>  <code>200</code></p>\n<p><code>catch</code>  <code>then</code>  <code>Promise</code> </p>\n<h3 id=\"finally-finallyCallback\"><a href=\"#finally-finallyCallback\" class=\"headerlink\" title=\"finally(finallyCallback)\"></a>finally(finallyCallback)</h3><p><code>finally(finallyCallback)</code>  <code>Promise</code>  <code>Promise</code>  <code>finallyCallback</code>  <code>Promise</code> resolvedrejected</p>\n<ul>\n<li><strong></strong><ul>\n<li><code>finally(finallyCallback)</code>  <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li><code>finally</code>  <code>finallyCallback</code>  <code>Promise</code> </li>\n<li><code>finally</code>  <code>Promise</code> <code>Promise</code>  <code>Promise</code>  <code>finallyCallback</code>  <code>Promise</code></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">  <span class=\"title function_\">resolve</span>(<span class=\"number\">100</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">finally</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;finally&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; promise undefined</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// undefined</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// &#x27;finally&#x27; promise</span></span><br><span class=\"line\">    <span class=\"comment\">//  &#x27;res&#x27;  &#x27;resolve&#x27; </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// 100</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>promise</code> <code>resolve(100)</code> <code>Promise</code> <code>.finally</code>  <code>Promise</code>  <code>console.log(res);</code>  <code>res</code>  <code>undefined</code></p>\n<p><code>.then</code>  <code>Promise</code>  <code>finally</code>  <code>Promise</code>  <code>Promise</code> <code>.then</code>  <code>100</code> </p>\n<p><code>finally</code>  <code>then</code>  <code>catch</code> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Promise-all-promiseArray\"><a href=\"#Promise-all-promiseArray\" class=\"headerlink\" title=\"Promise.all(promiseArray)\"></a>Promise.all(promiseArray)</h3><p><code>Promise.all(promiseArray)</code>  <code>Promise</code>  <code>Promise</code> </p>\n<ul>\n<li><strong></strong><ul>\n<li><code>Promise.all</code>  <code>Promise</code> </li>\n<li> <code>Promise</code>  <code>Promise</code> </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li> <code>promiseArray</code> </li>\n<li><code>Promise.all</code> </li>\n<li> <code>Promise</code> <code>Promise.all</code>  <code>Promise</code> </li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  Promise </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p1&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p2&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Promise.all  Promise </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseAll = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">all</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, promise1, <span class=\"number\">3</span>, <span class=\"number\">4</span>, promise2, <span class=\"number\">5</span>]);</span><br><span class=\"line\">promiseAll.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// [1, 2, &quot;p1&quot;, 3, 4, &quot;p2&quot;, 5]</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Promise  Promise.all </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseAllFail = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">all</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, promise1, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(<span class=\"string\">&#x27;&#x27;</span>), <span class=\"number\">5</span>]);</span><br><span class=\"line\">promiseAllFail.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">&#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//  Promise.all </span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;fail&#x27;</span>, e); <span class=\"comment\">// fail </span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>promise1</code>  <code>promise2</code>  <code>Promise</code>  2000  1000 <code>promise2</code> <code>Promise.all</code>  <code>Promise</code>  <code>catch</code>  <code>promiseArray</code>  <code>Promise</code> <code>Promise.all</code>  <code>Promise</code>  <code>Promise</code> </p>\n<h3 id=\"Promise-allSettled\"><a href=\"#Promise-allSettled\" class=\"headerlink\" title=\"Promise.allSettled\"></a>Promise.allSettled</h3><p><code>Promise.allSettled</code>  promise promises fulfilledrejected promise </p>\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong> promise promise  promises </li>\n<li><strong></strong><code>status</code>  <code>value</code>  <code>reason</code> promise <code>status</code>  <code>&#39;fulfilled&#39;</code> <code>value</code>  promise  promise <code>status</code>  <code>&#39;rejected&#39;</code> <code>reason</code> </li>\n<li><strong></strong> <code>Promise.all</code> <code>Promise.allSettled</code>  promise  promises </li>\n</ul>\n</li>\n</ul>\n<p> <code>.all</code>  <code>Promise.allSettled</code>  ECMAScript 2020  polyfill </p>\n<h3 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a><strong>Promise.race</strong></h3><p><strong><code>Promise.race</code></strong> promises promise  promise promise <strong></strong> promise </p>\n<ul>\n<li><ul>\n<li><strong></strong> promises </li>\n<li><strong></strong> promise **<code>Promise.race</code>**</li>\n<li><strong></strong> promise  promise </li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promise1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p1&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">resolve</span>(<span class=\"string\">&quot;p2&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> promise3 = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 500</span></span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">reject</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">500</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> promiseRace = <span class=\"title class_\">Promise</span>.<span class=\"title function_\">race</span>([promise1, promise2, promise3]);</span><br><span class=\"line\">promiseRace</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &quot;&quot; promise3 </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  promise3 </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;fail&quot;</span>, e);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>**<code>promise1</code><strong></strong><code>promise2</code>**<strong><code>promise3</code></strong>**<code>Promise.race</code>** promise **<code>promise3</code>**500**<code>Promise.race</code>**<strong><code>promise3</code></strong></p>\n<p>**<code>Promise.race</code>**</p>\n<h3 id=\"Promise-reject\"><a href=\"#Promise-reject\" class=\"headerlink\" title=\"Promise.reject\"></a><strong>Promise.reject</strong></h3><p><strong><code>Promise.reject</code></strong> JavaScript rejected Promise Promise </p>\n<ul>\n<li><ul>\n<li>reason<strong><code>.catch()</code></strong></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(<span class=\"string\">&quot;rejected&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Promise </span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;value&#x27;</span>, res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">reason</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  &quot;reason rejected&quot;</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;reason&#x27;</span>, reason);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>**<code>Promise.reject</code>** Promise rejected <strong><code>.then()</code></strong><strong><code>.catch()</code></strong></p>\n<p>**<code>Promise.reject</code>** Promise</p>\n<h3 id=\"Promise-resolve\"><a href=\"#Promise-resolve\" class=\"headerlink\" title=\"Promise.resolve\"></a>Promise.resolve</h3><p><code>Promise.resolve</code>  JavaScript fulfilled Promise Promise</p>\n<ul>\n<li><strong></strong><ul>\n<li><strong></strong> <code>Promise.resolve</code>  Promise Promise </li>\n<li><strong>Promise </strong> Promise<code>Promise.resolve</code>  Promise Promise</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 100Promise</span></span><br><span class=\"line\"><span class=\"title class_\">Promise</span>.<span class=\"title function_\">resolve</span>(<span class=\"number\">100</span>).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 100</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">//100</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Promise</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">reject</span>(<span class=\"number\">200</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// .then()</span></span><br><span class=\"line\">promise</span><br><span class=\"line\">  .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Promise</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><code>Promise.resolve</code>  <code>100</code>  Promise <code>.then()</code> </p>\n<p> Promise  <code>.catch()</code> <code>Promise.resolve</code>  Promise</p>\n<h2 id=\"-Promise\"><a href=\"#-Promise\" class=\"headerlink\" title=\" Promise\"></a> Promise</h2><p><a href=\"https://segmentfault.com/a/1190000041414230\">segmentfault.com</a></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">myPromise</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"variable constant_\">PENDING</span> = <span class=\"string\">&#x27;pending&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title class_\">FULFILLEd</span> = <span class=\"string\">&#x27;fulfilled&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"variable constant_\">REJECTED</span> = <span class=\"string\">&#x27;rejected&#x27;</span></span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">init</span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">PENDING</span> <span class=\"comment\">// promise</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = <span class=\"literal\">null</span>  <span class=\"comment\">// promise</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span> = [] <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span> = [] <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">resolve</span> = result=&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">// pending</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">FULFILLEd</span> <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = result <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span>=&gt;</span><span class=\"title function_\">fn</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"title function_\">reject</span> = result=&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">// pending</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">state</span> === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">state</span> = myPromise.<span class=\"property\">REJECTED</span> <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span> = result <span class=\"comment\">//</span></span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span>=&gt;</span><span class=\"title function_\">fn</span>())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">init</span>(resolve,reject)  <span class=\"comment\">// this</span></span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">            <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">then</span>(<span class=\"params\">onFulfilled,onRejected</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> &#123;promiseRes,state&#125; = <span class=\"variable language_\">this</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> promise = <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">reso,reje</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> <span class=\"title function_\">resolveMyPromise</span> = promiseRes =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> onFulfilled !== <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// thenpromise</span></span><br><span class=\"line\">                        <span class=\"title function_\">reso</span>(promiseRes)</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        <span class=\"keyword\">const</span> res = <span class=\"title function_\">onFulfilled</span>(promiseRes)</span><br><span class=\"line\">                        <span class=\"comment\">// promise</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(res <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promise,thenpromise</span></span><br><span class=\"line\">                            res.<span class=\"title function_\">then</span>(reso,rej) </span><br><span class=\"line\">                        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promisepromiseresolve</span></span><br><span class=\"line\">                            <span class=\"title function_\">reso</span>(res)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">                    <span class=\"comment\">//promiserejected</span></span><br><span class=\"line\">                    <span class=\"title function_\">reje</span>(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> <span class=\"title function_\">rejectMyPromise</span> = promiseRes =&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> onRejected !== <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// thenpromise</span></span><br><span class=\"line\">                        <span class=\"title function_\">reje</span>(promiseRes)</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        <span class=\"keyword\">const</span> res = <span class=\"title function_\">onRejected</span>(promiseRes)</span><br><span class=\"line\">                        <span class=\"comment\">// promise</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(res <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promise,thenpromise</span></span><br><span class=\"line\">                            res.<span class=\"title function_\">then</span>(reso,rej) </span><br><span class=\"line\">                        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                            <span class=\"comment\">// promisepromiseresolve</span></span><br><span class=\"line\">                            <span class=\"title function_\">reje</span>(res)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    </span><br><span class=\"line\">                &#125;<span class=\"keyword\">catch</span>(err)&#123;</span><br><span class=\"line\">                    <span class=\"comment\">//promiserejected</span></span><br><span class=\"line\">                    <span class=\"title function_\">reje</span>(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">FULFILLEd</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">resolveMyPromise</span>(promiseRes)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">REJECTED</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_\">rejectMyPromise</span>(promiseRes)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(state === myPromise.<span class=\"property\">PENDING</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(onFulfilled &amp;&amp; <span class=\"keyword\">typeof</span> onFulfilled === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">this</span>.<span class=\"property\">resolveCallback</span>.<span class=\"title function_\">push</span>(<span class=\"function\">()=&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">// setTimeoutthen</span></span><br><span class=\"line\">                    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">resolveMyPromise</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span>)</span><br><span class=\"line\">                    &#125;,<span class=\"number\">0</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(onRejected &amp;&amp; <span class=\"keyword\">typeof</span> onRejected === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">                    <span class=\"variable language_\">this</span>.<span class=\"property\">rejectCallback</span>.<span class=\"title function_\">push</span>(<span class=\"function\">()=&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">// setTimeoutthen</span></span><br><span class=\"line\">                    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rejectMyPromise</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">promiseRes</span>)</span><br><span class=\"line\">                    &#125;,<span class=\"number\">0</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> promise</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">catch</span>(onRejected) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"title function_\">then</span>(<span class=\"literal\">undefined</span>,onRejected)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> all (promises)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> count = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">const</span> result = [];</span><br><span class=\"line\">            <span class=\"keyword\">function</span> <span class=\"title function_\">addFun</span>(<span class=\"params\">index,resf</span>) &#123;</span><br><span class=\"line\">                result[index]=resf <span class=\"comment\">// push,</span></span><br><span class=\"line\">                count++</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(count==promises.<span class=\"property\">length</span>) &#123;</span><br><span class=\"line\">                    <span class=\"title function_\">res</span>(result)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            [].<span class=\"property\">forEach</span>.<span class=\"title function_\">call</span>(promises,<span class=\"function\">(<span class=\"params\">promise,index</span>)=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(promise <span class=\"keyword\">instanceof</span> myPromise) &#123;</span><br><span class=\"line\">                    promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">success</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">addFun</span>(index,success)</span><br><span class=\"line\">                    &#125;,<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rej</span>(err)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"title function_\">addFun</span>(index,promise)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">race</span>(<span class=\"params\">promises</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            [].<span class=\"property\">forEach</span>.<span class=\"title function_\">call</span>(promises,<span class=\"function\"><span class=\"params\">promise</span>=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(promise <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">                    promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">success</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">res</span>(success)</span><br><span class=\"line\">                    &#125;,<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">                        <span class=\"title function_\">rej</span>(error)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"title function_\">res</span>(promise)</span><br><span class=\"line\">                &#125; </span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">resolve</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.Promise,</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(v <span class=\"keyword\">instanceof</span> myPromise)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> v</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//2.thenablePromisethen</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">typeof</span> v === <span class=\"string\">&#x27;object&#x27;</span> &amp;&amp; <span class=\"keyword\">typeof</span> v.<span class=\"property\">then</span> === <span class=\"string\">&#x27;function&#x27;</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">                v.<span class=\"title function_\">then</span>(res,rej)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//3.resolvedpromise</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!v)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">                <span class=\"title function_\">res</span>()</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//4.Promiseresolved</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">res</span>(v)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"title function_\">reject</span>(<span class=\"params\">v</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title function_\">myPromise</span>(<span class=\"function\">(<span class=\"params\">res,rej</span>)=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"title function_\">rej</span>(v)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":" Web ","date":"2023-09-13T16:00:00.000Z","author":"ma5hr00m","_content":"\n Web \n\n##  & \n### \n*****Authentication*\n\n\n\n\n### \n*****Persistent Login*\n HTTP  **HTTP **\n\n Web \n\n\n\n## HTTP Basic Authentication\nHTTP `HTTP Basic Authentication`  HTTP \n\n *Basic HTTP * \n\n1.  401  WWW-Authenticate *Basic**realm*\n2.  401  Base64  Basic  Authorization \n3.  Authorization  401 \n\n BearerDigest  HTTP [Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry](http://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml)\n\n `HTTP Basic Authentication` Nginx \n\n Nginx  HTTP [Nginx Http](`HTTP Basic Authentication` )\n\n`HTTP Basic Authentication`  HTTPS \n\n## session-cookie\n session-cookie \n\n### cookie\n`Cookie`*HTTP Cookie* ****\n\n HTTP  cookie  cookie  cookie \n\n### session\n`Session`** ****\n\n session  ( id , `SessionId`) SessionId  cookie  SessionId SessionId  session \n\n### \n1.  Session sid Session  ** **  *redis*  redis\n2.  sid  Cookie  Cookie  Cookie  localStorage  localCookie \n3.  Cookie Cookie  sid  Session\n4.  Session  Session\n\n\n\n![session](http://img.ma5hr00m.top//img/20230926223807.png)\n\n### \nsession  cookie [CookieSession](https://wangxiaoxi.cn/posts/http-cookie/)\n\nsession-cookie  cookie  cookie  CSRF \n\n## JWT\n`JSON Web Token`*JWT* JSON \n\n`JWT`  `.`  JWT [jwt.io](https://jwt.io/) JWT  jwt \n\n jwt \n\n1. **\n   \n2. * jwt*\n   jwt jwt \n3. * jwt*\n    jwt \n4. * jwt*\n    token\n\n session-cookie JWT \n- JWT \n- JWT \n- JWT  Cookie cookie  CSRF \n- JWT \n- \n\n## OAuth\nOAuth \n GitHub \n\n OAuth2.0[ OAuth 2.0](https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html)\n\n## SSO\nSSO\n\n1. **  \n    SSO \n2. * SSO *  \n    SSO  ticket ticket  URL \n3. *SSO*  \n   SSO  SSO  session SSO  Cookie\n4. * Service Ticket*  \n   SSO  ST*Service Ticket* ST \n5. * ST*  \n    ST  SSO  ST  session  app  Cookie\n6. **  \n   \n\nSSOSession IDToken\n\n CAS [CASSSO](https://www.cnblogs.com/wangsongbai/p/10299655.html)\n\n## PassKey\n\n\n[](https://www.liaoxuefeng.com/article/1563183619768355)","source":"_posts/web-usual-auth.md","raw":"---\ntitle:  Web \ndate: 2023/09/14\nauthor: ma5hr00m\ncategories:\n- Web\n---\n\n Web \n\n##  & \n### \n*****Authentication*\n\n\n\n\n### \n*****Persistent Login*\n HTTP  **HTTP **\n\n Web \n\n\n\n## HTTP Basic Authentication\nHTTP `HTTP Basic Authentication`  HTTP \n\n *Basic HTTP * \n\n1.  401  WWW-Authenticate *Basic**realm*\n2.  401  Base64  Basic  Authorization \n3.  Authorization  401 \n\n BearerDigest  HTTP [Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry](http://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml)\n\n `HTTP Basic Authentication` Nginx \n\n Nginx  HTTP [Nginx Http](`HTTP Basic Authentication` )\n\n`HTTP Basic Authentication`  HTTPS \n\n## session-cookie\n session-cookie \n\n### cookie\n`Cookie`*HTTP Cookie* ****\n\n HTTP  cookie  cookie  cookie \n\n### session\n`Session`** ****\n\n session  ( id , `SessionId`) SessionId  cookie  SessionId SessionId  session \n\n### \n1.  Session sid Session  ** **  *redis*  redis\n2.  sid  Cookie  Cookie  Cookie  localStorage  localCookie \n3.  Cookie Cookie  sid  Session\n4.  Session  Session\n\n\n\n![session](http://img.ma5hr00m.top//img/20230926223807.png)\n\n### \nsession  cookie [CookieSession](https://wangxiaoxi.cn/posts/http-cookie/)\n\nsession-cookie  cookie  cookie  CSRF \n\n## JWT\n`JSON Web Token`*JWT* JSON \n\n`JWT`  `.`  JWT [jwt.io](https://jwt.io/) JWT  jwt \n\n jwt \n\n1. **\n   \n2. * jwt*\n   jwt jwt \n3. * jwt*\n    jwt \n4. * jwt*\n    token\n\n session-cookie JWT \n- JWT \n- JWT \n- JWT  Cookie cookie  CSRF \n- JWT \n- \n\n## OAuth\nOAuth \n GitHub \n\n OAuth2.0[ OAuth 2.0](https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html)\n\n## SSO\nSSO\n\n1. **  \n    SSO \n2. * SSO *  \n    SSO  ticket ticket  URL \n3. *SSO*  \n   SSO  SSO  session SSO  Cookie\n4. * Service Ticket*  \n   SSO  ST*Service Ticket* ST \n5. * ST*  \n    ST  SSO  ST  session  app  Cookie\n6. **  \n   \n\nSSOSession IDToken\n\n CAS [CASSSO](https://www.cnblogs.com/wangsongbai/p/10299655.html)\n\n## PassKey\n\n\n[](https://www.liaoxuefeng.com/article/1563183619768355)","slug":"web-usual-auth","published":1,"updated":"2024-06-09T12:56:00.175Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapb0019f4ly301z3d6e","content":"<p> Web </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" &amp; \"></a> &amp; </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong><em>Authentication</em><br></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong><em>Persistent Login</em><br> HTTP  <strong>HTTP </strong></p>\n<p> Web </p>\n<p></p>\n<h2 id=\"HTTP-Basic-Authentication\"><a href=\"#HTTP-Basic-Authentication\" class=\"headerlink\" title=\"HTTP Basic Authentication\"></a>HTTP Basic Authentication</h2><p>HTTP <code>HTTP Basic Authentication</code>  HTTP </p>\n<p> <em>Basic HTTP </em> </p>\n<ol>\n<li> 401  WWW-Authenticate <em>Basic</em><em>realm</em></li>\n<li> 401  Base64  Basic  Authorization </li>\n<li> Authorization  401 </li>\n</ol>\n<p> BearerDigest  HTTP <a href=\"http://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml\">Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry</a></p>\n<p> <code>HTTP Basic Authentication</code> Nginx </p>\n<p> Nginx  HTTP [Nginx Http](<code>HTTP Basic Authentication</code> )</p>\n<p><code>HTTP Basic Authentication</code>  HTTPS </p>\n<h2 id=\"session-cookie\"><a href=\"#session-cookie\" class=\"headerlink\" title=\"session-cookie\"></a>session-cookie</h2><p> session-cookie </p>\n<h3 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h3><p><code>Cookie</code><em>HTTP Cookie</em> <strong></strong></p>\n<p> HTTP  cookie  cookie  cookie </p>\n<h3 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h3><p><code>Session</code><em></em> <strong></strong></p>\n<p> session  ( id , <code>SessionId</code>) SessionId  cookie  SessionId SessionId  session </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> Session sid Session  <em></em> <em></em>  <em>redis</em>  redis</li>\n<li> sid  Cookie  Cookie  Cookie  localStorage  localCookie </li>\n<li> Cookie Cookie  sid  Session</li>\n<li> Session  Session</li>\n</ol>\n<p></p>\n<p><img src=\"http://img.ma5hr00m.top//img/20230926223807.png\" alt=\"session\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>session  cookie <a href=\"https://wangxiaoxi.cn/posts/http-cookie/\">CookieSession</a></p>\n<p>session-cookie  cookie  cookie  CSRF </p>\n<h2 id=\"JWT\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h2><p><code>JSON Web Token</code><em>JWT</em> JSON </p>\n<p><code>JWT</code>  <code>.</code>  JWT <a href=\"https://jwt.io/\">jwt.io</a> JWT  jwt </p>\n<p> jwt </p>\n<ol>\n<li><em></em><br></li>\n<li><em> jwt</em><br>jwt jwt </li>\n<li><em> jwt</em><br> jwt </li>\n<li><em> jwt</em><br> token</li>\n</ol>\n<p> session-cookie JWT </p>\n<ul>\n<li>JWT </li>\n<li>JWT </li>\n<li>JWT  Cookie cookie  CSRF </li>\n<li>JWT </li>\n<li></li>\n</ul>\n<h2 id=\"OAuth\"><a href=\"#OAuth\" class=\"headerlink\" title=\"OAuth\"></a>OAuth</h2><p>OAuth <br> GitHub </p>\n<p> OAuth2.0<a href=\"https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html\"> OAuth 2.0</a></p>\n<h2 id=\"SSO\"><a href=\"#SSO\" class=\"headerlink\" title=\"SSO\"></a>SSO</h2><p>SSO</p>\n<ol>\n<li><em></em><br> SSO </li>\n<li><em> SSO </em><br> SSO  ticket ticket  URL </li>\n<li><em>SSO</em><br>SSO  SSO  session SSO  Cookie</li>\n<li><em> Service Ticket</em><br>SSO  ST<em>Service Ticket</em> ST </li>\n<li><em> ST</em><br> ST  SSO  ST  session  app  Cookie</li>\n<li><em></em><br></li>\n</ol>\n<p>SSOSession IDToken</p>\n<p> CAS <a href=\"https://www.cnblogs.com/wangsongbai/p/10299655.html\">CASSSO</a></p>\n<h2 id=\"PassKey\"><a href=\"#PassKey\" class=\"headerlink\" title=\"PassKey\"></a>PassKey</h2><p></p>\n<p><a href=\"https://www.liaoxuefeng.com/article/1563183619768355\"></a></p>\n","excerpt":"","more":"<p> Web </p>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" &amp; \"></a> &amp; </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong><em>Authentication</em><br></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong><em>Persistent Login</em><br> HTTP  <strong>HTTP </strong></p>\n<p> Web </p>\n<p></p>\n<h2 id=\"HTTP-Basic-Authentication\"><a href=\"#HTTP-Basic-Authentication\" class=\"headerlink\" title=\"HTTP Basic Authentication\"></a>HTTP Basic Authentication</h2><p>HTTP <code>HTTP Basic Authentication</code>  HTTP </p>\n<p> <em>Basic HTTP </em> </p>\n<ol>\n<li> 401  WWW-Authenticate <em>Basic</em><em>realm</em></li>\n<li> 401  Base64  Basic  Authorization </li>\n<li> Authorization  401 </li>\n</ol>\n<p> BearerDigest  HTTP <a href=\"http://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml\">Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry</a></p>\n<p> <code>HTTP Basic Authentication</code> Nginx </p>\n<p> Nginx  HTTP [Nginx Http](<code>HTTP Basic Authentication</code> )</p>\n<p><code>HTTP Basic Authentication</code>  HTTPS </p>\n<h2 id=\"session-cookie\"><a href=\"#session-cookie\" class=\"headerlink\" title=\"session-cookie\"></a>session-cookie</h2><p> session-cookie </p>\n<h3 id=\"cookie\"><a href=\"#cookie\" class=\"headerlink\" title=\"cookie\"></a>cookie</h3><p><code>Cookie</code><em>HTTP Cookie</em> <strong></strong></p>\n<p> HTTP  cookie  cookie  cookie </p>\n<h3 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h3><p><code>Session</code><em></em> <strong></strong></p>\n<p> session  ( id , <code>SessionId</code>) SessionId  cookie  SessionId SessionId  session </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> Session sid Session  <em></em> <em></em>  <em>redis</em>  redis</li>\n<li> sid  Cookie  Cookie  Cookie  localStorage  localCookie </li>\n<li> Cookie Cookie  sid  Session</li>\n<li> Session  Session</li>\n</ol>\n<p></p>\n<p><img src=\"http://img.ma5hr00m.top//img/20230926223807.png\" alt=\"session\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>session  cookie <a href=\"https://wangxiaoxi.cn/posts/http-cookie/\">CookieSession</a></p>\n<p>session-cookie  cookie  cookie  CSRF </p>\n<h2 id=\"JWT\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h2><p><code>JSON Web Token</code><em>JWT</em> JSON </p>\n<p><code>JWT</code>  <code>.</code>  JWT <a href=\"https://jwt.io/\">jwt.io</a> JWT  jwt </p>\n<p> jwt </p>\n<ol>\n<li><em></em><br></li>\n<li><em> jwt</em><br>jwt jwt </li>\n<li><em> jwt</em><br> jwt </li>\n<li><em> jwt</em><br> token</li>\n</ol>\n<p> session-cookie JWT </p>\n<ul>\n<li>JWT </li>\n<li>JWT </li>\n<li>JWT  Cookie cookie  CSRF </li>\n<li>JWT </li>\n<li></li>\n</ul>\n<h2 id=\"OAuth\"><a href=\"#OAuth\" class=\"headerlink\" title=\"OAuth\"></a>OAuth</h2><p>OAuth <br> GitHub </p>\n<p> OAuth2.0<a href=\"https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html\"> OAuth 2.0</a></p>\n<h2 id=\"SSO\"><a href=\"#SSO\" class=\"headerlink\" title=\"SSO\"></a>SSO</h2><p>SSO</p>\n<ol>\n<li><em></em><br> SSO </li>\n<li><em> SSO </em><br> SSO  ticket ticket  URL </li>\n<li><em>SSO</em><br>SSO  SSO  session SSO  Cookie</li>\n<li><em> Service Ticket</em><br>SSO  ST<em>Service Ticket</em> ST </li>\n<li><em> ST</em><br> ST  SSO  ST  session  app  Cookie</li>\n<li><em></em><br></li>\n</ol>\n<p>SSOSession IDToken</p>\n<p> CAS <a href=\"https://www.cnblogs.com/wangsongbai/p/10299655.html\">CASSSO</a></p>\n<h2 id=\"PassKey\"><a href=\"#PassKey\" class=\"headerlink\" title=\"PassKey\"></a>PassKey</h2><p></p>\n<p><a href=\"https://www.liaoxuefeng.com/article/1563183619768355\"></a></p>\n"},{"title":"","date":"2021-12-31T16:00:00.000Z","_content":"\nhttps://vitepress.ma5gr00m.top","source":"_posts/where_is_posts.md","raw":"---\ntitle: \ndate: 2022/1/1\ncategories:\n- Life\n---\n\nhttps://vitepress.ma5gr00m.top","slug":"where_is_posts","published":1,"updated":"2024-06-09T13:50:33.990Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapb001cf4lyb3huerm4","content":"<p><a href=\"https://vitepress.ma5gr00m.top/\">https://vitepress.ma5gr00m.top</a></p>\n","excerpt":"","more":"<p><a href=\"https://vitepress.ma5gr00m.top/\">https://vitepress.ma5gr00m.top</a></p>\n"},{"title":"Linux  Python ","date":"2023-11-22T16:00:00.000Z","author":"ma5hr00m","_content":"\n Python / Node.js\n Linux  Python Python \n\n python2  Linux  python3\n\n python \n\n>  python / `requirements.txt`\n\nWindows  [Anaconda](https://www.anaconda.com/)  python Linux \n python /\n\n::: warning  \n `Ubuntu22.04` `python3.10.12`\n:::\n\n## py3 - venv\npython3  `venv` python3.6 python3.5 \n\n```bash\nsudo apt install python3-venv\n```\n\nvenv  `/site`  python \n\n### \n\n python python  python \n\n```bash\npython3 -m venv env\n```\n\n `env`  python  `env`  `venv`  `.venv`\n\npython  `requirements.txt` \n\n\n\n `venv` \n\n```bash\nsource ./venv/bin/active\n```\n\n\n\n![20231102001458](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63d4846c761b4d5bb86b8863cd745a83~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980\\&h=365\\&s=57542\\&e=png\\&b=0e1019)\n\n> [zsh](https://www.zsh.org/) [oh-my-zsh](https://ohmyz.sh/) [powerlevel10K ](https://github.com/romkatv/powerlevel10k) [tabby ](https://tabby.sh/)  nice \n\n `pip --version`  `pip` \n\n\n\n```bash\ndeactivate\n```\n\n### \n\n python  python \n\n* python  python *\n\n python \n\n## Linuxpython2\n\n Linux  python2  python2 \n\n### python2\n\n\n\n```bash\nsudo apt install python2\n```\n\n `python2`  `/usr/bin/python2` `python2` \n\n>  python2.7\n\n### pip2\n\n python2  pip2\n\n ubuntu  python2  pip2  Python 2.7  2020  1  1 pip 21.0  2021  1  Python 2.7 \n\n\n\n python2 [pypa.io](pypa.io)  python2 \n\n```bash\nwget -O - https://bootstrap.pypa.io/pip/2.7/get-pip.py | python2\n```\n\n `pip2 --version`  python2.7  pip2 \n\n## py2 - virtualenv\n\n python2 \n\n python2.7  venv   `virtualenv`\n\n### \n\n venv \n\n```bash\n# \npip2 install virtualenv\n\n#  env\nvirtualenv env\n\n# \nsource ./env/bin/avtivate\n\n# \ndeactivate\n```\n\n `python --version`  python `Python 2.7.18` python2 \n\n###  venv\n\n `pip2 install venv` `ERROR: Could not find a version that satisfies the requirement venv (from versions: none)`\n\n venv  python \n\n```bash\npython3 -m venv --python=/usr/bin/python2 venv\n```\n\n `--python` venv \n\n### \n\n python2.7  python3.10\n\n python3.8\n\n## py - pyenv\n\n Python  `pyenv`\n\n### \n\n Git  pyenv \n\n```bash\ngit clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n zsh  bash \n\n```bash\n# zsh\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.zprofile\necho 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.zprofile\necho 'eval \"$(pyenv init --path)\"' >> ~/.zprofile\necho 'eval \"$(pyenv init -)\"' >> ~/.zshrc\n\n# bash\necho -e 'if shopt -q login_shell; then' \\\n      '\\n  export PYENV_ROOT=\"$HOME/.pyenv\"' \\\n      '\\n  export PATH=\"$PYENV_ROOT/bin:$PATH\"' \\\n      '\\n eval \"$(pyenv init --path)\"' \\\n      '\\nfi' >> ~/.bashrc\necho -e 'if [ -z \"$BASH_VERSION\" ]; then'\\\n      '\\n  export PYENV_ROOT=\"$HOME/.pyenv\"'\\\n      '\\n  export PATH=\"$PYENV_ROOT/bin:$PATH\"'\\\n      '\\n  eval \"$(pyenv init --path)\"'\\\n      '\\nfi' >>~/.profile\necho 'if command -v pyenv >/dev/null; then eval \"$(pyenv init -)\"; fi' >> ~/.bashrc\n```\n\n pyenv \n\n> \n\n `pyenv -h` \n\n```bash\n#  python \npyenv version\n\n#  python \npyenv versions\n\n#  python \npyenv install --list\n\n#  python \npyenv install 3.8.12\n\n#  rehash\npyenv rehash\n\n#  python \npyenv global 3.8.12\n\n#  python \npyenv uninstall 3.8.12\n\n# , python3\npyenv global 3.8.12 2.7.10\n```\n\n### pyenv\n\n `pyenv install` \n\n#### 01 \n\n pyenv  `pyenv install` \n\n python [](https://registry.npmmirror.com/binary.html?path=python/)\n\n![20231102104041](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/823d54c959b8426bb3b901c9a28838a5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1672\\&h=755\\&s=175052\\&e=png\\&b=ffffff)\n\n wget  pyenv \n\n```bash\nwget https://registry.npmmirror.com/-/binary/python/2.7.10/Python-2.7.10.tar.xz -P ~/.pyenv/cache\npyenv install 2.7.10\n```\n\n#### 02 \n\n shell  `http_proxy` \n\n\n\n```bash\nexport https_proxy=http://127.0.0.1:7890\n```\n\n#### 03 pyenv\n\n[ pyenv ](http://mirrors.sohu.com/python/)\n\n```bash\nv=3.5.2|wget http://mirrors.sohu.com/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/;pyenv install $v\n```\n\n## py - pyenv-virtualenv\n\npyenv  python  `virtualenv` \n\n### \n\n shell  zsh \n\n```bash\n# \ngit clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv\n\n#  zsh\necho 'eval \"$(pyenv virtualenv-init -)\"' >> ~/.zshrc\n\n#  zsh\nexec zsh\n```\n\n pyenv  virtualenv  pyenv \n\n```bash\npyenv virtualenv 3.8.12 v3812env\n```\n\n`virtualenv`   venv  py2  virtualenv  `/.pyenv` \n\n![20231102133150](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8a617a9327746d69b0573d010a4d8a3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=880\\&h=167\\&s=36334\\&e=png\\&b=15192b)\n\n virtualenv \n\n```bash\n# \npyenv virtualenvs\n\n# \npyenv activate v3812env\n\n# \npyenv deactivate v3812env \n```\n\n Linux  python /\n\n### \n\n python /\n\n\n\n\n\n## Nox \n\n![20231102192818](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7653602e147c43ccab1438a4589f7dfb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=932\\&h=287\\&s=90851\\&e=png\\&b=fffefe)\n\n`Nox`  Python  Python \n\n `noxfile.py`  `nox`  python  python  venv \n\n### \n\n `app`  `noxfile.py`\n\n```python\nimport nox #  nox \n\n@nox.session(python='3.8.12') #  python3.8.12\ndef install_flask(session): #  install_flask \n    session.install('flask') #  flask \n```\n\n\n\n```bash\n$ python3 -m nox   \n\nnox > Running session install_flask\nnox > Creating virtual environment (virtualenv) using python3.8 in .nox/install_flask\nnox > python -m pip install flask\nnox > Session install_flask was successful.\n```\n\n `__pycache__`  `.nox`  python  \\`python -m venv env\\`\\`  env \n\n venv \n\n```bash\n#  install_flask \nsource .nox/install_flask/bin/activate\n\n# \ndeactivate\n```\n\n `app.py`  flask Web \n\n```python\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello, World!'\n\nif __name__ == '__main__':\n    app.run()\n```\n\n flask web  nox \n\n![20231102194422](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fc32ac6fac94f3188fe1648edb07a62~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=881\\&h=211\\&s=31011\\&e=png\\&b=15172a)\n\n> nox  python  python2.7.10  2.7.10 \n\n### More\n\n nox\n\n*   [Welcome to Nox](https://nox.thea.codes/en/stable/index.html)\n*   [ Nox](https://daobook.github.io/nox/index.html)\n*   [Winterbloom/nox](https://github.com/wntrblm/nox)\n\n##  - Tox\n\n`Nox`  `Tox`  python \n\n- [tox](https://www.osgeo.cn/tox/)\n- GitHub [tox-dev/tox](https://github.com/tox-dev/tox)","source":"_posts/python_in_linux.md","raw":"---\ntitle: Linux  Python \ndate: 2023/11/23\nauthor: ma5hr00m\ncategories:\n- Python\n---\n\n Python / Node.js\n Linux  Python Python \n\n python2  Linux  python3\n\n python \n\n>  python / `requirements.txt`\n\nWindows  [Anaconda](https://www.anaconda.com/)  python Linux \n python /\n\n::: warning  \n `Ubuntu22.04` `python3.10.12`\n:::\n\n## py3 - venv\npython3  `venv` python3.6 python3.5 \n\n```bash\nsudo apt install python3-venv\n```\n\nvenv  `/site`  python \n\n### \n\n python python  python \n\n```bash\npython3 -m venv env\n```\n\n `env`  python  `env`  `venv`  `.venv`\n\npython  `requirements.txt` \n\n\n\n `venv` \n\n```bash\nsource ./venv/bin/active\n```\n\n\n\n![20231102001458](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63d4846c761b4d5bb86b8863cd745a83~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980\\&h=365\\&s=57542\\&e=png\\&b=0e1019)\n\n> [zsh](https://www.zsh.org/) [oh-my-zsh](https://ohmyz.sh/) [powerlevel10K ](https://github.com/romkatv/powerlevel10k) [tabby ](https://tabby.sh/)  nice \n\n `pip --version`  `pip` \n\n\n\n```bash\ndeactivate\n```\n\n### \n\n python  python \n\n* python  python *\n\n python \n\n## Linuxpython2\n\n Linux  python2  python2 \n\n### python2\n\n\n\n```bash\nsudo apt install python2\n```\n\n `python2`  `/usr/bin/python2` `python2` \n\n>  python2.7\n\n### pip2\n\n python2  pip2\n\n ubuntu  python2  pip2  Python 2.7  2020  1  1 pip 21.0  2021  1  Python 2.7 \n\n\n\n python2 [pypa.io](pypa.io)  python2 \n\n```bash\nwget -O - https://bootstrap.pypa.io/pip/2.7/get-pip.py | python2\n```\n\n `pip2 --version`  python2.7  pip2 \n\n## py2 - virtualenv\n\n python2 \n\n python2.7  venv   `virtualenv`\n\n### \n\n venv \n\n```bash\n# \npip2 install virtualenv\n\n#  env\nvirtualenv env\n\n# \nsource ./env/bin/avtivate\n\n# \ndeactivate\n```\n\n `python --version`  python `Python 2.7.18` python2 \n\n###  venv\n\n `pip2 install venv` `ERROR: Could not find a version that satisfies the requirement venv (from versions: none)`\n\n venv  python \n\n```bash\npython3 -m venv --python=/usr/bin/python2 venv\n```\n\n `--python` venv \n\n### \n\n python2.7  python3.10\n\n python3.8\n\n## py - pyenv\n\n Python  `pyenv`\n\n### \n\n Git  pyenv \n\n```bash\ngit clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n zsh  bash \n\n```bash\n# zsh\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.zprofile\necho 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.zprofile\necho 'eval \"$(pyenv init --path)\"' >> ~/.zprofile\necho 'eval \"$(pyenv init -)\"' >> ~/.zshrc\n\n# bash\necho -e 'if shopt -q login_shell; then' \\\n      '\\n  export PYENV_ROOT=\"$HOME/.pyenv\"' \\\n      '\\n  export PATH=\"$PYENV_ROOT/bin:$PATH\"' \\\n      '\\n eval \"$(pyenv init --path)\"' \\\n      '\\nfi' >> ~/.bashrc\necho -e 'if [ -z \"$BASH_VERSION\" ]; then'\\\n      '\\n  export PYENV_ROOT=\"$HOME/.pyenv\"'\\\n      '\\n  export PATH=\"$PYENV_ROOT/bin:$PATH\"'\\\n      '\\n  eval \"$(pyenv init --path)\"'\\\n      '\\nfi' >>~/.profile\necho 'if command -v pyenv >/dev/null; then eval \"$(pyenv init -)\"; fi' >> ~/.bashrc\n```\n\n pyenv \n\n> \n\n `pyenv -h` \n\n```bash\n#  python \npyenv version\n\n#  python \npyenv versions\n\n#  python \npyenv install --list\n\n#  python \npyenv install 3.8.12\n\n#  rehash\npyenv rehash\n\n#  python \npyenv global 3.8.12\n\n#  python \npyenv uninstall 3.8.12\n\n# , python3\npyenv global 3.8.12 2.7.10\n```\n\n### pyenv\n\n `pyenv install` \n\n#### 01 \n\n pyenv  `pyenv install` \n\n python [](https://registry.npmmirror.com/binary.html?path=python/)\n\n![20231102104041](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/823d54c959b8426bb3b901c9a28838a5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1672\\&h=755\\&s=175052\\&e=png\\&b=ffffff)\n\n wget  pyenv \n\n```bash\nwget https://registry.npmmirror.com/-/binary/python/2.7.10/Python-2.7.10.tar.xz -P ~/.pyenv/cache\npyenv install 2.7.10\n```\n\n#### 02 \n\n shell  `http_proxy` \n\n\n\n```bash\nexport https_proxy=http://127.0.0.1:7890\n```\n\n#### 03 pyenv\n\n[ pyenv ](http://mirrors.sohu.com/python/)\n\n```bash\nv=3.5.2|wget http://mirrors.sohu.com/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/;pyenv install $v\n```\n\n## py - pyenv-virtualenv\n\npyenv  python  `virtualenv` \n\n### \n\n shell  zsh \n\n```bash\n# \ngit clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv\n\n#  zsh\necho 'eval \"$(pyenv virtualenv-init -)\"' >> ~/.zshrc\n\n#  zsh\nexec zsh\n```\n\n pyenv  virtualenv  pyenv \n\n```bash\npyenv virtualenv 3.8.12 v3812env\n```\n\n`virtualenv`   venv  py2  virtualenv  `/.pyenv` \n\n![20231102133150](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8a617a9327746d69b0573d010a4d8a3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=880\\&h=167\\&s=36334\\&e=png\\&b=15192b)\n\n virtualenv \n\n```bash\n# \npyenv virtualenvs\n\n# \npyenv activate v3812env\n\n# \npyenv deactivate v3812env \n```\n\n Linux  python /\n\n### \n\n python /\n\n\n\n\n\n## Nox \n\n![20231102192818](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7653602e147c43ccab1438a4589f7dfb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=932\\&h=287\\&s=90851\\&e=png\\&b=fffefe)\n\n`Nox`  Python  Python \n\n `noxfile.py`  `nox`  python  python  venv \n\n### \n\n `app`  `noxfile.py`\n\n```python\nimport nox #  nox \n\n@nox.session(python='3.8.12') #  python3.8.12\ndef install_flask(session): #  install_flask \n    session.install('flask') #  flask \n```\n\n\n\n```bash\n$ python3 -m nox   \n\nnox > Running session install_flask\nnox > Creating virtual environment (virtualenv) using python3.8 in .nox/install_flask\nnox > python -m pip install flask\nnox > Session install_flask was successful.\n```\n\n `__pycache__`  `.nox`  python  \\`python -m venv env\\`\\`  env \n\n venv \n\n```bash\n#  install_flask \nsource .nox/install_flask/bin/activate\n\n# \ndeactivate\n```\n\n `app.py`  flask Web \n\n```python\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello, World!'\n\nif __name__ == '__main__':\n    app.run()\n```\n\n flask web  nox \n\n![20231102194422](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fc32ac6fac94f3188fe1648edb07a62~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=881\\&h=211\\&s=31011\\&e=png\\&b=15172a)\n\n> nox  python  python2.7.10  2.7.10 \n\n### More\n\n nox\n\n*   [Welcome to Nox](https://nox.thea.codes/en/stable/index.html)\n*   [ Nox](https://daobook.github.io/nox/index.html)\n*   [Winterbloom/nox](https://github.com/wntrblm/nox)\n\n##  - Tox\n\n`Nox`  `Tox`  python \n\n- [tox](https://www.osgeo.cn/tox/)\n- GitHub [tox-dev/tox](https://github.com/tox-dev/tox)","slug":"python_in_linux","published":1,"updated":"2024-06-09T12:55:36.568Z","comments":1,"layout":"post","photos":[],"_id":"clxhruapf001tf4ly6pvkf6qj","content":"<p> Python &#x2F; Node.js<br> Linux  Python Python </p>\n<p> python2  Linux  python3</p>\n<p> python </p>\n<blockquote>\n<p> python &#x2F; <code>requirements.txt</code></p>\n</blockquote>\n<p>Windows  <a href=\"https://www.anaconda.com/\">Anaconda</a>  python Linux <br> python &#x2F;</p>\n<p>::: warning<br> <code>Ubuntu22.04</code> <code>python3.10.12</code><br>:::</p>\n<h2 id=\"py3-venv\"><a href=\"#py3-venv\" class=\"headerlink\" title=\"py3 - venv\"></a>py3 - venv</h2><p>python3  <code>venv</code> python3.6 python3.5 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install python3-venv</span><br></pre></td></tr></table></figure>\n\n<p>venv  <code>/site</code>  python </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python python  python </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -m venv <span class=\"built_in\">env</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>env</code>  python  <code>env</code>  <code>venv</code>  <code>.venv</code></p>\n<p>python  <code>requirements.txt</code> </p>\n<p></p>\n<p> <code>venv</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ./venv/bin/active</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63d4846c761b4d5bb86b8863cd745a83~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980&h=365&s=57542&e=png&b=0e1019\" alt=\"20231102001458\"></p>\n<blockquote>\n<p> <a href=\"https://www.zsh.org/\">zsh</a> <a href=\"https://ohmyz.sh/\">oh-my-zsh</a> <a href=\"https://github.com/romkatv/powerlevel10k\">powerlevel10K </a> <a href=\"https://tabby.sh/\">tabby </a>  nice </p>\n</blockquote>\n<p> <code>pip --version</code>  <code>pip</code> </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python  python </p>\n<p><em> python  python </em></p>\n<p> python </p>\n<h2 id=\"Linuxpython2\"><a href=\"#Linuxpython2\" class=\"headerlink\" title=\"Linuxpython2\"></a>Linuxpython2</h2><p> Linux  python2  python2 </p>\n<h3 id=\"python2\"><a href=\"#python2\" class=\"headerlink\" title=\"python2\"></a>python2</h3><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install python2</span><br></pre></td></tr></table></figure>\n\n<p> <code>python2</code>  <code>/usr/bin/python2</code> <code>python2</code> </p>\n<blockquote>\n<p> python2.7</p>\n</blockquote>\n<h3 id=\"pip2\"><a href=\"#pip2\" class=\"headerlink\" title=\"pip2\"></a>pip2</h3><p> python2  pip2</p>\n<p> ubuntu  python2  pip2  Python 2.7  2020  1  1 pip 21.0  2021  1  Python 2.7 </p>\n<p></p>\n<p> python2 <a href=\"pypa.io\">pypa.io</a>  python2 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O - https://bootstrap.pypa.io/pip/2.7/get-pip.py | python2</span><br></pre></td></tr></table></figure>\n\n<p> <code>pip2 --version</code>  python2.7  pip2 </p>\n<h2 id=\"py2-virtualenv\"><a href=\"#py2-virtualenv\" class=\"headerlink\" title=\"py2 - virtualenv\"></a>py2 - virtualenv</h2><p> python2 </p>\n<p> python2.7  venv   <code>virtualenv</code></p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p> venv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pip2 install virtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  env</span></span><br><span class=\"line\">virtualenv <span class=\"built_in\">env</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ./env/bin/avtivate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<p> <code>python --version</code>  python <code>Python 2.7.18</code> python2 </p>\n<h3 id=\"-venv\"><a href=\"#-venv\" class=\"headerlink\" title=\" venv\"></a> venv</h3><p> <code>pip2 install venv</code> <code>ERROR: Could not find a version that satisfies the requirement venv (from versions: none)</code></p>\n<p> venv  python </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -m venv --python=/usr/bin/python2 venv</span><br></pre></td></tr></table></figure>\n\n<p> <code>--python</code> venv </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python2.7  python3.10</p>\n<p> python3.8</p>\n<h2 id=\"py-pyenv\"><a href=\"#py-pyenv\" class=\"headerlink\" title=\"py - pyenv\"></a>py - pyenv</h2><p> Python  <code>pyenv</code></p>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h3><p> Git  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br></pre></td></tr></table></figure>\n\n<p> zsh  bash </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># zsh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv init --path)&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv init -)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&#x27;if shopt -q login_shell; then&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n eval &quot;$(pyenv init --path)&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\nfi&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&#x27;if [ -z &quot;$BASH_VERSION&quot; ]; then&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  eval &quot;$(pyenv init --path)&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\nfi&#x27;</span> &gt;&gt;~/.profile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;if command -v pyenv &gt;/dev/null; then eval &quot;$(pyenv init -)&quot;; fi&#x27;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<p> pyenv </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p> <code>pyenv -h</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv versions</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv install --list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv install 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  rehash</span></span><br><span class=\"line\">pyenv <span class=\"built_in\">rehash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv global 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv uninstall 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># , python3</span></span><br><span class=\"line\">pyenv global 3.8.12 2.7.10</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"pyenv\"><a href=\"#pyenv\" class=\"headerlink\" title=\"pyenv\"></a>pyenv</h3><p> <code>pyenv install</code> </p>\n<h4 id=\"01-\"><a href=\"#01-\" class=\"headerlink\" title=\"01 \"></a>01 </h4><p> pyenv  <code>pyenv install</code> </p>\n<p> python <a href=\"https://registry.npmmirror.com/binary.html?path=python/\"></a></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/823d54c959b8426bb3b901c9a28838a5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1672&h=755&s=175052&e=png&b=ffffff\" alt=\"20231102104041\"></p>\n<p> wget  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://registry.npmmirror.com/-/binary/python/2.7.10/Python-2.7.10.tar.xz -P ~/.pyenv/cache</span><br><span class=\"line\">pyenv install 2.7.10</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"02-\"><a href=\"#02-\" class=\"headerlink\" title=\"02 \"></a>02 </h4><p> shell  <code>http_proxy</code> </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> https_proxy=http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"03-pyenv\"><a href=\"#03-pyenv\" class=\"headerlink\" title=\"03 pyenv\"></a>03 pyenv</h4><p><a href=\"http://mirrors.sohu.com/python/\"> pyenv </a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=3.5.2|wget http://mirrors.sohu.com/python/<span class=\"variable\">$v</span>/Python-<span class=\"variable\">$v</span>.tar.xz -P ~/.pyenv/cache/;pyenv install <span class=\"variable\">$v</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"py-pyenv-virtualenv\"><a href=\"#py-pyenv-virtualenv\" class=\"headerlink\" title=\"py - pyenv-virtualenv\"></a>py - pyenv-virtualenv</h2><p>pyenv  python  <code>virtualenv</code> </p>\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h3><p> shell  zsh </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  zsh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv virtualenv-init -)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  zsh</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> zsh</span><br></pre></td></tr></table></figure>\n\n<p> pyenv  virtualenv  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pyenv virtualenv 3.8.12 v3812env</span><br></pre></td></tr></table></figure>\n\n<p><code>virtualenv</code>   venv  py2  virtualenv  <code>/.pyenv</code> </p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8a617a9327746d69b0573d010a4d8a3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=880&h=167&s=36334&e=png&b=15192b\" alt=\"20231102133150\"></p>\n<p> virtualenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv virtualenvs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv activate v3812env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv deactivate v3812env </span><br></pre></td></tr></table></figure>\n\n<p> Linux  python &#x2F;</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python &#x2F;</p>\n<p></p>\n<p></p>\n<h2 id=\"Nox-\"><a href=\"#Nox-\" class=\"headerlink\" title=\"Nox \"></a>Nox </h2><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7653602e147c43ccab1438a4589f7dfb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=932&h=287&s=90851&e=png&b=fffefe\" alt=\"20231102192818\"></p>\n<p><code>Nox</code>  Python  Python </p>\n<p> <code>noxfile.py</code>  <code>nox</code>  python  python  venv </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>app</code>  <code>noxfile.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> nox <span class=\"comment\">#  nox </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@nox.session(<span class=\"params\">python=<span class=\"string\">&#x27;3.8.12&#x27;</span></span>) </span><span class=\"comment\">#  python3.8.12</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">install_flask</span>(<span class=\"params\">session</span>): <span class=\"comment\">#  install_flask </span></span><br><span class=\"line\">    session.install(<span class=\"string\">&#x27;flask&#x27;</span>) <span class=\"comment\">#  flask </span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ python3 -m nox   </span><br><span class=\"line\"></span><br><span class=\"line\">nox &gt; Running session install_flask</span><br><span class=\"line\">nox &gt; Creating virtual environment (virtualenv) using python3.8 <span class=\"keyword\">in</span> .nox/install_flask</span><br><span class=\"line\">nox &gt; python -m pip install flask</span><br><span class=\"line\">nox &gt; Session install_flask was successful.</span><br></pre></td></tr></table></figure>\n\n<p> <code>__pycache__</code>  <code>.nox</code>  python  `python -m venv env``  env </p>\n<p> venv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  install_flask </span></span><br><span class=\"line\"><span class=\"built_in\">source</span> .nox/install_flask/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<p> <code>app.py</code>  flask Web </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">hello_world</span>():</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello, World!&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n\n<p> flask web  nox </p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fc32ac6fac94f3188fe1648edb07a62~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=881&h=211&s=31011&e=png&b=15172a\" alt=\"20231102194422\"></p>\n<blockquote>\n<p>nox  python  python2.7.10  2.7.10 </p>\n</blockquote>\n<h3 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h3><p> nox</p>\n<ul>\n<li><a href=\"https://nox.thea.codes/en/stable/index.html\">Welcome to Nox</a></li>\n<li><a href=\"https://daobook.github.io/nox/index.html\"> Nox</a></li>\n<li><a href=\"https://github.com/wntrblm/nox\">Winterbloom&#x2F;nox</a></li>\n</ul>\n<h2 id=\"-Tox\"><a href=\"#-Tox\" class=\"headerlink\" title=\" - Tox\"></a> - Tox</h2><p><code>Nox</code>  <code>Tox</code>  python </p>\n<ul>\n<li><a href=\"https://www.osgeo.cn/tox/\">tox</a></li>\n<li>GitHub <a href=\"https://github.com/tox-dev/tox\">tox-dev&#x2F;tox</a></li>\n</ul>\n","excerpt":"","more":"<p> Python &#x2F; Node.js<br> Linux  Python Python </p>\n<p> python2  Linux  python3</p>\n<p> python </p>\n<blockquote>\n<p> python &#x2F; <code>requirements.txt</code></p>\n</blockquote>\n<p>Windows  <a href=\"https://www.anaconda.com/\">Anaconda</a>  python Linux <br> python &#x2F;</p>\n<p>::: warning<br> <code>Ubuntu22.04</code> <code>python3.10.12</code><br>:::</p>\n<h2 id=\"py3-venv\"><a href=\"#py3-venv\" class=\"headerlink\" title=\"py3 - venv\"></a>py3 - venv</h2><p>python3  <code>venv</code> python3.6 python3.5 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install python3-venv</span><br></pre></td></tr></table></figure>\n\n<p>venv  <code>/site</code>  python </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python python  python </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -m venv <span class=\"built_in\">env</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>env</code>  python  <code>env</code>  <code>venv</code>  <code>.venv</code></p>\n<p>python  <code>requirements.txt</code> </p>\n<p></p>\n<p> <code>venv</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ./venv/bin/active</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63d4846c761b4d5bb86b8863cd745a83~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980&h=365&s=57542&e=png&b=0e1019\" alt=\"20231102001458\"></p>\n<blockquote>\n<p> <a href=\"https://www.zsh.org/\">zsh</a> <a href=\"https://ohmyz.sh/\">oh-my-zsh</a> <a href=\"https://github.com/romkatv/powerlevel10k\">powerlevel10K </a> <a href=\"https://tabby.sh/\">tabby </a>  nice </p>\n</blockquote>\n<p> <code>pip --version</code>  <code>pip</code> </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python  python </p>\n<p><em> python  python </em></p>\n<p> python </p>\n<h2 id=\"Linuxpython2\"><a href=\"#Linuxpython2\" class=\"headerlink\" title=\"Linuxpython2\"></a>Linuxpython2</h2><p> Linux  python2  python2 </p>\n<h3 id=\"python2\"><a href=\"#python2\" class=\"headerlink\" title=\"python2\"></a>python2</h3><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install python2</span><br></pre></td></tr></table></figure>\n\n<p> <code>python2</code>  <code>/usr/bin/python2</code> <code>python2</code> </p>\n<blockquote>\n<p> python2.7</p>\n</blockquote>\n<h3 id=\"pip2\"><a href=\"#pip2\" class=\"headerlink\" title=\"pip2\"></a>pip2</h3><p> python2  pip2</p>\n<p> ubuntu  python2  pip2  Python 2.7  2020  1  1 pip 21.0  2021  1  Python 2.7 </p>\n<p></p>\n<p> python2 <a href=\"pypa.io\">pypa.io</a>  python2 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O - https://bootstrap.pypa.io/pip/2.7/get-pip.py | python2</span><br></pre></td></tr></table></figure>\n\n<p> <code>pip2 --version</code>  python2.7  pip2 </p>\n<h2 id=\"py2-virtualenv\"><a href=\"#py2-virtualenv\" class=\"headerlink\" title=\"py2 - virtualenv\"></a>py2 - virtualenv</h2><p> python2 </p>\n<p> python2.7  venv   <code>virtualenv</code></p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p> venv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pip2 install virtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  env</span></span><br><span class=\"line\">virtualenv <span class=\"built_in\">env</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ./env/bin/avtivate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<p> <code>python --version</code>  python <code>Python 2.7.18</code> python2 </p>\n<h3 id=\"-venv\"><a href=\"#-venv\" class=\"headerlink\" title=\" venv\"></a> venv</h3><p> <code>pip2 install venv</code> <code>ERROR: Could not find a version that satisfies the requirement venv (from versions: none)</code></p>\n<p> venv  python </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -m venv --python=/usr/bin/python2 venv</span><br></pre></td></tr></table></figure>\n\n<p> <code>--python</code> venv </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python2.7  python3.10</p>\n<p> python3.8</p>\n<h2 id=\"py-pyenv\"><a href=\"#py-pyenv\" class=\"headerlink\" title=\"py - pyenv\"></a>py - pyenv</h2><p> Python  <code>pyenv</code></p>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h3><p> Git  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br></pre></td></tr></table></figure>\n\n<p> zsh  bash </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># zsh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv init --path)&quot;&#x27;</span> &gt;&gt; ~/.zprofile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv init -)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># bash</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&#x27;if shopt -q login_shell; then&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n eval &quot;$(pyenv init --path)&quot;&#x27;</span> \\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\nfi&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&#x27;if [ -z &quot;$BASH_VERSION&quot; ]; then&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\n  eval &quot;$(pyenv init --path)&quot;&#x27;</span>\\</span><br><span class=\"line\">      <span class=\"string\">&#x27;\\nfi&#x27;</span> &gt;&gt;~/.profile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;if command -v pyenv &gt;/dev/null; then eval &quot;$(pyenv init -)&quot;; fi&#x27;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<p> pyenv </p>\n<blockquote>\n<p></p>\n</blockquote>\n<p> <code>pyenv -h</code> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv versions</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv install --list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv install 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  rehash</span></span><br><span class=\"line\">pyenv <span class=\"built_in\">rehash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv global 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  python </span></span><br><span class=\"line\">pyenv uninstall 3.8.12</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># , python3</span></span><br><span class=\"line\">pyenv global 3.8.12 2.7.10</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"pyenv\"><a href=\"#pyenv\" class=\"headerlink\" title=\"pyenv\"></a>pyenv</h3><p> <code>pyenv install</code> </p>\n<h4 id=\"01-\"><a href=\"#01-\" class=\"headerlink\" title=\"01 \"></a>01 </h4><p> pyenv  <code>pyenv install</code> </p>\n<p> python <a href=\"https://registry.npmmirror.com/binary.html?path=python/\"></a></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/823d54c959b8426bb3b901c9a28838a5~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1672&h=755&s=175052&e=png&b=ffffff\" alt=\"20231102104041\"></p>\n<p> wget  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://registry.npmmirror.com/-/binary/python/2.7.10/Python-2.7.10.tar.xz -P ~/.pyenv/cache</span><br><span class=\"line\">pyenv install 2.7.10</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"02-\"><a href=\"#02-\" class=\"headerlink\" title=\"02 \"></a>02 </h4><p> shell  <code>http_proxy</code> </p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> https_proxy=http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"03-pyenv\"><a href=\"#03-pyenv\" class=\"headerlink\" title=\"03 pyenv\"></a>03 pyenv</h4><p><a href=\"http://mirrors.sohu.com/python/\"> pyenv </a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v=3.5.2|wget http://mirrors.sohu.com/python/<span class=\"variable\">$v</span>/Python-<span class=\"variable\">$v</span>.tar.xz -P ~/.pyenv/cache/;pyenv install <span class=\"variable\">$v</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"py-pyenv-virtualenv\"><a href=\"#py-pyenv-virtualenv\" class=\"headerlink\" title=\"py - pyenv-virtualenv\"></a>py - pyenv-virtualenv</h2><p>pyenv  python  <code>virtualenv</code> </p>\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"\"></a></h3><p> shell  zsh </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  zsh</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;eval &quot;$(pyenv virtualenv-init -)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  zsh</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> zsh</span><br></pre></td></tr></table></figure>\n\n<p> pyenv  virtualenv  pyenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pyenv virtualenv 3.8.12 v3812env</span><br></pre></td></tr></table></figure>\n\n<p><code>virtualenv</code>   venv  py2  virtualenv  <code>/.pyenv</code> </p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8a617a9327746d69b0573d010a4d8a3~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=880&h=167&s=36334&e=png&b=15192b\" alt=\"20231102133150\"></p>\n<p> virtualenv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv virtualenvs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv activate v3812env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">pyenv deactivate v3812env </span><br></pre></td></tr></table></figure>\n\n<p> Linux  python &#x2F;</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python &#x2F;</p>\n<p></p>\n<p></p>\n<h2 id=\"Nox-\"><a href=\"#Nox-\" class=\"headerlink\" title=\"Nox \"></a>Nox </h2><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7653602e147c43ccab1438a4589f7dfb~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=932&h=287&s=90851&e=png&b=fffefe\" alt=\"20231102192818\"></p>\n<p><code>Nox</code>  Python  Python </p>\n<p> <code>noxfile.py</code>  <code>nox</code>  python  python  venv </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>app</code>  <code>noxfile.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> nox <span class=\"comment\">#  nox </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@nox.session(<span class=\"params\">python=<span class=\"string\">&#x27;3.8.12&#x27;</span></span>) </span><span class=\"comment\">#  python3.8.12</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">install_flask</span>(<span class=\"params\">session</span>): <span class=\"comment\">#  install_flask </span></span><br><span class=\"line\">    session.install(<span class=\"string\">&#x27;flask&#x27;</span>) <span class=\"comment\">#  flask </span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ python3 -m nox   </span><br><span class=\"line\"></span><br><span class=\"line\">nox &gt; Running session install_flask</span><br><span class=\"line\">nox &gt; Creating virtual environment (virtualenv) using python3.8 <span class=\"keyword\">in</span> .nox/install_flask</span><br><span class=\"line\">nox &gt; python -m pip install flask</span><br><span class=\"line\">nox &gt; Session install_flask was successful.</span><br></pre></td></tr></table></figure>\n\n<p> <code>__pycache__</code>  <code>.nox</code>  python  `python -m venv env``  env </p>\n<p> venv </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  install_flask </span></span><br><span class=\"line\"><span class=\"built_in\">source</span> .nox/install_flask/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<p> <code>app.py</code>  flask Web </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">hello_world</span>():</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;Hello, World!&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n\n<p> flask web  nox </p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fc32ac6fac94f3188fe1648edb07a62~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=881&h=211&s=31011&e=png&b=15172a\" alt=\"20231102194422\"></p>\n<blockquote>\n<p>nox  python  python2.7.10  2.7.10 </p>\n</blockquote>\n<h3 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h3><p> nox</p>\n<ul>\n<li><a href=\"https://nox.thea.codes/en/stable/index.html\">Welcome to Nox</a></li>\n<li><a href=\"https://daobook.github.io/nox/index.html\"> Nox</a></li>\n<li><a href=\"https://github.com/wntrblm/nox\">Winterbloom&#x2F;nox</a></li>\n</ul>\n<h2 id=\"-Tox\"><a href=\"#-Tox\" class=\"headerlink\" title=\" - Tox\"></a> - Tox</h2><p><code>Nox</code>  <code>Tox</code>  python </p>\n<ul>\n<li><a href=\"https://www.osgeo.cn/tox/\">tox</a></li>\n<li>GitHub <a href=\"https://github.com/tox-dev/tox\">tox-dev&#x2F;tox</a></li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"clxhruaot0001f4ly6lskhpxg","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruap1000df4lyhgzd59lq"},{"post_id":"clxhruaov0003f4ly8zmgal7q","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruap2000gf4lyfksf5qmr"},{"post_id":"clxhruap1000bf4ly6kdf3925","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruap3000jf4lyeegf56qr"},{"post_id":"clxhruaox0006f4ly9ea00fve","category_id":"clxhruap1000cf4ly95u6988i","_id":"clxhruap4000mf4lya6yc3pdv"},{"post_id":"clxhruap2000ff4ly2cg2e96d","category_id":"clxhruap1000cf4ly95u6988i","_id":"clxhruap4000of4lycwfeatw7"},{"post_id":"clxhruaoy0007f4ly3u18dhkk","category_id":"clxhruap1000cf4ly95u6988i","_id":"clxhruap7000qf4ly7hz95daj"},{"post_id":"clxhruaoy0008f4ly09zx4dr8","category_id":"clxhruap4000lf4ly26uo4b7o","_id":"clxhruap8000uf4ly76jl6560"},{"post_id":"clxhruap4000pf4lyhxuy6cqo","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruap9000xf4lyd32yelxp"},{"post_id":"clxhruap7000sf4ly3kga2gj1","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruap9000zf4ly5jcvcnro"},{"post_id":"clxhruap0000af4lyfob6hsb3","category_id":"clxhruap7000rf4ly7fdm5j1s","_id":"clxhruap90012f4lyer6w6ygk"},{"post_id":"clxhruap8000tf4lygcko4722","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruapa0014f4ly5sz5ev81"},{"post_id":"clxhruap1000ef4ly37wq4vdb","category_id":"clxhruap8000vf4ly6lgd9gzo","_id":"clxhruapa0017f4ly69uicbip"},{"post_id":"clxhruap3000if4lybsx89lvc","category_id":"clxhruap90011f4lybxhfbb24","_id":"clxhruapb001af4ly8ftcbghe"},{"post_id":"clxhruapa0018f4ly70f0g35g","category_id":"clxhruaow0004f4lyg9d916ih","_id":"clxhruapc001df4ly7txye1k5"},{"post_id":"clxhruap3000kf4lyabvt4jyl","category_id":"clxhruapa0016f4ly8hiqgmrc","_id":"clxhruapc001ff4lyenpy4eyj"},{"post_id":"clxhruapb0019f4ly301z3d6e","category_id":"clxhruap8000vf4ly6lgd9gzo","_id":"clxhruapc001gf4ly4ovidjmy"},{"post_id":"clxhruap4000nf4lyg0t08wxm","category_id":"clxhruapb001bf4lyabed68vn","_id":"clxhruapc001hf4ly2r4z7c7l"},{"post_id":"clxhruap8000wf4lycx870b8u","category_id":"clxhruapc001ef4ly4cpc3bxd","_id":"clxhruapc001jf4lygu52ezae"},{"post_id":"clxhruap9000yf4ly6y2z6e7s","category_id":"clxhruapc001if4ly93qg323r","_id":"clxhruapc001mf4ly2kry390y"},{"post_id":"clxhruap90010f4lydrji24xy","category_id":"clxhruapc001if4ly93qg323r","_id":"clxhruapc001nf4lycmuv3wiu"},{"post_id":"clxhruapa0013f4ly8kec40m6","category_id":"clxhruapc001lf4lybnfucwza","_id":"clxhruapd001pf4lyaudo0cw8"},{"post_id":"clxhruapa0015f4lycz8s6ow8","category_id":"clxhruapd001of4ly97vldi1z","_id":"clxhruapd001rf4lydrc92gt5"},{"post_id":"clxhruapb001cf4lyb3huerm4","category_id":"clxhruapd001qf4lyer9k8056","_id":"clxhruapd001sf4ly96mn8doj"},{"post_id":"clxhruapf001tf4ly6pvkf6qj","category_id":"clxhruapg001uf4lyggmwgfyc","_id":"clxhruapg001vf4lygvaih253"}],"PostTag":[],"Tag":[]}}